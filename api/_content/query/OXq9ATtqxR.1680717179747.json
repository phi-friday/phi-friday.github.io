{"_path":"/python/returns0","_dir":"python","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"returns로 파이썬 타입을 명확하게 만들자 0","description":"파이썬 타입을 명확하게 만들면 vscode가 착해진다","tags":["python","returns","함수형 프로그래밍"],"page":"dry-python/returns","date":"2022-09-09T02:10:44.645+09:00","publish":true,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"2-부족한-python의-type-hint"},"children":[{"type":"text","value":"2% 부족한 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"python"}]},{"type":"text","value":"의 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"type-hint"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"python"}]},{"type":"text","value":"에서 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"type-hint"}]},{"type":"text","value":" 지원이 점점 강력해지고, 이를 반영한 라이브러리들이 늘어나다 보니, 나도 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"type-hint"}]},{"type":"text","value":"를 적용해가며 개발을 하고 있다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"하지만 아직 몇몇 아쉬운 부분이 보이는데,"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"특정 클래스 메소드의 리턴값을 그 클래스의 인스턴스로 나타내려 할 때, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TypeVar"}]},{"type":"text","value":"를 사용해서 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bound"}]},{"type":"text","value":"를 일일이 지정해줘서 나타내야 한다던가.."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"이전에는 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TypeVar"}]},{"type":"text","value":"를 사용해야 했지만, 이제는 PEP 673이 반영된 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"typing_extensions"}]},{"type":"text","value":"의 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Self"}]},{"type":"text","value":"를 사용하면 된다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"하지만 아직 많은 라이브러리가 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Self"}]},{"type":"text","value":"를 사용하고 있지는 않다.(이미 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TypeVar"}]},{"type":"text","value":"로 많은 부분이 작성되어 있으므로)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"나중에 정의될 클래스를 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"type-hint"}]},{"type":"text","value":"로 사용하려면 문자열로 표현해야 한다던가.."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3.11에서 수정될 예정이고, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"__future__"}]},{"type":"text","value":" 에서 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"annotation"}]},{"type":"text","value":" 모듈을 가져오면 미리 사용할 수 있다."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TypeVar"}]},{"type":"text","value":"로 정의된 값을 이용해서 상위 제네릭을 표현할 수 없다던가.."}]},{"type":"element","tag":"code","props":{"code":"from typing import TypeVar, Generic\n\n_T = TypeVar(\"_T\")\n_Test = TypeVar(\"_Test\", bound=\"Test\")\n\nclass Test(Generic[_T]):\n    def __init__(self, data: _T):\n        self.data = data\n\ndef test(value: _T[int]) -> _T[int]:\n    ...\n# TypeError: 'TypeVar' object is not subscriptable\n","language":"python","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" typing "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" TypeVar, Generic"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"_T "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" TypeVar("}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"_T\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"_Test "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" TypeVar("}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"_Test\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-84d2d5"},"children":[{"type":"text","value":"bound"}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"Test\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-84d2d5"},"children":[{"type":"text","value":"Test"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"(Generic[_T]):"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"__init__"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"(self, data: _T):"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":".data "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" data"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1734f4"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"(value: _T["}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"]) -> _T["}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"]:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# TypeError: 'TypeVar' object is not subscriptable"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"쓰다보니 뭔가 대부분 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TypeVar"}]},{"type":"text","value":" 관련인데, 이 중에서 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"TypeVar"}]},{"type":"text","value":"를 사용한 상위 제네릭과 관련해서 좀 더 알아봤더니, 제한적으로나마 이를 해결한 라이브러리가 있었는데, 그게 바로 "},{"type":"element","tag":"a","props":{"href":"https://github.com/dry-python/returns","rel":["nofollow"]},"children":[{"type":"text","value":"returns"}]},{"type":"text","value":"다."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"앞서 상위 제네릭이라 표현한 것은, 일반적으로 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Higher Kinded Type"}]},{"type":"text","value":" 이라고 하는 것 같다."}]}]},{"type":"element","tag":"h1","props":{"id":"함수형-프로그래밍에-적합한-returns"},"children":[{"type":"text","value":"함수형 프로그래밍에 적합한 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"returns"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"라이브러리 이름이 범용적으로 쓰이는 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"return"}]},{"type":"text","value":"과 너무 유사해서, 제대로 검색이 되지 않는다. 마치 구글의 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"go"}]},{"type":"text","value":"를 보는 듯 하다.."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"다행히 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"returns"}]},{"type":"text","value":" 자체 "},{"type":"element","tag":"a","props":{"href":"https://returns.readthedocs.io/en/latest/index.html","rel":["nofollow"]},"children":[{"type":"text","value":"문서"}]},{"type":"text","value":"가 아주 잘 만들어져 있어서, 이해하는데 큰 문제는 없었다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"또한 라이브러리 기능이 간단하면서도 강력해서, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"type-hint"}]},{"type":"text","value":" 외에도 쓸데가 많아보인다. 특히, 함수형 프로그래밍을 하고자 한다면 꽤 유용하지 않을까, 싶었는데 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"readme"}]},{"type":"text","value":"에서 함수형 프로그래밍을 위해 만들어진 라이브러리라고 직접 소개하고 있다."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Brings functional programming to Python land"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"처음에는 단순히 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Higher Kinded Type"}]},{"type":"text","value":" 를 위해 알아봤는데, 이제는 이 라이브러리를 어떻게 사용하면 잘 사용할 수 있을까 고민하게 됐다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"returns"}]},{"type":"text","value":"의 대표적인 기능 두가지만 미리 소개하자면,"}]},{"type":"element","tag":"h2","props":{"id":"optional을-대신-할-maybe"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Optional"}]},{"type":"text","value":"을 대신 할 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Maybe"}]}]},{"type":"element","tag":"code","props":{"code":"from returns.maybe import Maybe, maybe\n\n\n@maybe\ndef one_or_none(value: int) -> int | None:\n    if value == 1:\n        return value\n    return None\n\n\nmaybe_one0: Maybe[int] = one_or_none(1)\nmaybe_one1: Maybe[int] = one_or_none(2)\n# or\n# maybe_one0: Maybe[int] = Maybe.from_optional(1)\n# maybe_one1: Maybe[int] = Maybe.from_optional(None)\n\nmaybe_str0 = maybe_one0.bind_optional(str)\nmaybe_str1 = maybe_one1.bind_optional(str)\n\nassert maybe_str0.value_or(\"error\") == \"1\"\nassert maybe_str1.value_or(\"error\") == \"error\"\n","language":"python","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" returns.maybe "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" Maybe, maybe"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1734f4"},"children":[{"type":"text","value":"@maybe"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1734f4"},"children":[{"type":"text","value":"one_or_none"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"(value: "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":") -> "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"None"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" value "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" value"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"None"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"maybe_one0: Maybe["}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" one_or_none("}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"maybe_one1: Maybe["}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" one_or_none("}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# or"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# maybe_one0: Maybe[int] = Maybe.from_optional(1)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# maybe_one1: Maybe[int] = Maybe.from_optional(None)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"maybe_str0 "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" maybe_one0.bind_optional("}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"maybe_str1 "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" maybe_one1.bind_optional("}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"assert"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" maybe_str0.value_or("}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"error\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"1\""}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"assert"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" maybe_str1.value_or("}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"error\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"error\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"원래라면 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"if"}]},{"type":"text","value":"문을 사용해서 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"None"}]},{"type":"text","value":" 타입 확인을 하고 진행했겠지만,"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Maybe"}]},{"type":"text","value":"는 마치 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"js"}]},{"type":"text","value":"의 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"some_object?.some_attr"}]},{"type":"text","value":"과 같은 방식으로 전개할 수 있게 만들어준다."}]},{"type":"element","tag":"h2","props":{"id":"try-except를-대신할-result"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"try"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"except"}]},{"type":"text","value":"를 대신할 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Result"}]}]},{"type":"element","tag":"code","props":{"code":"from returns.converters import result_to_maybe\nfrom returns.result import Result, safe\n\n\n@safe\ndef div(left: float, right: float) -> float:\n    # if right == 0:\n    # raise ZeroDivisionError\n    return left / right\n\n\nresult0: Result[float, Exception] = div(2, 3)\n# or\n# result0: Result[float, ZeroDivisionError]\n# or\n# from returns.result import ResultE\n# result0: ResultE[float] = div(2, 3)\nresult1: Result[float, Exception] = div(4, 0)\n\nassert (\n    result_to_maybe(result0.map(lambda x: x**2).alt(str)).value_or(\"error\")\n) == 4 / 9\n\nassert (\n    result_to_maybe(result1.map(lambda x: x**2).alt(str)).value_or(\"error\")\n) == \"error\"\n","language":"python","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" returns.converters "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" result_to_maybe"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" returns.result "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" Result, safe"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1734f4"},"children":[{"type":"text","value":"@safe"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1734f4"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"(left: "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"float"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":", right: "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"float"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":") -> "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"float"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":":"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# if right == 0:"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# raise ZeroDivisionError"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" left "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" right"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"result0: Result["}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"float"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"Exception"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" div("}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# or"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# result0: Result[float, ZeroDivisionError]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# or"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# from returns.result import ResultE"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d245f"},"children":[{"type":"text","value":"# result0: ResultE[float] = div(2, 3)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"result1: Result["}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"float"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"Exception"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" div("}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"assert"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" ("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    result_to_maybe(result0.map("}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"lambda"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" x: x"}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"**"}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":").alt("}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")).value_or("}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"error\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"9"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"assert"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" ("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":"    result_to_maybe(result1.map("}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"lambda"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" x: x"}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"**"}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":").alt("}]},{"type":"element","tag":"span","props":{"class":"ct-c4def4"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")).value_or("}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"error\""}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-eef9e8"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-7ec468"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-122ec9"},"children":[{"type":"text","value":"\"error\""}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"에러에 대해 미리 고민 할 필요 없이, 기본적으로 제공되는 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"map"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bind"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"alt"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lash"}]},{"type":"text","value":" 등의 메소드를 사용하면 된다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"올바른 타입이 아니라면 작동하지 않고, 추가적인 에러도 발생하지 않는다."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"위 예시에서는 문자열 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"error"}]},{"type":"text","value":"를 표시했지만, 원한다면 그 에러를 발생시킬 수도 있다."}]},{"type":"element","tag":"h1","props":{"id":"앞으로"},"children":[{"type":"text","value":"앞으로"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"시간이 될 때, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"returns"}]},{"type":"text","value":"의 공식 문서를 나름대로 정리해서 포스팅을 하고자 한다. 하지만 이것도 다른 것과 마찬가지로 하다가 중단될 수 있다.."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4d245f{color:#6E7781}\n.ct-1734f4{color:#8250DF}\n.ct-c4def4{color:#0550AE}\n.ct-84d2d5{color:#953800}\n.ct-122ec9{color:#0A3069}\n.ct-7ec468{color:#24292F}\n.ct-eef9e8{color:#CF222E}\n.dark .ct-eef9e8{color:#FF7B72}\n.dark .ct-7ec468{color:#C9D1D9}\n.dark .ct-122ec9{color:#A5D6FF}\n.dark .ct-84d2d5{color:#FFA657}\n.dark .ct-c4def4{color:#79C0FF}\n.dark .ct-1734f4{color:#D2A8FF}\n.dark .ct-4d245f{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":5,"depth":5,"links":[{"id":"optional을-대신-할-maybe","depth":2,"text":"Optional을 대신 할 Maybe"},{"id":"try-except를-대신할-result","depth":2,"text":"try, except를 대신할 Result"}]}},"_type":"markdown","_id":"content:python:returns0.md","_source":"content","_file":"python/returns0.md","_extension":"md"}