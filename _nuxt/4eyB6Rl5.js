import{d as r,n,k as i}from"./DrPG4TNQ.js";const c=r({id:"current_page",state:()=>({nullable_page:null}),getters:{page:e=>e.nullable_page||1,skip:e=>i().public.default_limit*((e.nullable_page||1)-1)},actions:{sync_page_with_route(e){e||(e=n()),!e.query.page||Array.isArray(e.query.page)?this.nullable_page=1:this.nullable_page=Number(e.query.page),this.nullable_page||(this.nullable_page=1)},clear_page(){this.nullable_page=null}}}),u=r({id:"current_tags",state:()=>({tags:new Set,selected:new Set,count:new Map,posts:[],tagged_posts:[],toggle:!0}),getters:{sorted_tags:e=>[...e.tags].sort((t,s)=>t.localeCompare(s)),sorted_selected:e=>[...e.selected].sort((t,s)=>t.localeCompare(s)),sorted_by_count:e=>[...e.count.entries()].sort((t,s)=>t[1]<s[1]?1:t[1]>s[1]?-1:t[0].localeCompare(s[0])),selected_posts:e=>{const t=c(),s=i();if(e.selected.size===0)return[e.tagged_posts.length,e.tagged_posts.slice(t.skip,t.skip+s.public.default_limit)];const a=e.tagged_posts.filter(l=>new Set(l.tags).isSupersetOf(e.selected));return[a.length,a.slice(t.skip,t.skip+s.public.default_limit)]}},actions:{sync_posts(e){const t=new Map,s=e.filter(a=>{var l;return(l=a.tags)==null?void 0:l.length})||[];s.forEach(a=>{a.tags.forEach(l=>{t.set(l,(t.get(l)||0)+1)})}),this.tags=new Set(t.keys()),this.selected=new Set,this.count=new Map(t),this.posts=e,this.tagged_posts=s},add_tag(e){this.tags.has(e)&&this.selected.add(e)},remove_tag(e){this.selected.delete(e)},clear_selected(){this.selected.clear()},sync_selected_with_route(e){if(e||(e=n()),!!e.query.select){if(Array.isArray(e.query.select)){const t=new Set([...e.query.select]);this.selected=t.intersection(this.tags);return}this.tags.has(e.query.select)&&(this.selected=new Set([e.query.select]))}}}});export{c as a,u};
