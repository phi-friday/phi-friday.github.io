import{_ as Q}from"./one.vue.b30f1312.js";import{_ as X}from"./one.vue.b21e2b02.js";import{a as C,r as b,b as N,at as Y,H as P,N as R,o as p,f as m,i as a,e as V,F as D,D as T,p as Z,u as c,E as y,I as W,J as F,k as q,c as B,y as O,l as v,au as tt,j as k,av as et,L as nt,$ as L,a6 as st,V as ot,a1 as ct,P as at,S as rt}from"./entry.81fd4aea.js";/* empty css                 */import it from"./ContentRenderer.e92920a7.js";import{u as lt}from"./asyncData.d28a1ddd.js";import{g as _t}from"./query.f5aceab6.js";import{q as M}from"./query.7df67352.js";import"./ContentRendererMarkdown.004384bd.js";import"./utils.634e4569.js";const dt=C({__name:"comment",setup(o){const t=V(),r=b(),i=N(Y),f=N(()=>`github-${i.value}`);return P(()=>{const n=document.createElement("script"),l=t.public.comment;for(const e in l)n.setAttribute(e.replace("_","-"),String(l[e]));n.setAttribute("theme",f.value),r.value&&r.value.appendChild(n)}),R(()=>i.value,()=>{var e;const n={type:"set-theme",theme:f.value},l=(e=document.querySelector("iframe"))==null?void 0:e.contentWindow;l==null||l.postMessage(n,"https://utteranc.es")}),(n,l)=>(p(),m("div",null,[a("section",{class:"w-full",ref_key:"self",ref:r},null,512)]))}}),ut=o=>(W("data-v-ecee9634"),o=o(),F(),o),pt={class:"toc"},mt=ut(()=>a("header",{class:"toc-header"},[a("h3",{class:"text-xl font-bold"},"Table of contents")],-1)),ft={class:"toc-links"},ht=["id","onClick"],vt=["href"],xt=C({__name:"toc",props:{links:null,active_toc_id:null},setup(o){const t=o,r=b(new Set),i=e=>`toc-${e}`;R(()=>t.active_toc_id,()=>{var e;r.value.clear(),(e=t.active_toc_id)==null||e.forEach(s=>r.value.add(s))});const f=e=>e.map(s=>{let _=[s];if(s.children){let x=f(s.children);_=[s,...x]}return _}).flat(1),n=e=>{const s={};return s[`_${e.depth}`]=!0,s},l=e=>{r.value.clear(),r.value.add(e.id)};return(e,s)=>(p(),m("nav",pt,[mt,a("ul",ft,[(p(!0),m(D,null,T(f(o.links),_=>(p(),m("li",{key:_.id,id:i(_.id),onClick:x=>l(_),class:Z(["toc-link",{...n(_),"font-bold":c(r).has(_.id)}])},[a("a",{href:`#${_.id}`},y(_.text),9,vt)],10,ht))),128))])]))}}),gt=q(xt,[["__scopeId","data-v-ecee9634"]]),$t={class:"prev-next-cont"},yt={class:"link-item prev"},wt={class:"link-item next"},bt=C({__name:"prev_next",props:{prefix:null,prev:null,next:null},setup(o){var n,l;const t=o,r=(e,s)=>s?e?s.startsWith("/")?e+s:e+"/"+s:s:"",i=r(t.prefix,(n=t.prev)==null?void 0:n._path),f=r(t.prefix,(l=t.next)==null?void 0:l._path);return(e,s)=>{const _=nt;return p(),m("ul",$t,[a("li",yt,[o.prev?(p(),B(_,{key:0,to:c(i)},{default:O(()=>[v(c(tt),{class:"icon stroke"}),a("span",null,y(o.prev.title),1)]),_:1},8,["to"])):k("",!0)]),a("li",wt,[o.next?(p(),B(_,{key:0,to:c(f)},{default:O(()=>[a("span",null,y(o.next.title),1),v(c(et),{class:"icon stroke"})]),_:1},8,["to"])):k("",!0)])])}}}),kt=q(bt,[["__scopeId","data-v-f67172cd"]]),A=o=>(W("data-v-f9f90665"),o=o(),F(),o),Ct={class:"article-main"},It={class:"article-header"},St={class:"mb-1 heading"},At={key:0,class:"mb-1 supporting"},Et={key:1,class:"flex-wrap pb-0 article-tags"},Nt=A(()=>a("p",{class:"pt-1 font-mono text-sm font-thin text-slate-400"},"tags:",-1)),Ot={key:2,class:"flex-wrap mt-0 mb-1 article-tags"},qt=A(()=>a("p",{class:"pt-1 font-mono text-sm font-thin text-slate-400"},"page:",-1)),jt={class:"font-mono text-sm font-thin text-slate-400"},Bt=A(()=>a("hr",null,null,-1)),Lt={class:"article-section"},Mt={class:"aside"},Pt={class:"article page"},Rt=A(()=>a("p",null,"No content found.",-1)),Vt=C({__name:"post",props:{article:null,prev:null,next:null,prefix:null},setup(o){var S;const t=o,r=/\d{4}-[01]{1}\d{1}-[0-3]{1}\d{1}/,i=t.prev??void 0,f=t.next??void 0;let n;if(t.article)n=t.article;else throw L({statusCode:500,statusMessage:`invaild article type: ${typeof t.article}`});if(!r.test(t.article.date))throw L({statusCode:400,statusMessage:`invalid date string: ${t.article.date}`});const l=(S=t.article.date.match(r))==null?void 0:S.at(0);st({title:`${V().public.name} - ${t.article.title}`,meta:[{hid:"description",name:"description",content:t.article.description}]});const s=d=>{if(!d.children)return[];let u=[];for(const h of d.children){if(h.type==="text"){u=[...u,h.value];continue}u=[...u,...s(h)]}return u},_=["h1","h2","h3","h4","h5"],x=t.article.body.children.filter(d=>_.indexOf(d.tag??"")>=0).map(d=>{var u;return{id:(u=d.props)==null?void 0:u.id,depth:_.indexOf(d.tag??"")+1,text:s(d).join("")}}),g=b(new Set),I=N(()=>[...g.value]),w=b(),$=b(null),E=ot({root:w.value,threshold:.5});return P(()=>{$.value=new IntersectionObserver(d=>{d.forEach(u=>{const h=u.target.getAttribute("id");h&&(u.isIntersecting?g.value.add(h):g.value.delete(h))})},E),document.querySelectorAll([1,2,3,4,5].map(d=>`.nuxt-content h${d}[id]`).join(", ")).forEach(d=>{var u;(u=$.value)==null||u.observe(d)})}),ct(()=>{var d;(d=$.value)==null||d.disconnect()}),(d,u)=>{var j;const h=Q,H=X,z=gt,J=it,U=kt;return p(),m("div",Ct,[a("div",null,[a("header",It,[a("h1",St,y(c(n).title),1),c(n).description?(p(),m("p",At,y(c(n).description),1)):k("",!0),(j=c(n).tags)!=null&&j.length?(p(),m("ul",Et,[Nt,(p(!0),m(D,null,T(c(n).tags,(G,K)=>(p(),m("div",{key:K},[v(h,{tag:G,do_select:!0},null,8,["tag"])]))),128))])):k("",!0),c(n).page?(p(),m("ul",Ot,[qt,v(H,{page:c(n).page,do_select:!0},null,8,["page"])])):k("",!0),a("p",jt,"created at: "+y(c(l)),1)])]),Bt,a("div",null,[a("section",Lt,[a("aside",Mt,[v(z,{class:"toc",links:c(x),active_toc_id:c(I)},null,8,["links","active_toc_id"])]),a("article",Pt,[v(J,{class:"nuxt-content",value:c(n),ref_key:"content",ref:w},{empty:O(()=>[Rt]),_:1},8,["value"])])]),v(U,{prev:c(i),next:c(f),prefix:o.prefix},null,8,["prev","next","prefix"])])])}}}),Dt=q(Vt,[["__scopeId","data-v-f9f90665"]]),Tt={id:"main"},Yt=C({__name:"[...slug]",async setup(o){var x,g,I;let t,r,{path:i}=at();const f="/"+(i.split("/").at(1)??"");i="/"+i.split("/").slice(2).join("/"),i.endsWith("/")&&(i=i.slice(0,-1));const n=_t(),{data:l}=([t,r]=rt(async()=>lt(`selected_data_with_surround_${i}`,async()=>{const w=M(n).where({_path:i}).findOne(),$=M(n).only(["_path","title","description"]).findSurround(i);return{article:await w,surround:await $}})),t=await t,r(),t);let e,s;(x=l.value)!=null&&x.surround&&([e,s]=(g=l.value)==null?void 0:g.surround);const _=(I=l.value)==null?void 0:I.article;return(w,$)=>{const E=Dt,S=dt;return p(),m("main",Tt,[v(E,{article:c(_),prev:c(e),next:c(s),prefix:f},null,8,["article","prev","next"]),v(S)])}}});export{Yt as default};
