import{_ as U}from"./one.vue.87b9fd01.js";import{_ as X}from"./one.vue.44976399.js";import{a as C,r as k,k as N,al as Q,B as R,D,o as p,b as m,e as a,l as L,ac as P,ad as T,i as Y,u as c,H as $,F as V,G as W,j as O,c as j,t as q,h,am as Z,q as w,an as tt,v as et,a1 as E,K as nt,X as st,a3 as ot,J as ct,S as at}from"./entry.eca569f9.js";/* empty css                 */import rt from"./ContentRenderer.10bdfa57.js";import{u as it,q as M}from"./query.7222a6b0.js";import{g as lt}from"./query.f5aceab6.js";import"./ContentRendererMarkdown.8512cb0f.js";import"./utils.2efa0b96.js";const _t=C({__name:"comment",setup(s){const t=L(),u=k(),i=N(Q),f=N(()=>`github-${i.value}`);return R(()=>{const e=document.createElement("script"),l=t.public.comment;for(const n in l)e.setAttribute(n.replace("_","-"),String(l[n]));e.setAttribute("theme",f.value),u.value&&u.value.appendChild(e)}),D(()=>i.value,()=>{var n;const e={type:"set-theme",theme:f.value},l=(n=document.querySelector("iframe"))==null?void 0:n.contentWindow;l==null||l.postMessage(e,"https://utteranc.es")}),(e,l)=>(p(),m("div",null,[a("section",{class:"w-full",ref_key:"self",ref:u},null,512)]))}}),ut=s=>(V("data-v-1785c2ef"),s=s(),W(),s),dt={class:"toc"},pt=ut(()=>a("header",{class:"toc-header"},[a("h3",{class:"text-xl font-bold"},"Table of contents")],-1)),mt={class:"toc-links"},ft=["id","onClick"],ht=["href"],vt=C({__name:"toc",props:{links:null,active_toc_id:null},setup(s){const t=s,u=k(),i=n=>`toc-${n}`;D(()=>t.active_toc_id,()=>{u.value=t.active_toc_id});const f=n=>n.map(o=>{let _=[o];if(o.children){let v=f(o.children);_=[o,...v]}return _}).flat(1),e=n=>{const o={};return o[`_${n.depth}`]=!0,o},l=n=>{u.value=n.id};return(n,o)=>(p(),m("nav",dt,[pt,a("ul",mt,[(p(!0),m(P,null,T(f(s.links),_=>(p(),m("li",{key:_.id,id:i(_.id),onClick:v=>l(_),class:Y(["toc-link",{...e(_),"font-bold":_.id===c(u)}])},[a("a",{href:`#${_.id}`},$(_.text),9,ht)],10,ft))),128))])]))}}),xt=O(vt,[["__scopeId","data-v-1785c2ef"]]),gt={class:"prev-next-cont"},$t={class:"link-item prev"},yt={class:"link-item next"},bt=C({__name:"prev_next",props:{prefix:null,prev:null,next:null},setup(s){var e,l;const t=s,u=(n,o)=>o?n?o.startsWith("/")?n+o:n+"/"+o:o:"",i=u(t.prefix,(e=t.prev)==null?void 0:e._path),f=u(t.prefix,(l=t.next)==null?void 0:l._path);return(n,o)=>{const _=et;return p(),m("ul",gt,[a("li",$t,[s.prev?(p(),j(_,{key:0,to:c(i)},{default:q(()=>[h(c(Z),{class:"icon stroke"}),a("span",null,$(s.prev.title),1)]),_:1},8,["to"])):w("",!0)]),a("li",yt,[s.next?(p(),j(_,{key:0,to:c(f)},{default:q(()=>[a("span",null,$(s.next.title),1),h(c(tt),{class:"icon stroke"})]),_:1},8,["to"])):w("",!0)])])}}}),kt=O(bt,[["__scopeId","data-v-f67172cd"]]),A=s=>(V("data-v-60a596a7"),s=s(),W(),s),wt={class:"article-main"},Ct={class:"article-header"},It={class:"mb-1 heading"},St={key:0,class:"mb-1 supporting"},At={key:1,class:"flex-wrap pb-0 article-tags"},qt=A(()=>a("p",{class:"pt-1 font-mono text-sm font-thin text-slate-400"},"tags:",-1)),Ot={key:2,class:"flex-wrap mt-0 mb-1 article-tags"},Bt=A(()=>a("p",{class:"pt-1 font-mono text-sm font-thin text-slate-400"},"page:",-1)),Nt={class:"font-mono text-sm font-thin text-slate-400"},jt=A(()=>a("hr",null,null,-1)),Et={class:"article-section"},Mt={class:"aside"},Rt={class:"article page"},Dt=A(()=>a("p",null,"No content found.",-1)),Lt=C({__name:"post",props:{article:null,prev:null,next:null,prefix:null},setup(s){var S;const t=s,u=/\d{4}-[01]{1}\d{1}-[0-3]{1}\d{1}/,i=t.prev??void 0,f=t.next??void 0;let e;if(t.article)e=t.article;else throw E({statusCode:500,statusMessage:`invaild article type: ${typeof t.article}`});if(!u.test(t.article.date))throw E({statusCode:400,statusMessage:`invalid date string: ${t.article.date}`});const l=(S=t.article.date.match(u))==null?void 0:S.at(0);nt({title:`${L().public.name} - ${t.article.title}`,meta:[{hid:"description",name:"description",content:t.article.description}]});const o=r=>{if(!r.children)return[];let d=[];for(const x of r.children){if(x.type==="text"){d=[...d,x.value];continue}d=[...d,...o(x)]}return d},_=["h1","h2","h3","h4","h5"],v=t.article.body.children.filter(r=>_.indexOf(r.tag??"")>=0).map(r=>{var d;return{id:(d=r.props)==null?void 0:d.id,depth:_.indexOf(r.tag??"")+1,text:o(r).join("")}}),y=k(),b=k(),g=k(null),I=st({root:b.value,threshold:.5});return R(()=>{g.value=new IntersectionObserver(r=>{r.forEach(d=>{const x=d.target.getAttribute("id");d.isIntersecting&&(y.value=x)})},I),document.querySelectorAll([1,2,3,4,5].map(r=>`.nuxt-content h${r}[id]`).join(", ")).forEach(r=>{var d;(d=g.value)==null||d.observe(r)})}),ot(()=>{var r;(r=g.value)==null||r.disconnect()}),(r,d)=>{var B;const x=U,F=X,H=xt,z=rt,G=kt;return p(),m("div",wt,[a("div",null,[a("header",Ct,[a("h1",It,$(c(e).title),1),c(e).description?(p(),m("p",St,$(c(e).description),1)):w("",!0),(B=c(e).tags)!=null&&B.length?(p(),m("ul",At,[qt,(p(!0),m(P,null,T(c(e).tags,(J,K)=>(p(),m("div",{key:K},[h(x,{tag:J,do_select:!0},null,8,["tag"])]))),128))])):w("",!0),c(e).page?(p(),m("ul",Ot,[Bt,h(F,{page:c(e).page,do_select:!0},null,8,["page"])])):w("",!0),a("p",Nt,"created at: "+$(c(l)),1)])]),jt,a("div",null,[a("section",Et,[a("aside",Mt,[h(H,{class:"toc",links:c(v),active_toc_id:c(y)},null,8,["links","active_toc_id"])]),a("article",Rt,[h(z,{class:"nuxt-content",value:c(e),ref_key:"content",ref:b},{empty:q(()=>[Dt]),_:1},8,["value"])])]),h(G,{prev:c(i),next:c(f),prefix:s.prefix},null,8,["prev","next","prefix"])])])}}}),Pt=O(Lt,[["__scopeId","data-v-60a596a7"]]),Tt={id:"main"},Xt=C({__name:"[...slug]",async setup(s){var v,y,b;let t,u,{path:i}=ct();const f="/"+(i.split("/").at(1)??"");i="/"+i.split("/").slice(2).join("/"),i.endsWith("/")&&(i=i.slice(0,-1));const e=lt(),{data:l}=([t,u]=at(async()=>it(`selected_data_with_surround_${i}`,async()=>{const g=M(e).where({_path:i}).findOne(),I=M(e).only(["_path","title","description"]).findSurround(i);return{article:await g,surround:await I}})),t=await t,u(),t);let n,o;(v=l.value)!=null&&v.surround&&([n,o]=(y=l.value)==null?void 0:y.surround);const _=(b=l.value)==null?void 0:b.article;return(g,I)=>{const S=Pt,r=_t;return p(),m("main",Tt,[h(S,{article:c(_),prev:c(n),next:c(o),prefix:f},null,8,["article","prev","next"]),h(r)])}}});export{Xt as default};
