import{_ as E}from"./select.vue.B8rci7NF.js";import{_ as F}from"./item.vue.1JB3LcY2.js";import M from"./pagination.CzRNrkuV.js";import{g as R,h as V,r as j,i as H,j as r,k as I,l as L,s as G,m as J,n as K,u as O,c as p,a as l,t as x,q as a,v as Q,b as m,F as T,x as U,y as W,o as c,z as X,A as Y}from"./entry.yjNH83hW.js";import{g as Z}from"./query.BqB4qWRx.js";import{u as ee,q as te}from"./query.Jge4d6P1.js";import{r as ae}from"./data_type.m8tIw_LP.js";import"./one.vue.C5IdrbDd.js";import"./ArrowPathRoundedSquareIcon.yteJRdRT.js";import"./preview.Cm9cyFyc.js";const se={class:"page-heading"},ne={class:"wrapper"},oe={class:"text-5xl font-extrabold"},re={class:"page-section"},le={key:0,class:"article-list"},ie={key:1},xe=R({__name:"[...slug]",async setup(pe){let u,d;const s=V(),n=W(),k=()=>{let e;return!s.query.page||Array.isArray(s.query.page)?e=1:e=Number(s.query.page),e||(e=1),e},_=n.public.default_limit,q=()=>{const e=k();return n.public.default_skip+_*(e-1)},i=j(),f=()=>{i.value=q()};f();const g=H(),b=r(()=>[...g.value].sort((e,t)=>e.localeCompare(t))),A=Z(),{data:w}=([u,d]=I(()=>ee("maybe_page_data",()=>te(A).only(["title","page","description","_path","date"]).skip(n.public.default_skip).find())),u=await u,d(),u),C=ae(w),o=r(()=>C.value.filter(e=>{var t;return(t=e.page)==null?void 0:t.length})),z=r(()=>X().value.size>0),$=()=>{if(z.value)return;const e=new Map;o.value.forEach(t=>{e.set(t.page,(e.get(t.page)??0)+1)}),Y(e)},y=r(()=>{$();const e=g.value;return e.size===0?o.value.slice(i.value,i.value+_):o.value.filter(t=>e.has(t.page)).slice(i.value,i.value+_)});L(()=>{s.query.select&&!Array.isArray(s.query.select)&&o.value.map(e=>e.page).includes(s.query.select)&&G(new Set([s.query.select]))}),J(()=>s.query,()=>{f()});const N=K(),S=r(()=>`All pages: ${N.value}`),h=r(()=>{if(g.value.size>0)return`Selected pages: ${b.value}`});return O({title:`${n.public.name} - All pages`,meta:[{hid:"description",name:"description",content:"All posts with pages"}]}),(e,t)=>{const B=E,P=F,D=M;return c(),p("main",null,[l("header",se,[l("div",ne,[l("h1",oe,x(a(S)),1),l("p",{class:Q(["text-lg font-medium",{"text-transparent":a(h)===null}])},x(a(h)||"â €"),3)])]),l("div",null,[l("section",re,[m(B,{page_data:a(o)},null,8,["page_data"]),a(y).length>0?(c(),p("ul",le,[(c(!0),p(T,null,U(a(y),v=>(c(),p("li",{key:v._path,class:"article-item"},[m(P,{article:v,post_prefix:a(n).public.post_prefix,page_prefix:a(n).public.page_prefix},null,8,["article","post_prefix","page_prefix"])]))),128))])):(c(),p("p",ie,"No articles found."))]),m(D,{count_data:a(o),how:"page"},null,8,["count_data"])])])}}});export{xe as default};
