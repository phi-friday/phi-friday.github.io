import{a as P,a1 as B,o as d,b as g,h as f,t as D,e,H as k,u as t,v as R,a8 as z,a9 as j,r as q,B as I,D as L,aa as G,ab as Q,ac as A,ad as M,i as E,l as H,ae as T,J as U,k as y,S as X,af as Y,K as Z}from"./entry.eca569f9.js";import{_ as O}from"./one.vue.44976399.js";import{_ as ee}from"./pagination.774356eb.js";import{u as te,q as ae}from"./query.7222a6b0.js";import{g as se}from"./query.f5aceab6.js";import{r as ne}from"./data_type.9bdab8d3.js";/* empty css                       */import"./utils.2efa0b96.js";const oe={class:"wrapper"},le={class:"text-2xl font-semibold"},re={class:"flex-wrap article-tags"},ce={class:"font-mono text-sm font-thin text-slate-400"},ie=P({__name:"item",props:{article:null,post_prefix:null,page_prefix:null},setup(b){var l;const c=b,n=c.article,o=/\d{4}-[01]{1}\d{1}-[0-3]{1}\d{1}/;if(o.test(n.date)){if(!n.page)throw B({statusCode:400,statusMessage:"article has no page"})}else throw B({statusCode:400,statusMessage:`invalid date string: ${n.date}`});const i=(l=n.date.match(o))==null?void 0:l.at(0),v=(p,r,_=void 0)=>{let a=_;return a||(r==="post"?a=c.post_prefix:a=c.page_prefix),!p||!a?p??void 0:p.startsWith("/")?a+p:a+"/"+p};return(p,r)=>{const _=O,a=R;return d(),g("div",null,[f(a,{to:v(t(n)._path,"post")},{default:D(()=>[e("div",oe,[e("header",null,[e("h1",le,k(t(n).title),1),e("p",null,k(t(n).description),1),e("ul",re,[f(_,{page:t(n).page,add_page:!0},null,8,["page"])]),e("p",ce," created at: "+k(t(i)),1)])])]),_:1},8,["to"])])}}}),pe={class:"mb-2"},_e={class:"flex row-span-1 row-start-1 gap-x-2"},ue=e("span",null," Reset",-1),de=e("span",null,"Pages",-1),ge=P({__name:"select",props:{page_data:null},setup(b){const c=b,n=H(),o=z(),i=()=>{o.value.clear()},v=[...new Set(c.page_data.map(u=>u.page))].sort((u,m)=>u.localeCompare(m)),l=j(),p=()=>{T(!l.value,l)},r=q(),_=q(),a=()=>{var u,m;l.value?(u=r.value)==null||u.appendChild(_.value):(m=r.value)==null||m.removeChild(_.value)};return I(()=>a()),L(()=>l.value,()=>a()),(u,m)=>{const $=R,C=O;return d(),g(A,null,[e("div",pe,[e("div",_e,[e("div",{class:"cta w-icon",onClick:i},[f($,{to:`${t(n).public.page_prefix}`},{default:D(()=>[f(t(G),{class:"icon solid"}),ue]),_:1},8,["to"])]),e("button",{onClick:p,class:"cta w-icon"},[f(t(Q),{class:"icon solid"}),de])])]),e("div",{class:E(["tag-list",{active:t(l)}]),ref_key:"page_parent_ref",ref:r},[e("ul",{class:"flex flex-wrap article-tags",ref_key:"page_ref",ref:_},[(d(!0),g(A,null,M(t(v),(x,w)=>(d(),g("div",{key:w},[f(C,{class:"font-semibold",page:x,add_page:!0},null,8,["page"])]))),128))],512)],2)],64)}}}),fe={class:"page-heading"},me={class:"wrapper"},xe={class:"text-5xl font-extrabold"},he={class:"page-section"},ve={key:0,class:"article-list"},ye={key:1},Ne=P({__name:"@page",async setup(b){let c,n;const o=U(),i=H(),v=()=>{let s;return!o.query.page||Array.isArray(o.query.page)?s=1:s=Number(o.query.page),s||(s=1),s},l=i.public.default_limit,p=()=>{const s=v();return i.public.default_skip+l*(s-1)},r=q(),_=()=>{r.value=p()};_();const a=z(),u=y(()=>[...a.value].sort((s,h)=>s.localeCompare(h))),m=se(),{data:$}=([c,n]=X(()=>te("maybe_page_data",()=>ae(m).only(["title","page","description","_path","date"]).skip(i.public.default_skip).find())),c=await c,n(),c),C=ne($),x=y(()=>C.value.filter(s=>{var h;return(h=s.page)==null?void 0:h.length})),w=y(()=>{const s=a.value;return s.size===0?x.value.slice(r.value,r.value+l):x.value.filter(h=>s.has(h.page)).slice(r.value,r.value+l)});I(()=>{o.query.select&&!Array.isArray(o.query.select)&&x.value.map(s=>s.page).includes(o.query.select)&&(a.value.clear(),a.value.add(o.query.select))}),L(()=>o.query,()=>{_()});const V=Y(),F=y(()=>`All pages: ${V.value}`),N=y(()=>{if(a.value.size>0)return`Selected pages: ${u.value}`});return Z({title:`${i.public.name} - All pages`,meta:[{hid:"description",name:"description",content:"All posts with pages"}]}),(s,h)=>{const J=ge,K=ie,W=ee;return d(),g("main",null,[e("header",fe,[e("div",me,[e("h1",xe,k(t(F)),1),e("p",{class:E(["text-lg font-medium",{"text-transparent":t(N)===null}])},k(t(N)||"â €"),3)])]),e("div",null,[e("section",he,[f(J,{page_data:t(x)},null,8,["page_data"]),t(w).length>0?(d(),g("ul",ve,[(d(!0),g(A,null,M(t(w),S=>(d(),g("li",{key:S._path,class:"article-item"},[f(K,{article:S,post_prefix:t(i).public.post_prefix,page_prefix:t(i).public.page_prefix},null,8,["article","post_prefix","page_prefix"])]))),128))])):(d(),g("p",ye,"No articles found."))]),f(W,{count_data:t(x),how:"page"},null,8,["count_data"])])])}}});export{Ne as default};
