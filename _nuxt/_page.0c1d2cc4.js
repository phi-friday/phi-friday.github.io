import{a as P,a1 as R,o as d,b as g,f,w as z,y as t,B as k,u as e,j as B,k as q,s as D,x as L,a8 as O,a9 as Q,h as A,aa as I,ab as M,F as E,z as T,A as U,i as X,H as Y,v as b,R as Z,J as ee}from"./entry.7ea00f58.js";import{_ as F}from"./page.vue.89d1a84a.js";import{g as H,a as te,s as ae,b as se}from"./state.b65a0d9c.js";/* empty css                  */import{_ as oe}from"./pagination.b22cf77d.js";import{u as ne,q as re}from"./query.b66955f7.js";import{r as ce,g as le}from"./data_type.bda3f72e.js";/* empty css                       */import"./utils.c9b2bd9c.js";const pe={class:"wrapper"},ie={class:"text-2xl font-semibold"},_e={class:"flex-wrap article-tags"},ue={class:"font-mono text-sm font-thin text-slate-400"},de=P({__name:"page_item",props:{article:null,post_prefix:null,page_prefix:null},setup(m){var r;const l=m,o=l.article,n=/\d{4}-[01]{1}\d{1}-[0-3]{1}\d{1}/;if(n.test(o.date)){if(!o.page)throw R({statusCode:400,statusMessage:"article has no page"})}else throw R({statusCode:400,statusMessage:`invalid date string: ${o.date}`});const p=(r=o.date.match(n))==null?void 0:r.at(0),y=(i,c,_=void 0)=>{let a=_;return a||(c==="post"?a=l.post_prefix:a=l.page_prefix),!i||!a?i??void 0:i.startsWith("/")?a+i:a+"/"+i};return(i,c)=>{const _=F,a=B;return d(),g("div",null,[f(a,{to:y(e(o)._path,"post")},{default:z(()=>[t("div",pe,[t("header",null,[t("h1",ie,k(e(o).title),1),t("p",null,k(e(o).description),1),t("ul",_e,[f(_,{page:e(o).page,add_page:!0},null,8,["page"])]),t("p",ue," created at: "+k(e(p)),1)])])]),_:1},8,["to"])])}}}),V=m=>(T("data-v-ccbb34ee"),m=m(),U(),m),ge={class:"mb-2"},fe={class:"flex row-span-1 row-start-1 gap-x-2"},me=V(()=>t("span",null," Reset",-1)),xe=V(()=>t("span",null,"Pages",-1)),he=P({__name:"pages",props:{page_data:null},setup(m){const l=m,o=E(),n=H(),p=()=>{n.value.clear()},y=[...new Set(l.page_data.map(u=>u.page))].sort((u,x)=>u.localeCompare(x)),r=te(),i=()=>{ae(!r.value,r)},c=q(),_=q(),a=()=>{var u,x;r.value?(u=c.value)==null||u.appendChild(_.value):(x=c.value)==null||x.removeChild(_.value)};return D(()=>a()),L(()=>r.value,()=>a()),(u,x)=>{const $=B,C=F;return d(),g(I,null,[t("div",ge,[t("div",fe,[t("div",{class:"cta w-icon",onClick:p},[f($,{to:`${e(o).public.page_prefix}`},{default:z(()=>[f(e(O),{class:"icon solid"}),me]),_:1},8,["to"])]),t("button",{onClick:i,class:"cta w-icon"},[f(e(Q),{class:"icon solid"}),xe])])]),t("div",{class:A(["tag-list",{active:e(r)}]),ref_key:"page_parent_ref",ref:c},[t("ul",{class:A(["flex flex-wrap article-tags",{expanded:e(r)}]),ref_key:"page_ref",ref:_},[(d(!0),g(I,null,M(e(y),(h,w)=>(d(),g("div",{key:w},[f(C,{class:"font-semibold",page:h,add_page:!0},null,8,["page"])]))),128))],2)],2)],64)}}}),ve=X(he,[["__scopeId","data-v-ccbb34ee"]]),ye={class:"page-heading"},be={class:"wrapper"},ke={class:"text-5xl font-extrabold"},we={class:"page-section"},$e={key:0,class:"article-list"},Ce={key:1},De=P({__name:"@page",async setup(m){let l,o;const n=Y(),p=E(),y=()=>{let s;return!n.query.page||Array.isArray(n.query.page)?s=1:s=Number(n.query.page),s||(s=1),s},r=p.public.default_limit,i=()=>{const s=y();return p.public.default_skip+r*(s-1)},c=q(),_=()=>{c.value=i()};_();const a=H(),u=b(()=>[...a.value].sort((s,v)=>s.localeCompare(v))),x=le(),{data:$}=([l,o]=Z(()=>ne("maybe_page_data",()=>re(x).only(["title","page","description","_path","date"]).skip(p.public.default_skip).find())),l=await l,o(),l),C=ce($),h=b(()=>C.value.filter(s=>{var v;return(v=s.page)==null?void 0:v.length})),w=b(()=>{const s=a.value;return s.size===0?h.value.slice(c.value,c.value+r):h.value.filter(v=>s.has(v.page)).slice(c.value,c.value+r)});D(()=>{n.query.select&&!Array.isArray(n.query.select)&&h.value.map(s=>s.page).includes(n.query.select)&&(a.value.clear(),a.value.add(n.query.select))}),L(()=>n.query,()=>{_()});const j=se(),J=b(()=>`All pages: ${j.value}`),S=b(()=>{if(a.value.size>0)return`Selected pages: ${u.value}`});return ee({title:`${p.public.name} - All pages`,meta:[{hid:"description",name:"description",content:"All posts with pages"}]}),(s,v)=>{const W=ve,G=de,K=oe;return d(),g("main",null,[t("header",ye,[t("div",be,[t("h1",ke,k(e(J)),1),t("p",{class:A(["text-lg font-medium",{"text-transparent":e(S)===null}])},k(e(S)||"â €"),3)])]),t("div",null,[t("section",we,[f(W,{page_data:e(h)},null,8,["page_data"]),e(w).length>0?(d(),g("ul",$e,[(d(!0),g(I,null,M(e(w),N=>(d(),g("li",{key:N._path,class:"article-item"},[f(G,{article:N,post_prefix:e(p).public.post_prefix,page_prefix:e(p).public.page_prefix},null,8,["article","post_prefix","page_prefix"])]))),128))])):(d(),g("p",Ce,"No articles found."))]),f(K,{count_data:e(h),how:"page"},null,8,["count_data"])])])}}});export{De as default};
