import{_ as V}from"./select.vue.3a76afe7.js";import{_ as D}from"./item.vue.0f2b91e4.js";import H from"./pagination.ea8b90c3.js";import{a as I,E as L,h as M,N as R,i as r,ag as F,I as Q,P as U,C as Z,Z as j,H as G,b as i,q as l,L as x,u as a,s as J,e as m,U as K,V as O,k as T,Q as W,o as c,ay as X}from"./entry.085bbd26.js";import{u as Y,q as ee}from"./query.da9d7e1d.js";import{g as te}from"./query.f5aceab6.js";import{r as ae}from"./data_type.9bdab8d3.js";import"./one.vue.ca2d422c.js";/* empty css                       */import"./utils.2e5ad50b.js";const se={class:"page-heading"},ne={class:"wrapper"},oe={class:"text-5xl font-extrabold"},re={class:"page-section"},le={key:0,class:"article-list"},pe={key:1},xe=I({__name:"@page",async setup(ie){let u,d;const s=L(),n=T(),k=()=>{let e;return!s.query.page||Array.isArray(s.query.page)?e=1:e=Number(s.query.page),e||(e=1),e},_=n.public.default_limit,q=()=>{const e=k();return n.public.default_skip+_*(e-1)},p=M(),f=()=>{p.value=q()};f();const g=R(),b=r(()=>[...g.value].sort((e,t)=>e.localeCompare(t))),A=te(),{data:w}=([u,d]=F(()=>Y("maybe_page_data",()=>ee(A).only(["title","page","description","_path","date"]).skip(n.public.default_skip).find())),u=await u,d(),u),C=ae(w),o=r(()=>C.value.filter(e=>{var t;return(t=e.page)==null?void 0:t.length})),N=r(()=>W().value.size>0),$=()=>{if(N.value)return;const e=new Map;o.value.forEach(t=>{e.set(t.page,(e.get(t.page)??0)+1)}),X(e)},y=r(()=>{$();const e=g.value;return e.size===0?o.value.slice(p.value,p.value+_):o.value.filter(t=>e.has(t.page)).slice(p.value,p.value+_)});Q(()=>{s.query.select&&!Array.isArray(s.query.select)&&o.value.map(e=>e.page).includes(s.query.select)&&U(new Set([s.query.select]))}),Z(()=>s.query,()=>{f()});const z=j(),P=r(()=>`All pages: ${z.value}`),h=r(()=>{if(g.value.size>0)return`Selected pages: ${b.value}`});return G({title:`${n.public.name} - All pages`,meta:[{hid:"description",name:"description",content:"All posts with pages"}]}),(e,t)=>{const S=V,B=D,E=H;return c(),i("main",null,[l("header",se,[l("div",ne,[l("h1",oe,x(a(P)),1),l("p",{class:J(["text-lg font-medium",{"text-transparent":a(h)===null}])},x(a(h)||"â €"),3)])]),l("div",null,[l("section",re,[m(S,{page_data:a(o)},null,8,["page_data"]),a(y).length>0?(c(),i("ul",le,[(c(!0),i(K,null,O(a(y),v=>(c(),i("li",{key:v._path,class:"article-item"},[m(B,{article:v,post_prefix:a(n).public.post_prefix,page_prefix:a(n).public.page_prefix},null,8,["article","post_prefix","page_prefix"])]))),128))])):(c(),i("p",pe,"No articles found."))]),m(E,{count_data:a(o),how:"page"},null,8,["count_data"])])])}}});export{xe as default};
