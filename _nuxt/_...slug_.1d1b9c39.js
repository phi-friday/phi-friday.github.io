import{_ as R}from"./select.vue.cdcf92cc.js";import{_ as V}from"./item.vue.76905084.js";import D from"./pagination.920b6fb5.js";import{a as H,E as I,h as L,O as M,i as r,ah as F,I as O,Q,C as W,$ as j,H as G,b as p,q as l,L as x,u as a,s as J,e as m,V as K,W as T,k as U,R as X,o as c,az as Y}from"./entry.1bd2ff67.js";import{u as Z,q as ee}from"./query.9c6589dc.js";import{g as te}from"./query.f5aceab6.js";import{r as ae}from"./data_type.9bdab8d3.js";import"./one.vue.26feaa9a.js";/* empty css                       */import"./utils.13affbe6.js";const se={class:"page-heading"},ne={class:"wrapper"},oe={class:"text-5xl font-extrabold"},re={class:"page-section"},le={key:0,class:"article-list"},ie={key:1},xe=H({__name:"[...slug]",async setup(pe){let u,d;const s=I(),n=U(),k=()=>{let e;return!s.query.page||Array.isArray(s.query.page)?e=1:e=Number(s.query.page),e||(e=1),e},_=n.public.default_limit,q=()=>{const e=k();return n.public.default_skip+_*(e-1)},i=L(),f=()=>{i.value=q()};f();const g=M(),b=r(()=>[...g.value].sort((e,t)=>e.localeCompare(t))),A=te(),{data:w}=([u,d]=F(()=>Z("maybe_page_data",()=>ee(A).only(["title","page","description","_path","date"]).skip(n.public.default_skip).find())),u=await u,d(),u),C=ae(w),o=r(()=>C.value.filter(e=>{var t;return(t=e.page)==null?void 0:t.length})),$=r(()=>X().value.size>0),z=()=>{if($.value)return;const e=new Map;o.value.forEach(t=>{e.set(t.page,(e.get(t.page)??0)+1)}),Y(e)},y=r(()=>{z();const e=g.value;return e.size===0?o.value.slice(i.value,i.value+_):o.value.filter(t=>e.has(t.page)).slice(i.value,i.value+_)});O(()=>{s.query.select&&!Array.isArray(s.query.select)&&o.value.map(e=>e.page).includes(s.query.select)&&Q(new Set([s.query.select]))}),W(()=>s.query,()=>{f()});const N=j(),S=r(()=>`All pages: ${N.value}`),h=r(()=>{if(g.value.size>0)return`Selected pages: ${b.value}`});return G({title:`${n.public.name} - All pages`,meta:[{hid:"description",name:"description",content:"All posts with pages"}]}),(e,t)=>{const B=R,E=V,P=D;return c(),p("main",null,[l("header",se,[l("div",ne,[l("h1",oe,x(a(S)),1),l("p",{class:J(["text-lg font-medium",{"text-transparent":a(h)===null}])},x(a(h)||"â €"),3)])]),l("div",null,[l("section",re,[m(B,{page_data:a(o)},null,8,["page_data"]),a(y).length>0?(c(),p("ul",le,[(c(!0),p(K,null,T(a(y),v=>(c(),p("li",{key:v._path,class:"article-item"},[m(E,{article:v,post_prefix:a(n).public.post_prefix,page_prefix:a(n).public.page_prefix},null,8,["article","post_prefix","page_prefix"])]))),128))])):(c(),p("p",ie,"No articles found."))]),m(P,{count_data:a(o),how:"page"},null,8,["count_data"])])])}}});export{xe as default};
