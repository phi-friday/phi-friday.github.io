import{a as P,$ as D,o as d,f as g,l as f,y as L,i as e,E as k,u as t,L as R,ag as z,ah as J,r as q,H as B,N as E,ai as K,aj as Q,F as A,D as I,p as M,e as F,ak as T,P as U,b as y,S as X,al as Y,a6 as Z}from"./entry.23441bf5.js";import{_ as H}from"./one.vue.8cb0f782.js";import{_ as ee}from"./pagination.4da94015.js";import{u as te}from"./asyncData.61a83d68.js";import{g as ae}from"./query.f5aceab6.js";import{q as se}from"./query.fefdd155.js";import{r as ne}from"./data_type.9bdab8d3.js";/* empty css                       */import"./utils.828f2156.js";const oe={class:"wrapper"},re={class:"text-2xl font-semibold"},le={class:"flex-wrap article-tags"},ce={class:"font-mono text-sm font-thin text-slate-400"},ie=P({__name:"item",props:{article:null,post_prefix:null,page_prefix:null},setup(w){var r;const c=w,n=c.article,o=/\d{4}-[01]{1}\d{1}-[0-3]{1}\d{1}/;if(o.test(n.date)){if(!n.page)throw D({statusCode:400,statusMessage:"article has no page"})}else throw D({statusCode:400,statusMessage:`invalid date string: ${n.date}`});const i=(r=n.date.match(o))==null?void 0:r.at(0),v=(p,l,_=void 0)=>{let a=_;return a||(l==="post"?a=c.post_prefix:a=c.page_prefix),!p||!a?p??void 0:p.startsWith("/")?a+p:a+"/"+p};return(p,l)=>{const _=H,a=R;return d(),g("div",null,[f(a,{to:v(t(n)._path,"post")},{default:L(()=>[e("div",oe,[e("header",null,[e("h1",re,k(t(n).title),1),e("p",null,k(t(n).description),1),e("ul",le,[f(_,{page:t(n).page,add_page:!0},null,8,["page"])]),e("p",ce," created at: "+k(t(i)),1)])])]),_:1},8,["to"])])}}}),pe={class:"mb-2"},_e={class:"flex row-span-1 row-start-1 gap-x-2"},ue=e("span",null," Reset",-1),de=e("span",null,"Pages",-1),ge=P({__name:"select",props:{page_data:null},setup(w){const c=w,n=F(),o=z(),i=()=>{o.value.clear()},v=[...new Set(c.page_data.map(u=>u.page))].sort((u,m)=>u.localeCompare(m)),r=J(),p=()=>{T(!r.value,r)},l=q(),_=q(),a=()=>{var u,m;r.value?(u=l.value)==null||u.appendChild(_.value):(m=l.value)==null||m.removeChild(_.value)};return B(()=>a()),E(()=>r.value,()=>a()),(u,m)=>{const $=R,C=H;return d(),g(A,null,[e("div",pe,[e("div",_e,[e("div",{class:"cta w-icon",onClick:i},[f($,{to:`${t(n).public.page_prefix}`},{default:L(()=>[f(t(K),{class:"icon solid"}),ue]),_:1},8,["to"])]),e("button",{onClick:p,class:"cta w-icon"},[f(t(Q),{class:"icon solid"}),de])])]),e("div",{class:M(["tag-list",{active:t(r)}]),ref_key:"page_parent_ref",ref:l},[e("ul",{class:"flex flex-wrap article-tags",ref_key:"page_ref",ref:_},[(d(!0),g(A,null,I(t(v),(x,b)=>(d(),g("div",{key:b},[f(C,{class:"font-semibold",page:x,add_page:!0},null,8,["page"])]))),128))],512)],2)],64)}}}),fe={class:"page-heading"},me={class:"wrapper"},xe={class:"text-5xl font-extrabold"},he={class:"page-section"},ve={key:0,class:"article-list"},ye={key:1},Se=P({__name:"@page",async setup(w){let c,n;const o=U(),i=F(),v=()=>{let s;return!o.query.page||Array.isArray(o.query.page)?s=1:s=Number(o.query.page),s||(s=1),s},r=i.public.default_limit,p=()=>{const s=v();return i.public.default_skip+r*(s-1)},l=q(),_=()=>{l.value=p()};_();const a=z(),u=y(()=>[...a.value].sort((s,h)=>s.localeCompare(h))),m=ae(),{data:$}=([c,n]=X(()=>te("maybe_page_data",()=>se(m).only(["title","page","description","_path","date"]).skip(i.public.default_skip).find())),c=await c,n(),c),C=ne($),x=y(()=>C.value.filter(s=>{var h;return(h=s.page)==null?void 0:h.length})),b=y(()=>{const s=a.value;return s.size===0?x.value.slice(l.value,l.value+r):x.value.filter(h=>s.has(h.page)).slice(l.value,l.value+r)});B(()=>{o.query.select&&!Array.isArray(o.query.select)&&x.value.map(s=>s.page).includes(o.query.select)&&(a.value.clear(),a.value.add(o.query.select))}),E(()=>o.query,()=>{_()});const O=Y(),V=y(()=>`All pages: ${O.value}`),N=y(()=>{if(a.value.size>0)return`Selected pages: ${u.value}`});return Z({title:`${i.public.name} - All pages`,meta:[{hid:"description",name:"description",content:"All posts with pages"}]}),(s,h)=>{const j=ge,W=ie,G=ee;return d(),g("main",null,[e("header",fe,[e("div",me,[e("h1",xe,k(t(V)),1),e("p",{class:M(["text-lg font-medium",{"text-transparent":t(N)===null}])},k(t(N)||"â €"),3)])]),e("div",null,[e("section",he,[f(j,{page_data:t(x)},null,8,["page_data"]),t(b).length>0?(d(),g("ul",ve,[(d(!0),g(A,null,I(t(b),S=>(d(),g("li",{key:S._path,class:"article-item"},[f(W,{article:S,post_prefix:t(i).public.post_prefix,page_prefix:t(i).public.page_prefix},null,8,["article","post_prefix","page_prefix"])]))),128))])):(d(),g("p",ye,"No articles found."))]),f(G,{count_data:t(x),how:"page"},null,8,["count_data"])])])}}});export{Se as default};
