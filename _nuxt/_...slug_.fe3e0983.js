import w from"./post.aeb7332e.js";import{_ as g}from"./comment.vue.e0ccfea9.js";import{a as C,E as q,K as b,ah as k,b as E,e as d,u as r,k as A,o as B}from"./entry.1bd2ff67.js";import{u as P,q as f}from"./query.9c6589dc.js";import{g as R}from"./query.f5aceab6.js";import"./one.vue.3454a5bb.js";import"./one.vue.26feaa9a.js";import"./toc.97472d29.js";/* empty css                */import"./ContentRenderer.a7b79c47.js";import"./ContentRendererMarkdown.a1b997b7.js";import"./prev_next.fd3fc89b.js";/* empty css                      *//* empty css                 */import"./utils.13affbe6.js";const $={id:"main"},Q=C({__name:"[...slug]",async setup(j){var p,u,_;let e,n;const s=A();let{path:t}=q();if(t===s.public.post_prefix||t===s.public.post_prefix+"/")throw b({statusCode:404,statusMessage:"Post not found"});const h="/"+(t.split("/").at(1)??"");t="/"+t.split("/").slice(2).join("/"),t.endsWith("/")&&(t=t.slice(0,-1));const a=R(),{data:o}=([e,n]=k(async()=>P(`selected_data_with_surround_${t}`,async()=>{const m=f(a).where({_path:t}).findOne(),l=f(a).only(["_path","title","description"]).findSurround(t);return{article:await m,surround:await l}})),e=await e,n(),e);let i,c;(p=o.value)!=null&&p.surround&&([i,c]=(u=o.value)==null?void 0:u.surround);const x=(_=o.value)==null?void 0:_.article;return(m,l)=>{const y=w,v=g;return B(),E("main",$,[d(y,{article:r(x),prev:r(i),next:r(c),prefix:h},null,8,["article","prev","next"]),d(v)])}}});export{Q as default};
