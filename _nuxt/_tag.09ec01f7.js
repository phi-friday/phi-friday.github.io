import{_ as D}from"./select.vue.a5f8fade.js";import{_ as F}from"./item.vue.c1da6e59.js";import H from"./pagination.fcbbc2c6.js";import{a as M,U as R,r as T,V as G,b as i,ah as I,H as K,a3 as L,K as P,W as U,G as W,f as u,p as l,C as b,u as a,q as j,i as m,F as J,B as O,e as Q,ac as X,o as _,aA as Y}from"./entry.ef4c4ce0.js";import{u as Z,q as tt}from"./query.c62145a2.js";import{g as et}from"./query.f5aceab6.js";import{r as at}from"./data_type.9bdab8d3.js";import"./one.vue.a45f1991.js";/* empty css                       */import"./utils.083eb982.js";const st={class:"page-heading"},nt={class:"wrapper"},ot={class:"text-5xl font-extrabold"},rt={class:"page-section"},it={key:0,class:"article-list"},lt={key:1},xt=M({__name:"@tag",async setup(ct){let p,f;const s=R(),n=Q(),k=()=>{let t;return!s.query.page||Array.isArray(s.query.page)?t=1:t=Number(s.query.page),t||(t=1),t},g=n.public.default_limit,q=()=>{const t=k();return n.public.default_skip+g*(t-1)},c=T(),y=()=>{c.value=q()};y();const d=G(),A=i(()=>[...d.value].sort((t,e)=>t.localeCompare(e))),w=et(),{data:C}=([p,f]=I(()=>Z("maybe_tagged_data",()=>tt(w).only(["title","description","tags","_path","date"]).skip(n.public.default_skip).find())),p=await p,f(),p),z=at(C),o=i(()=>z.value.filter(t=>{var e;return(e=t.tags)==null?void 0:e.length})),S=i(()=>X().value.size>0),$=()=>{if(S.value)return;const t=new Map;o.value.forEach(e=>{e.tags.forEach(r=>{t.set(r,(t.get(r)??0)+1)})}),Y(t)},h=i(()=>{$();const t=d.value;return t.size===0?o.value.slice(c.value,c.value+g):o.value.filter(e=>[...new Set(e.tags)].filter(r=>t.has(r)).length==t.size).slice(c.value,c.value+g)});K(()=>{if(s.query.select&&!Array.isArray(s.query.select)){for(const t of o.value)if(t.tags&&t.tags.includes(s.query.select)){L(new Set([s.query.select]));break}}}),P(()=>s.query,()=>{y()});const B=U(),N=i(()=>`All tagged posts: ${B.value}`),v=i(()=>{if(d.value.size>0)return`Selected tags: ${A.value}`});return W({title:`${n.public.name} - All tagged posts`,meta:[{hid:"description",name:"description",content:"All posts with tags"}]}),(t,e)=>{const r=D,E=F,V=H;return _(),u("main",null,[l("header",st,[l("div",nt,[l("h1",ot,b(a(N)),1),l("p",{class:j(["text-lg font-medium",{"text-transparent":a(v)===null}])},b(a(v)||"â €"),3)])]),l("div",null,[l("section",rt,[m(r,{tag_data:a(o)},null,8,["tag_data"]),a(h).length>0?(_(),u("ul",it,[(_(!0),u(J,null,O(a(h),x=>(_(),u("li",{key:x._path,class:"article-item"},[m(E,{article:x,post_prefix:a(n).public.post_prefix,tag_prefix:a(n).public.tag_prefix},null,8,["article","post_prefix","tag_prefix"])]))),128))])):(_(),u("p",lt,"No articles found."))]),m(V,{count_data:a(o),how:"tag"},null,8,["count_data"])])])}}});export{xt as default};
