import{a as P,a1 as B,o as u,b as g,f as m,w as R,y as t,B as k,u as e,j as z,k as A,s as D,x as L,a8 as O,a9 as Q,h as I,aa as N,ab as M,F as V,z as T,A as U,i as X,H as Y,v as b,R as Z,J as ee,c as te,C as ae}from"./entry.0271a5d4.js";import{_ as E}from"./page.vue.1a11efbf.js";import{g as F,a as se,s as oe,b as ne}from"./state.a804f4db.js";/* empty css                  */import{_ as re}from"./pagination.28fd7f05.js";import{u as ce,q as le}from"./query.a4783a6e.js";import{r as pe,g as ie}from"./data_type.bda3f72e.js";/* empty css                       */import"./utils.c6d731e4.js";const _e={class:"wrapper"},ue={class:"text-2xl font-semibold"},de={class:"flex-wrap article-tags"},ge={class:"font-mono text-sm font-thin text-slate-400"},fe=P({__name:"page_item",props:{article:null,post_prefix:null,page_prefix:null},setup(f){var r;const l=f,o=l.article,n=/\d{4}-[01]{1}\d{1}-[0-3]{1}\d{1}/;if(n.test(o.date)){if(!o.page)throw B({statusCode:400,statusMessage:"article has no page"})}else throw B({statusCode:400,statusMessage:`invalid date string: ${o.date}`});const p=(r=o.date.match(n))==null?void 0:r.at(0),y=(i,c,_=void 0)=>{let a=_;return a||(c==="post"?a=l.post_prefix:a=l.page_prefix),!i||!a?i??void 0:i.startsWith("/")?a+i:a+"/"+i};return(i,c)=>{const _=E,a=z;return u(),g("div",null,[m(a,{to:y(e(o)._path,"post")},{default:R(()=>[t("div",_e,[t("header",null,[t("h1",ue,k(e(o).title),1),t("p",null,k(e(o).description),1),t("ul",de,[m(_,{page:e(o).page,add_page:!0},null,8,["page"])]),t("p",ge," created at: "+k(e(p)),1)])])]),_:1},8,["to"])])}}}),H=f=>(T("data-v-ccbb34ee"),f=f(),U(),f),me={class:"mb-2"},xe={class:"flex row-span-1 row-start-1 gap-x-2"},he=H(()=>t("span",null," Reset",-1)),ve=H(()=>t("span",null,"Pages",-1)),ye=P({__name:"pages",props:{page_data:null},setup(f){const l=f,o=V(),n=F(),p=()=>{n.value.clear()},y=[...new Set(l.page_data.map(d=>d.page))].sort((d,x)=>d.localeCompare(x)),r=se(),i=()=>{oe(!r.value,r)},c=A(),_=A(),a=()=>{var d,x;r.value?(d=c.value)==null||d.appendChild(_.value):(x=c.value)==null||x.removeChild(_.value)};return D(()=>a()),L(()=>r.value,()=>a()),(d,x)=>{const $=z,C=E;return u(),g(N,null,[t("div",me,[t("div",xe,[t("div",{class:"cta w-icon",onClick:p},[m($,{to:`${e(o).public.page_prefix}`},{default:R(()=>[m(e(O),{class:"icon solid"}),he]),_:1},8,["to"])]),t("button",{onClick:i,class:"cta w-icon"},[m(e(Q),{class:"icon solid"}),ve])])]),t("div",{class:I(["tag-list",{active:e(r)}]),ref_key:"page_parent_ref",ref:c},[t("ul",{class:I(["flex flex-wrap article-tags",{expanded:e(r)}]),ref_key:"page_ref",ref:_},[(u(!0),g(N,null,M(e(y),(h,w)=>(u(),g("div",{key:w},[m(C,{class:"font-semibold",page:h,add_page:!0},null,8,["page"])]))),128))],2)],2)],64)}}}),be=X(ye,[["__scopeId","data-v-ccbb34ee"]]),ke={class:"page-heading"},we={class:"wrapper"},$e={class:"text-5xl font-extrabold"},Ce={class:"page-section"},qe={key:0,class:"article-list"},Ae={key:1},Me=P({__name:"@page",async setup(f){let l,o;const n=Y(),p=V(),y=()=>{let s;return!n.query.page||Array.isArray(n.query.page)?s=1:s=Number(n.query.page),s||(s=1),s},r=p.public.default_limit,i=()=>{const s=y();return p.public.default_skip+r*(s-1)},c=A(),_=()=>{c.value=i()};_();const a=F(),d=b(()=>[...a.value].sort((s,v)=>s.localeCompare(v))),x=ie(),{data:$}=([l,o]=Z(()=>ce("maybe_page_data",()=>le(x).only(["title","page","description","_path","date"]).skip(p.public.default_skip).find())),l=await l,o(),l),C=pe($),h=b(()=>C.value.filter(s=>{var v;return(v=s.page)==null?void 0:v.length})),w=b(()=>{const s=a.value;return s.size===0?h.value.slice(c.value,c.value+r):h.value.filter(v=>s.has(v.page)).slice(c.value,c.value+r)});D(()=>{n.query.select&&!Array.isArray(n.query.select)&&h.value.map(s=>s.page).includes(n.query.select)&&(a.value.clear(),a.value.add(n.query.select))}),L(()=>n.query,()=>{_()});const j=ne(),J=b(()=>`All pages: ${j.value}`),S=b(()=>{if(a.value.size>0)return`Selected pages: ${d.value}`});return ee({title:`${p.public.name} - All pages`,meta:[{hid:"description",name:"description",content:"All posts with pages"}]}),(s,v)=>{const W=be,G=fe,K=re;return u(),g("main",null,[t("header",ke,[t("div",we,[t("h1",$e,k(e(J)),1),t("p",{class:I(["text-lg font-medium",{"text-transparent":e(S)===null}])},k(e(S)||"â €"),3)])]),t("div",null,[t("section",Ce,[m(W,{page_data:e(h)},null,8,["page_data"]),e(w).length>0?(u(),g("ul",qe,[(u(!0),g(N,null,M(e(w),q=>(u(),g("li",{key:q._path,class:"article-item"},[q.page?(u(),te(G,{key:0,article:q,post_prefix:e(p).public.post_prefix,page_prefix:e(p).public.page_prefix},null,8,["article","post_prefix","page_prefix"])):ae("",!0)]))),128))])):(u(),g("p",Ae,"No articles found."))]),m(K,{count_data:e(h),how:"page"},null,8,["count_data"])])])}}});export{Me as default};
