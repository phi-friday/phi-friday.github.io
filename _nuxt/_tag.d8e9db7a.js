import{_ as D}from"./select.vue.53705a2c.js";import{_ as H}from"./item.vue.07fe0b69.js";import I from"./pagination.72fd1c02.js";import{a as L,E as M,h as R,X as T,i,ag as F,I as P,a5 as U,C as X,Y,H as j,b as u,q as l,L as k,u as a,s as G,e as m,U as J,V as K,k as O,ac as Q,o as _,aA as W}from"./entry.b5af832a.js";import{u as Z,q as tt}from"./query.5806adae.js";import{g as et}from"./query.f5aceab6.js";import{r as at}from"./data_type.9bdab8d3.js";import"./one.vue.20209c22.js";/* empty css                       */import"./utils.84b9316e.js";const st={class:"page-heading"},nt={class:"wrapper"},ot={class:"text-5xl font-extrabold"},rt={class:"page-section"},it={key:0,class:"article-list"},lt={key:1},xt=L({__name:"@tag",async setup(ct){let p,f;const s=M(),n=O(),b=()=>{let t;return!s.query.page||Array.isArray(s.query.page)?t=1:t=Number(s.query.page),t||(t=1),t},g=n.public.default_limit,q=()=>{const t=b();return n.public.default_skip+g*(t-1)},c=R(),y=()=>{c.value=q()};y();const d=T(),A=i(()=>[...d.value].sort((t,e)=>t.localeCompare(e))),w=et(),{data:C}=([p,f]=F(()=>Z("maybe_tagged_data",()=>tt(w).only(["title","description","tags","_path","date"]).skip(n.public.default_skip).find())),p=await p,f(),p),z=at(C),o=i(()=>z.value.filter(t=>{var e;return(e=t.tags)==null?void 0:e.length})),S=i(()=>Q().value.size>0),$=()=>{if(S.value)return;const t=new Map;o.value.forEach(e=>{e.tags.forEach(r=>{t.set(r,(t.get(r)??0)+1)})}),W(t)},h=i(()=>{$();const t=d.value;return t.size===0?o.value.slice(c.value,c.value+g):o.value.filter(e=>[...new Set(e.tags)].filter(r=>t.has(r)).length==t.size).slice(c.value,c.value+g)});P(()=>{if(s.query.select&&!Array.isArray(s.query.select)){for(const t of o.value)if(t.tags&&t.tags.includes(s.query.select)){U(new Set([s.query.select]));break}}}),X(()=>s.query,()=>{y()});const E=Y(),N=i(()=>`All tagged posts: ${E.value}`),v=i(()=>{if(d.value.size>0)return`Selected tags: ${A.value}`});return j({title:`${n.public.name} - All tagged posts`,meta:[{hid:"description",name:"description",content:"All posts with tags"}]}),(t,e)=>{const r=D,B=H,V=I;return _(),u("main",null,[l("header",st,[l("div",nt,[l("h1",ot,k(a(N)),1),l("p",{class:G(["text-lg font-medium",{"text-transparent":a(v)===null}])},k(a(v)||"â €"),3)])]),l("div",null,[l("section",rt,[m(r,{tag_data:a(o)},null,8,["tag_data"]),a(h).length>0?(_(),u("ul",it,[(_(!0),u(J,null,K(a(h),x=>(_(),u("li",{key:x._path,class:"article-item"},[m(B,{article:x,post_prefix:a(n).public.post_prefix,tag_prefix:a(n).public.tag_prefix},null,8,["article","post_prefix","tag_prefix"])]))),128))])):(_(),u("p",lt,"No articles found."))]),m(V,{count_data:a(o),how:"tag"},null,8,["count_data"])])])}}});export{xt as default};
