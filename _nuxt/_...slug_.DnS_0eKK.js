import g from"./post.DAggaVJd.js";import{_ as w}from"./comment.vue.0flwSzGu.js";import{g as C,h as q,B as b,k,c as B,b as d,q as r,y as A,o as E}from"./entry.C2rY5sRJ.js";import{g as P}from"./query.BqB4qWRx.js";import{u as R,q as f}from"./query.oDidLsmQ.js";import"./one.vue.BdsoVIdi.js";import"./one.vue.CAKCCmSK.js";import"./toc.B9PFetOx.js";import"./ContentRenderer.D46G3Lkz.js";import"./ContentRendererMarkdown.vue.Lpqn5-Rw.js";import"./preview.BJiAKhRh.js";import"./prev_next.hf-OFn_c.js";const $={id:"main"},J=C({__name:"[...slug]",async setup(j){var u,p,_;let e,n;const s=A();let{path:t}=q();if(t===s.public.post_prefix||t===s.public.post_prefix+"/")throw b({statusCode:404,statusMessage:"Post not found"});const h="/"+(t.split("/").at(1)??"");t="/"+t.split("/").slice(2).join("/"),t.endsWith("/")&&(t=t.slice(0,-1));const a=P(),{data:o}=([e,n]=k(async()=>R(`selected_data_with_surround_${t}`,async()=>{const l=f(a).where({_path:t}).findOne(),m=f(a).only(["_path","title","description"]).findSurround(t);return{article:await l,surround:await m}})),e=await e,n(),e);let i,c;(u=o.value)!=null&&u.surround&&([i,c]=(p=o.value)==null?void 0:p.surround);const x=(_=o.value)==null?void 0:_.article;return(l,m)=>{const y=g,v=w;return E(),B("main",$,[d(y,{article:r(x),prev:r(i),next:r(c),prefix:h},null,8,["article","prev","next"]),d(v)])}}});export{J as default};
