import g from"./C3-bNbJK.js";import{_ as w}from"./CXrrJGSy.js";import{g as C,h as q,B as b,k,c as B,b as d,q as r,y as A,o as E}from"./C2y3-RzO.js";import{g as P}from"./BqB4qWRx.js";import{u as R,q as f}from"./s--K8XbQ.js";import"./JGE7VnTY.js";import"./DtHmZJDI.js";import"./CP6GOnYT.js";import"./D4zAtoCC.js";import"./BlKjDvfu.js";import"./Dnd51l0P.js";import"./BZmWmc8B.js";import"./Bsz-xcbC.js";const $={id:"main"},K=C({__name:"[...slug]",async setup(j){var u,p,_;let e,n;const s=A();let{path:t}=q();if(t===s.public.post_prefix||t===s.public.post_prefix+"/")throw b({statusCode:404,statusMessage:"Post not found"});const h="/"+(t.split("/").at(1)??"");t="/"+t.split("/").slice(2).join("/"),t.endsWith("/")&&(t=t.slice(0,-1));const a=P(),{data:o}=([e,n]=k(async()=>R(`selected_data_with_surround_${t}`,async()=>{const m=f(a).where({_path:t}).findOne(),l=f(a).only(["_path","title","description"]).findSurround(t);return{article:await m,surround:await l}})),e=await e,n(),e);let i,c;(u=o.value)!=null&&u.surround&&([i,c]=(p=o.value)==null?void 0:p.surround);const x=(_=o.value)==null?void 0:_.article;return(m,l)=>{const y=g,v=w;return E(),B("main",$,[d(y,{article:r(x),prev:r(i),next:r(c),prefix:h},null,8,["article","prev","next"]),d(v)])}}});export{K as default};
