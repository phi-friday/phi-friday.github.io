import{_ as E}from"./select.vue.b7b12f70.js";import{_ as F}from"./item.vue.288fbc2c.js";import H from"./pagination.612050d1.js";import{a as M,U as R,r as V,N as G,b as r,ah as I,H as K,O as L,K as O,X as U,G as X,f as i,p,C as x,u as a,q as j,i as m,F as J,B as Q,e as T,P as W,o as c,ay as Y}from"./entry.7322345b.js";import{u as Z,q as ee}from"./query.4e8c3306.js";import{g as te}from"./query.f5aceab6.js";import{r as ae}from"./data_type.9bdab8d3.js";import"./one.vue.f36484cf.js";/* empty css                       */import"./utils.f10e66b0.js";const se={class:"page-heading"},ne={class:"wrapper"},oe={class:"text-5xl font-extrabold"},re={class:"page-section"},pe={key:0,class:"article-list"},le={key:1},xe=M({__name:"@page",async setup(ie){let u,d;const s=R(),n=T(),q=()=>{let e;return!s.query.page||Array.isArray(s.query.page)?e=1:e=Number(s.query.page),e||(e=1),e},_=n.public.default_limit,b=()=>{const e=q();return n.public.default_skip+_*(e-1)},l=V(),f=()=>{l.value=b()};f();const g=G(),k=r(()=>[...g.value].sort((e,t)=>e.localeCompare(t))),A=te(),{data:w}=([u,d]=I(()=>Z("maybe_page_data",()=>ee(A).only(["title","page","description","_path","date"]).skip(n.public.default_skip).find())),u=await u,d(),u),C=ae(w),o=r(()=>C.value.filter(e=>{var t;return(t=e.page)==null?void 0:t.length})),N=r(()=>W().value.size>0),$=()=>{if(N.value)return;const e=new Map;o.value.forEach(t=>{e.set(t.page,(e.get(t.page)??0)+1)}),Y(e)},y=r(()=>{$();const e=g.value;return e.size===0?o.value.slice(l.value,l.value+_):o.value.filter(t=>e.has(t.page)).slice(l.value,l.value+_)});K(()=>{s.query.select&&!Array.isArray(s.query.select)&&o.value.map(e=>e.page).includes(s.query.select)&&L(new Set([s.query.select]))}),O(()=>s.query,()=>{f()});const z=U(),B=r(()=>`All pages: ${z.value}`),h=r(()=>{if(g.value.size>0)return`Selected pages: ${k.value}`});return X({title:`${n.public.name} - All pages`,meta:[{hid:"description",name:"description",content:"All posts with pages"}]}),(e,t)=>{const P=E,S=F,D=H;return c(),i("main",null,[p("header",se,[p("div",ne,[p("h1",oe,x(a(B)),1),p("p",{class:j(["text-lg font-medium",{"text-transparent":a(h)===null}])},x(a(h)||"â €"),3)])]),p("div",null,[p("section",re,[m(P,{page_data:a(o)},null,8,["page_data"]),a(y).length>0?(c(),i("ul",pe,[(c(!0),i(J,null,Q(a(y),v=>(c(),i("li",{key:v._path,class:"article-item"},[m(S,{article:v,post_prefix:a(n).public.post_prefix,page_prefix:a(n).public.page_prefix},null,8,["article","post_prefix","page_prefix"])]))),128))])):(c(),i("p",le,"No articles found."))]),m(D,{count_data:a(o),how:"page"},null,8,["count_data"])])])}}});export{xe as default};
