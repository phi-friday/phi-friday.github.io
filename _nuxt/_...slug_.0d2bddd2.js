import{_ as D}from"./select.vue.abd4377b.js";import{_ as H}from"./item.vue.666036f9.js";import I from"./pagination.920b6fb5.js";import{a as L,E as M,h as R,Y as T,i,ah as F,I as P,a6 as W,C as Y,Z,H as j,b as u,q as l,L as k,u as a,s as G,e as m,V as J,W as K,k as O,ad as Q,o as _,aA as U}from"./entry.1bd2ff67.js";import{u as X,q as tt}from"./query.9c6589dc.js";import{g as et}from"./query.f5aceab6.js";import{r as at}from"./data_type.9bdab8d3.js";import"./one.vue.3454a5bb.js";/* empty css                       */import"./utils.13affbe6.js";const st={class:"page-heading"},nt={class:"wrapper"},ot={class:"text-5xl font-extrabold"},rt={class:"page-section"},it={key:0,class:"article-list"},lt={key:1},xt=L({__name:"[...slug]",async setup(ct){let p,f;const s=M(),n=O(),b=()=>{let t;return!s.query.page||Array.isArray(s.query.page)?t=1:t=Number(s.query.page),t||(t=1),t},g=n.public.default_limit,q=()=>{const t=b();return n.public.default_skip+g*(t-1)},c=R(),y=()=>{c.value=q()};y();const d=T(),A=i(()=>[...d.value].sort((t,e)=>t.localeCompare(e))),w=et(),{data:C}=([p,f]=F(()=>X("maybe_tagged_data",()=>tt(w).only(["title","description","tags","_path","date"]).skip(n.public.default_skip).find())),p=await p,f(),p),z=at(C),o=i(()=>z.value.filter(t=>{var e;return(e=t.tags)==null?void 0:e.length})),S=i(()=>Q().value.size>0),$=()=>{if(S.value)return;const t=new Map;o.value.forEach(e=>{e.tags.forEach(r=>{t.set(r,(t.get(r)??0)+1)})}),U(t)},h=i(()=>{$();const t=d.value;return t.size===0?o.value.slice(c.value,c.value+g):o.value.filter(e=>[...new Set(e.tags)].filter(r=>t.has(r)).length==t.size).slice(c.value,c.value+g)});P(()=>{if(s.query.select&&!Array.isArray(s.query.select)){for(const t of o.value)if(t.tags&&t.tags.includes(s.query.select)){W(new Set([s.query.select]));break}}}),Y(()=>s.query,()=>{y()});const E=Z(),N=i(()=>`All tagged posts: ${E.value}`),v=i(()=>{if(d.value.size>0)return`Selected tags: ${A.value}`});return j({title:`${n.public.name} - All tagged posts`,meta:[{hid:"description",name:"description",content:"All posts with tags"}]}),(t,e)=>{const r=D,B=H,V=I;return _(),u("main",null,[l("header",st,[l("div",nt,[l("h1",ot,k(a(N)),1),l("p",{class:G(["text-lg font-medium",{"text-transparent":a(v)===null}])},k(a(v)||"â €"),3)])]),l("div",null,[l("section",rt,[m(r,{tag_data:a(o)},null,8,["tag_data"]),a(h).length>0?(_(),u("ul",it,[(_(!0),u(J,null,K(a(h),x=>(_(),u("li",{key:x._path,class:"article-item"},[m(B,{article:x,post_prefix:a(n).public.post_prefix,tag_prefix:a(n).public.tag_prefix},null,8,["article","post_prefix","tag_prefix"])]))),128))])):(_(),u("p",lt,"No articles found."))]),m(V,{count_data:a(o),how:"tag"},null,8,["count_data"])])])}}});export{xt as default};
