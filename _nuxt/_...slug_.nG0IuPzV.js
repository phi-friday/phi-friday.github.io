import{_ as F}from"./select.vue.CwCIlpJX.js";import{_ as H}from"./item.vue.DyA96wCH.js";import M from"./pagination.D1GePHWX.js";import{g as R,h as T,r as V,C as j,j as l,k as G,l as I,D as L,m as P,E as J,u as K,c as u,a as i,t as k,q as a,v as O,b as m,F as Q,x as U,y as W,o as _,G as X,H as Y}from"./entry.Cjh_-4e3.js";import{g as Z}from"./query.BqB4qWRx.js";import{u as tt,q as et}from"./query.DTsgJbrC.js";import{r as at}from"./data_type.m8tIw_LP.js";import"./one.vue.kP5VeVPe.js";import"./ArrowPathRoundedSquareIcon.CExut-h1.js";import"./preview.D9HWtsl3.js";const st={class:"page-heading"},nt={class:"wrapper"},ot={class:"text-5xl font-extrabold"},rt={class:"page-section"},lt={key:0,class:"article-list"},it={key:1},xt=R({__name:"[...slug]",async setup(ct){let p,f;const s=T(),n=W(),b=()=>{let t;return!s.query.page||Array.isArray(s.query.page)?t=1:t=Number(s.query.page),t||(t=1),t},g=n.public.default_limit,q=()=>{const t=b();return n.public.default_skip+g*(t-1)},c=V(),y=()=>{c.value=q()};y();const d=j(),w=l(()=>[...d.value].sort((t,e)=>t.localeCompare(e))),A=Z(),{data:C}=([p,f]=G(()=>tt("maybe_tagged_data",()=>et(A).only(["title","description","tags","_path","date"]).skip(n.public.default_skip).find())),p=await p,f(),p),z=at(C),o=l(()=>z.value.filter(t=>{var e;return(e=t.tags)==null?void 0:e.length})),S=l(()=>X().value.size>0),$=()=>{if(S.value)return;const t=new Map;o.value.forEach(e=>{e.tags.forEach(r=>{t.set(r,(t.get(r)??0)+1)})}),Y(t)},h=l(()=>{$();const t=d.value;return t.size===0?o.value.slice(c.value,c.value+g):o.value.filter(e=>[...new Set(e.tags)].filter(r=>t.has(r)).length==t.size).slice(c.value,c.value+g)});I(()=>{if(s.query.select&&!Array.isArray(s.query.select)){for(const t of o.value)if(t.tags&&t.tags.includes(s.query.select)){L(new Set([s.query.select]));break}}}),P(()=>s.query,()=>{y()});const E=J(),N=l(()=>`All tagged posts: ${E.value}`),v=l(()=>{if(d.value.size>0)return`Selected tags: ${w.value}`});return K({title:`${n.public.name} - All tagged posts`,meta:[{hid:"description",name:"description",content:"All posts with tags"}]}),(t,e)=>{const r=F,B=H,D=M;return _(),u("main",null,[i("header",st,[i("div",nt,[i("h1",ot,k(a(N)),1),i("p",{class:O(["text-lg font-medium",{"text-transparent":a(v)===null}])},k(a(v)||"â €"),3)])]),i("div",null,[i("section",rt,[m(r,{tag_data:a(o)},null,8,["tag_data"]),a(h).length>0?(_(),u("ul",lt,[(_(!0),u(Q,null,U(a(h),x=>(_(),u("li",{key:x._path,class:"article-item"},[m(B,{article:x,post_prefix:a(n).public.post_prefix,tag_prefix:a(n).public.tag_prefix},null,8,["article","post_prefix","tag_prefix"])]))),128))])):(_(),u("p",it,"No articles found."))]),m(D,{count_data:a(o),how:"tag"},null,8,["count_data"])])])}}});export{xt as default};
