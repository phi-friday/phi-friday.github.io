import{u as N,_ as D,a as W}from"./CtM0errV.js";import{o as _,b as i,e as l,a as b,t as k,f as t,i as F,k as E,q as H,h as g,w as q,F as M,r as B,n as T,v as A,c as I,B as O,l as m,C as Z,_ as G,x as J,y as K}from"./lzQ-8W9p.js";import{_ as R}from"./DxUlgGgL.js";import{a as w}from"./CL2zlHIW.js";import{g as Q}from"./BqB4qWRx.js";import{u as U,q as X}from"./BDvDGVIe.js";import"./C8gxUBFu.js";function Y(x,n){return _(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 0 1 3.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 1 0-1.06 1.06l3 3a.75.75 0 0 0 1.06 0l3-3a.75.75 0 0 0-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 0 0-4.392-4.392 49.422 49.422 0 0 0-7.436 0A4.756 4.756 0 0 0 3.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 1 0 1.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 0 1 3.01-3.01c1.19-.09 2.392-.135 3.605-.135Zm-6.97 6.22a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 0 0 4.392 4.392 49.413 49.413 0 0 0 7.436 0 4.756 4.756 0 0 0 4.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 0 0-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 0 1-3.01 3.01 47.953 47.953 0 0 1-7.21 0 3.256 3.256 0 0 1-3.01-3.01 47.759 47.759 0 0 1-.1-1.759L6.97 15.53a.75.75 0 0 0 1.06-1.06l-3-3Z","clip-rule":"evenodd"})])}function ee(x,n){return _(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M5.25 2.25a3 3 0 0 0-3 3v4.318a3 3 0 0 0 .879 2.121l9.58 9.581c.92.92 2.39 1.186 3.548.428a18.849 18.849 0 0 0 5.441-5.44c.758-1.16.492-2.629-.428-3.548l-9.58-9.581a3 3 0 0 0-2.122-.879H5.25ZM6.375 7.5a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Z","clip-rule":"evenodd"})])}const te={class:"page-heading"},ae={class:"wrapper"},se={class:"text-5xl font-extrabold"},ne=b({__name:"header",setup(x){const n=N();return(a,c)=>(_(),i("header",te,[l("div",ae,[l("h1",se," All tagged posts: "+k(t(n).selected_posts[0]),1)])]))}}),oe={class:"mb-2"},re={class:"flex row-span-1 row-start-1 gap-x-2"},le=b({__name:"select",setup(x){const n=A(),a=N(),c=F(),f=F(),o=()=>{var u,r,s;a.toggle?(u=c.value)==null||u.appendChild(f.value):(r=c.value)!=null&&r.hasChildNodes()&&((s=c.value)==null||s.removeChild(f.value))};return E(o),H(()=>a.toggle,o),(u,r)=>{const s=R,v=D;return _(),i(M,null,[l("div",oe,[l("div",re,[l("div",{class:"cta w-icon",onClick:r[0]||(r[0]=(...p)=>t(a).clear_selected&&t(a).clear_selected(...p))},[g(s,{to:`${t(w)(t(n).public.tag_prefix)}`},{default:q(()=>[g(t(Y),{class:"icon solid"}),r[2]||(r[2]=l("span",null," Reset",-1))]),_:1},8,["to"])]),l("button",{class:"cta w-icon",onClick:r[1]||(r[1]=p=>t(a).toggle=!t(a).toggle)},[g(t(ee),{class:"icon solid"}),r[3]||(r[3]=l("span",null,"Tags",-1))])])]),l("div",{ref_key:"tag_parent_ref",ref:c,class:T(["tag-list",{active:t(a).toggle}])},[l("ul",{ref_key:"tag_ref",ref:f,class:"flex flex-wrap article-tags"},[(_(!0),i(M,null,B(t(a).sorted_by_count,([p,d],y)=>(_(),i("div",{key:y},[g(v,{class:"font-semibold",tag:p,count:d,add_tag:!0},null,8,["tag","count"])]))),128))],512)],2)],64)}}}),ce={class:"wrapper"},_e={class:"text-2xl font-semibold"},ie={class:"flex-wrap article-tags"},ue={class:"font-mono text-sm font-thin text-slate-400"},pe=b({__name:"item",props:{article:{},post_prefix:{},tag_prefix:{},add_tag:{type:Boolean}},setup(x){var r;const n=x,a=n.article,c=/\d{4}-[01]{1}\d{1}-[0-3]{1}\d{1}/;if(!c.test(a.date))throw I({statusCode:400,statusMessage:`invalid date string: ${a.date}`});const f=(r=a.date.match(c))==null?void 0:r.at(0),o=[...new Set(a.tags)].sort((s,v)=>s.localeCompare(v)),u=(s,v,p=void 0)=>{let d=p;return d||(d=n.post_prefix),!s||!d?w(s??void 0):s.startsWith("/")?w(d+s):w(d+"/"+s)};return(s,v)=>{const p=D,d=R;return _(),i("div",null,[g(d,{to:u(t(a)._path)},{default:q(()=>[l("div",ce,[l("header",null,[l("h1",_e,k(t(a).title),1),l("p",null,k(t(a).description),1),l("ul",ie,[(_(!0),i(M,null,B(t(o),(y,$)=>(_(),i("div",{key:$},[g(p,{tag:y,add_tag:n.add_tag,use_link:!1},null,8,["tag","add_tag"])]))),128))]),l("p",ue," created at: "+k(t(f)),1)])])]),_:1},8,["to"])])}}}),de={class:"page-section"},ge={key:0,class:"article-list"},fe={key:1},ve=b({__name:"body",setup(x){const n=A(),a=N();return(c,f)=>{const o=le,u=pe;return _(),i("section",de,[g(o),t(a).tagged_posts.length>0?(_(),i("ul",ge,[(_(!0),i(M,null,B(t(a).selected_posts[1],r=>(_(),i("li",{key:r._path,class:"article-item"},[g(u,{article:r,post_prefix:t(n).public.post_prefix,tag_prefix:t(n).public.tag_prefix},null,8,["article","post_prefix","tag_prefix"])]))),128))])):(_(),i("p",fe,"No articles found."))])}}}),me={class:"flex justify-center mb-3"},he={class:"flex list-none"},xe=b({__name:"footer",setup(x){const n=A(),a=O(),c=N(),f=m(()=>{const e=c.selected_posts[0],h=Math.floor(e/n.public.default_limit);return e%n.public.default_limit?h+1:h}),o=n.public.pagination_size,u=m(()=>Math.floor(f.value/o)),r=m(()=>f.value%o),s=F(1),v=m(()=>{let e=Math.floor(s.value/o);return s.value%o===0&&(e-=1),e}),p=m(()=>{const e=s.value%o;return e===0?o:e}),d=m(()=>{let e=!0;return v.value===0&&(e=e&&!1),(v.value===u.value||v.value+1===u.value&&p.value>0)&&(e=e&&!0),e}),y=m(()=>{let e=!0;return v.value===0&&(e=e&&!0),v.value===u.value&&(e=e&&!1),e}),$=m(()=>v.value<u.value||p.value===0?o:r.value),z=m(()=>{let e=Math.floor(s.value/o);return s.value%o||(e-=1),e*o+1}),L=m(()=>[...Array($.value).keys()].map(e=>e+z.value)),P=m(()=>{let e=L.value.at(0)??-1;return e>=2&&(e-=1),e}),j=m(()=>{let e=L.value.at(-1)??-1;return e<f.value&&(e+=1),e}),V=()=>{if(!c.selected.size)return;let e;if(a.query.page?e=Number(a.query.page):e=1,e>f.value)throw I({statusCode:400,statusMessage:`invalid page: ${s.value}`});s.value=e};return V(),H(()=>a.query,()=>{V()}),(e,h)=>{const S=R;return _(),i("div",me,[l("ul",he,[l("li",null,[g(S,{to:{path:t(w)(t(a).path),query:{page:t(P)}},class:T(["botton-text",{active:t(d),inactive:!t(d)}])},{default:q(()=>h[0]||(h[0]=[Z("Previous")])),_:1},8,["to","class"])]),(_(!0),i(M,null,B(t(L),C=>(_(),i("li",{key:C},[g(S,{to:{path:t(w)(t(a).path),query:{page:C}},class:T(["botton-text",{active:C!==t(p)+t(z)-1,select:C===t(p)+t(z)-1}])},{default:q(()=>[Z(k(C),1)]),_:2},1032,["to","class"])]))),128)),l("li",null,[g(S,{to:{path:t(w)(t(a).path),query:{page:t(j)}},class:T(["botton-text",{active:t(y),inactive:!t(y)}])},{default:q(()=>h[1]||(h[1]=[Z("Next")])),_:1},8,["to","class"])])])])}}}),ye=G(xe,[["__scopeId","data-v-34e67b9d"]]),Ne=b({__name:"[...slug]",async setup(x){let n,a;const c=O(),f=A(),o=N(),u=W(),r=Q(),{data:s}=([n,a]=J(()=>U("maybe_tagged_data",()=>X(r).only(["title","description","tags","_path","date"]).find())),n=await n,a(),n);return o.sync_posts(s.value),H(()=>c.query,()=>{u.sync_page_with_route(c),o.sync_selected_with_route(c)}),E(()=>{u.sync_page_with_route(c),o.sync_selected_with_route(c)}),K({title:`${f.public.name} - All tagged posts`,meta:[{hid:"description",name:"description",content:"All posts with tags"}]}),(v,p)=>{const d=ne,y=ve,$=ye;return _(),i("div",null,[g(d),g(y),g($)])}}});export{Ne as default};
