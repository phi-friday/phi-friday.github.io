[{"data":1,"prerenderedAt":475},["Reactive",2],{"selected_data_with_surround_/python/airflow2":3},{"article":4,"surround":469},{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"tags":11,"date":13,"publish":14,"body":15,"_type":464,"_id":465,"_source":466,"_file":467,"_extension":468},"/python/airflow2","python",false,"","airflow에서 간단하게 Task를 스킵하는 방법","TaskFlow API를 사용한다면, `skip_if`와 `run_if`를 사용하자",[6,12],"airflow","2024-08-09T08:40:32.711Z",true,{"type":16,"children":17,"toc":454},"root",[18,42,62,74,92,214,241,251,275,368,374,390,395,421,426,436,448],{"type":19,"tag":20,"props":21,"children":23},"element","h2",{"id":22},"airflow-210의-신기능-skip_if-run_if",[24,27,34,36],{"type":25,"value":26},"text","airflow 2.10의 신기능 ",{"type":19,"tag":28,"props":29,"children":31},"code",{"className":30},[],[32],{"type":25,"value":33},"skip_if",{"type":25,"value":35},", ",{"type":19,"tag":28,"props":37,"children":39},{"className":38},[],[40],{"type":25,"value":41},"run_if",{"type":19,"tag":43,"props":44,"children":45},"p",{},[46,48,53,55,60],{"type":25,"value":47},"최근 ",{"type":19,"tag":28,"props":49,"children":51},{"className":50},[],[52],{"type":25,"value":33},{"type":25,"value":54},"와 ",{"type":19,"tag":28,"props":56,"children":58},{"className":57},[],[59],{"type":25,"value":41},{"type":25,"value":61},"에 대한 pr을 요청했고, 여러 검토를 거쳐서 수락됐다.\n직접 작성하기도 했고, 2.10 출시와 함께 곧 사용 가능할 예정이므로,\n이와 관련하여 간략하게 글을 작성하기로 했다.",{"type":19,"tag":63,"props":64,"children":66},"h3",{"id":65},"skip_if란",[67,72],{"type":19,"tag":28,"props":68,"children":70},{"className":69},[],[71],{"type":25,"value":33},{"type":25,"value":73},"란",{"type":19,"tag":43,"props":75,"children":76},{},[77,82,84,90],{"type":19,"tag":28,"props":78,"children":80},{"className":79},[],[81],{"type":25,"value":33},{"type":25,"value":83},"는 조건을 만족할 때, 지정한 ",{"type":19,"tag":28,"props":85,"children":87},{"className":86},[],[88],{"type":25,"value":89},"Task",{"type":25,"value":91},"를 스킵하도록 하는 데코레이터다.\n사용 예시는 다음과 같다.",{"type":19,"tag":93,"props":94,"children":97},"pre",{"className":95,"code":96,"language":6,"meta":8,"style":8},"language-python shiki shiki-themes github-light github-dark","@task.skip_if(lambda context: context[\"task_instance\"].task_id == \"skip\")\n@task.bash()\ndef echo() -> str:\n    return \"echo 'run'\"\n",[98],{"type":19,"tag":28,"props":99,"children":100},{"__ignoreMap":8},[101,156,170,200],{"type":19,"tag":102,"props":103,"children":106},"span",{"class":104,"line":105},"line",1,[107,113,119,125,130,136,141,146,151],{"type":19,"tag":102,"props":108,"children":110},{"style":109},"--shiki-default:#6F42C1;--shiki-dark:#B392F0",[111],{"type":25,"value":112},"@task.skip_if",{"type":19,"tag":102,"props":114,"children":116},{"style":115},"--shiki-default:#24292E;--shiki-dark:#E1E4E8",[117],{"type":25,"value":118},"(",{"type":19,"tag":102,"props":120,"children":122},{"style":121},"--shiki-default:#D73A49;--shiki-dark:#F97583",[123],{"type":25,"value":124},"lambda",{"type":19,"tag":102,"props":126,"children":127},{"style":115},[128],{"type":25,"value":129}," context: context[",{"type":19,"tag":102,"props":131,"children":133},{"style":132},"--shiki-default:#032F62;--shiki-dark:#9ECBFF",[134],{"type":25,"value":135},"\"task_instance\"",{"type":19,"tag":102,"props":137,"children":138},{"style":115},[139],{"type":25,"value":140},"].task_id ",{"type":19,"tag":102,"props":142,"children":143},{"style":121},[144],{"type":25,"value":145},"==",{"type":19,"tag":102,"props":147,"children":148},{"style":132},[149],{"type":25,"value":150}," \"skip\"",{"type":19,"tag":102,"props":152,"children":153},{"style":115},[154],{"type":25,"value":155},")\n",{"type":19,"tag":102,"props":157,"children":159},{"class":104,"line":158},2,[160,165],{"type":19,"tag":102,"props":161,"children":162},{"style":109},[163],{"type":25,"value":164},"@task.bash",{"type":19,"tag":102,"props":166,"children":167},{"style":115},[168],{"type":25,"value":169},"()\n",{"type":19,"tag":102,"props":171,"children":173},{"class":104,"line":172},3,[174,179,184,189,195],{"type":19,"tag":102,"props":175,"children":176},{"style":121},[177],{"type":25,"value":178},"def",{"type":19,"tag":102,"props":180,"children":181},{"style":109},[182],{"type":25,"value":183}," echo",{"type":19,"tag":102,"props":185,"children":186},{"style":115},[187],{"type":25,"value":188},"() -> ",{"type":19,"tag":102,"props":190,"children":192},{"style":191},"--shiki-default:#005CC5;--shiki-dark:#79B8FF",[193],{"type":25,"value":194},"str",{"type":19,"tag":102,"props":196,"children":197},{"style":115},[198],{"type":25,"value":199},":\n",{"type":19,"tag":102,"props":201,"children":203},{"class":104,"line":202},4,[204,209],{"type":19,"tag":102,"props":205,"children":206},{"style":121},[207],{"type":25,"value":208},"    return",{"type":19,"tag":102,"props":210,"children":211},{"style":132},[212],{"type":25,"value":213}," \"echo 'run'\"\n",{"type":19,"tag":43,"props":215,"children":216},{},[217,223,225,231,233,239],{"type":19,"tag":28,"props":218,"children":220},{"className":219},[],[221],{"type":25,"value":222},"Context",{"type":25,"value":224},"를 사용할 수 있으므로,\n현재 실행중인 ",{"type":19,"tag":28,"props":226,"children":228},{"className":227},[],[229],{"type":25,"value":230},"DagRun",{"type":25,"value":232}," 또는 ",{"type":19,"tag":28,"props":234,"children":236},{"className":235},[],[237],{"type":25,"value":238},"TaskInstance",{"type":25,"value":240},"등을 참조하여 조건문을 실행할 수 있다.",{"type":19,"tag":63,"props":242,"children":244},{"id":243},"run_if란",[245,250],{"type":19,"tag":28,"props":246,"children":248},{"className":247},[],[249],{"type":25,"value":41},{"type":25,"value":73},{"type":19,"tag":43,"props":252,"children":253},{},[254,259,261,266,268,273],{"type":19,"tag":28,"props":255,"children":257},{"className":256},[],[258],{"type":25,"value":41},{"type":25,"value":260},"는 ",{"type":19,"tag":28,"props":262,"children":264},{"className":263},[],[265],{"type":25,"value":33},{"type":25,"value":267},"와 동일한 방식으로 사용하며,\n조건을 만족하는 경우에만 ",{"type":19,"tag":28,"props":269,"children":271},{"className":270},[],[272],{"type":25,"value":89},{"type":25,"value":274},"를 실행하도록 한다.\n사용 예시는 다음과 같다.",{"type":19,"tag":93,"props":276,"children":278},{"className":95,"code":277,"language":6,"meta":8,"style":8},"@task.run_if(lambda context: context[\"task_instance\"].task_id == \"run\")\n@task.bash()\ndef echo() -> str:\n    return \"echo 'run'\"\n",[279],{"type":19,"tag":28,"props":280,"children":281},{"__ignoreMap":8},[282,323,334,357],{"type":19,"tag":102,"props":283,"children":284},{"class":104,"line":105},[285,290,294,298,302,306,310,314,319],{"type":19,"tag":102,"props":286,"children":287},{"style":109},[288],{"type":25,"value":289},"@task.run_if",{"type":19,"tag":102,"props":291,"children":292},{"style":115},[293],{"type":25,"value":118},{"type":19,"tag":102,"props":295,"children":296},{"style":121},[297],{"type":25,"value":124},{"type":19,"tag":102,"props":299,"children":300},{"style":115},[301],{"type":25,"value":129},{"type":19,"tag":102,"props":303,"children":304},{"style":132},[305],{"type":25,"value":135},{"type":19,"tag":102,"props":307,"children":308},{"style":115},[309],{"type":25,"value":140},{"type":19,"tag":102,"props":311,"children":312},{"style":121},[313],{"type":25,"value":145},{"type":19,"tag":102,"props":315,"children":316},{"style":132},[317],{"type":25,"value":318}," \"run\"",{"type":19,"tag":102,"props":320,"children":321},{"style":115},[322],{"type":25,"value":155},{"type":19,"tag":102,"props":324,"children":325},{"class":104,"line":158},[326,330],{"type":19,"tag":102,"props":327,"children":328},{"style":109},[329],{"type":25,"value":164},{"type":19,"tag":102,"props":331,"children":332},{"style":115},[333],{"type":25,"value":169},{"type":19,"tag":102,"props":335,"children":336},{"class":104,"line":172},[337,341,345,349,353],{"type":19,"tag":102,"props":338,"children":339},{"style":121},[340],{"type":25,"value":178},{"type":19,"tag":102,"props":342,"children":343},{"style":109},[344],{"type":25,"value":183},{"type":19,"tag":102,"props":346,"children":347},{"style":115},[348],{"type":25,"value":188},{"type":19,"tag":102,"props":350,"children":351},{"style":191},[352],{"type":25,"value":194},{"type":19,"tag":102,"props":354,"children":355},{"style":115},[356],{"type":25,"value":199},{"type":19,"tag":102,"props":358,"children":359},{"class":104,"line":202},[360,364],{"type":19,"tag":102,"props":361,"children":362},{"style":121},[363],{"type":25,"value":208},{"type":19,"tag":102,"props":365,"children":366},{"style":132},[367],{"type":25,"value":213},{"type":19,"tag":63,"props":369,"children":371},{"id":370},"taskflow-api가-아닌-경우",[372],{"type":25,"value":373},"TaskFlow API가 아닌 경우",{"type":19,"tag":43,"props":375,"children":376},{},[377,382,383,388],{"type":19,"tag":28,"props":378,"children":380},{"className":379},[],[381],{"type":25,"value":33},{"type":25,"value":54},{"type":19,"tag":28,"props":384,"children":386},{"className":385},[],[387],{"type":25,"value":41},{"type":25,"value":389},"는 TaskFlow API에서만 사용 할 수 있다.\n그렇지 않을 경우 에러가 발생하도록 작성했다.",{"type":19,"tag":43,"props":391,"children":392},{},[393],{"type":25,"value":394},"이 기능은 신기능이긴 하지만, 특수한 기능이라기 보다는 단순한 문법 설탕에 가깝기 때문이다.",{"type":19,"tag":43,"props":396,"children":397},{},[398,404,406,412,414,419],{"type":19,"tag":28,"props":399,"children":401},{"className":400},[],[402],{"type":25,"value":403},"Operator",{"type":25,"value":405},"의 ",{"type":19,"tag":28,"props":407,"children":409},{"className":408},[],[410],{"type":25,"value":411},"pre_execute",{"type":25,"value":413},"를 사용하여 구현하였으니,\nTaskFlow API가 아니라면, ",{"type":19,"tag":28,"props":415,"children":417},{"className":416},[],[418],{"type":25,"value":411},{"type":25,"value":420},"를 사용하여 직접 구현 할 수 있다.",{"type":19,"tag":20,"props":422,"children":424},{"id":423},"마치며",[425],{"type":25,"value":423},{"type":19,"tag":43,"props":427,"children":428},{},[429,434],{"type":19,"tag":28,"props":430,"children":432},{"className":431},[],[433],{"type":25,"value":12},{"type":25,"value":435},"같은 거대한 프로젝트에 신기능을 추가하는 pr이 수락된 경험은 처음이다.\n이번 pr을 통과시키며 느낀 점이지만, 거대한 커뮤니티를 가진 프로젝트인 만큼, 굉장히 탄탄한 프로세스를 가지고 있는 것 같다.",{"type":19,"tag":43,"props":437,"children":438},{},[439,441,446],{"type":25,"value":440},"이렇게 유지관리가 잘 되고, 빠른 속도로 발전하는 것을 보면, 특별한 문제가 없다면 ",{"type":19,"tag":28,"props":442,"children":444},{"className":443},[],[445],{"type":25,"value":12},{"type":25,"value":447},"를 계속 사용하지 않을까.",{"type":19,"tag":449,"props":450,"children":451},"style",{},[452],{"type":25,"value":453},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":8,"searchDepth":455,"depth":455,"links":456},5,[457,463],{"id":22,"depth":158,"text":458,"children":459},"airflow 2.10의 신기능 skip_if, run_if",[460,461,462],{"id":65,"depth":172,"text":65},{"id":243,"depth":172,"text":243},{"id":370,"depth":172,"text":373},{"id":423,"depth":158,"text":423},"markdown","content:python:airflow2.md","content","python/airflow2.md","md",[470,471],null,{"_path":472,"title":473,"description":474},"/python/polars_v1","pandas를 대체하는 polars의 첫 major 업데이트","api 변경점이 많아서 고칠게 많지만 그래도 좋다",1724250867307]