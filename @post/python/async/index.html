<!DOCTYPE html><html  lang="ko" data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>phi.log - python의 비동기에 대한 얕은 이해</title>
<style>@media (prefers-color-scheme:dark){html:not(.light) .markdown-alert{--color-border-default:#30363d;--color-accent-fg:#58a6ff;--color-accent-emphasis:#1f6feb;--color-danger-fg:#f85149;--color-danger-emphasis:#da3633;--color-attention-fg:#d29922;--color-attention-emphasis:#9e6a03;--color-done-fg:#a371f7;--color-done-emphasis:#8957e5;--color-success-fg:#3fb950;--color-success-emphasis:#238636}}html.dark .markdown-alert{--color-border-default:#30363d;--color-accent-fg:#58a6ff;--color-accent-emphasis:#1f6feb;--color-danger-fg:#f85149;--color-danger-emphasis:#da3633;--color-attention-fg:#d29922;--color-attention-emphasis:#9e6a03;--color-done-fg:#a371f7;--color-done-emphasis:#8957e5;--color-success-fg:#3fb950;--color-success-emphasis:#238636}@media (prefers-color-scheme:light){.markdown-alert{--color-border-default:#d0d7de;--color-accent-fg:#0969da;--color-accent-emphasis:#0969da;--color-danger-fg:#d1242f;--color-danger-emphasis:#cf222e;--color-attention-fg:#9a6700;--color-attention-emphasis:#9a6700;--color-done-fg:#8250df;--color-done-emphasis:#8250df;--color-success-fg:#1a7f37;--color-success-emphasis:#1f883d}}.markdown-alert{border-left:.25em solid var(--borderColor-default,var(--color-border-default));color:inherit;margin-bottom:16px;padding:.5rem 1em}.markdown-alert>:last-child{margin-bottom:0!important}.markdown-alert .markdown-alert-title{align-items:center;display:flex;font-size:14px;font-weight:500;line-height:1}.markdown-alert .markdown-alert-title svg.octicon{margin-right:8px!important;margin-right:var(--base-size-8,8px)!important;fill:currentColor}.markdown-alert.markdown-alert-note{border-left-color:var(--borderColor-accent-emphasis,var(--color-accent-emphasis))}.markdown-alert.markdown-alert-note .markdown-alert-title{color:var(--color-accent-fg);color:var(--fgColor-accent,var(--color-accent-fg))}.markdown-alert.markdown-alert-tip{border-left-color:var(--borderColor-success-emphasis,var(--color-success-emphasis))}.markdown-alert.markdown-alert-tip .markdown-alert-title{color:var(--color-success-fg);color:var(--fgColor-success,var(--color-success-fg))}.markdown-alert.markdown-alert-important{border-left-color:var(--borderColor-done-emphasis,var(--color-done-emphasis))}.markdown-alert.markdown-alert-important .markdown-alert-title{color:var(--color-done-fg);color:var(--fgColor-done,var(--color-done-fg))}.markdown-alert.markdown-alert-warning{border-left-color:var(--borderColor-attention-emphasis,var(--color-attention-emphasis))}.markdown-alert.markdown-alert-warning .markdown-alert-title{color:var(--color-attention-fg);color:var(--fgColor-attention,var(--color-attention-fg))}.markdown-alert.markdown-alert-caution{border-left-color:var(--borderColor-danger-emphasis,var(--color-danger-emphasis))}.markdown-alert.markdown-alert-caution .markdown-alert-title{color:var(--color-danger-fg);color:var(--fgColor-danger,var(--color-danger-fg))}

/*! tailwindcss v3.4.10 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:Satoshi,ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.container{width:100%}@media (min-width:390px){.container{max-width:390px}}@media (min-width:430px){.container{max-width:430px}}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-bottom:1.2em;margin-top:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);font-weight:500;text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-bottom:1.25em;margin-top:1.25em;padding-inline-start:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-bottom:1.25em;margin-top:1.25em;padding-inline-start:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-counters);font-weight:400}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-bottom:3em;margin-top:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){border-inline-start-color:var(--tw-prose-quote-borders);border-inline-start-width:.25rem;color:var(--tw-prose-quotes);font-style:italic;font-weight:500;margin-bottom:1.6em;margin-top:1.6em;padding-inline-start:1em;quotes:"\201C""\201D""\2018""\2019"}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:2.25em;font-weight:800;line-height:1.1111111;margin-bottom:.8888889em;margin-top:0}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:900}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.5em;font-weight:700;line-height:1.3333333;margin-bottom:1em;margin-top:2em}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:800}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.25em;font-weight:600;line-height:1.6;margin-bottom:.6em;margin-top:1.6em}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;line-height:1.5;margin-bottom:.5em;margin-top:1.5em}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-bottom:2em;margin-top:2em}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.3125rem;box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows)/10%),0 3px 0 rgb(var(--tw-prose-kbd-shadows)/10%);color:var(--tw-prose-kbd);font-family:inherit;font-size:.875em;font-weight:500;padding-inline-end:.375em;padding-bottom:.1875em;padding-top:.1875em;padding-inline-start:.375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-size:.875em;font-weight:600}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:var(--tw-prose-pre-bg);border-radius:.375rem;color:var(--tw-prose-pre-code);font-size:.875em;font-weight:400;line-height:1.7142857;margin-bottom:1.7142857em;margin-top:1.7142857em;overflow-x:auto;padding-inline-end:1.1428571em;padding-bottom:.8571429em;padding-top:.8571429em;padding-inline-start:1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-radius:0;border-width:0;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em;line-height:1.7142857;margin-bottom:2em;margin-top:2em;table-layout:auto;width:100%}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-th-borders);border-bottom-width:1px}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em;vertical-align:bottom}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-td-borders);border-bottom-width:1px}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-color:var(--tw-prose-th-borders);border-top-width:1px}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgba(0,0,0,.5);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.5em;margin-top:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-top:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border-width:0;white-space:nowrap}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.bottom-20{bottom:5rem}.bottom-5{bottom:1.25rem}.right-5{right:1.25rem}.top-0{top:0}.col-span-full{grid-column:1/-1}.row-span-1{grid-row:span 1/span 1}.row-start-1{grid-row-start:1}.m-auto{margin:auto}.mx-auto{margin-left:auto;margin-right:auto}.my-0{margin-bottom:0;margin-top:0}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mr-2{margin-right:.5rem}.ms-2{margin-inline-start:.5rem}.mt-10{margin-top:2.5rem}.mt-4{margin-top:1rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.inline-table{display:inline-table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.h-12{height:3rem}.h-3\.5{height:.875rem}.h-4{height:1rem}.h-8{height:2rem}.h-screen{height:100vh}.max-h-\[calc\(100vh-6rem\)\]{max-height:calc(100vh - 6rem)}.w-3\.5{width:.875rem}.w-36{width:9rem}.w-4{width:1rem}.w-8{width:2rem}.w-full{width:100%}.min-w-0{min-width:0}.max-w-3xl{max-width:48rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-rows-2{grid-template-rows:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.flex-nowrap{flex-wrap:nowrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-16{gap:4rem}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.gap-x-3{-moz-column-gap:.75rem;column-gap:.75rem}.gap-x-5{-moz-column-gap:1.25rem;column-gap:1.25rem}.gap-x-6{-moz-column-gap:1.5rem;column-gap:1.5rem}.overflow-auto{overflow:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-t{border-top-width:1px}.border-blue-500{--tw-border-opacity:1;border-color:#3b82f6;border-color:rgb(59 130 246/var(--tw-border-opacity))}.border-gray-300{--tw-border-opacity:1;border-color:#d1d5db;border-color:rgb(209 213 219/var(--tw-border-opacity))}.border-slate-100{--tw-border-opacity:1;border-color:#f1f5f9;border-color:rgb(241 245 249/var(--tw-border-opacity))}.border-slate-200{--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity))}.border-slate-700{--tw-border-opacity:1;border-color:#334155;border-color:rgb(51 65 85/var(--tw-border-opacity))}.border-white{--tw-border-opacity:1;border-color:#fff;border-color:rgb(255 255 255/var(--tw-border-opacity))}.border-opacity-30{--tw-border-opacity:0.3}.bg-gray-50{--tw-bg-opacity:1;background-color:#f9fafb;background-color:rgb(249 250 251/var(--tw-bg-opacity))}.bg-neutral-500{--tw-bg-opacity:1;background-color:#737373;background-color:rgb(115 115 115/var(--tw-bg-opacity))}.bg-red-500{--tw-bg-opacity:1;background-color:#ef4444;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.bg-slate-100{--tw-bg-opacity:1;background-color:#f1f5f9;background-color:rgb(241 245 249/var(--tw-bg-opacity))}.bg-slate-200{--tw-bg-opacity:1;background-color:#e2e8f0;background-color:rgb(226 232 240/var(--tw-bg-opacity))}.bg-slate-50{--tw-bg-opacity:1;background-color:#f8fafc;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.bg-slate-700{--tw-bg-opacity:1;background-color:#334155;background-color:rgb(51 65 85/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.to-emerald-600{--tw-gradient-to:#059669 var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-2{padding:.5rem}.p-2\.5{padding:.625rem}.p-4{padding:1rem}.px-3\.5{padding-left:.875rem;padding-right:.875rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-12{padding-bottom:3rem;padding-top:3rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-2\.5{padding-bottom:.625rem;padding-top:.625rem}.py-4{padding-bottom:1rem;padding-top:1rem}.pb-0{padding-bottom:0}.pb-2{padding-bottom:.5rem}.ps-3{padding-inline-start:.75rem}.pt-1{padding-top:.25rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-semibold{font-weight:600}.font-thin{font-weight:100}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-normal{line-height:1.5}.leading-tight{line-height:1.25}.tracking-tight{letter-spacing:-.025em}.text-black{--tw-text-opacity:1;color:#000;color:rgb(0 0 0/var(--tw-text-opacity))}.text-blue-700{--tw-text-opacity:1;color:#1d4ed8;color:rgb(29 78 216/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:#111827;color:rgb(17 24 39/var(--tw-text-opacity))}.text-neutral-400{--tw-text-opacity:1;color:#a3a3a3;color:rgb(163 163 163/var(--tw-text-opacity))}.text-neutral-700{--tw-text-opacity:1;color:#404040;color:rgb(64 64 64/var(--tw-text-opacity))}.text-slate-400{--tw-text-opacity:1;color:#94a3b8;color:rgb(148 163 184/var(--tw-text-opacity))}.text-slate-500{--tw-text-opacity:1;color:#64748b;color:rgb(100 116 139/var(--tw-text-opacity))}.text-slate-600{--tw-text-opacity:1;color:#475569;color:rgb(71 85 105/var(--tw-text-opacity))}.text-slate-700{--tw-text-opacity:1;color:#334155;color:rgb(51 65 85/var(--tw-text-opacity))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}.no-underline{text-decoration-line:none}.shadow-\[0_4px_9px_-4px_\#8C8C8C\]{--tw-shadow:0 4px 9px -4px #8c8c8c;--tw-shadow-colored:0 4px 9px -4px var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 4px 9px -4px #8c8c8c;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-\[0_4px_9px_-4px_\#dc4c64\]{--tw-shadow:0 4px 9px -4px #dc4c64;--tw-shadow-colored:0 4px 9px -4px var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 4px 9px -4px #dc4c64;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.blur{--tw-blur:blur(8px);filter:blur(8px) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur,.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-lg{--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-150,.transition-all{transition-duration:.15s}*{scroll-margin:5rem}html{scroll-behavior:smooth}body{--tw-text-opacity:1;color:#000;color:rgb(0 0 0/var(--tw-text-opacity))}body:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}body{--tw-bg-opacity:1;background-color:#fff;background-color:rgb(255 255 255/var(--tw-bg-opacity))}body:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#000;background-color:rgb(0 0 0/var(--tw-bg-opacity))}a{text-decoration:underline}h1,h2,h3,h4,h5,h6{font-family:Cabinet Grotesk,ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}hr:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity))}.icon{display:inline-flex;height:1.5rem;width:1.5rem}.icon.solid{fill:#64748b}.icon.solid:where([class~=dark],[class~=dark] *){fill:#e5e5e5}.icon.stroke{stroke:#64748b}.icon.stroke:where([class~=dark],[class~=dark] *){stroke:#e5e5e5}.cta{border-radius:.5rem;border-width:1px;font-weight:600;padding:.375rem .5rem;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.cta:hover{--tw-translate-y:-0.125rem;transform:translate(var(--tw-translate-x),-.125rem) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cta:active{--tw-translate-y:0.125rem;transform:translate(var(--tw-translate-x),.125rem) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-shadow:inset 0 2px 4px 0 rgba(0,0,0,.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,inset 0 2px 4px 0 rgba(0,0,0,.05);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.cta{--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#f8fafc;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.cta:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.cta.w-icon{align-items:center;display:flex;gap:.5rem;padding-right:.75rem}.article-tags{display:flex;gap:.5rem;padding-bottom:.5rem;padding-top:.5rem}.article-tags .tag{border-radius:.375rem;font-size:.875rem;line-height:1.25rem;padding:.5rem;padding-bottom:.125rem!important;padding-top:.125rem!important;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.article-tags .tag:hover{--tw-translate-y:-0.125rem;transform:translate(var(--tw-translate-x),-.125rem) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.tag{--tw-text-opacity:1;color:#334155;color:rgb(51 65 85/var(--tw-text-opacity))}.tag:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#fafafa;color:rgb(250 250 250/var(--tw-text-opacity))}.tag{--tw-bg-opacity:1;background-color:#f1f5f9;background-color:rgb(241 245 249/var(--tw-bg-opacity))}.tag:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity))}.tag.select{--tw-bg-opacity:1;background-color:#bae6fd;background-color:rgb(186 230 253/var(--tw-bg-opacity))}.tag.select:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#334155;background-color:rgb(51 65 85/var(--tw-bg-opacity))}.tag-list{align-items:center;border-color:transparent;border-radius:.5rem;border-width:1px;gap:.5rem;padding:.5rem}.tag-list.active{--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity))}.tag-list.active:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#e5e5e5;border-color:rgb(229 229 229/var(--tw-border-opacity))}.page-heading{--tw-bg-opacity:1;background-color:#f8fafc;background-color:rgb(248 250 252/var(--tw-bg-opacity));padding:3rem}.page-heading:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.page-heading>.wrapper,.page-section{margin:auto;max-width:48rem}.page-section{padding:2rem 1rem}.article-list{display:flex;flex-direction:column;gap:1.5rem}.article-item{border-top-width:1px;padding-top:1.5rem}.article-item:first-of-type{border-style:none}.article-item{--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity))}.article-item:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#404040;border-color:rgb(64 64 64/var(--tw-border-opacity))}.article-item a{text-decoration-line:none}.article-item>*>.wrapper{align-items:flex-start;display:flex;gap:1rem}.hover\:bg-blue-500:hover{--tw-bg-opacity:1;background-color:#3b82f6;background-color:rgb(59 130 246/var(--tw-bg-opacity))}.hover\:bg-neutral-100:hover{--tw-bg-opacity:1;background-color:#f5f5f5;background-color:rgb(245 245 245/var(--tw-bg-opacity))}.hover\:bg-neutral-600:hover{--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.hover\:bg-red-600:hover{--tw-bg-opacity:1;background-color:#dc2626;background-color:rgb(220 38 38/var(--tw-bg-opacity))}.hover\:bg-slate-100:hover{--tw-bg-opacity:1;background-color:#f1f5f9;background-color:rgb(241 245 249/var(--tw-bg-opacity))}.hover\:bg-slate-800:hover{--tw-bg-opacity:1;background-color:#1e293b;background-color:rgb(30 41 59/var(--tw-bg-opacity))}.hover\:text-white:hover{--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}.hover\:shadow-\[0_8px_9px_-4px_rgba\(10\2c 10\2c 10\2c 0\.3\)\2c 0_4px_18px_0_rgba\(10\2c 10\2c 10\2c 0\.2\)\]:hover{--tw-shadow:0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.hover\:shadow-\[0_8px_9px_-4px_rgba\(220\2c 76\2c 100\2c 0\.3\)\2c 0_4px_18px_0_rgba\(220\2c 76\2c 100\2c 0\.2\)\]:hover{--tw-shadow:0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:bg-neutral-600:focus{--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.focus\:bg-red-600:focus{--tw-bg-opacity:1;background-color:#dc2626;background-color:rgb(220 38 38/var(--tw-bg-opacity))}.focus\:shadow-\[0_8px_9px_-4px_rgba\(10\2c 10\2c 10\2c 0\.3\)\2c 0_4px_18px_0_rgba\(10\2c 10\2c 10\2c 0\.2\)\]:focus{--tw-shadow:0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:shadow-\[0_8px_9px_-4px_rgba\(220\2c 76\2c 100\2c 0\.3\)\2c 0_4px_18px_0_rgba\(220\2c 76\2c 100\2c 0\.2\)\]:focus{--tw-shadow:0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color),var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color),0 0 #0000;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus\:ring-slate-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(100 116 139/var(--tw-ring-opacity))}.focus-visible\:outline:focus-visible{outline-style:solid}.focus-visible\:outline-2:focus-visible{outline-width:2px}.active\:shadow-\[0_8px_9px_-4px_rgba\(10\2c 10\2c 10\2c 0\.3\)\2c 0_4px_18px_0_rgba\(10\2c 10\2c 10\2c 0\.2\)\]:active{--tw-shadow:0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.active\:shadow-\[0_8px_9px_-4px_rgba\(220\2c 76\2c 100\2c 0\.3\)\2c 0_4px_18px_0_rgba\(220\2c 76\2c 100\2c 0\.2\)\]:active{--tw-shadow:0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}@media (min-width:390px){.minima0\:w-44{width:11rem}}@media (min-width:768px){.md\:col-span-2{grid-column:span 2/span 2}.md\:col-span-6{grid-column:span 6/span 6}.md\:col-start-1{grid-column-start:1}.md\:row-start-1{grid-row-start:1}.md\:text-5xl{font-size:3rem;line-height:1}}.dark\:border-neutral-600:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity))}.dark\:bg-neutral-600:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.dark\:bg-neutral-700:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity))}.dark\:bg-neutral-900:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.dark\:text-neutral-300:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#d4d4d4;color:rgb(212 212 212/var(--tw-text-opacity))}.dark\:text-neutral-500:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#737373;color:rgb(115 115 115/var(--tw-text-opacity))}.dark\:text-neutral-700:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#404040;color:rgb(64 64 64/var(--tw-text-opacity))}.dark\:text-slate-500:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#64748b;color:rgb(100 116 139/var(--tw-text-opacity))}.dark\:placeholder-neutral-400:where([class~=dark],[class~=dark] *)::-moz-placeholder{--tw-placeholder-opacity:1;color:#a3a3a3;color:rgb(163 163 163/var(--tw-placeholder-opacity))}.dark\:placeholder-neutral-400:where([class~=dark],[class~=dark] *)::placeholder{--tw-placeholder-opacity:1;color:#a3a3a3;color:rgb(163 163 163/var(--tw-placeholder-opacity))}.dark\:hover\:bg-neutral-700:hover:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity))}</style>
<style>html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.sr-only{height:1px!important;margin:-1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;width:1px!important;clip:rect(0,0,0,0)!important;border:0!important;white-space:nowrap!important}</style>
<style>*,:after,:before{border:0 solid #e5e7eb;border-color:var(--un-default-border-color,#e5e7eb);box-sizing:border-box}html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}</style>
<style>.error .error-code[data-v-f5a51b94]{font-size:1.25rem;font-weight:600;line-height:1.75rem;--tw-text-opacity:1;color:#475569;color:rgb(71 85 105/var(--tw-text-opacity))}@media (min-width:640px){.error .error-code[data-v-f5a51b94]{font-size:1.875rem;line-height:2.25rem}}.error .error-code[data-v-f5a51b94]:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#737373;color:rgb(115 115 115/var(--tw-text-opacity))}.error .error-message[data-v-f5a51b94]{font-size:1.875rem;font-weight:700;letter-spacing:-.025em;line-height:2.25rem;margin-top:1rem;--tw-text-opacity:1;color:#111827;color:rgb(17 24 39/var(--tw-text-opacity))}@media (min-width:640px){.error .error-message[data-v-f5a51b94]{font-size:3rem;line-height:1}}.error .error-message[data-v-f5a51b94]:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#64748b;color:rgb(100 116 139/var(--tw-text-opacity))}.go-home[data-v-f5a51b94]{border-radius:.375rem;font-size:.875rem;font-weight:600;line-height:1.25rem;padding:.625rem .875rem;--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 1px 2px 0 rgba(0,0,0,.05);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);--tw-text-opacity:1;color:#334155;color:rgb(51 65 85/var(--tw-text-opacity))}.go-home[data-v-f5a51b94]:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#fafafa;color:rgb(250 250 250/var(--tw-text-opacity))}.go-home[data-v-f5a51b94]{--tw-bg-opacity:1;background-color:#e2e8f0;background-color:rgb(226 232 240/var(--tw-bg-opacity))}.go-home[data-v-f5a51b94]:hover{--tw-bg-opacity:1;background-color:#f1f5f9;background-color:rgb(241 245 249/var(--tw-bg-opacity))}.go-home[data-v-f5a51b94]:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity))}.go-home[data-v-f5a51b94]:where([class~=dark],[class~=dark] *):hover{--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.go-home[data-v-f5a51b94]:focus-visible{outline-color:#475569;outline-offset:2px;outline-style:solid;outline-width:2px}</style>
<style>.site-header[data-v-926b0c3a]{background-color:rgba(241,245,249,.4);background-color:rgb(241 245 249/var(--tw-bg-opacity));position:sticky;top:0;width:100%;--tw-bg-opacity:0.4;border-bottom-width:2px;border-color:hsla(0,0%,100%,.3);border-color:rgb(255 255 255/var(--tw-border-opacity));padding:1rem;z-index:20;--tw-border-opacity:0.3;--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.site-header[data-v-926b0c3a]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#262626;border-color:rgb(38 38 38/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.site-logo[data-v-926b0c3a]{font-weight:900}</style>
<style>.search-form[data-v-6b80b5d9]{align-items:center;display:flex;margin-left:auto;margin-right:auto;min-width:0;width:9rem}@media (min-width:390px){.search-form[data-v-6b80b5d9]{width:11rem}}@media (min-width:430px){.search-form[data-v-6b80b5d9]{width:100%}}.search-label[data-v-6b80b5d9]{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border-width:0;font-size:.875rem;font-weight:500;line-height:1.25rem;margin:-1px -1px .5rem;white-space:nowrap;--tw-text-opacity:1;color:#111827;color:rgb(17 24 39/var(--tw-text-opacity))}.search-label[data-v-6b80b5d9]:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}.search-form .search-form-input[data-v-6b80b5d9]{border-radius:.5rem;border-width:1px;display:block;font-size:.875rem;line-height:1.25rem;padding:.625rem;padding-inline-start:.75rem;width:100%;--tw-border-opacity:1;border-color:#d1d5db;border-color:rgb(209 213 219/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#f9fafb;background-color:rgb(249 250 251/var(--tw-bg-opacity));--tw-text-opacity:1;color:#111827;color:rgb(17 24 39/var(--tw-text-opacity))}.search-form .search-form-input[data-v-6b80b5d9]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity));--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}.search-form .search-form-input[data-v-6b80b5d9]:where([class~=dark],[class~=dark] *)::-moz-placeholder{--tw-placeholder-opacity:1;color:#a3a3a3;color:rgb(163 163 163/var(--tw-placeholder-opacity))}.search-form .search-form-input[data-v-6b80b5d9]:where([class~=dark],[class~=dark] *)::placeholder{--tw-placeholder-opacity:1;color:#a3a3a3;color:rgb(163 163 163/var(--tw-placeholder-opacity))}.search-form .search-form-input[data-v-6b80b5d9]:focus{--tw-border-opacity:1;border-color:#64748b;border-color:rgb(100 116 139/var(--tw-border-opacity));--tw-ring-opacity:1;--tw-ring-color:rgb(100 116 139/var(--tw-ring-opacity))}.search-form .search-form-button[data-v-6b80b5d9]{border-radius:.5rem;border-width:1px;font-size:.875rem;font-weight:500;line-height:1.25rem;margin-inline-start:.5rem;padding:.625rem}.search-form .search-form-button[data-v-6b80b5d9]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color),var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color),0 0 #0000;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.search-form .search-form-button[data-v-6b80b5d9]{--tw-border-opacity:1;border-color:#334155;border-color:rgb(51 65 85/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#334155;background-color:rgb(51 65 85/var(--tw-bg-opacity));--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}.search-form .search-form-button[data-v-6b80b5d9]:hover{--tw-bg-opacity:1;background-color:#1e293b;background-color:rgb(30 41 59/var(--tw-bg-opacity))}.search-form .search-form-button[data-v-6b80b5d9]:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(203 213 225/var(--tw-ring-opacity))}.search-form .search-form-button[data-v-6b80b5d9]:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.search-form .search-form-button[data-v-6b80b5d9]:hover:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity))}.search-form .search-form-button[data-v-6b80b5d9]:focus:where([class~=dark],[class~=dark] *){--tw-ring-opacity:1;--tw-ring-color:rgb(38 38 38/var(--tw-ring-opacity))}</style>
<style>.site-header[data-v-a5c6a556]{background-color:rgba(241,245,249,.4);background-color:rgb(241 245 249/var(--tw-bg-opacity));position:sticky;top:0;width:100%;--tw-bg-opacity:0.4;border-bottom-width:2px;border-color:hsla(0,0%,100%,.3);border-color:rgb(255 255 255/var(--tw-border-opacity));padding:1rem;z-index:20;--tw-border-opacity:0.3;--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.site-header[data-v-a5c6a556]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#262626;border-color:rgb(38 38 38/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.site-header>.wrapper[data-v-a5c6a556]{align-items:center;-moz-column-gap:1.25rem;column-gap:1.25rem;display:flex;justify-content:flex-start;margin:auto;max-width:72rem}.site-logo[data-v-a5c6a556]{font-weight:900}</style>
<style>.article-main[data-v-ce0ebc44]{margin:auto;max-width:64rem;padding:1rem}</style>
<style>.site-footer[data-v-5a1dd750]{border-top-width:1px;--tw-border-opacity:1;border-color:#f1f5f9;border-color:rgb(241 245 249/var(--tw-border-opacity));padding:3rem 1rem}.site-footer[data-v-5a1dd750]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#262626;border-color:rgb(38 38 38/var(--tw-border-opacity))}.site-footer>.wrapper[data-v-5a1dd750]{display:flex;flex-wrap:wrap;gap:4rem;justify-content:space-between;margin:auto;max-width:72rem}</style>
<style>.go-button[data-v-7eebdcdd]{border-radius:9999px;display:inline-block;line-height:1.5;padding:.5rem;position:fixed;text-transform:uppercase;transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.go-button[data-v-7eebdcdd]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color),var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color),0 0 #0000;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.go-button[data-v-7eebdcdd]{--tw-shadow:0 4px 9px -4px #dc4c64;--tw-shadow-colored:0 4px 9px -4px var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 4px 9px -4px #dc4c64;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);--tw-bg-opacity:1;background-color:#ef4444;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.go-button[data-v-7eebdcdd]:focus,.go-button[data-v-7eebdcdd]:hover{--tw-bg-opacity:1;background-color:#dc2626;background-color:rgb(220 38 38/var(--tw-bg-opacity))}.go-button[data-v-7eebdcdd]:active{--tw-bg-opacity:1;background-color:#b91c1c;background-color:rgb(185 28 28/var(--tw-bg-opacity))}.go-button[data-v-7eebdcdd]:active,.go-button[data-v-7eebdcdd]:focus,.go-button[data-v-7eebdcdd]:hover{--tw-shadow:0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.go-button.dark[data-v-7eebdcdd]{--tw-shadow:0 4px 9px -4px #8c8c8c;--tw-shadow-colored:0 4px 9px -4px var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 4px 9px -4px #8c8c8c;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);--tw-bg-opacity:1;background-color:#737373;background-color:rgb(115 115 115/var(--tw-bg-opacity))}.go-button.dark[data-v-7eebdcdd]:focus,.go-button.dark[data-v-7eebdcdd]:hover{--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.go-button.dark[data-v-7eebdcdd]:active{--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity))}.go-button.dark[data-v-7eebdcdd]:active,.go-button.dark[data-v-7eebdcdd]:focus,.go-button.dark[data-v-7eebdcdd]:hover{--tw-shadow:0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}</style>
<style>.article-header[data-v-4af769ba]{padding:1rem 1rem 3rem}.article-header .heading[data-v-4af769ba]{font-size:3rem;font-weight:800;line-height:1.25;word-break:keep-all}.article-header .supporting[data-v-4af769ba]{font-size:1.125rem;font-weight:500;line-height:1.75rem}</style>
<style>.article-section[data-v-dc61a9b8]{display:grid;grid-template-columns:repeat(8,minmax(0,1fr))}.aside[data-v-dc61a9b8]{grid-column:1/-1;grid-row-start:1;padding-top:3.5rem;width:100%}@media (min-width:768px){.aside[data-v-dc61a9b8]{grid-column:span 2/span 2}}.aside .toc[data-v-dc61a9b8]{position:sticky;top:5rem}.article[data-v-dc61a9b8]{grid-column:1/-1;width:100%}@media (min-width:768px){.article[data-v-dc61a9b8]{grid-column:span 6/span 6;grid-column-start:1;grid-row-start:1}}.article[data-v-dc61a9b8]{margin:auto;max-width:48rem;padding:1rem}</style>
<style>.toc[data-v-9aa87b76]{border-radius:.5rem;border-width:1px;max-height:calc(100vh - 6rem);overflow:auto;padding-bottom:1rem;padding-top:1rem;--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#f8fafc;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.toc[data-v-9aa87b76]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.toc-header[data-v-9aa87b76]{border-bottom-width:1px;margin-bottom:.5rem;--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity));padding-bottom:.5rem;padding-left:1rem;padding-right:1rem}.toc-header[data-v-9aa87b76]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity))}.toc-links[data-v-9aa87b76]{display:flex;flex-direction:column;gap:.5rem;padding-left:1rem;padding-right:1rem}.toc-link[data-v-9aa87b76]{font-size:.875rem;line-height:1.25rem;word-break:keep-all;--tw-text-opacity:1;color:#64748b;color:rgb(100 116 139/var(--tw-text-opacity))}.toc-link[data-v-9aa87b76]:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#d4d4d4;color:rgb(212 212 212/var(--tw-text-opacity))}.toc-link._3[data-v-9aa87b76]{padding-left:.75rem}.toc-link._4[data-v-9aa87b76]{padding-left:1.5rem}.toc-link._5[data-v-9aa87b76]{padding-left:2.25rem}.toc-link._undefined[data-v-9aa87b76]{padding-left:2rem}</style>
<style>.prev-next-cont[data-v-5d7182e6]{border-radius:.5rem;border-width:1px;display:flex;gap:1rem;justify-content:space-between;padding:1rem;--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity))}.prev-next-cont[data-v-5d7182e6]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity))}.link-item a[data-v-5d7182e6]{display:flex;gap:.5rem}</style>
<style>h2[data-v-341ecc23]{display:block;font-family:var(--typography-font-display);font-size:var(--prose-h2-fontSize);font-weight:var(--prose-h2-fontWeight);letter-spacing:var(--prose-h2-letterSpacing);line-height:var(--prose-h2-lineHeight);margin:var(--prose-h2-margin)}h2[data-v-341ecc23] .icon{display:inline-block;height:var(--prose-h2-iconSize);margin-inline-start:12px;opacity:0;transition:opacity .1s;width:var(--prose-h2-iconSize)}h2 a[data-v-341ecc23]:hover .icon{opacity:1}</style>
<style>code[data-v-e0bf7fb5]{background-color:var(--prose-code-inline-backgroundColor);border-radius:var(--prose-code-inline-borderRadius);color:var(--prose-code-inline-color);font-family:var(--typography-font-code);font-size:var(--prose-code-inline-fontSize);font-weight:var(--prose-code-inline-fontWeight);margin-left:1px;margin-right:1px;padding:var(--prose-code-inline-padding)}tbody code[data-v-e0bf7fb5]{font-size:var(--prose-tbody-code-inline-fontSize)}h1 a code[data-v-e0bf7fb5],h2 a code[data-v-e0bf7fb5],h3 a code[data-v-e0bf7fb5],h4 a code[data-v-e0bf7fb5],h5 a code[data-v-e0bf7fb5],h6 a code[data-v-e0bf7fb5]{border-radius:var(--prose-code-inline-borderRadius);color:var(--prose-code-inline-color);font-size:.777777em;padding:.15em .5em}a code[data-v-e0bf7fb5]{border-color:var(--prose-a-code-border-color-static);border-style:var(--prose-a-code-border-style);border-width:var(--prose-a-code-border-width);color:var(--prose-a-code-color-static)}a:hover code[data-v-e0bf7fb5]{background-color:var(--prose-a-code-background-hover);border-color:var(--prose-a-code-border-color-hover);color:var(--prose-a-code-color-hover)}</style>
<style>p[data-v-0d713d0e]{font-family:var(--typography-font-body);font-size:var(--prose-p-fontSize);line-height:var(--prose-p-lineHeight);margin:var(--prose-p-margin)}p[data-v-0d713d0e] br{content:"";display:block;margin:var(--prose-p-br-margin)}</style>
<style>pre code .line{display:block;min-height:1rem}</style>
<style>.prose-code[data-v-8c1416d9]{-webkit-backdrop-filter:var(--prose-code-block-backdropFilter);backdrop-filter:var(--prose-code-block-backdropFilter);background-color:var(--prose-code-block-backgroundColor);border-color:var(--prose-code-block-borderColor);border-radius:var(--prose-code-block-borderRadius);border-style:var(--prose-code-block-borderStyle);border-width:var(--prose-code-block-borderWidth);color:var(--prose-code-block-color);font-size:var(--prose-code-block-fontSize);margin:var(--prose-code-block-margin);overflow:hidden;position:relative;width:100%}.prose-code[data-v-8c1416d9] code{width:100%}.prose-code.highlight-bash[data-v-8c1416d9] code .line,.prose-code.highlight-sh[data-v-8c1416d9] code .line,.prose-code.highlight-shell[data-v-8c1416d9] code .line,.prose-code.highlight-shellscript[data-v-8c1416d9] code .line,.prose-code.highlight-zsh[data-v-8c1416d9] code .line{padding-inline-start:1rem;position:relative}.prose-code.highlight-bash[data-v-8c1416d9] code .line:before,.prose-code.highlight-sh[data-v-8c1416d9] code .line:before,.prose-code.highlight-shell[data-v-8c1416d9] code .line:before,.prose-code.highlight-shellscript[data-v-8c1416d9] code .line:before,.prose-code.highlight-zsh[data-v-8c1416d9] code .line:before{color:var(--typography-color-primary-500);content:">";display:block;font-family:var(--typography-font-mono);font-weight:700;inset-inline-start:-.1rem;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.copy-button[data-v-8c1416d9]{bottom:0;inset-inline-end:0;position:absolute}[data-v-8c1416d9] code{display:flex;flex-direction:column}[data-v-8c1416d9] .line{display:inline-table;min-height:1rem}.filename[data-v-8c1416d9]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);border-radius:var(--typography-radii-lg);color:var(--prose-code-block-color);font-family:var(--typography-font-code);font-size:var(--typography-fontSize-xs);inset-inline-end:0;line-height:var(--typography-lead-normal);padding:.5rem .75rem;position:absolute;top:0;transition:opacity .2s}.prose-code:hover .filename[data-v-8c1416d9]{opacity:0}.prose-code:hover .filename[data-v-8c1416d9]:hover{opacity:1}[data-v-8c1416d9] pre{display:flex;flex:1;line-height:var(--typography-lead-relaxed);margin:0;overflow-x:auto;padding:var(--prose-code-block-pre-padding)}[data-v-8c1416d9] pre code{padding-inline-end:30px}[data-v-8c1416d9] .line.highlight{background-color:var(--prose-code-block-border-color)}</style>
<style>button[data-v-9fbcde8f]{border-radius:3px;margin:4px;opacity:0;padding:4px;transform:scale(.75);transition:all .2s}button[data-v-9fbcde8f]:focus{box-shadow:0 0 0 2px var(--typography-color-primary-500);opacity:1;outline:none}button.show[data-v-9fbcde8f]{opacity:1;transform:scale(1)}button .icon-wrapper[data-v-9fbcde8f]{display:block;height:18px;position:relative;width:18px}button .icon-wrapper .icon[data-v-9fbcde8f]{display:block;position:absolute}button .icon-wrapper .fade-enter-active[data-v-9fbcde8f],button .icon-wrapper .fade-leave-active[data-v-9fbcde8f]{transition:opacity .2s}button .icon-wrapper .fade-enter-from[data-v-9fbcde8f],button .icon-wrapper .fade-leave-to[data-v-9fbcde8f]{opacity:0}</style>
<style>.icon[data-v-4b884699]{display:inline-block;vertical-align:middle}</style>
<style>h3[data-v-5547871f]{display:block;font-family:var(--typography-font-display);font-size:var(--prose-h3-fontSize);font-weight:var(--prose-h3-fontWeight);letter-spacing:var(--prose-h3-letterSpacing);line-height:var(--prose-h3-lineHeight);margin:var(--prose-h3-margin)}h3[data-v-5547871f] .icon{display:inline-block;height:var(--prose-h3-iconSize);margin-inline-start:12px;opacity:0;transition:opacity .1s;width:var(--prose-h3-iconSize)}h3 a[data-v-5547871f]:hover .icon{opacity:1}</style>
<style>ol[data-v-7ff04552]{font-family:var(--typography-font-body);list-style-type:var(--prose-ol-listStyleType);margin:var(--prose-ol-margin);padding-inline-start:var(--prose-ol-paddingInlineStart)}ol[data-v-7ff04552]> li::marker{color:var(--prose-ol-li-markerColor)}ol[data-v-7ff04552]> li ol,ol[data-v-7ff04552]> li ul{margin:0}</style>
<style>li[data-v-b2fb753b]{font-family:var(--typography-font-body);list-style-position:var(--prose-li-listStylePosition);margin:var(--prose-li-margin)}</style>
<style>blockquote[data-v-7c0d1497]{border-inline-start-color:var(--prose-blockquote-border-color);border-inline-start-style:var(--prose-blockquote-border-style);border-inline-start-width:var(--prose-blockquote-border-width);color:var(--prose-blockquote-color);font-family:var(--typography-font-body);margin:var(--prose-blockquote-margin);padding-inline-start:var(--prose-blockquote-paddingInlineStart);quotes:var(--prose-blockquote-quotes)}blockquote p[data-v-7c0d1497]:first-of-type:before,blockquote p[data-v-7c0d1497]:last-of-type:after{content:""}</style>
<style>a[data-v-b30d03ba]{border-bottom:var(--prose-a-border-width) var(--prose-a-border-style-static) var(--prose-a-border-color-static);color:var(--prose-a-color-static);font-family:var(--typography-font-body);font-weight:var(--prose-a-fontWeight);padding-bottom:var(--prose-a-border-distance);-webkit-text-decoration:var(--prose-a-textDecoration);text-decoration:var(--prose-a-textDecoration)}a[data-v-b30d03ba]:hover{border-color:var(--prose-a-border-color-hover);border-style:var(--prose-a-border-style-hover);color:var(--prose-a-color-hover)}a[data-v-b30d03ba]:has(img){border-width:0}a[data-v-b30d03ba]:has(code){border-bottom:var(--prose-a-hasCode-borderBottom)}a[data-v-b30d03ba]:has(code):hover{border-bottom:var(--prose-a-hasCode-borderBottom)}</style>
<link rel="stylesheet" href="/_nuxt/entry.4uPfcvK_.css">
<link rel="stylesheet" href="/_nuxt/_...BiCSTaIM.css">
<link rel="preload" href="https://api.fontshare.com/v2/css?f[]=cabinet-grotesk@1,800,500,100,700,400,300,200,900&f[]=satoshi@1,900,700,500,301,701,300,501,401,901,400,2&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/@post/python/async/_payload.json?ad561fae-7bb0-40c2-966c-c937f541787b">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B6AdUEP2.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DQ6A_m-2.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CVFLsRm7.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/EIvnCULT.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BRnZPSP8.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/3m921YxE.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cs6A_RqI.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DwaaFVav.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dx8ywAHZ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DJy5LwdY.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Kqe7BRM1.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DIGQasGF.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C8BcmXI8.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D_IAnxj4.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BqB4qWRx.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dkb1AjCm.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BCe6Pypi.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DbbNRspH.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/O_RUPlZ2.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CQgAxie5.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DRQTrRq-.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/lDgN3x--.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BkvNTSfK.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dnd51l0P.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BfJHDWmx.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DW-dXbNk.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Co-e314g.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/95c-yRal.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BXyhkZIM.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D6UvKTLi.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C8ERkHrs.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/EFMdbjC7.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/LPoYbi6U.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B7bI4Gr0.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BaTycJRb.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DHKf_BPU.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BSqT4woR.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CEoAmxj_.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/koA86Mgk.js">
<script defer src="https://cse.google.com/cse.js?cx=b368175c2b370414c"></script>
<meta name="author" content="phi.friday@gmail.com, phi">
<meta name="robots" content="index,follow,noarchive">
<meta name="google-site-verification" content="lW107Dj5ageygd67UUzTm-kGls5d-THy9jJQZqLoauw">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
<link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<noscript><link rel="stylesheet" href="https://api.fontshare.com/v2/css?f[]=cabinet-grotesk@1,800,500,100,700,400,300,200,900&f[]=satoshi@1,900,700,500,301,701,300,501,401,901,400,2&display=swap" /></noscript>
<meta name="description" content="코드 중심으로 알아보는 비동기">
<script type="module" src="/_nuxt/B6AdUEP2.js" crossorigin></script><style id="pinceau-runtime-hydratable"></style><style id="pinceau-theme">@media { :root {--pinceau-mq: initial; --prose-code-inline-padding: 0.2rem 0.375rem 0.2rem 0.375rem;--prose-code-block-backdropFilter: contrast(1);--prose-code-block-borderStyle: solid;--prose-code-block-borderWidth: 1px;--prose-tbody-tr-borderBottom-style: dashed;--prose-tbody-tr-borderBottom-width: 1px;--prose-th-textAlign: inherit;--prose-thead-borderBottom-style: solid;--prose-thead-borderBottom-width: 1px;--prose-thead-border-style: solid;--prose-thead-border-width: 0px;--prose-table-textAlign: start;--prose-hr-width: 1px;--prose-hr-style: solid;--prose-li-listStylePosition: outside;--prose-ol-li-markerColor: currentColor;--prose-ol-paddingInlineStart: 21px;--prose-ol-listStyleType: decimal;--prose-ul-li-markerColor: currentColor;--prose-ul-paddingInlineStart: 21px;--prose-ul-listStyleType: disc;--prose-blockquote-border-style: solid;--prose-blockquote-border-width: 4px;--prose-blockquote-quotes: '201C' '201D' '2018' '2019';--prose-blockquote-paddingInlineStart: 24px;--prose-a-code-color-hover: currentColor;--prose-a-hasCode-borderBottom: none;--prose-a-border-distance: 2px;--prose-a-border-color-hover: currentColor;--prose-a-border-color-static: currentColor;--prose-a-border-style-hover: solid;--prose-a-border-style-static: dashed;--prose-a-border-width: 1px;--prose-a-color-static: inherit;--prose-a-textDecoration: none;--prose-h6-margin: 3rem 0 2rem;--prose-h5-margin: 3rem 0 2rem;--prose-h4-margin: 3rem 0 2rem;--prose-h3-margin: 3rem 0 2rem;--prose-h2-margin: 3rem 0 2rem;--prose-h1-margin: 0 0 2rem;--typography-radii-full: 9999px;--typography-radii-6xl: 32px;--typography-radii-5xl: 28px;--typography-radii-4xl: 24px;--typography-radii-3xl: 20px;--typography-radii-2xl: 18px;--typography-radii-xl: 16px;--typography-radii-lg: 14px;--typography-radii-md: 12px;--typography-radii-sm: 10px;--typography-radii-xs: 8px;--typography-radii-2xs: 6px;--typography-radii-3xs: 4px;--typography-radii-4xs: 2px;--typography-radii-none: 0px;--typography-color-secondary-900: #121110;--typography-color-secondary-800: #201E1B;--typography-color-secondary-700: #36332E;--typography-color-secondary-600: #67635D;--typography-color-secondary-500: #97948F;--typography-color-secondary-400: #ADA9A4;--typography-color-secondary-300: #DBD9D3;--typography-color-secondary-200: #ECEBE8;--typography-color-secondary-100: #F6F5F4;--typography-color-secondary-50: #FBFBFB;--typography-color-primary-900: #001238;--typography-color-primary-800: #002370;--typography-color-primary-700: #0035a9;--typography-color-primary-600: #0047e1;--typography-color-primary-500: #1a62ff;--typography-color-primary-400: #407cff;--typography-color-primary-300: #6696ff;--typography-color-primary-200: #8db0ff;--typography-color-primary-100: #b3cbff;--typography-color-primary-50: #d9e5ff;--typography-color-black: #0E0D0D;--typography-color-white: #ffffff;--typography-font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;--typography-font-serif: ui-serif, Georgia, Cambria, Times New Roman, Times, serif;--typography-font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;--typography-lead-loose: 2;--typography-lead-relaxed: 1.625;--typography-lead-normal: 1.5;--typography-lead-snug: 1.375;--typography-lead-tight: 1.25;--typography-lead-none: 1;--typography-lead-10: 2.5rem;--typography-lead-9: 2.25rem;--typography-lead-8: 2rem;--typography-lead-7: 1.75rem;--typography-lead-6: 1.5rem;--typography-lead-5: 1.25rem;--typography-lead-4: 1rem;--typography-lead-3: .75rem;--typography-lead-2: .5rem;--typography-lead-1: .025rem;--typography-fontWeight-black: 900;--typography-fontWeight-extrabold: 800;--typography-fontWeight-bold: 700;--typography-fontWeight-semibold: 600;--typography-fontWeight-medium: 500;--typography-fontWeight-normal: 400;--typography-fontWeight-light: 300;--typography-fontWeight-extralight: 200;--typography-fontWeight-thin: 100;--typography-fontSize-9xl: 128px;--typography-fontSize-8xl: 96px;--typography-fontSize-7xl: 72px;--typography-fontSize-6xl: 60px;--typography-fontSize-5xl: 48px;--typography-fontSize-4xl: 36px;--typography-fontSize-3xl: 30px;--typography-fontSize-2xl: 24px;--typography-fontSize-xl: 20px;--typography-fontSize-lg: 18px;--typography-fontSize-base: 16px;--typography-fontSize-sm: 14px;--typography-fontSize-xs: 12px;--typography-letterSpacing-widest: 0.08em;--typography-letterSpacing-wider: 0.04em;--typography-letterSpacing-wide: 0.02em;--typography-letterSpacing-normal: 0em;--typography-letterSpacing-tight: -0.02em;--typography-letterSpacing-tighter: -0.04em;--typography-verticalMargin-base: 24px;--typography-verticalMargin-sm: 16px;--ease-back-inOut: cubic-bezier(0.68, -0.6, 0.32, 1.6);--ease-back-out: cubic-bezier(0.34, 1.56, 0.64, 1);--ease-back-in: cubic-bezier(0.36, 0, 0.66, -0.56);--ease-circ-inOut: cubic-bezier(0.85, 0, 0.15, 1);--ease-circ-out: cubic-bezier(0, 0.55, 0.45, 1);--ease-circ-in: cubic-bezier(0.55, 0, 1, 0.45);--ease-expo-inOut: cubic-bezier(0.87, 0, 0.13, 1);--ease-expo-out: cubic-bezier(0.16, 1, 0.3, 1);--ease-expo-in: cubic-bezier(0.7, 0, 0.84, 0);--ease-quint-inOut: cubic-bezier(0.83, 0, 0.17, 1);--ease-quint-out: cubic-bezier(0.22, 1, 0.36, 1);--ease-quint-in: cubic-bezier(0.64, 0, 0.78, 0);--ease-quart-inOut: cubic-bezier(0.76, 0, 0.24, 1);--ease-quart-out: cubic-bezier(0.25, 1, 0.5, 1);--ease-quart-in: cubic-bezier(0.5, 0, 0.75, 0);--ease-cubic-inOut: cubic-bezier(0.65, 0, 0.35, 1);--ease-cubic-out: cubic-bezier(0.33, 1, 0.68, 1);--ease-cubic-in: cubic-bezier(0.32, 0, 0.67, 0);--ease-quad-inOut: cubic-bezier(0.45, 0, 0.55, 1);--ease-quad-out: cubic-bezier(0.5, 1, 0.89, 1);--ease-quad-in: cubic-bezier(0.11, 0, 0.5, 0);--ease-sine-inOut: cubic-bezier(0.37, 0, 0.63, 1);--ease-sine-out: cubic-bezier(0.61, 1, 0.88, 1);--ease-sine-in: cubic-bezier(0.12, 0, 0.39, 0);--ease-default-inOut: cubic-bezier(0.4, 0, 0.2, 1);--ease-default-out: cubic-bezier(0, 0, 0.2, 1);--ease-default-in: cubic-bezier(0.4, 0, 1, 1);--ease-linear: cubic-bezier(0, 0, 1, 1);--lead-loose: 2;--lead-relaxed: 1.625;--lead-normal: 1.5;--lead-snug: 1.375;--lead-tight: 1.25;--lead-none: 1;--lead-10: 2.5rem;--lead-9: 2.25rem;--lead-8: 2rem;--lead-7: 1.75rem;--lead-6: 1.5rem;--lead-5: 1.25rem;--lead-4: 1rem;--lead-3: .75rem;--lead-2: .5rem;--lead-1: .025rem;--letterSpacing-widest: 0.08em;--letterSpacing-wider: 0.04em;--letterSpacing-wide: 0.02em;--letterSpacing-normal: 0em;--letterSpacing-tight: -0.02em;--letterSpacing-tighter: -0.04em;--fontSize-9xl: 8rem;--fontSize-8xl: 6rem;--fontSize-7xl: 4.5rem;--fontSize-6xl: 3.75rem;--fontSize-5xl: 3rem;--fontSize-4xl: 2.25rem;--fontSize-3xl: 1.875rem;--fontSize-2xl: 1.5rem;--fontSize-xl: 1.25rem;--fontSize-lg: 1.125rem;--fontSize-base: 1rem;--fontSize-sm: 0.875rem;--fontSize-xs: 0.75rem;--fontWeight-black: 900;--fontWeight-extrabold: 800;--fontWeight-bold: 700;--fontWeight-semibold: 600;--fontWeight-medium: 500;--fontWeight-normal: 400;--fontWeight-light: 300;--fontWeight-extralight: 200;--fontWeight-thin: 100;--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;--font-serif: ui-serif, Georgia, Cambria, Times New Roman, Times, serif;--font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;--opacity-total: 1;--opacity-high: 0.8;--opacity-medium: 0.5;--opacity-soft: 0.3;--opacity-light: 0.15;--opacity-bright: 0.1;--opacity-noOpacity: 0;--borderWidth-lg: 3px;--borderWidth-md: 2px;--borderWidth-sm: 1px;--borderWidth-noBorder: 0;--space-rem-875: 0.875rem;--space-rem-625: 0.625rem;--space-rem-375: 0.375rem;--space-rem-125: 0.125rem;--space-px: 1px;--space-96: 24rem;--space-80: 20rem;--space-72: 18rem;--space-64: 16rem;--space-60: 15rem;--space-56: 14rem;--space-52: 13rem;--space-48: 12rem;--space-44: 11rem;--space-40: 10rem;--space-36: 9rem;--space-32: 8rem;--space-28: 7rem;--space-24: 6rem;--space-20: 5rem;--space-16: 4rem;--space-14: 3.5rem;--space-12: 3rem;--space-11: 2.75rem;--space-10: 2.5rem;--space-9: 2.25rem;--space-8: 2rem;--space-7: 1.75rem;--space-6: 1.5rem;--space-5: 1.25rem;--space-4: 1rem;--space-3: 0.75rem;--space-2: 0.5rem;--space-1: 0.25rem;--space-0: 0px;--size-full: 100%;--size-7xl: 80rem;--size-6xl: 72rem;--size-5xl: 64rem;--size-4xl: 56rem;--size-3xl: 48rem;--size-2xl: 42rem;--size-xl: 36rem;--size-lg: 32rem;--size-md: 28rem;--size-sm: 24rem;--size-xs: 20rem;--size-200: 200px;--size-104: 104px;--size-80: 80px;--size-64: 64px;--size-56: 56px;--size-48: 48px;--size-40: 40px;--size-32: 32px;--size-24: 24px;--size-20: 20px;--size-16: 16px;--size-12: 12px;--size-8: 8px;--size-6: 6px;--size-4: 4px;--size-2: 2px;--size-0: 0px;--radii-full: 9999px;--radii-6xl: 32px;--radii-5xl: 28px;--radii-4xl: 24px;--radii-3xl: 20px;--radii-2xl: 18px;--radii-xl: 16px;--radii-lg: 14px;--radii-md: 12px;--radii-sm: 10px;--radii-xs: 8px;--radii-2xs: 6px;--radii-3xs: 4px;--radii-4xs: 2px;--radii-none: 0px;--shadow-none: 0px 0px 0px 0px transparent;--shadow-lg: 0px 10px 15px -3px #000000, 0px 4px 6px -4px #000000;--shadow-md: 0px 4px 6px -1px #000000, 0px 2px 4px -2px #000000;--shadow-sm: 0px 1px 3px 0px #000000, 0px 1px 2px -1px #000000;--shadow-xs: 0px 1px 2px 0px #000000;--height-screen: 100vh;--width-screen: 100vw;--color-ruby-900: #380011;--color-ruby-800: #700021;--color-ruby-700: #a90032;--color-ruby-600: #e10043;--color-ruby-500: #ff1a5e;--color-ruby-400: #ff4079;--color-ruby-300: #ff6694;--color-ruby-200: #ff8dae;--color-ruby-100: #ffb3c9;--color-ruby-50: #ffd9e4;--color-pink-900: #380025;--color-pink-800: #70004b;--color-pink-700: #a90070;--color-pink-600: #e10095;--color-pink-500: #ff1ab2;--color-pink-400: #ff40bf;--color-pink-300: #ff66cc;--color-pink-200: #ff8dd8;--color-pink-100: #ffb3e5;--color-pink-50: #ffd9f2;--color-purple-900: #080020;--color-purple-800: #14014A;--color-purple-700: #200273;--color-purple-600: #370DAD;--color-purple-500: #6B39FA;--color-purple-400: #8961FD;--color-purple-300: #A589F9;--color-purple-200: #E5DCFF;--color-purple-100: #F1ECFF;--color-purple-50: #F8F5FF;--color-violet-900: #190038;--color-violet-800: #330070;--color-violet-700: #4c00a9;--color-violet-600: #6500e1;--color-violet-500: #811aff;--color-violet-400: #9640ff;--color-violet-300: #ab66ff;--color-violet-200: #c08dff;--color-violet-100: #d5b3ff;--color-violet-50: #ead9ff;--color-royalblue-900: #0b0531;--color-royalblue-800: #160a62;--color-royalblue-700: #211093;--color-royalblue-600: #2c15c4;--color-royalblue-500: #4127e8;--color-royalblue-400: #614bec;--color-royalblue-300: #806ff0;--color-royalblue-200: #a093f3;--color-royalblue-100: #c0b7f7;--color-royalblue-50: #dfdbfb;--color-indigoblue-900: #001238;--color-indigoblue-800: #002370;--color-indigoblue-700: #0035a9;--color-indigoblue-600: #0047e1;--color-indigoblue-500: #1a62ff;--color-indigoblue-400: #407cff;--color-indigoblue-300: #6696ff;--color-indigoblue-200: #8db0ff;--color-indigoblue-100: #b3cbff;--color-indigoblue-50: #d9e5ff;--color-blue-900: #00131D;--color-blue-800: #002235;--color-blue-700: #013858;--color-blue-600: #01659E;--color-blue-500: #1AADFF;--color-blue-400: #64C7FF;--color-blue-300: #A1DDFF;--color-blue-200: #D0EEFF;--color-blue-100: #E2F4FF;--color-blue-50: #F2FAFF;--color-lightblue-900: #001A1F;--color-lightblue-800: #00232B;--color-lightblue-700: #013858;--color-lightblue-600: #0893B1;--color-lightblue-500: #1AD6FF;--color-lightblue-400: #55E1FF;--color-lightblue-300: #82E3FF;--color-lightblue-200: #C5F2FF;--color-lightblue-100: #DCF7FF;--color-lightblue-50: #F1FCFF;--color-teal-900: #062a28;--color-teal-800: #0b544f;--color-teal-700: #117d77;--color-teal-600: #16a79e;--color-teal-500: #1cd1c6;--color-teal-400: #36e4da;--color-teal-300: #5fe9e1;--color-teal-200: #87efe9;--color-teal-100: #aff4f0;--color-teal-50: #d7faf8;--color-pear-900: #2a2b09;--color-pear-800: #545512;--color-pear-700: #7e801b;--color-pear-600: #a8aa24;--color-pear-500: #d0d32f;--color-pear-400: #d8da52;--color-pear-300: #e0e274;--color-pear-200: #e8e997;--color-pear-100: #eff0ba;--color-pear-50: #f7f8dc;--color-red-900: #1C0301;--color-red-800: #340A01;--color-red-700: #550F00;--color-red-600: #AD2203;--color-red-500: #FF3B10;--color-red-400: #FF7353;--color-red-300: #FFA692;--color-red-200: #FFE6E1;--color-red-100: #FFF0EC;--color-red-50: #FFF9F8;--color-pumpkin-900: #381800;--color-pumpkin-800: #702f00;--color-pumpkin-700: #a94700;--color-pumpkin-600: #e15e00;--color-pumpkin-500: #ff7a1a;--color-pumpkin-400: #ff9040;--color-pumpkin-300: #ffa666;--color-pumpkin-200: #ffbd8d;--color-pumpkin-100: #ffd3b3;--color-pumpkin-50: #ffe9d9;--color-orange-900: #1A0A01;--color-orange-800: #2D1102;--color-orange-700: #3F1802;--color-orange-600: #7E3004;--color-orange-500: #FA630E;--color-orange-400: #FC8E51;--color-orange-300: #FDAC7E;--color-orange-200: #FFE5D7;--color-orange-100: #FFEFE5;--color-orange-50: #FFF7F2;--color-yellow-900: #1B1500;--color-yellow-800: #292100;--color-yellow-700: #463801;--color-yellow-600: #AB8A07;--color-yellow-500: #FBCA05;--color-yellow-400: #FFDC4E;--color-yellow-300: #FFE372;--color-yellow-200: #FFF3C0;--color-yellow-100: #FFF7D9;--color-yellow-50: #FFFCEE;--color-green-900: #00190F;--color-green-800: #002817;--color-green-700: #01492C;--color-green-600: #039B5A;--color-green-500: #0DD885;--color-green-400: #3CEEA5;--color-green-300: #86FBCB;--color-green-200: #C0FFE4;--color-green-100: #DBFFF0;--color-green-50: #ECFFF7;--color-gray-900: #121110;--color-gray-800: #1C1B19;--color-gray-700: #292724;--color-gray-600: #3D3B38;--color-gray-500: #97948F;--color-gray-400: #ADA9A4;--color-gray-300: #DBD9D3;--color-gray-200: #ECEBE8;--color-gray-100: #F3F3F2;--color-gray-50: #FBFBFB;--color-black: #0E0D0D;--color-white: #ffffff;--media-portrait: only screen and (orientation: portrait);--media-landscape: only screen and (orientation: landscape);--media-rm: (prefers-reduced-motion: reduce);--media-2xl: (min-width: 1536px);--media-xl: (min-width: 1280px);--media-lg: (min-width: 1024px);--media-md: (min-width: 768px);--media-sm: (min-width: 640px);--media-xs: (min-width: 475px);--prose-code-inline-backgroundColor: var(--typography-color-secondary-100);--prose-code-inline-color: var(--typography-color-secondary-700);--prose-code-inline-fontWeight: var(--typography-fontWeight-normal);--prose-code-inline-fontSize: var(--typography-fontSize-sm);--prose-code-inline-borderRadius: var(--typography-radii-3xs);--prose-code-block-pre-padding: var(--typography-verticalMargin-sm);--prose-code-block-backgroundColor: var(--typography-color-secondary-50);--prose-code-block-color: var(--typography-color-secondary-700);--prose-code-block-borderRadius: var(--typography-radii-3xs);--prose-code-block-borderColor: var(--typography-color-secondary-200);--prose-code-block-margin: var(--typography-verticalMargin-base) 0;--prose-code-block-fontSize: var(--typography-fontSize-sm);--prose-tbody-code-inline-fontSize: var(--typography-fontSize-sm);--prose-tbody-td-padding: var(--typography-verticalMargin-sm);--prose-tbody-tr-borderBottom-color: var(--typography-color-secondary-200);--prose-th-fontWeight: var(--typography-fontWeight-semibold);--prose-th-padding: 0 var(--typography-verticalMargin-sm) var(--typography-verticalMargin-sm) var(--typography-verticalMargin-sm);--prose-th-color: var(--typography-color-secondary-600);--prose-thead-borderBottom-color: var(--typography-color-secondary-200);--prose-thead-border-color: var(--typography-color-secondary-300);--prose-table-lineHeight: var(--typography-lead-6);--prose-table-fontSize: var(--typography-fontSize-sm);--prose-table-margin: var(--typography-verticalMargin-base) 0;--prose-hr-color: var(--typography-color-secondary-200);--prose-hr-margin: var(--typography-verticalMargin-base) 0;--prose-li-margin: var(--typography-verticalMargin-sm) 0;--prose-ol-margin: var(--typography-verticalMargin-base) 0;--prose-ul-margin: var(--typography-verticalMargin-base) 0;--prose-blockquote-border-color: var(--typography-color-secondary-200);--prose-blockquote-color: var(--typography-color-secondary-500);--prose-blockquote-margin: var(--typography-verticalMargin-base) 0;--prose-a-code-background-hover: var(--typography-color-primary-50);--prose-a-code-border-color-hover: var(--typography-color-primary-500);--prose-a-code-border-color-static: var(--typography-color-secondary-400);--prose-a-code-border-style: var(--prose-a-border-style-static);--prose-a-code-border-width: var(--prose-a-border-width);--prose-a-fontWeight: var(--typography-fontWeight-medium);--prose-a-color-hover: var(--typography-color-primary-500);--prose-img-borderRadius: var(--typography-radii-full);--prose-img-margin: var(--typography-verticalMargin-base) 0;--prose-strong-fontWeight: var(--typography-fontWeight-semibold);--prose-h6-iconSize: var(--typography-fontSize-base);--prose-h6-fontWeight: var(--typography-fontWeight-semibold);--prose-h6-lineHeight: var(--typography-lead-normal);--prose-h6-fontSize: var(--typography-fontSize-lg);--prose-h5-iconSize: var(--typography-fontSize-lg);--prose-h5-fontWeight: var(--typography-fontWeight-semibold);--prose-h5-lineHeight: var(--typography-lead-snug);--prose-h5-fontSize: var(--typography-fontSize-xl);--prose-h4-iconSize: var(--typography-fontSize-lg);--prose-h4-letterSpacing: var(--typography-letterSpacing-tight);--prose-h4-fontWeight: var(--typography-fontWeight-semibold);--prose-h4-lineHeight: var(--typography-lead-snug);--prose-h4-fontSize: var(--typography-fontSize-2xl);--prose-h3-iconSize: var(--typography-fontSize-xl);--prose-h3-letterSpacing: var(--typography-letterSpacing-tight);--prose-h3-fontWeight: var(--typography-fontWeight-semibold);--prose-h3-lineHeight: var(--typography-lead-snug);--prose-h3-fontSize: var(--typography-fontSize-3xl);--prose-h2-iconSize: var(--typography-fontSize-2xl);--prose-h2-letterSpacing: var(--typography-letterSpacing-tight);--prose-h2-fontWeight: var(--typography-fontWeight-semibold);--prose-h2-lineHeight: var(--typography-lead-tight);--prose-h2-fontSize: var(--typography-fontSize-4xl);--prose-h1-iconSize: var(--typography-fontSize-3xl);--prose-h1-letterSpacing: var(--typography-letterSpacing-tight);--prose-h1-fontWeight: var(--typography-fontWeight-bold);--prose-h1-lineHeight: var(--typography-lead-tight);--prose-h1-fontSize: var(--typography-fontSize-5xl);--prose-p-br-margin: var(--typography-verticalMargin-base) 0 0 0;--prose-p-margin: var(--typography-verticalMargin-base) 0;--prose-p-lineHeight: var(--typography-lead-normal);--prose-p-fontSize: var(--typography-fontSize-base);--typography-font-code: var(--typography-font-mono);--typography-font-body: var(--typography-font-sans);--typography-font-display: var(--typography-font-sans);--typography-body-backgroundColor: var(--typography-color-white);--typography-body-color: var(--typography-color-black);--text-6xl-lineHeight: var(--lead-none);--text-6xl-fontSize: var(--fontSize-6xl);--text-5xl-lineHeight: var(--lead-none);--text-5xl-fontSize: var(--fontSize-5xl);--text-4xl-lineHeight: var(--lead-10);--text-4xl-fontSize: var(--fontSize-4xl);--text-3xl-lineHeight: var(--lead-9);--text-3xl-fontSize: var(--fontSize-3xl);--text-2xl-lineHeight: var(--lead-8);--text-2xl-fontSize: var(--fontSize-2xl);--text-xl-lineHeight: var(--lead-7);--text-xl-fontSize: var(--fontSize-xl);--text-lg-lineHeight: var(--lead-7);--text-lg-fontSize: var(--fontSize-lg);--text-base-lineHeight: var(--lead-6);--text-base-fontSize: var(--fontSize-base);--text-sm-lineHeight: var(--lead-5);--text-sm-fontSize: var(--fontSize-sm);--text-xs-lineHeight: var(--lead-4);--text-xs-fontSize: var(--fontSize-xs);--shadow-2xl: 0px 25px 50px -12px var(--color-gray-900);--shadow-xl: 0px 20px 25px -5px var(--color-gray-400), 0px 8px 10px -6px #000000;--prose-a-code-color-static: var(--prose-code-inline-color); } }@media { :root.dark {--pinceau-mq: dark; --prose-code-block-backdropFilter: contrast(1);--prose-ol-li-markerColor: currentColor;--prose-ul-li-markerColor: currentColor;--prose-a-code-color-hover: currentColor;--prose-a-border-color-hover: currentColor;--prose-a-border-color-static: currentColor;--prose-a-color-static: inherit;--prose-code-inline-backgroundColor: var(--typography-color-secondary-700);--prose-code-inline-color: var(--typography-color-secondary-200);--prose-code-block-backgroundColor: var(--typography-color-secondary-900);--prose-code-block-color: var(--typography-color-secondary-200);--prose-code-block-borderColor: var(--typography-color-secondary-800);--prose-tbody-tr-borderBottom-color: var(--typography-color-secondary-800);--prose-th-color: var(--typography-color-secondary-400);--prose-thead-borderBottom-color: var(--typography-color-secondary-800);--prose-thead-border-color: var(--typography-color-secondary-600);--prose-hr-color: var(--typography-color-secondary-800);--prose-blockquote-border-color: var(--typography-color-secondary-700);--prose-blockquote-color: var(--typography-color-secondary-400);--prose-a-code-background-hover: var(--typography-color-primary-900);--prose-a-code-border-color-hover: var(--typography-color-primary-600);--prose-a-code-border-color-static: var(--typography-color-secondary-600);--prose-a-color-hover: var(--typography-color-primary-500);--typography-body-backgroundColor: var(--typography-color-black);--typography-body-color: var(--typography-color-white); } }</style><script>"use strict";(()=>{const t=window,e=document.documentElement,c=["dark","light"],n=getStorageValue("localStorage","nuxt-color-mode")||"system";let i=n==="system"?u():n;const r=e.getAttribute("data-color-mode-forced");r&&(i=r),l(i),t["__NUXT_COLOR_MODE__"]={preference:n,value:i,getColorScheme:u,addColorScheme:l,removeColorScheme:d};function l(o){const s=""+o+"",a="";e.classList?e.classList.add(s):e.className+=" "+s,a&&e.setAttribute("data-"+a,o)}function d(o){const s=""+o+"",a="";e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp(s,"g"),""),a&&e.removeAttribute("data-"+a)}function f(o){return t.matchMedia("(prefers-color-scheme"+o+")")}function u(){if(t.matchMedia&&f("").media!=="not all"){for(const o of c)if(f(":"+o).matches)return o}return"light"}})();function getStorageValue(t,e){switch(t){case"localStorage":return window.localStorage.getItem(e);case"sessionStorage":return window.sessionStorage.getItem(e);case"cookie":return getCookie(e);default:return null}}function getCookie(t){const c=("; "+window.document.cookie).split("; "+t+"=");if(c.length===2)return c.pop()?.split(";").shift()}</script></head><body><div id="__nuxt"><div><div><header class="site-header" data-v-926b0c3a><div class="flex flex-nowrap justify-between max-w-6xl m-auto" data-v-926b0c3a><div class="flex items-start justify-start gap-x-3" data-v-926b0c3a><a href="/" class="no-underline" data-v-926b0c3a><figure class="text-2xl site-logo" data-v-926b0c3a><h1 data-v-926b0c3a>phi.log</h1></figure></a><nav class="site-nav" data-v-926b0c3a><div class="flex flex-nowrap justify-start" data-v-926b0c3a><div class="justify-between grid grid-cols-1" data-v-926b0c3a><ul class="mr-2" data-v-926b0c3a><a href="/@tag/" class="no-underline" data-v-926b0c3a><figure class="pt-1 text-lg site-logo" data-v-926b0c3a><h1 data-v-926b0c3a>Tags</h1></figure></a></ul></div><ul class="w-8 h-8 my-0 shrink-0" data-v-926b0c3a><div data-v-926b0c3a><!--[--><!--[--><!--]--><!--]--></div></ul></div></nav></div><div class="flex shrink items-end justify-end gap-x-5" data-v-926b0c3a><div data-v-926b0c3a data-v-6b80b5d9><form class="search-form" data-v-6b80b5d9><label for="search-input" class="sr-only" data-v-6b80b5d9>Search</label><input class="search-form-input" type="text" id="search-input" placeholder="Google Search" required value="" data-v-6b80b5d9><button class="search-form-button" type="button" data-v-6b80b5d9><svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" data-v-6b80b5d9><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" data-v-6b80b5d9></path></svg><span class="sr-only" data-v-6b80b5d9>Search</span></button></form><div id="google-searchbox-container" class="flex items-center text-black" style="display:none;" data-v-6b80b5d9 data-v-a5c6a556><div class="gcse-searchbox-only" data-v-a5c6a556></div></div></div></div></div></header><!--[--><main id="main" data-v-ce0ebc44><div data-v-ce0ebc44><div class="article-main" data-v-ce0ebc44><header class="article-header" data-v-ce0ebc44 data-v-4af769ba><h1 class="mb-1 heading" data-v-4af769ba>python의 비동기에 대한 얕은 이해</h1><p class="mb-1 supporting" data-v-4af769ba>코드 중심으로 알아보는 비동기</p><ul class="flex-wrap pb-0 article-tags" data-v-4af769ba><p class="pt-1 font-mono text-sm font-thin text-slate-400" data-v-4af769ba>tags:</p><!--[--><div data-v-4af769ba><li class="tag" data-v-4af769ba><a href="/@tag/?select=python" class="">python</a></li></div><div data-v-4af769ba><li class="tag" data-v-4af769ba><a href="/@tag/?select=async" class="">async</a></li></div><!--]--></ul><p class="font-mono text-sm font-thin text-slate-400" data-v-4af769ba> created at: 2023-07-31</p></header><hr data-v-ce0ebc44><section class="article-section" data-v-ce0ebc44 data-v-dc61a9b8><aside class="aside" data-v-dc61a9b8><nav class="toc" data-v-dc61a9b8 data-v-9aa87b76><header class="toc-header" data-v-9aa87b76><h3 class="text-xl font-bold" data-v-9aa87b76>Table of contents</h3></header><ul class="toc-links" data-v-9aa87b76><!--[--><li id="toc-파이썬의-비동기-라이브러리-asyncio" class="_2 toc-link" data-v-9aa87b76><a href="#파이썬의-비동기-라이브러리-asyncio" data-v-9aa87b76>파이썬의 비동기 라이브러리 asyncio</a></li><li id="toc-왜-asynciorun을-실행해야-하는가" class="_3 toc-link" data-v-9aa87b76><a href="#왜-asynciorun을-실행해야-하는가" data-v-9aa87b76>왜 asyncio.run을 실행해야 하는가</a></li><li id="toc-대기할-수-있는-awaitable객체" class="_2 toc-link" data-v-9aa87b76><a href="#대기할-수-있는-awaitable객체" data-v-9aa87b76>대기할 수 있는 Awaitable객체</a></li><li id="toc-콜백-형태의-future" class="_3 toc-link" data-v-9aa87b76><a href="#콜백-형태의-future" data-v-9aa87b76>콜백 형태의 Future</a></li><li id="toc-future를-상속받는-task" class="_3 toc-link" data-v-9aa87b76><a href="#future를-상속받는-task" data-v-9aa87b76>Future를 상속받는 Task</a></li><li id="toc-future와-task는-언제-사용할까" class="_2 toc-link" data-v-9aa87b76><a href="#future와-task는-언제-사용할까" data-v-9aa87b76>Future와 Task는 언제 사용할까</a></li><li id="toc-task가-필요한-상황" class="_3 toc-link" data-v-9aa87b76><a href="#task가-필요한-상황" data-v-9aa87b76>Task가 필요한 상황</a></li><li id="toc-future가-필요한-상황" class="_3 toc-link" data-v-9aa87b76><a href="#future가-필요한-상황" data-v-9aa87b76>Future가 필요한 상황</a></li><li id="toc-요약하자면" class="_2 toc-link" data-v-9aa87b76><a href="#요약하자면" data-v-9aa87b76>요약하자면</a></li><li id="toc-추가하자면" class="_3 toc-link" data-v-9aa87b76><a href="#추가하자면" data-v-9aa87b76>추가하자면</a></li><!--]--></ul></nav></aside><article class="article page" data-v-dc61a9b8><!--[--><div class="nuxt-content" data-v-dc61a9b8><h2 id="파이썬의-비동기-라이브러리-asyncio" class="prose-h2" data-v-341ecc23><a aria-current="page" href="/@post/python/async/#파이썬의-비동기-라이브러리-asyncio" class="router-link-active router-link-exact-active" data-v-341ecc23><!--[-->파이썬의 비동기 라이브러리 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code><!--]--><!----></a></h2><p class="prose-p" data-v-0d713d0e><!--[-->파이썬에서 비동기를 객체를 생성하는 가장 간단한 방법은 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->async<!--]--></code>와 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code>키워드를 사용하는 것이다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->이를 위해 기본 라이브러리로 제공되는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code>를 사용하자.<!--]--></p><div class="highlight-python prose-code" meta data-v-8c1416d9><span class="filename" data-v-8c1416d9>main.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span emptylineplaceholder="true">
</span></span><span class="line" line="8"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="9"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> test()
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span emptylineplaceholder="true">
</span></span><span class="line" line="12"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-0d713d0e><!--[-->동기 함수와는 다르게 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio.run<!--]--></code>함수로 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->main()<!--]--></code> 코루틴을 실행하는 형태로 구성된다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->정말로 비동기로 작동하는지 확인하기 위해, 다음과 같이 새로 작성한 코드를 실행해보자.<!--]--></p><div class="highlight-python prose-code" meta data-v-8c1416d9><span class="filename" data-v-8c1416d9>main2.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> sys
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging.getLogger()
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.setLevel(logging.</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">INFO</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="8"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.addHandler(logging.StreamHandler(sys.stdout))
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(x: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;start: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, x)
</span></span><span class="line" line="13"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(random.random())
</span></span><span class="line" line="14"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;end: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, x)
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="18"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.gather(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(test(x) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> x </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)))
</span></span><span class="line" line="19"><span emptylineplaceholder="true">
</span></span><span class="line" line="20"><span emptylineplaceholder="true">
</span></span><span class="line" line="21"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="22"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-0d713d0e><!--[-->여기서 사용된 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio.gather<!--]--></code>는 여러개의 코루틴을 동시에 대기할 수 있도록 한다.<!--]--></p><div class="markdown-alert markdown-alert-note"><p class="prose-p markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg><span class="text-base font-bold">NOTE</span></p><!--[--><!--[--><p class="prose-p" data-v-0d713d0e><!--[-->3.11부터는 TaskGroup을 사용할 것을 권장한다.<!--]--></p><!--]--><!--]--></div><p class="prose-p" data-v-0d713d0e><!--[-->위 스크립트를 실행하면, 다음과 같이 비동기로 실행되는 것을 확인할 수 있다.<!--]--></p><div class="highlight-bash prose-code" meta data-v-8c1416d9><!----><!--[--><pre class="language-bash shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">❯</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> poetry</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> python</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> main2.py
</span></span><span class="line" line="2"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 0
</span></span><span class="line" line="3"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 1
</span></span><span class="line" line="4"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 2
</span></span><span class="line" line="5"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 3
</span></span><span class="line" line="6"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 4
</span></span><span class="line" line="7"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 5
</span></span><span class="line" line="8"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 6
</span></span><span class="line" line="9"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 7
</span></span><span class="line" line="10"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 8
</span></span><span class="line" line="11"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 9
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 9
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 8
</span></span><span class="line" line="14"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 6
</span></span><span class="line" line="15"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 3
</span></span><span class="line" line="16"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 4
</span></span><span class="line" line="17"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 0
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 1
</span></span><span class="line" line="19"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 2
</span></span><span class="line" line="20"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 5
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 7
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><h3 id="왜-asynciorun을-실행해야-하는가" class="prose-h3" data-v-5547871f><a aria-current="page" href="/@post/python/async/#왜-asynciorun을-실행해야-하는가" class="router-link-active router-link-exact-active" data-v-5547871f><!--[-->왜 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio.run<!--]--></code>을 실행해야 하는가<!--]--><!----></a></h3><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asnyc<!--]--></code>, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code> 키워드를 사용한 함수가 실행되면, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Coroutine<!--]--></code>(이하 코루틴)객체가 생성된다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->코루틴은 생성과 동시에 실행되는 객체가 아니며,
이벤트 루프에 예약된 상태도 아니다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->이러한 코루틴을 실행하기 위해 이벤트루프를 생성하고,
이벤트루프에 작업을 예약하고,
이벤트루트의 작업을 순차적으로 실행하는 일련의 과정을
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio.run<!--]--></code>이 담당한다고 볼 수있다.<!--]--></p><h2 id="대기할-수-있는-awaitable객체" class="prose-h2" data-v-341ecc23><a aria-current="page" href="/@post/python/async/#대기할-수-있는-awaitable객체" class="router-link-active router-link-exact-active" data-v-341ecc23><!--[-->대기할 수 있는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Awaitable<!--]--></code>객체<!--]--><!----></a></h2><p class="prose-p" data-v-0d713d0e><!--[-->코루틴이 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code>키워드를 사용하여 대기할 수 있는 이유는,
코루틴에 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->__await__<!--]--></code>이라는 메소드가 정의되어 있기 때문이다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->이러한 객체를 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Awaitable<!--]--></code> 객체라고 하며, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->typing<!--]--></code> 모듈에서도 확인할 수 있다.
정말 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->__await__<!--]--></code>만 있으면 가능한지 확인해보자.<!--]--></p><div class="highlight-python prose-code" meta data-v-8c1416d9><span class="filename" data-v-8c1416d9>main3.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Any, Generator
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> Await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __await__</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(self) -&gt; Generator[Any, </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">]:
</span></span><span class="line" line="7"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> num </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">):
</span></span><span class="line" line="8"><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">            print</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(num)
</span></span><span class="line" line="9"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">            yield</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None
</span></span><span class="line" line="10"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 1
</span></span><span class="line" line="11"><span emptylineplaceholder="true">
</span></span><span class="line" line="12"><span emptylineplaceholder="true">
</span></span><span class="line" line="13"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Await()
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="19"><span emptylineplaceholder="true">
</span></span><span class="line" line="20"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main3.py
</span></span><span class="line" line="21"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 0
</span></span><span class="line" line="22"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 1
</span></span><span class="line" line="23"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 2
</span></span><span class="line" line="24"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 3
</span></span><span class="line" line="25"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 4
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><div class="markdown-alert markdown-alert-note"><p class="prose-p markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg><span class="text-base font-bold">NOTE</span></p><!--[--><!--[--><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Await<!--]--></code>객체를 곧바로 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio.run<!--]--></code>에서 사용하지 않고,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->main<!--]--></code>함수에서 생성하여 사용하는 이유는,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio.run<!--]--></code>에서 코루틴이 아니면 에러를 발생시키기 때문이다.<!--]--></p><!--]--><!--]--></div><p class="prose-p" data-v-0d713d0e><!--[-->즉, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->async<!--]--></code>, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code>은 사실 제너레이터를 활용한
컨텍스트 스위칭에 대한 문법 설탕이라는 것을 알 수 있다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->이러한 문법 설탕이 추가되기 전까지는,
제너레이터 문법인 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->yield from<!--]--></code>을 사용했다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->물론 이러한 사실은 알면 좋지만 별로 중요하지 않다.
대부분의 경우 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->__await__<!--]--></code>를 직접 정의하기는 커녕
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>와 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>도 구경하기 어려우며,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->async<!--]--></code>와 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code>을 사용한 코루틴만 사용할 것이다.<!--]--></p><h3 id="콜백-형태의-future" class="prose-h3" data-v-5547871f><a aria-current="page" href="/@post/python/async/#콜백-형태의-future" class="router-link-active router-link-exact-active" data-v-5547871f><!--[-->콜백 형태의 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code><!--]--><!----></a></h3><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code>의 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->concurrent.futures<!--]--></code>의 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>를 본따 만들어졌다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->concurrent.futures<!--]--></code>의 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>는 쓰레드를 제어하기 위해 만들어졌고,
멀티쓰레드 환경의 비동기 제어가 싱글쓰레드 환경으로 확장된 것으로 볼 수도 있다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->앞서 말했듯이, 대부분의 경우 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>에 대해 알 필요가 없고,
구버전 파이썬을 사용한다면 모를까, 이제는 사용할 일도 없는 객체다.<!--]--></p><h3 id="future를-상속받는-task" class="prose-h3" data-v-5547871f><a aria-current="page" href="/@post/python/async/#future를-상속받는-task" class="router-link-active router-link-exact-active" data-v-5547871f><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>를 상속받는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code><!--]--><!----></a></h3><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>를 상속받아 구현한 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Awaitable<!--]--></code>한 객체다.
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->js<!--]--></code>의 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Promise<!--]--></code>처럼, 생성됐다면 이미 이벤트루프에 예약된 상태다.<!--]--></p><div class="markdown-alert markdown-alert-note"><p class="prose-p markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg><span class="text-base font-bold">NOTE</span></p><!--[--><!--[--><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>는 생성했지만, 이벤트루프에 예약되어 있지 않을 수 있다.<!--]--></p><!--]--><!--]--></div><p class="prose-p" data-v-0d713d0e><!--[-->따라서 다음과 같은 코드는, 정상적으로 실행된다.<!--]--></p><div class="highlight-python prose-code" meta data-v-8c1416d9><span class="filename" data-v-8c1416d9>main4.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> sys
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging.getLogger()
</span></span><span class="line" line="6"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.setLevel(logging.</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">INFO</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.addHandler(logging.StreamHandler(sys.stdout))
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;start&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="12"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;done!&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="14"><span emptylineplaceholder="true">
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="17"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> test()
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    _ </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.create_task(coro)
</span></span><span class="line" line="19"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;before sleep&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="20"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;after sleep&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="22"><span emptylineplaceholder="true">
</span></span><span class="line" line="23"><span emptylineplaceholder="true">
</span></span><span class="line" line="24"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="25"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="26"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  ❯ poetry run python main4.py
</span></span><span class="line" line="27"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  before sleep
</span></span><span class="line" line="28"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  start
</span></span><span class="line" line="29"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  done!
</span></span><span class="line" line="30"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  after sleep
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code> 또는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->yield from<!--]--></code> 또는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->__await__<!--]--></code>메소드를 직업 호출하지 않았지만,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->test<!--]--></code>로 정의된 비동기 함수는 정상적으로 실행됐다.
왜냐하면 신규 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>객체를 생성했고,
이후 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await asyncio.sleep(2)<!--]--></code>를 통해 콘텍스트 스위칭을 유발했기 때문이다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->정리하자면 다음과 같다.<!--]--></p><ol class="prose-ol" data-v-7ff04552><!--[--><li class="prose-li" data-v-b2fb753b><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->test<!--]--></code>함수를 실행하여 코루틴을 생성한다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[-->생성한 코루틴을 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio.create_task<!--]--></code>함수를 사용하여, 이벤트루프에 예약한다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->create_task<!--]--></code>함수가 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>객체를 반환한다.(의도적으로 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->_<!--]--></code>를 사용하여 무시하였다.)<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[-->아직 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->main<!--]--></code>함수가 콘텍스트를 점유중이므로, 앞서 생성한 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 실행되지 않았다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await asyncio.sleep(2)<!--]--></code>를 통해, 콘텍스트 점유를 해제한다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[-->앞서 생성한 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>로 콘텍스트가 변경된다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[-->이하 생략<!--]--></li><!--]--></ol><p class="prose-p" data-v-0d713d0e><!--[-->즉, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code>이 콘텍스트 스위칭에 대한 문법 설탕이자,
동시에 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>를 생성하는 문법 설탕인 것을 알 수 있다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->여기서 한가지 궁금한 점이 생긴다.<!--]--></p><ol class="prose-ol" data-v-7ff04552><!--[--><li class="prose-li" data-v-b2fb753b><!--[-->한번 생성한 코루틴은, 한번만 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code>으로 대기할 수 있다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[-->한번 생성한 코루틴은, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>를 생성할 수 있다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Awaitable<!--]--></code>이므로 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code>으로 대기할 수 있다.<!--]--></li><!--]--></ol><p class="prose-p" data-v-0d713d0e><!--[-->이전의 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->main4.py<!--]--></code> 스크립트에서 코루틴 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->coro<!--]--></code>는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->create_task<!--]--></code>함수를 통해
이미 실행된 상태다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->이후 생성한 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>를 대기하는 것이 가능할까?<!--]--></p><div class="highlight-python prose-code" meta data-v-8c1416d9><span class="filename" data-v-8c1416d9>main5.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> sys
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging.getLogger()
</span></span><span class="line" line="6"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.setLevel(logging.</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">INFO</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.addHandler(logging.StreamHandler(sys.stdout))
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;start&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="12"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;done!&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 1
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> test()
</span></span><span class="line" line="19"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    task </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.create_task(coro)
</span></span><span class="line" line="20"><span emptylineplaceholder="true">
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;before sleep&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="22"><span emptylineplaceholder="true">
</span></span><span class="line" line="23"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    queue </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.Queue(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="24"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    task.add_done_callback(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">lambda</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task: queue.put_nowait(task.result()))
</span></span><span class="line" line="25"><span emptylineplaceholder="true">
</span></span><span class="line" line="26"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    value </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task
</span></span><span class="line" line="27"><span emptylineplaceholder="true">
</span></span><span class="line" line="28"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;after sleep&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="29"><span emptylineplaceholder="true">
</span></span><span class="line" line="30"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task.result()
</span></span><span class="line" line="31"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    queue_value </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> queue.get()
</span></span><span class="line" line="32"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;value=</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%r</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">, result=</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%r</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">, queue_value=</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%r</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, value, result, queue_value)
</span></span><span class="line" line="33"><span emptylineplaceholder="true">
</span></span><span class="line" line="34"><span emptylineplaceholder="true">
</span></span><span class="line" line="35"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="36"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="37"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main5.py
</span></span><span class="line" line="38"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># before sleep
</span></span><span class="line" line="39"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># start
</span></span><span class="line" line="40"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># done!
</span></span><span class="line" line="41"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># after sleep
</span></span><span class="line" line="42"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># value=1, result=1, queue_value=1
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-0d713d0e><!--[-->가능하다. <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 코루틴을 이벤트 루프에 예약하는 객체지, 코루틴 그 자체가 아니기 때문이다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->그렇기에 단 한번 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code>으로 대기할 수 있다.
동시에 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>이기에, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->result<!--]--></code> 메소드를 사용하여 값을 가져올 수도 있으며
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->add_done_callback<!--]--></code> 메소드를 사용하여, 콜백을 추가할 수도 있다.<!--]--></p><h2 id="future와-task는-언제-사용할까" class="prose-h2" data-v-341ecc23><a aria-current="page" href="/@post/python/async/#future와-task는-언제-사용할까" class="router-link-active router-link-exact-active" data-v-341ecc23><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>와 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 언제 사용할까<!--]--><!----></a></h2><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code> 또는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 대부분의 경우 직접 사용할 일이 없다.
하지만 저수준 api를 다뤄야 하거나, 효율적인 코드를 목표로 한다면,
필연적으로 다뤄야 하는 순간이 온다.<!--]--></p><h3 id="task가-필요한-상황" class="prose-h3" data-v-5547871f><a aria-current="page" href="/@post/python/async/#task가-필요한-상황" class="router-link-active router-link-exact-active" data-v-5547871f><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>가 필요한 상황<!--]--><!----></a></h3><div class="highlight-python prose-code" meta data-v-8c1416d9><span class="filename" data-v-8c1416d9>main6.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __future__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> annotations
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Awaitable
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span emptylineplaceholder="true">
</span></span><span class="line" line="8"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(value: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="9"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    mod </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">%</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 10
</span></span><span class="line" line="10"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    rand </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random.randint(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="11"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="12"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> mod </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> rand:
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        error_msg </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> f</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;mod &gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">{</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">rand</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        raise</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> ValueError</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(error_msg)
</span></span><span class="line" line="15"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> mod
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span emptylineplaceholder="true">
</span></span><span class="line" line="18"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> shield</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(coro: Awaitable[</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="19"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="20"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.shield(coro)
</span></span><span class="line" line="21"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    except</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> ValueError</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="22"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None
</span></span><span class="line" line="23"><span emptylineplaceholder="true">
</span></span><span class="line" line="24"><span emptylineplaceholder="true">
</span></span><span class="line" line="25"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="26"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coros </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> [test(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(random.random() </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)]
</span></span><span class="line" line="27"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.gather(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(shield(coro) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> coros))
</span></span><span class="line" line="28"><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(result)
</span></span><span class="line" line="29"><span emptylineplaceholder="true">
</span></span><span class="line" line="30"><span emptylineplaceholder="true">
</span></span><span class="line" line="31"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="32"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="33"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main6.py
</span></span><span class="line" line="34"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># [2, 1, None, 2, None, 3, 8, 2, 3, None]
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-0d713d0e><!--[-->위와 같은 상황이 있을 때,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->test<!--]--></code>함수에서 에러가 발생하면 None값이 아닌 -1을 반환받고 싶다고 하자.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->가장 간단한 방법은 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->shield<!--]--></code>를 수정하는 것이고,
그 다음으로는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->test<!--]--></code>를 수정하는 것이다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->하지만 위 스크립트는 굉장히 간단하게 작성된 스크립트라 그런 것이고,
손대면 손댈수록 너무 복잡해져서 수정하기 힘들거나,
특수한 사정으로 인해 수정 자체가 불가능한 경우가 있다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->그럴때 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>에 콜백을 추가하여 문제를 해결할 수 있다.<!--]--></p><div class="highlight-python prose-code" meta data-v-8c1416d9><span class="filename" data-v-8c1416d9>main6-2.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __future__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> annotations
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> collections </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> deque
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> functools </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial
</span></span><span class="line" line="7"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Awaitable
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(value: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    mod </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">%</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 10
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    rand </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random.randint(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="13"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> mod </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> rand:
</span></span><span class="line" line="15"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        error_msg </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> f</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;mod &gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">{</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">rand</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;
</span></span><span class="line" line="16"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        raise</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> ValueError</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(error_msg)
</span></span><span class="line" line="17"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> mod
</span></span><span class="line" line="18"><span emptylineplaceholder="true">
</span></span><span class="line" line="19"><span emptylineplaceholder="true">
</span></span><span class="line" line="20"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> shield</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(coro: Awaitable[</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="21"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="22"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.shield(coro)
</span></span><span class="line" line="23"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    except</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> ValueError</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="24"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None
</span></span><span class="line" line="25"><span emptylineplaceholder="true">
</span></span><span class="line" line="26"><span emptylineplaceholder="true">
</span></span><span class="line" line="27"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> add</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(task: asyncio.Task[</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">], queue: asyncio.Queue[</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="28"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task.exception():
</span></span><span class="line" line="29"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        queue.put_nowait(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="30"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return
</span></span><span class="line" line="31"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    queue.put_nowait(task.result())
</span></span><span class="line" line="32"><span emptylineplaceholder="true">
</span></span><span class="line" line="33"><span emptylineplaceholder="true">
</span></span><span class="line" line="34"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="35"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    queue </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.Queue()
</span></span><span class="line" line="36"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    add_in_queue </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial(add, </span><span style="--shiki-default:#E36209;--shiki-dark:#FFAB70">queue</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">queue)
</span></span><span class="line" line="37"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coros </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> [test(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(random.random() </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)]
</span></span><span class="line" line="38"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    tasks </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> deque()
</span></span><span class="line" line="39"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> coros:
</span></span><span class="line" line="40"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        task </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.create_task(coro)
</span></span><span class="line" line="41"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        task.add_done_callback(add_in_queue)
</span></span><span class="line" line="42"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        tasks.append(task)
</span></span><span class="line" line="43"><span emptylineplaceholder="true">
</span></span><span class="line" line="44"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.gather(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(shield(task) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> tasks))
</span></span><span class="line" line="45"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> [queue.get_nowait() </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)]
</span></span><span class="line" line="46"><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(result)
</span></span><span class="line" line="47"><span emptylineplaceholder="true">
</span></span><span class="line" line="48"><span emptylineplaceholder="true">
</span></span><span class="line" line="49"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="50"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="51"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main6-2.py
</span></span><span class="line" line="52"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-0d713d0e><!--[-->핵심 로직이라 할 수 있는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->test<!--]--></code>와 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->shield<!--]--></code>를 수정하지 않고,
콜백을 사용하여 문제를 해결할 수 있다.<!--]--></p><h3 id="future가-필요한-상황" class="prose-h3" data-v-5547871f><a aria-current="page" href="/@post/python/async/#future가-필요한-상황" class="router-link-active router-link-exact-active" data-v-5547871f><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>가 필요한 상황<!--]--><!----></a></h3><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>가 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>를 상속받았기에, 대부분의 경우 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>에서 문제가 해결된다.
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>와 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>의 결정적인 차이점은
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>는 이벤트루프에 예약되지 않은 상태가 존재한다는 것이다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->코루틴이 비동기 작업에 대한 정의라면
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 코루틴의 실재이고,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>의 선물이다.
따라서 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>를 사용한다면, 비동기 작업이 선언 또는 실행되기 이전에
콜백을 정의하고 추가하여 제공할 수 있다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->이러한 방법은 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code>의 내부 함수를 구현하는데 많이 사용되는데,
그 중 하나인 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->wait_for<!--]--></code>를 좀 더 알아보기 쉽게 나타내면 다음과 같다.<!--]--></p><div class="highlight-python prose-code" meta data-v-8c1416d9><span class="filename" data-v-8c1416d9>main7.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __future__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> annotations
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> sys
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> functools </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial
</span></span><span class="line" line="7"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Any, Awaitable
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging.getLogger()
</span></span><span class="line" line="10"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.setLevel(logging.</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">INFO</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.addHandler(logging.StreamHandler(sys.stdout))
</span></span><span class="line" line="12"><span emptylineplaceholder="true">
</span></span><span class="line" line="13"><span emptylineplaceholder="true">
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> release</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(waiter: asyncio.Future[Any], </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">args: Any) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="15"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> waiter.done():
</span></span><span class="line" line="16"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        waiter.set_result(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="17"><span emptylineplaceholder="true">
</span></span><span class="line" line="18"><span emptylineplaceholder="true">
</span></span><span class="line" line="19"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> cancel</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(future: asyncio.Future[Any]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="20"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    loop </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.get_running_loop()
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    waiter </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> loop.create_future()
</span></span><span class="line" line="22"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    callback </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial(release, waiter)
</span></span><span class="line" line="23"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    future.add_done_callback(callback)
</span></span><span class="line" line="24"><span emptylineplaceholder="true">
</span></span><span class="line" line="25"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="26"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        future.cancel()
</span></span><span class="line" line="27"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> waiter
</span></span><span class="line" line="28"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    finally</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="29"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        future.remove_done_callback(callback)
</span></span><span class="line" line="30"><span emptylineplaceholder="true">
</span></span><span class="line" line="31"><span emptylineplaceholder="true">
</span></span><span class="line" line="32"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> wait_for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(coro: Awaitable[Any]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="33"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;wait&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="34"><span emptylineplaceholder="true">
</span></span><span class="line" line="35"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    loop </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.get_running_loop()
</span></span><span class="line" line="36"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    waiter </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> loop.create_future()
</span></span><span class="line" line="37"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    callback </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial(release, waiter)
</span></span><span class="line" line="38"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    future </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.ensure_future(coro)
</span></span><span class="line" line="39"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    future.add_done_callback(callback)
</span></span><span class="line" line="40"><span emptylineplaceholder="true">
</span></span><span class="line" line="41"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="42"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> waiter
</span></span><span class="line" line="43"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    except</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.CancelledError:
</span></span><span class="line" line="44"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> future.done():
</span></span><span class="line" line="45"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">            return
</span></span><span class="line" line="46"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        future.remove_done_callback(callback)
</span></span><span class="line" line="47"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> cancel(future)
</span></span><span class="line" line="48"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        raise
</span></span><span class="line" line="49"><span emptylineplaceholder="true">
</span></span><span class="line" line="50"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> future.done():
</span></span><span class="line" line="51"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        future.remove_done_callback(callback)
</span></span><span class="line" line="52"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> cancel(future)
</span></span><span class="line" line="53"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        raise</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> RuntimeError
</span></span><span class="line" line="54"><span emptylineplaceholder="true">
</span></span><span class="line" line="55"><span emptylineplaceholder="true">
</span></span><span class="line" line="56"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="57"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;start&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="58"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="59"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;end&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="60"><span emptylineplaceholder="true">
</span></span><span class="line" line="61"><span emptylineplaceholder="true">
</span></span><span class="line" line="62"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="63"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> test()
</span></span><span class="line" line="64"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    task </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.create_task(coro)
</span></span><span class="line" line="65"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))
</span></span><span class="line" line="66"><span emptylineplaceholder="true">
</span></span><span class="line" line="67"><span emptylineplaceholder="true">
</span></span><span class="line" line="68"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="69"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="70"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main7.py
</span></span><span class="line" line="71"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># start
</span></span><span class="line" line="72"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># wait
</span></span><span class="line" line="73"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># wait
</span></span><span class="line" line="74"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># wait
</span></span><span class="line" line="75"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># end
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-8c1416d9 data-v-9fbcde8f><span class="sr-only" data-v-9fbcde8f>Copy to clipboard</span><span class="icon-wrapper" data-v-9fbcde8f><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-9fbcde8f style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-4b884699><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->wait_for<!--]--></code>의 실제 구현은 더 정교하지만, 읽기 쉽도록 일부 코드를 수정했다.
위와 같은 형태로 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->wait_for<!--]--></code>를 사용하지 않는다면, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->task<!--]--></code>를 2번 이상 실행하게 되고,
동일한 코루틴을 2번 이상 실행할 수 없다는 에러가 발생한다.<!--]--></p><h2 id="요약하자면" class="prose-h2" data-v-341ecc23><a aria-current="page" href="/@post/python/async/#요약하자면" class="router-link-active router-link-exact-active" data-v-341ecc23><!--[-->요약하자면<!--]--><!----></a></h2><ol class="prose-ol" data-v-7ff04552><!--[--><li class="prose-li" data-v-b2fb753b><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->async<!--]--></code>, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->await<!--]--></code> 키워드로 비동기 함수를 정의하여 코루틴을 생성하고,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio.run<!--]--></code>으로 실행한다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->js<!--]--></code>의 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Promise<!--]--></code>와 비슷한 객체는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>다.<!--]--></li><li class="prose-li" data-v-b2fb753b><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>를 사용하면 콜백을 활용할 수 있다.<!--]--></li><!--]--></ol><h3 id="추가하자면" class="prose-h3" data-v-5547871f><a aria-current="page" href="/@post/python/async/#추가하자면" class="router-link-active router-link-exact-active" data-v-5547871f><!--[-->추가하자면<!--]--><!----></a></h3><p class="prose-p" data-v-0d713d0e><!--[-->기본 라이브러리인 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code> 위주로 작성된 글이지만,
비동기 라이브러리는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code>만이 있는 것은 아니다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->twisted<!--]--></code>나 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->curio<!--]--></code>, <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->trio<!--]--></code>등이 있으며,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->trio<!--]--></code>의 로직을 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code>에 적용한 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->anyio<!--]--></code>도 있다.<!--]--></p><blockquote class="prose-blockquote" data-v-7c0d1497><!--[--><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->anyio<!--]--></code>를 사용하면 비동기 로직 구현 후,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code>와 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->trio<!--]--></code>중 어떤 것이든 선택하여 사용할 수 있다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->2.x에서는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->curio<!--]--></code>도 지원했지만,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->curio<!--]--></code>의 구현 방식에 따른 개발에 어려움이 있어서 3.x부터 제외됐다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[--><code class="prose-code-inline" data-v-e0bf7fb5><!--[-->twisted<!--]--></code>는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->anyio<!--]--></code>에서 사용하는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->sniffio<!--]--></code>에서 지원하지 않아서
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->anyio<!--]--></code>에서도 지원하지 않는다.<!--]--></p><!--]--></blockquote><p class="prose-p" data-v-0d713d0e><!--[-->모든 라이브러리는 코루틴에 대해서는 공유하지만,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Future<!--]--></code>와 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->Task<!--]--></code>는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code>에 정의된 객체이므로,
따로 정의한 객체를 사용할 수 있다.
따라서 만약 다른 라이브러리를 사용한다면,
그 라이브러리에 맞는 방법을 잘 알아보고 사용해야 한다.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->나는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->anyio<!--]--></code>를 주로 사용하는데,
<code class="prose-code-inline" data-v-e0bf7fb5><!--[-->TaskGroup<!--]--></code>과 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->CancelScope<!--]--></code>가 마음에 들었기 때문이다.
특히 이 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->TaskGroup<!--]--></code>은 3.11부터는 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->asyncio<!--]--></code>에 적용된 개념이기도 하니,
만약 3.11이상의 버전을 사용한다면 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->gather<!--]--></code> 대신 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->TaskGroup<!--]--></code>을 사용하자.<!--]--></p><p class="prose-p" data-v-0d713d0e><!--[-->왜 <code class="prose-code-inline" data-v-e0bf7fb5><!--[-->TaskGroup<!--]--></code>이 좋은지, 왜 사용해야 하는지는
<a href="https://blog.lablup.com/posts/2022/03/29/PersistentTaskGroup/" rel="nofollow" class="prose-a" data-v-b30d03ba><!--[-->이 글<!--]--></a>에서 상세하게 설명해준다.<!--]--></p><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}</style></div><!--]--></article></section><ul class="prev-next-cont" data-v-ce0ebc44 data-v-5d7182e6><li class="link-item prev" data-v-5d7182e6><a href="/@post/python/airflow1/" class="" data-v-5d7182e6><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="icon stroke" data-v-5d7182e6><path fill-rule="evenodd" d="M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg><span data-v-5d7182e6>새로운 문법으로 Airflow DAG 생성하기</span></a></li><li class="link-item next" data-v-5d7182e6><a href="/@post/python/pep_695/" class="" data-v-5d7182e6><span data-v-5d7182e6>더 편한 타입 힌트를 위한 PEP695</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="icon stroke" data-v-5d7182e6><path fill-rule="evenodd" d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg></a></li></ul></div><span data-v-ce0ebc44></span></div></main><!--]--><footer class="site-footer" data-v-5a1dd750><div class="wrapper" data-v-5a1dd750><div class="footer-info" data-v-5a1dd750></div><ul class="footer-links" data-v-5a1dd750></ul></div></footer><div data-v-7eebdcdd><!--[--><!--[--><!--]--><!--]--></div></div></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/@post/python/async/_payload.json?ad561fae-7bb0-40c2-966c-c937f541787b">[{"state":1,"once":15,"_errors":16,"serverRendered":5,"path":19,"pinia":20,"prerenderedAt":6088},["Reactive",2],{"$scolor-mode":3,"$sicons":7,"$ssite-config":12},{"preference":4,"value":4,"unknown":5,"forced":6},"system",true,false,{"ph:copy":8},{"left":9,"top":9,"width":10,"height":10,"rotate":9,"vFlip":6,"hFlip":6,"body":11},0,256,"\u003Cpath fill=\"currentColor\" d=\"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z\"/>",{"env":13,"name":14},"production","phi-friday.github.io",["Set"],["ShallowReactive",17],{"selected_data_with_surround_/python/async":18},null,"/@post/python/async/",["Reactive",21],{"current_article":22,"current_url":6081,"current_tags":6082},{"nullable_article":23,"prev":6072,"next":6076,"active_toc_ids":6080},{"_path":24,"_dir":25,"_draft":6,"_partial":6,"_locale":26,"title":27,"description":28,"tags":29,"date":31,"publish":5,"body":32,"_type":6066,"_id":6067,"_source":6068,"_file":6069,"_stem":6070,"_extension":6071},"/python/async","python","","python의 비동기에 대한 얕은 이해","코드 중심으로 알아보는 비동기",[25,30],"async","2023-07-31T09:51:28.303Z",{"type":33,"children":34,"toc":6042},"root",[35,51,72,84,300,321,326,698,711,720,725,963,977,1003,1008,1020,1034,1054,1081,1417,1453,1471,1484,1524,1535,1566,1582,1594,1610,1654,1667,1672,2064,2110,2115,2215,2233,2238,2287,2313,2325,2900,2912,2947,2964,2980,2991,3641,3653,3673,3678,3690,4616,4634,4644,4688,4720,4740,5695,5720,5725,5784,5789,5808,5856,5933,5957,6014,6036],{"type":36,"tag":37,"props":38,"children":40},"element","h2",{"id":39},"파이썬의-비동기-라이브러리-asyncio",[41,44],{"type":42,"value":43},"text","파이썬의 비동기 라이브러리 ",{"type":36,"tag":45,"props":46,"children":48},"code",{"className":47},[],[49],{"type":42,"value":50},"asyncio",{"type":36,"tag":52,"props":53,"children":54},"p",{},[55,57,62,64,70],{"type":42,"value":56},"파이썬에서 비동기를 객체를 생성하는 가장 간단한 방법은 ",{"type":36,"tag":45,"props":58,"children":60},{"className":59},[],[61],{"type":42,"value":30},{"type":42,"value":63},"와 ",{"type":36,"tag":45,"props":65,"children":67},{"className":66},[],[68],{"type":42,"value":69},"await",{"type":42,"value":71},"키워드를 사용하는 것이다.",{"type":36,"tag":52,"props":73,"children":74},{},[75,77,82],{"type":42,"value":76},"이를 위해 기본 라이브러리로 제공되는 ",{"type":36,"tag":45,"props":78,"children":80},{"className":79},[],[81],{"type":42,"value":50},{"type":42,"value":83},"를 사용하자.",{"type":36,"tag":85,"props":86,"children":90},"pre",{"className":87,"code":88,"filename":89,"language":25,"meta":26,"style":26},"language-python shiki shiki-themes github-light github-dark","import asyncio\n\n\nasync def test() -> None:\n    await asyncio.sleep(1)\n\n\nasync def main() -> None:\n    await test()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","main.py",[91],{"type":36,"tag":45,"props":92,"children":93},{"__ignoreMap":26},[94,112,121,129,164,188,196,204,233,246,254,262,291],{"type":36,"tag":95,"props":96,"children":99},"span",{"class":97,"line":98},"line",1,[100,106],{"type":36,"tag":95,"props":101,"children":103},{"style":102},"--shiki-default:#D73A49;--shiki-dark:#F97583",[104],{"type":42,"value":105},"import",{"type":36,"tag":95,"props":107,"children":109},{"style":108},"--shiki-default:#24292E;--shiki-dark:#E1E4E8",[110],{"type":42,"value":111}," asyncio\n",{"type":36,"tag":95,"props":113,"children":115},{"class":97,"line":114},2,[116],{"type":36,"tag":95,"props":117,"children":118},{"emptyLinePlaceholder":5},[119],{"type":42,"value":120},"\n",{"type":36,"tag":95,"props":122,"children":124},{"class":97,"line":123},3,[125],{"type":36,"tag":95,"props":126,"children":127},{"emptyLinePlaceholder":5},[128],{"type":42,"value":120},{"type":36,"tag":95,"props":130,"children":132},{"class":97,"line":131},4,[133,137,142,148,153,159],{"type":36,"tag":95,"props":134,"children":135},{"style":102},[136],{"type":42,"value":30},{"type":36,"tag":95,"props":138,"children":139},{"style":102},[140],{"type":42,"value":141}," def",{"type":36,"tag":95,"props":143,"children":145},{"style":144},"--shiki-default:#6F42C1;--shiki-dark:#B392F0",[146],{"type":42,"value":147}," test",{"type":36,"tag":95,"props":149,"children":150},{"style":108},[151],{"type":42,"value":152},"() -> ",{"type":36,"tag":95,"props":154,"children":156},{"style":155},"--shiki-default:#005CC5;--shiki-dark:#79B8FF",[157],{"type":42,"value":158},"None",{"type":36,"tag":95,"props":160,"children":161},{"style":108},[162],{"type":42,"value":163},":\n",{"type":36,"tag":95,"props":165,"children":167},{"class":97,"line":166},5,[168,173,178,183],{"type":36,"tag":95,"props":169,"children":170},{"style":102},[171],{"type":42,"value":172},"    await",{"type":36,"tag":95,"props":174,"children":175},{"style":108},[176],{"type":42,"value":177}," asyncio.sleep(",{"type":36,"tag":95,"props":179,"children":180},{"style":155},[181],{"type":42,"value":182},"1",{"type":36,"tag":95,"props":184,"children":185},{"style":108},[186],{"type":42,"value":187},")\n",{"type":36,"tag":95,"props":189,"children":191},{"class":97,"line":190},6,[192],{"type":36,"tag":95,"props":193,"children":194},{"emptyLinePlaceholder":5},[195],{"type":42,"value":120},{"type":36,"tag":95,"props":197,"children":199},{"class":97,"line":198},7,[200],{"type":36,"tag":95,"props":201,"children":202},{"emptyLinePlaceholder":5},[203],{"type":42,"value":120},{"type":36,"tag":95,"props":205,"children":207},{"class":97,"line":206},8,[208,212,216,221,225,229],{"type":36,"tag":95,"props":209,"children":210},{"style":102},[211],{"type":42,"value":30},{"type":36,"tag":95,"props":213,"children":214},{"style":102},[215],{"type":42,"value":141},{"type":36,"tag":95,"props":217,"children":218},{"style":144},[219],{"type":42,"value":220}," main",{"type":36,"tag":95,"props":222,"children":223},{"style":108},[224],{"type":42,"value":152},{"type":36,"tag":95,"props":226,"children":227},{"style":155},[228],{"type":42,"value":158},{"type":36,"tag":95,"props":230,"children":231},{"style":108},[232],{"type":42,"value":163},{"type":36,"tag":95,"props":234,"children":236},{"class":97,"line":235},9,[237,241],{"type":36,"tag":95,"props":238,"children":239},{"style":102},[240],{"type":42,"value":172},{"type":36,"tag":95,"props":242,"children":243},{"style":108},[244],{"type":42,"value":245}," test()\n",{"type":36,"tag":95,"props":247,"children":249},{"class":97,"line":248},10,[250],{"type":36,"tag":95,"props":251,"children":252},{"emptyLinePlaceholder":5},[253],{"type":42,"value":120},{"type":36,"tag":95,"props":255,"children":257},{"class":97,"line":256},11,[258],{"type":36,"tag":95,"props":259,"children":260},{"emptyLinePlaceholder":5},[261],{"type":42,"value":120},{"type":36,"tag":95,"props":263,"children":265},{"class":97,"line":264},12,[266,271,276,281,287],{"type":36,"tag":95,"props":267,"children":268},{"style":102},[269],{"type":42,"value":270},"if",{"type":36,"tag":95,"props":272,"children":273},{"style":155},[274],{"type":42,"value":275}," __name__",{"type":36,"tag":95,"props":277,"children":278},{"style":102},[279],{"type":42,"value":280}," ==",{"type":36,"tag":95,"props":282,"children":284},{"style":283},"--shiki-default:#032F62;--shiki-dark:#9ECBFF",[285],{"type":42,"value":286}," \"__main__\"",{"type":36,"tag":95,"props":288,"children":289},{"style":108},[290],{"type":42,"value":163},{"type":36,"tag":95,"props":292,"children":294},{"class":97,"line":293},13,[295],{"type":36,"tag":95,"props":296,"children":297},{"style":108},[298],{"type":42,"value":299},"    asyncio.run(main())\n",{"type":36,"tag":52,"props":301,"children":302},{},[303,305,311,313,319],{"type":42,"value":304},"동기 함수와는 다르게 ",{"type":36,"tag":45,"props":306,"children":308},{"className":307},[],[309],{"type":42,"value":310},"asyncio.run",{"type":42,"value":312},"함수로 ",{"type":36,"tag":45,"props":314,"children":316},{"className":315},[],[317],{"type":42,"value":318},"main()",{"type":42,"value":320}," 코루틴을 실행하는 형태로 구성된다.",{"type":36,"tag":52,"props":322,"children":323},{},[324],{"type":42,"value":325},"정말로 비동기로 작동하는지 확인하기 위해, 다음과 같이 새로 작성한 코드를 실행해보자.",{"type":36,"tag":85,"props":327,"children":330},{"className":87,"code":328,"filename":329,"language":25,"meta":26,"style":26},"import asyncio\nimport logging\nimport random\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test(x: int) -> None:\n    logger.info(\"start: %d\", x)\n    await asyncio.sleep(random.random())\n    logger.info(\"end: %d\", x)\n\n\nasync def main() -> None:\n    await asyncio.gather(*(test(x) for x in range(10)))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","main2.py",[331],{"type":36,"tag":45,"props":332,"children":333},{"__ignoreMap":26},[334,345,357,369,381,388,406,423,431,438,445,483,511,523,548,556,564,592,650,658,666,690],{"type":36,"tag":95,"props":335,"children":336},{"class":97,"line":98},[337,341],{"type":36,"tag":95,"props":338,"children":339},{"style":102},[340],{"type":42,"value":105},{"type":36,"tag":95,"props":342,"children":343},{"style":108},[344],{"type":42,"value":111},{"type":36,"tag":95,"props":346,"children":347},{"class":97,"line":114},[348,352],{"type":36,"tag":95,"props":349,"children":350},{"style":102},[351],{"type":42,"value":105},{"type":36,"tag":95,"props":353,"children":354},{"style":108},[355],{"type":42,"value":356}," logging\n",{"type":36,"tag":95,"props":358,"children":359},{"class":97,"line":123},[360,364],{"type":36,"tag":95,"props":361,"children":362},{"style":102},[363],{"type":42,"value":105},{"type":36,"tag":95,"props":365,"children":366},{"style":108},[367],{"type":42,"value":368}," random\n",{"type":36,"tag":95,"props":370,"children":371},{"class":97,"line":131},[372,376],{"type":36,"tag":95,"props":373,"children":374},{"style":102},[375],{"type":42,"value":105},{"type":36,"tag":95,"props":377,"children":378},{"style":108},[379],{"type":42,"value":380}," sys\n",{"type":36,"tag":95,"props":382,"children":383},{"class":97,"line":166},[384],{"type":36,"tag":95,"props":385,"children":386},{"emptyLinePlaceholder":5},[387],{"type":42,"value":120},{"type":36,"tag":95,"props":389,"children":390},{"class":97,"line":190},[391,396,401],{"type":36,"tag":95,"props":392,"children":393},{"style":108},[394],{"type":42,"value":395},"logger ",{"type":36,"tag":95,"props":397,"children":398},{"style":102},[399],{"type":42,"value":400},"=",{"type":36,"tag":95,"props":402,"children":403},{"style":108},[404],{"type":42,"value":405}," logging.getLogger()\n",{"type":36,"tag":95,"props":407,"children":408},{"class":97,"line":198},[409,414,419],{"type":36,"tag":95,"props":410,"children":411},{"style":108},[412],{"type":42,"value":413},"logger.setLevel(logging.",{"type":36,"tag":95,"props":415,"children":416},{"style":155},[417],{"type":42,"value":418},"INFO",{"type":36,"tag":95,"props":420,"children":421},{"style":108},[422],{"type":42,"value":187},{"type":36,"tag":95,"props":424,"children":425},{"class":97,"line":206},[426],{"type":36,"tag":95,"props":427,"children":428},{"style":108},[429],{"type":42,"value":430},"logger.addHandler(logging.StreamHandler(sys.stdout))\n",{"type":36,"tag":95,"props":432,"children":433},{"class":97,"line":235},[434],{"type":36,"tag":95,"props":435,"children":436},{"emptyLinePlaceholder":5},[437],{"type":42,"value":120},{"type":36,"tag":95,"props":439,"children":440},{"class":97,"line":248},[441],{"type":36,"tag":95,"props":442,"children":443},{"emptyLinePlaceholder":5},[444],{"type":42,"value":120},{"type":36,"tag":95,"props":446,"children":447},{"class":97,"line":256},[448,452,456,460,465,470,475,479],{"type":36,"tag":95,"props":449,"children":450},{"style":102},[451],{"type":42,"value":30},{"type":36,"tag":95,"props":453,"children":454},{"style":102},[455],{"type":42,"value":141},{"type":36,"tag":95,"props":457,"children":458},{"style":144},[459],{"type":42,"value":147},{"type":36,"tag":95,"props":461,"children":462},{"style":108},[463],{"type":42,"value":464},"(x: ",{"type":36,"tag":95,"props":466,"children":467},{"style":155},[468],{"type":42,"value":469},"int",{"type":36,"tag":95,"props":471,"children":472},{"style":108},[473],{"type":42,"value":474},") -> ",{"type":36,"tag":95,"props":476,"children":477},{"style":155},[478],{"type":42,"value":158},{"type":36,"tag":95,"props":480,"children":481},{"style":108},[482],{"type":42,"value":163},{"type":36,"tag":95,"props":484,"children":485},{"class":97,"line":264},[486,491,496,501,506],{"type":36,"tag":95,"props":487,"children":488},{"style":108},[489],{"type":42,"value":490},"    logger.info(",{"type":36,"tag":95,"props":492,"children":493},{"style":283},[494],{"type":42,"value":495},"\"start: ",{"type":36,"tag":95,"props":497,"children":498},{"style":155},[499],{"type":42,"value":500},"%d",{"type":36,"tag":95,"props":502,"children":503},{"style":283},[504],{"type":42,"value":505},"\"",{"type":36,"tag":95,"props":507,"children":508},{"style":108},[509],{"type":42,"value":510},", x)\n",{"type":36,"tag":95,"props":512,"children":513},{"class":97,"line":293},[514,518],{"type":36,"tag":95,"props":515,"children":516},{"style":102},[517],{"type":42,"value":172},{"type":36,"tag":95,"props":519,"children":520},{"style":108},[521],{"type":42,"value":522}," asyncio.sleep(random.random())\n",{"type":36,"tag":95,"props":524,"children":526},{"class":97,"line":525},14,[527,531,536,540,544],{"type":36,"tag":95,"props":528,"children":529},{"style":108},[530],{"type":42,"value":490},{"type":36,"tag":95,"props":532,"children":533},{"style":283},[534],{"type":42,"value":535},"\"end: ",{"type":36,"tag":95,"props":537,"children":538},{"style":155},[539],{"type":42,"value":500},{"type":36,"tag":95,"props":541,"children":542},{"style":283},[543],{"type":42,"value":505},{"type":36,"tag":95,"props":545,"children":546},{"style":108},[547],{"type":42,"value":510},{"type":36,"tag":95,"props":549,"children":551},{"class":97,"line":550},15,[552],{"type":36,"tag":95,"props":553,"children":554},{"emptyLinePlaceholder":5},[555],{"type":42,"value":120},{"type":36,"tag":95,"props":557,"children":559},{"class":97,"line":558},16,[560],{"type":36,"tag":95,"props":561,"children":562},{"emptyLinePlaceholder":5},[563],{"type":42,"value":120},{"type":36,"tag":95,"props":565,"children":567},{"class":97,"line":566},17,[568,572,576,580,584,588],{"type":36,"tag":95,"props":569,"children":570},{"style":102},[571],{"type":42,"value":30},{"type":36,"tag":95,"props":573,"children":574},{"style":102},[575],{"type":42,"value":141},{"type":36,"tag":95,"props":577,"children":578},{"style":144},[579],{"type":42,"value":220},{"type":36,"tag":95,"props":581,"children":582},{"style":108},[583],{"type":42,"value":152},{"type":36,"tag":95,"props":585,"children":586},{"style":155},[587],{"type":42,"value":158},{"type":36,"tag":95,"props":589,"children":590},{"style":108},[591],{"type":42,"value":163},{"type":36,"tag":95,"props":593,"children":595},{"class":97,"line":594},18,[596,600,605,610,615,620,625,630,635,640,645],{"type":36,"tag":95,"props":597,"children":598},{"style":102},[599],{"type":42,"value":172},{"type":36,"tag":95,"props":601,"children":602},{"style":108},[603],{"type":42,"value":604}," asyncio.gather(",{"type":36,"tag":95,"props":606,"children":607},{"style":102},[608],{"type":42,"value":609},"*",{"type":36,"tag":95,"props":611,"children":612},{"style":108},[613],{"type":42,"value":614},"(test(x) ",{"type":36,"tag":95,"props":616,"children":617},{"style":102},[618],{"type":42,"value":619},"for",{"type":36,"tag":95,"props":621,"children":622},{"style":108},[623],{"type":42,"value":624}," x ",{"type":36,"tag":95,"props":626,"children":627},{"style":102},[628],{"type":42,"value":629},"in",{"type":36,"tag":95,"props":631,"children":632},{"style":155},[633],{"type":42,"value":634}," range",{"type":36,"tag":95,"props":636,"children":637},{"style":108},[638],{"type":42,"value":639},"(",{"type":36,"tag":95,"props":641,"children":642},{"style":155},[643],{"type":42,"value":644},"10",{"type":36,"tag":95,"props":646,"children":647},{"style":108},[648],{"type":42,"value":649},")))\n",{"type":36,"tag":95,"props":651,"children":653},{"class":97,"line":652},19,[654],{"type":36,"tag":95,"props":655,"children":656},{"emptyLinePlaceholder":5},[657],{"type":42,"value":120},{"type":36,"tag":95,"props":659,"children":661},{"class":97,"line":660},20,[662],{"type":36,"tag":95,"props":663,"children":664},{"emptyLinePlaceholder":5},[665],{"type":42,"value":120},{"type":36,"tag":95,"props":667,"children":669},{"class":97,"line":668},21,[670,674,678,682,686],{"type":36,"tag":95,"props":671,"children":672},{"style":102},[673],{"type":42,"value":270},{"type":36,"tag":95,"props":675,"children":676},{"style":155},[677],{"type":42,"value":275},{"type":36,"tag":95,"props":679,"children":680},{"style":102},[681],{"type":42,"value":280},{"type":36,"tag":95,"props":683,"children":684},{"style":283},[685],{"type":42,"value":286},{"type":36,"tag":95,"props":687,"children":688},{"style":108},[689],{"type":42,"value":163},{"type":36,"tag":95,"props":691,"children":693},{"class":97,"line":692},22,[694],{"type":36,"tag":95,"props":695,"children":696},{"style":108},[697],{"type":42,"value":299},{"type":36,"tag":52,"props":699,"children":700},{},[701,703,709],{"type":42,"value":702},"여기서 사용된 ",{"type":36,"tag":45,"props":704,"children":706},{"className":705},[],[707],{"type":42,"value":708},"asyncio.gather",{"type":42,"value":710},"는 여러개의 코루틴을 동시에 대기할 수 있도록 한다.",{"type":36,"tag":712,"props":713,"children":714},"note",{},[715],{"type":36,"tag":52,"props":716,"children":717},{},[718],{"type":42,"value":719},"3.11부터는 TaskGroup을 사용할 것을 권장한다.",{"type":36,"tag":52,"props":721,"children":722},{},[723],{"type":42,"value":724},"위 스크립트를 실행하면, 다음과 같이 비동기로 실행되는 것을 확인할 수 있다.",{"type":36,"tag":85,"props":726,"children":730},{"className":727,"code":728,"language":729,"meta":26,"style":26},"language-bash shiki shiki-themes github-light github-dark","❯ poetry run python main2.py\nstart: 0\nstart: 1\nstart: 2\nstart: 3\nstart: 4\nstart: 5\nstart: 6\nstart: 7\nstart: 8\nstart: 9\nend: 9\nend: 8\nend: 6\nend: 3\nend: 4\nend: 0\nend: 1\nend: 2\nend: 5\nend: 7\n","bash",[731],{"type":36,"tag":45,"props":732,"children":733},{"__ignoreMap":26},[734,762,775,787,799,811,823,835,847,859,871,883,891,899,907,915,923,931,939,947,955],{"type":36,"tag":95,"props":735,"children":736},{"class":97,"line":98},[737,742,747,752,757],{"type":36,"tag":95,"props":738,"children":739},{"style":144},[740],{"type":42,"value":741},"❯",{"type":36,"tag":95,"props":743,"children":744},{"style":283},[745],{"type":42,"value":746}," poetry",{"type":36,"tag":95,"props":748,"children":749},{"style":283},[750],{"type":42,"value":751}," run",{"type":36,"tag":95,"props":753,"children":754},{"style":283},[755],{"type":42,"value":756}," python",{"type":36,"tag":95,"props":758,"children":759},{"style":283},[760],{"type":42,"value":761}," main2.py\n",{"type":36,"tag":95,"props":763,"children":764},{"class":97,"line":114},[765,770],{"type":36,"tag":95,"props":766,"children":767},{"style":144},[768],{"type":42,"value":769},"start:",{"type":36,"tag":95,"props":771,"children":772},{"style":155},[773],{"type":42,"value":774}," 0\n",{"type":36,"tag":95,"props":776,"children":777},{"class":97,"line":123},[778,782],{"type":36,"tag":95,"props":779,"children":780},{"style":144},[781],{"type":42,"value":769},{"type":36,"tag":95,"props":783,"children":784},{"style":155},[785],{"type":42,"value":786}," 1\n",{"type":36,"tag":95,"props":788,"children":789},{"class":97,"line":131},[790,794],{"type":36,"tag":95,"props":791,"children":792},{"style":144},[793],{"type":42,"value":769},{"type":36,"tag":95,"props":795,"children":796},{"style":155},[797],{"type":42,"value":798}," 2\n",{"type":36,"tag":95,"props":800,"children":801},{"class":97,"line":166},[802,806],{"type":36,"tag":95,"props":803,"children":804},{"style":144},[805],{"type":42,"value":769},{"type":36,"tag":95,"props":807,"children":808},{"style":155},[809],{"type":42,"value":810}," 3\n",{"type":36,"tag":95,"props":812,"children":813},{"class":97,"line":190},[814,818],{"type":36,"tag":95,"props":815,"children":816},{"style":144},[817],{"type":42,"value":769},{"type":36,"tag":95,"props":819,"children":820},{"style":155},[821],{"type":42,"value":822}," 4\n",{"type":36,"tag":95,"props":824,"children":825},{"class":97,"line":198},[826,830],{"type":36,"tag":95,"props":827,"children":828},{"style":144},[829],{"type":42,"value":769},{"type":36,"tag":95,"props":831,"children":832},{"style":155},[833],{"type":42,"value":834}," 5\n",{"type":36,"tag":95,"props":836,"children":837},{"class":97,"line":206},[838,842],{"type":36,"tag":95,"props":839,"children":840},{"style":144},[841],{"type":42,"value":769},{"type":36,"tag":95,"props":843,"children":844},{"style":155},[845],{"type":42,"value":846}," 6\n",{"type":36,"tag":95,"props":848,"children":849},{"class":97,"line":235},[850,854],{"type":36,"tag":95,"props":851,"children":852},{"style":144},[853],{"type":42,"value":769},{"type":36,"tag":95,"props":855,"children":856},{"style":155},[857],{"type":42,"value":858}," 7\n",{"type":36,"tag":95,"props":860,"children":861},{"class":97,"line":248},[862,866],{"type":36,"tag":95,"props":863,"children":864},{"style":144},[865],{"type":42,"value":769},{"type":36,"tag":95,"props":867,"children":868},{"style":155},[869],{"type":42,"value":870}," 8\n",{"type":36,"tag":95,"props":872,"children":873},{"class":97,"line":256},[874,878],{"type":36,"tag":95,"props":875,"children":876},{"style":144},[877],{"type":42,"value":769},{"type":36,"tag":95,"props":879,"children":880},{"style":155},[881],{"type":42,"value":882}," 9\n",{"type":36,"tag":95,"props":884,"children":885},{"class":97,"line":264},[886],{"type":36,"tag":95,"props":887,"children":888},{"style":108},[889],{"type":42,"value":890},"end: 9\n",{"type":36,"tag":95,"props":892,"children":893},{"class":97,"line":293},[894],{"type":36,"tag":95,"props":895,"children":896},{"style":108},[897],{"type":42,"value":898},"end: 8\n",{"type":36,"tag":95,"props":900,"children":901},{"class":97,"line":525},[902],{"type":36,"tag":95,"props":903,"children":904},{"style":108},[905],{"type":42,"value":906},"end: 6\n",{"type":36,"tag":95,"props":908,"children":909},{"class":97,"line":550},[910],{"type":36,"tag":95,"props":911,"children":912},{"style":108},[913],{"type":42,"value":914},"end: 3\n",{"type":36,"tag":95,"props":916,"children":917},{"class":97,"line":558},[918],{"type":36,"tag":95,"props":919,"children":920},{"style":108},[921],{"type":42,"value":922},"end: 4\n",{"type":36,"tag":95,"props":924,"children":925},{"class":97,"line":566},[926],{"type":36,"tag":95,"props":927,"children":928},{"style":108},[929],{"type":42,"value":930},"end: 0\n",{"type":36,"tag":95,"props":932,"children":933},{"class":97,"line":594},[934],{"type":36,"tag":95,"props":935,"children":936},{"style":108},[937],{"type":42,"value":938},"end: 1\n",{"type":36,"tag":95,"props":940,"children":941},{"class":97,"line":652},[942],{"type":36,"tag":95,"props":943,"children":944},{"style":108},[945],{"type":42,"value":946},"end: 2\n",{"type":36,"tag":95,"props":948,"children":949},{"class":97,"line":660},[950],{"type":36,"tag":95,"props":951,"children":952},{"style":108},[953],{"type":42,"value":954},"end: 5\n",{"type":36,"tag":95,"props":956,"children":957},{"class":97,"line":668},[958],{"type":36,"tag":95,"props":959,"children":960},{"style":108},[961],{"type":42,"value":962},"end: 7\n",{"type":36,"tag":964,"props":965,"children":967},"h3",{"id":966},"왜-asynciorun을-실행해야-하는가",[968,970,975],{"type":42,"value":969},"왜 ",{"type":36,"tag":45,"props":971,"children":973},{"className":972},[],[974],{"type":42,"value":310},{"type":42,"value":976},"을 실행해야 하는가",{"type":36,"tag":52,"props":978,"children":979},{},[980,986,988,993,995,1001],{"type":36,"tag":45,"props":981,"children":983},{"className":982},[],[984],{"type":42,"value":985},"asnyc",{"type":42,"value":987},", ",{"type":36,"tag":45,"props":989,"children":991},{"className":990},[],[992],{"type":42,"value":69},{"type":42,"value":994}," 키워드를 사용한 함수가 실행되면, ",{"type":36,"tag":45,"props":996,"children":998},{"className":997},[],[999],{"type":42,"value":1000},"Coroutine",{"type":42,"value":1002},"(이하 코루틴)객체가 생성된다.",{"type":36,"tag":52,"props":1004,"children":1005},{},[1006],{"type":42,"value":1007},"코루틴은 생성과 동시에 실행되는 객체가 아니며,\n이벤트 루프에 예약된 상태도 아니다.",{"type":36,"tag":52,"props":1009,"children":1010},{},[1011,1013,1018],{"type":42,"value":1012},"이러한 코루틴을 실행하기 위해 이벤트루프를 생성하고,\n이벤트루프에 작업을 예약하고,\n이벤트루트의 작업을 순차적으로 실행하는 일련의 과정을\n",{"type":36,"tag":45,"props":1014,"children":1016},{"className":1015},[],[1017],{"type":42,"value":310},{"type":42,"value":1019},"이 담당한다고 볼 수있다.",{"type":36,"tag":37,"props":1021,"children":1023},{"id":1022},"대기할-수-있는-awaitable객체",[1024,1026,1032],{"type":42,"value":1025},"대기할 수 있는 ",{"type":36,"tag":45,"props":1027,"children":1029},{"className":1028},[],[1030],{"type":42,"value":1031},"Awaitable",{"type":42,"value":1033},"객체",{"type":36,"tag":52,"props":1035,"children":1036},{},[1037,1039,1044,1046,1052],{"type":42,"value":1038},"코루틴이 ",{"type":36,"tag":45,"props":1040,"children":1042},{"className":1041},[],[1043],{"type":42,"value":69},{"type":42,"value":1045},"키워드를 사용하여 대기할 수 있는 이유는,\n코루틴에 ",{"type":36,"tag":45,"props":1047,"children":1049},{"className":1048},[],[1050],{"type":42,"value":1051},"__await__",{"type":42,"value":1053},"이라는 메소드가 정의되어 있기 때문이다.",{"type":36,"tag":52,"props":1055,"children":1056},{},[1057,1059,1064,1066,1072,1074,1079],{"type":42,"value":1058},"이러한 객체를 ",{"type":36,"tag":45,"props":1060,"children":1062},{"className":1061},[],[1063],{"type":42,"value":1031},{"type":42,"value":1065}," 객체라고 하며, ",{"type":36,"tag":45,"props":1067,"children":1069},{"className":1068},[],[1070],{"type":42,"value":1071},"typing",{"type":42,"value":1073}," 모듈에서도 확인할 수 있다.\n정말 ",{"type":36,"tag":45,"props":1075,"children":1077},{"className":1076},[],[1078],{"type":42,"value":1051},{"type":42,"value":1080},"만 있으면 가능한지 확인해보자.",{"type":36,"tag":85,"props":1082,"children":1085},{"className":87,"code":1083,"filename":1084,"language":25,"meta":26,"style":26},"import asyncio\nfrom typing import Any, Generator\n\n\nclass Await:\n    def __await__(self) -> Generator[Any, None, int]:\n        for num in range(5):\n            print(num)\n            yield None\n        return 1\n\n\nasync def main() -> None:\n    await Await()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n\n# ❯ poetry run python main3.py\n# 0\n# 1\n# 2\n# 3\n# 4\n","main3.py",[1086],{"type":36,"tag":45,"props":1087,"children":1088},{"__ignoreMap":26},[1089,1100,1122,1129,1136,1153,1188,1223,1236,1249,1261,1268,1275,1302,1314,1321,1328,1351,1358,1365,1374,1382,1390,1399,1408],{"type":36,"tag":95,"props":1090,"children":1091},{"class":97,"line":98},[1092,1096],{"type":36,"tag":95,"props":1093,"children":1094},{"style":102},[1095],{"type":42,"value":105},{"type":36,"tag":95,"props":1097,"children":1098},{"style":108},[1099],{"type":42,"value":111},{"type":36,"tag":95,"props":1101,"children":1102},{"class":97,"line":114},[1103,1108,1113,1117],{"type":36,"tag":95,"props":1104,"children":1105},{"style":102},[1106],{"type":42,"value":1107},"from",{"type":36,"tag":95,"props":1109,"children":1110},{"style":108},[1111],{"type":42,"value":1112}," typing ",{"type":36,"tag":95,"props":1114,"children":1115},{"style":102},[1116],{"type":42,"value":105},{"type":36,"tag":95,"props":1118,"children":1119},{"style":108},[1120],{"type":42,"value":1121}," Any, Generator\n",{"type":36,"tag":95,"props":1123,"children":1124},{"class":97,"line":123},[1125],{"type":36,"tag":95,"props":1126,"children":1127},{"emptyLinePlaceholder":5},[1128],{"type":42,"value":120},{"type":36,"tag":95,"props":1130,"children":1131},{"class":97,"line":131},[1132],{"type":36,"tag":95,"props":1133,"children":1134},{"emptyLinePlaceholder":5},[1135],{"type":42,"value":120},{"type":36,"tag":95,"props":1137,"children":1138},{"class":97,"line":166},[1139,1144,1149],{"type":36,"tag":95,"props":1140,"children":1141},{"style":102},[1142],{"type":42,"value":1143},"class",{"type":36,"tag":95,"props":1145,"children":1146},{"style":144},[1147],{"type":42,"value":1148}," Await",{"type":36,"tag":95,"props":1150,"children":1151},{"style":108},[1152],{"type":42,"value":163},{"type":36,"tag":95,"props":1154,"children":1155},{"class":97,"line":190},[1156,1161,1166,1171,1175,1179,1183],{"type":36,"tag":95,"props":1157,"children":1158},{"style":102},[1159],{"type":42,"value":1160},"    def",{"type":36,"tag":95,"props":1162,"children":1163},{"style":155},[1164],{"type":42,"value":1165}," __await__",{"type":36,"tag":95,"props":1167,"children":1168},{"style":108},[1169],{"type":42,"value":1170},"(self) -> Generator[Any, ",{"type":36,"tag":95,"props":1172,"children":1173},{"style":155},[1174],{"type":42,"value":158},{"type":36,"tag":95,"props":1176,"children":1177},{"style":108},[1178],{"type":42,"value":987},{"type":36,"tag":95,"props":1180,"children":1181},{"style":155},[1182],{"type":42,"value":469},{"type":36,"tag":95,"props":1184,"children":1185},{"style":108},[1186],{"type":42,"value":1187},"]:\n",{"type":36,"tag":95,"props":1189,"children":1190},{"class":97,"line":198},[1191,1196,1201,1205,1209,1213,1218],{"type":36,"tag":95,"props":1192,"children":1193},{"style":102},[1194],{"type":42,"value":1195},"        for",{"type":36,"tag":95,"props":1197,"children":1198},{"style":108},[1199],{"type":42,"value":1200}," num ",{"type":36,"tag":95,"props":1202,"children":1203},{"style":102},[1204],{"type":42,"value":629},{"type":36,"tag":95,"props":1206,"children":1207},{"style":155},[1208],{"type":42,"value":634},{"type":36,"tag":95,"props":1210,"children":1211},{"style":108},[1212],{"type":42,"value":639},{"type":36,"tag":95,"props":1214,"children":1215},{"style":155},[1216],{"type":42,"value":1217},"5",{"type":36,"tag":95,"props":1219,"children":1220},{"style":108},[1221],{"type":42,"value":1222},"):\n",{"type":36,"tag":95,"props":1224,"children":1225},{"class":97,"line":206},[1226,1231],{"type":36,"tag":95,"props":1227,"children":1228},{"style":155},[1229],{"type":42,"value":1230},"            print",{"type":36,"tag":95,"props":1232,"children":1233},{"style":108},[1234],{"type":42,"value":1235},"(num)\n",{"type":36,"tag":95,"props":1237,"children":1238},{"class":97,"line":235},[1239,1244],{"type":36,"tag":95,"props":1240,"children":1241},{"style":102},[1242],{"type":42,"value":1243},"            yield",{"type":36,"tag":95,"props":1245,"children":1246},{"style":155},[1247],{"type":42,"value":1248}," None\n",{"type":36,"tag":95,"props":1250,"children":1251},{"class":97,"line":248},[1252,1257],{"type":36,"tag":95,"props":1253,"children":1254},{"style":102},[1255],{"type":42,"value":1256},"        return",{"type":36,"tag":95,"props":1258,"children":1259},{"style":155},[1260],{"type":42,"value":786},{"type":36,"tag":95,"props":1262,"children":1263},{"class":97,"line":256},[1264],{"type":36,"tag":95,"props":1265,"children":1266},{"emptyLinePlaceholder":5},[1267],{"type":42,"value":120},{"type":36,"tag":95,"props":1269,"children":1270},{"class":97,"line":264},[1271],{"type":36,"tag":95,"props":1272,"children":1273},{"emptyLinePlaceholder":5},[1274],{"type":42,"value":120},{"type":36,"tag":95,"props":1276,"children":1277},{"class":97,"line":293},[1278,1282,1286,1290,1294,1298],{"type":36,"tag":95,"props":1279,"children":1280},{"style":102},[1281],{"type":42,"value":30},{"type":36,"tag":95,"props":1283,"children":1284},{"style":102},[1285],{"type":42,"value":141},{"type":36,"tag":95,"props":1287,"children":1288},{"style":144},[1289],{"type":42,"value":220},{"type":36,"tag":95,"props":1291,"children":1292},{"style":108},[1293],{"type":42,"value":152},{"type":36,"tag":95,"props":1295,"children":1296},{"style":155},[1297],{"type":42,"value":158},{"type":36,"tag":95,"props":1299,"children":1300},{"style":108},[1301],{"type":42,"value":163},{"type":36,"tag":95,"props":1303,"children":1304},{"class":97,"line":525},[1305,1309],{"type":36,"tag":95,"props":1306,"children":1307},{"style":102},[1308],{"type":42,"value":172},{"type":36,"tag":95,"props":1310,"children":1311},{"style":108},[1312],{"type":42,"value":1313}," Await()\n",{"type":36,"tag":95,"props":1315,"children":1316},{"class":97,"line":550},[1317],{"type":36,"tag":95,"props":1318,"children":1319},{"emptyLinePlaceholder":5},[1320],{"type":42,"value":120},{"type":36,"tag":95,"props":1322,"children":1323},{"class":97,"line":558},[1324],{"type":36,"tag":95,"props":1325,"children":1326},{"emptyLinePlaceholder":5},[1327],{"type":42,"value":120},{"type":36,"tag":95,"props":1329,"children":1330},{"class":97,"line":566},[1331,1335,1339,1343,1347],{"type":36,"tag":95,"props":1332,"children":1333},{"style":102},[1334],{"type":42,"value":270},{"type":36,"tag":95,"props":1336,"children":1337},{"style":155},[1338],{"type":42,"value":275},{"type":36,"tag":95,"props":1340,"children":1341},{"style":102},[1342],{"type":42,"value":280},{"type":36,"tag":95,"props":1344,"children":1345},{"style":283},[1346],{"type":42,"value":286},{"type":36,"tag":95,"props":1348,"children":1349},{"style":108},[1350],{"type":42,"value":163},{"type":36,"tag":95,"props":1352,"children":1353},{"class":97,"line":594},[1354],{"type":36,"tag":95,"props":1355,"children":1356},{"style":108},[1357],{"type":42,"value":299},{"type":36,"tag":95,"props":1359,"children":1360},{"class":97,"line":652},[1361],{"type":36,"tag":95,"props":1362,"children":1363},{"emptyLinePlaceholder":5},[1364],{"type":42,"value":120},{"type":36,"tag":95,"props":1366,"children":1367},{"class":97,"line":660},[1368],{"type":36,"tag":95,"props":1369,"children":1371},{"style":1370},"--shiki-default:#6A737D;--shiki-dark:#6A737D",[1372],{"type":42,"value":1373},"# ❯ poetry run python main3.py\n",{"type":36,"tag":95,"props":1375,"children":1376},{"class":97,"line":668},[1377],{"type":36,"tag":95,"props":1378,"children":1379},{"style":1370},[1380],{"type":42,"value":1381},"# 0\n",{"type":36,"tag":95,"props":1383,"children":1384},{"class":97,"line":692},[1385],{"type":36,"tag":95,"props":1386,"children":1387},{"style":1370},[1388],{"type":42,"value":1389},"# 1\n",{"type":36,"tag":95,"props":1391,"children":1393},{"class":97,"line":1392},23,[1394],{"type":36,"tag":95,"props":1395,"children":1396},{"style":1370},[1397],{"type":42,"value":1398},"# 2\n",{"type":36,"tag":95,"props":1400,"children":1402},{"class":97,"line":1401},24,[1403],{"type":36,"tag":95,"props":1404,"children":1405},{"style":1370},[1406],{"type":42,"value":1407},"# 3\n",{"type":36,"tag":95,"props":1409,"children":1411},{"class":97,"line":1410},25,[1412],{"type":36,"tag":95,"props":1413,"children":1414},{"style":1370},[1415],{"type":42,"value":1416},"# 4\n",{"type":36,"tag":712,"props":1418,"children":1419},{},[1420],{"type":36,"tag":52,"props":1421,"children":1422},{},[1423,1429,1431,1436,1438,1444,1446,1451],{"type":36,"tag":45,"props":1424,"children":1426},{"className":1425},[],[1427],{"type":42,"value":1428},"Await",{"type":42,"value":1430},"객체를 곧바로 ",{"type":36,"tag":45,"props":1432,"children":1434},{"className":1433},[],[1435],{"type":42,"value":310},{"type":42,"value":1437},"에서 사용하지 않고,\n",{"type":36,"tag":45,"props":1439,"children":1441},{"className":1440},[],[1442],{"type":42,"value":1443},"main",{"type":42,"value":1445},"함수에서 생성하여 사용하는 이유는,\n",{"type":36,"tag":45,"props":1447,"children":1449},{"className":1448},[],[1450],{"type":42,"value":310},{"type":42,"value":1452},"에서 코루틴이 아니면 에러를 발생시키기 때문이다.",{"type":36,"tag":52,"props":1454,"children":1455},{},[1456,1458,1463,1464,1469],{"type":42,"value":1457},"즉, ",{"type":36,"tag":45,"props":1459,"children":1461},{"className":1460},[],[1462],{"type":42,"value":30},{"type":42,"value":987},{"type":36,"tag":45,"props":1465,"children":1467},{"className":1466},[],[1468],{"type":42,"value":69},{"type":42,"value":1470},"은 사실 제너레이터를 활용한\n컨텍스트 스위칭에 대한 문법 설탕이라는 것을 알 수 있다.",{"type":36,"tag":52,"props":1472,"children":1473},{},[1474,1476,1482],{"type":42,"value":1475},"이러한 문법 설탕이 추가되기 전까지는,\n제너레이터 문법인 ",{"type":36,"tag":45,"props":1477,"children":1479},{"className":1478},[],[1480],{"type":42,"value":1481},"yield from",{"type":42,"value":1483},"을 사용했다.",{"type":36,"tag":52,"props":1485,"children":1486},{},[1487,1489,1494,1496,1502,1503,1509,1511,1516,1517,1522],{"type":42,"value":1488},"물론 이러한 사실은 알면 좋지만 별로 중요하지 않다.\n대부분의 경우 ",{"type":36,"tag":45,"props":1490,"children":1492},{"className":1491},[],[1493],{"type":42,"value":1051},{"type":42,"value":1495},"를 직접 정의하기는 커녕\n",{"type":36,"tag":45,"props":1497,"children":1499},{"className":1498},[],[1500],{"type":42,"value":1501},"Future",{"type":42,"value":63},{"type":36,"tag":45,"props":1504,"children":1506},{"className":1505},[],[1507],{"type":42,"value":1508},"Task",{"type":42,"value":1510},"도 구경하기 어려우며,\n",{"type":36,"tag":45,"props":1512,"children":1514},{"className":1513},[],[1515],{"type":42,"value":30},{"type":42,"value":63},{"type":36,"tag":45,"props":1518,"children":1520},{"className":1519},[],[1521],{"type":42,"value":69},{"type":42,"value":1523},"을 사용한 코루틴만 사용할 것이다.",{"type":36,"tag":964,"props":1525,"children":1527},{"id":1526},"콜백-형태의-future",[1528,1530],{"type":42,"value":1529},"콜백 형태의 ",{"type":36,"tag":45,"props":1531,"children":1533},{"className":1532},[],[1534],{"type":42,"value":1501},{"type":36,"tag":52,"props":1536,"children":1537},{},[1538,1543,1545,1550,1552,1558,1559,1564],{"type":36,"tag":45,"props":1539,"children":1541},{"className":1540},[],[1542],{"type":42,"value":50},{"type":42,"value":1544},"의 ",{"type":36,"tag":45,"props":1546,"children":1548},{"className":1547},[],[1549],{"type":42,"value":1501},{"type":42,"value":1551},"는 ",{"type":36,"tag":45,"props":1553,"children":1555},{"className":1554},[],[1556],{"type":42,"value":1557},"concurrent.futures",{"type":42,"value":1544},{"type":36,"tag":45,"props":1560,"children":1562},{"className":1561},[],[1563],{"type":42,"value":1501},{"type":42,"value":1565},"를 본따 만들어졌다.",{"type":36,"tag":52,"props":1567,"children":1568},{},[1569,1574,1575,1580],{"type":36,"tag":45,"props":1570,"children":1572},{"className":1571},[],[1573],{"type":42,"value":1557},{"type":42,"value":1544},{"type":36,"tag":45,"props":1576,"children":1578},{"className":1577},[],[1579],{"type":42,"value":1501},{"type":42,"value":1581},"는 쓰레드를 제어하기 위해 만들어졌고,\n멀티쓰레드 환경의 비동기 제어가 싱글쓰레드 환경으로 확장된 것으로 볼 수도 있다.",{"type":36,"tag":52,"props":1583,"children":1584},{},[1585,1587,1592],{"type":42,"value":1586},"앞서 말했듯이, 대부분의 경우 ",{"type":36,"tag":45,"props":1588,"children":1590},{"className":1589},[],[1591],{"type":42,"value":1501},{"type":42,"value":1593},"에 대해 알 필요가 없고,\n구버전 파이썬을 사용한다면 모를까, 이제는 사용할 일도 없는 객체다.",{"type":36,"tag":964,"props":1595,"children":1597},{"id":1596},"future를-상속받는-task",[1598,1603,1605],{"type":36,"tag":45,"props":1599,"children":1601},{"className":1600},[],[1602],{"type":42,"value":1501},{"type":42,"value":1604},"를 상속받는 ",{"type":36,"tag":45,"props":1606,"children":1608},{"className":1607},[],[1609],{"type":42,"value":1508},{"type":36,"tag":52,"props":1611,"children":1612},{},[1613,1618,1619,1624,1626,1631,1633,1638,1639,1645,1646,1652],{"type":36,"tag":45,"props":1614,"children":1616},{"className":1615},[],[1617],{"type":42,"value":1508},{"type":42,"value":1551},{"type":36,"tag":45,"props":1620,"children":1622},{"className":1621},[],[1623],{"type":42,"value":1501},{"type":42,"value":1625},"를 상속받아 구현한 ",{"type":36,"tag":45,"props":1627,"children":1629},{"className":1628},[],[1630],{"type":42,"value":1031},{"type":42,"value":1632},"한 객체다.\n",{"type":36,"tag":45,"props":1634,"children":1636},{"className":1635},[],[1637],{"type":42,"value":1508},{"type":42,"value":1551},{"type":36,"tag":45,"props":1640,"children":1642},{"className":1641},[],[1643],{"type":42,"value":1644},"js",{"type":42,"value":1544},{"type":36,"tag":45,"props":1647,"children":1649},{"className":1648},[],[1650],{"type":42,"value":1651},"Promise",{"type":42,"value":1653},"처럼, 생성됐다면 이미 이벤트루프에 예약된 상태다.",{"type":36,"tag":712,"props":1655,"children":1656},{},[1657],{"type":36,"tag":52,"props":1658,"children":1659},{},[1660,1665],{"type":36,"tag":45,"props":1661,"children":1663},{"className":1662},[],[1664],{"type":42,"value":1501},{"type":42,"value":1666},"는 생성했지만, 이벤트루프에 예약되어 있지 않을 수 있다.",{"type":36,"tag":52,"props":1668,"children":1669},{},[1670],{"type":42,"value":1671},"따라서 다음과 같은 코드는, 정상적으로 실행된다.",{"type":36,"tag":85,"props":1673,"children":1676},{"className":87,"code":1674,"filename":1675,"language":25,"meta":26,"style":26},"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -> None:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n\n\nasync def main() -> None:\n    coro = test()\n    _ = asyncio.create_task(coro)\n    logger.info(\"before sleep\")\n    await asyncio.sleep(2)\n    logger.info(\"after sleep\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n#  ❯ poetry run python main4.py\n#  before sleep\n#  start\n#  done!\n#  after sleep\n","main4.py",[1677],{"type":36,"tag":45,"props":1678,"children":1679},{"__ignoreMap":26},[1680,1691,1702,1713,1720,1735,1750,1757,1764,1771,1798,1814,1833,1849,1856,1863,1890,1906,1923,1939,1959,1975,1982,1989,2012,2019,2028,2037,2046,2055],{"type":36,"tag":95,"props":1681,"children":1682},{"class":97,"line":98},[1683,1687],{"type":36,"tag":95,"props":1684,"children":1685},{"style":102},[1686],{"type":42,"value":105},{"type":36,"tag":95,"props":1688,"children":1689},{"style":108},[1690],{"type":42,"value":111},{"type":36,"tag":95,"props":1692,"children":1693},{"class":97,"line":114},[1694,1698],{"type":36,"tag":95,"props":1695,"children":1696},{"style":102},[1697],{"type":42,"value":105},{"type":36,"tag":95,"props":1699,"children":1700},{"style":108},[1701],{"type":42,"value":356},{"type":36,"tag":95,"props":1703,"children":1704},{"class":97,"line":123},[1705,1709],{"type":36,"tag":95,"props":1706,"children":1707},{"style":102},[1708],{"type":42,"value":105},{"type":36,"tag":95,"props":1710,"children":1711},{"style":108},[1712],{"type":42,"value":380},{"type":36,"tag":95,"props":1714,"children":1715},{"class":97,"line":131},[1716],{"type":36,"tag":95,"props":1717,"children":1718},{"emptyLinePlaceholder":5},[1719],{"type":42,"value":120},{"type":36,"tag":95,"props":1721,"children":1722},{"class":97,"line":166},[1723,1727,1731],{"type":36,"tag":95,"props":1724,"children":1725},{"style":108},[1726],{"type":42,"value":395},{"type":36,"tag":95,"props":1728,"children":1729},{"style":102},[1730],{"type":42,"value":400},{"type":36,"tag":95,"props":1732,"children":1733},{"style":108},[1734],{"type":42,"value":405},{"type":36,"tag":95,"props":1736,"children":1737},{"class":97,"line":190},[1738,1742,1746],{"type":36,"tag":95,"props":1739,"children":1740},{"style":108},[1741],{"type":42,"value":413},{"type":36,"tag":95,"props":1743,"children":1744},{"style":155},[1745],{"type":42,"value":418},{"type":36,"tag":95,"props":1747,"children":1748},{"style":108},[1749],{"type":42,"value":187},{"type":36,"tag":95,"props":1751,"children":1752},{"class":97,"line":198},[1753],{"type":36,"tag":95,"props":1754,"children":1755},{"style":108},[1756],{"type":42,"value":430},{"type":36,"tag":95,"props":1758,"children":1759},{"class":97,"line":206},[1760],{"type":36,"tag":95,"props":1761,"children":1762},{"emptyLinePlaceholder":5},[1763],{"type":42,"value":120},{"type":36,"tag":95,"props":1765,"children":1766},{"class":97,"line":235},[1767],{"type":36,"tag":95,"props":1768,"children":1769},{"emptyLinePlaceholder":5},[1770],{"type":42,"value":120},{"type":36,"tag":95,"props":1772,"children":1773},{"class":97,"line":248},[1774,1778,1782,1786,1790,1794],{"type":36,"tag":95,"props":1775,"children":1776},{"style":102},[1777],{"type":42,"value":30},{"type":36,"tag":95,"props":1779,"children":1780},{"style":102},[1781],{"type":42,"value":141},{"type":36,"tag":95,"props":1783,"children":1784},{"style":144},[1785],{"type":42,"value":147},{"type":36,"tag":95,"props":1787,"children":1788},{"style":108},[1789],{"type":42,"value":152},{"type":36,"tag":95,"props":1791,"children":1792},{"style":155},[1793],{"type":42,"value":158},{"type":36,"tag":95,"props":1795,"children":1796},{"style":108},[1797],{"type":42,"value":163},{"type":36,"tag":95,"props":1799,"children":1800},{"class":97,"line":256},[1801,1805,1810],{"type":36,"tag":95,"props":1802,"children":1803},{"style":108},[1804],{"type":42,"value":490},{"type":36,"tag":95,"props":1806,"children":1807},{"style":283},[1808],{"type":42,"value":1809},"\"start\"",{"type":36,"tag":95,"props":1811,"children":1812},{"style":108},[1813],{"type":42,"value":187},{"type":36,"tag":95,"props":1815,"children":1816},{"class":97,"line":264},[1817,1821,1825,1829],{"type":36,"tag":95,"props":1818,"children":1819},{"style":102},[1820],{"type":42,"value":172},{"type":36,"tag":95,"props":1822,"children":1823},{"style":108},[1824],{"type":42,"value":177},{"type":36,"tag":95,"props":1826,"children":1827},{"style":155},[1828],{"type":42,"value":182},{"type":36,"tag":95,"props":1830,"children":1831},{"style":108},[1832],{"type":42,"value":187},{"type":36,"tag":95,"props":1834,"children":1835},{"class":97,"line":293},[1836,1840,1845],{"type":36,"tag":95,"props":1837,"children":1838},{"style":108},[1839],{"type":42,"value":490},{"type":36,"tag":95,"props":1841,"children":1842},{"style":283},[1843],{"type":42,"value":1844},"\"done!\"",{"type":36,"tag":95,"props":1846,"children":1847},{"style":108},[1848],{"type":42,"value":187},{"type":36,"tag":95,"props":1850,"children":1851},{"class":97,"line":525},[1852],{"type":36,"tag":95,"props":1853,"children":1854},{"emptyLinePlaceholder":5},[1855],{"type":42,"value":120},{"type":36,"tag":95,"props":1857,"children":1858},{"class":97,"line":550},[1859],{"type":36,"tag":95,"props":1860,"children":1861},{"emptyLinePlaceholder":5},[1862],{"type":42,"value":120},{"type":36,"tag":95,"props":1864,"children":1865},{"class":97,"line":558},[1866,1870,1874,1878,1882,1886],{"type":36,"tag":95,"props":1867,"children":1868},{"style":102},[1869],{"type":42,"value":30},{"type":36,"tag":95,"props":1871,"children":1872},{"style":102},[1873],{"type":42,"value":141},{"type":36,"tag":95,"props":1875,"children":1876},{"style":144},[1877],{"type":42,"value":220},{"type":36,"tag":95,"props":1879,"children":1880},{"style":108},[1881],{"type":42,"value":152},{"type":36,"tag":95,"props":1883,"children":1884},{"style":155},[1885],{"type":42,"value":158},{"type":36,"tag":95,"props":1887,"children":1888},{"style":108},[1889],{"type":42,"value":163},{"type":36,"tag":95,"props":1891,"children":1892},{"class":97,"line":566},[1893,1898,1902],{"type":36,"tag":95,"props":1894,"children":1895},{"style":108},[1896],{"type":42,"value":1897},"    coro ",{"type":36,"tag":95,"props":1899,"children":1900},{"style":102},[1901],{"type":42,"value":400},{"type":36,"tag":95,"props":1903,"children":1904},{"style":108},[1905],{"type":42,"value":245},{"type":36,"tag":95,"props":1907,"children":1908},{"class":97,"line":594},[1909,1914,1918],{"type":36,"tag":95,"props":1910,"children":1911},{"style":108},[1912],{"type":42,"value":1913},"    _ ",{"type":36,"tag":95,"props":1915,"children":1916},{"style":102},[1917],{"type":42,"value":400},{"type":36,"tag":95,"props":1919,"children":1920},{"style":108},[1921],{"type":42,"value":1922}," asyncio.create_task(coro)\n",{"type":36,"tag":95,"props":1924,"children":1925},{"class":97,"line":652},[1926,1930,1935],{"type":36,"tag":95,"props":1927,"children":1928},{"style":108},[1929],{"type":42,"value":490},{"type":36,"tag":95,"props":1931,"children":1932},{"style":283},[1933],{"type":42,"value":1934},"\"before sleep\"",{"type":36,"tag":95,"props":1936,"children":1937},{"style":108},[1938],{"type":42,"value":187},{"type":36,"tag":95,"props":1940,"children":1941},{"class":97,"line":660},[1942,1946,1950,1955],{"type":36,"tag":95,"props":1943,"children":1944},{"style":102},[1945],{"type":42,"value":172},{"type":36,"tag":95,"props":1947,"children":1948},{"style":108},[1949],{"type":42,"value":177},{"type":36,"tag":95,"props":1951,"children":1952},{"style":155},[1953],{"type":42,"value":1954},"2",{"type":36,"tag":95,"props":1956,"children":1957},{"style":108},[1958],{"type":42,"value":187},{"type":36,"tag":95,"props":1960,"children":1961},{"class":97,"line":668},[1962,1966,1971],{"type":36,"tag":95,"props":1963,"children":1964},{"style":108},[1965],{"type":42,"value":490},{"type":36,"tag":95,"props":1967,"children":1968},{"style":283},[1969],{"type":42,"value":1970},"\"after sleep\"",{"type":36,"tag":95,"props":1972,"children":1973},{"style":108},[1974],{"type":42,"value":187},{"type":36,"tag":95,"props":1976,"children":1977},{"class":97,"line":692},[1978],{"type":36,"tag":95,"props":1979,"children":1980},{"emptyLinePlaceholder":5},[1981],{"type":42,"value":120},{"type":36,"tag":95,"props":1983,"children":1984},{"class":97,"line":1392},[1985],{"type":36,"tag":95,"props":1986,"children":1987},{"emptyLinePlaceholder":5},[1988],{"type":42,"value":120},{"type":36,"tag":95,"props":1990,"children":1991},{"class":97,"line":1401},[1992,1996,2000,2004,2008],{"type":36,"tag":95,"props":1993,"children":1994},{"style":102},[1995],{"type":42,"value":270},{"type":36,"tag":95,"props":1997,"children":1998},{"style":155},[1999],{"type":42,"value":275},{"type":36,"tag":95,"props":2001,"children":2002},{"style":102},[2003],{"type":42,"value":280},{"type":36,"tag":95,"props":2005,"children":2006},{"style":283},[2007],{"type":42,"value":286},{"type":36,"tag":95,"props":2009,"children":2010},{"style":108},[2011],{"type":42,"value":163},{"type":36,"tag":95,"props":2013,"children":2014},{"class":97,"line":1410},[2015],{"type":36,"tag":95,"props":2016,"children":2017},{"style":108},[2018],{"type":42,"value":299},{"type":36,"tag":95,"props":2020,"children":2022},{"class":97,"line":2021},26,[2023],{"type":36,"tag":95,"props":2024,"children":2025},{"style":1370},[2026],{"type":42,"value":2027},"#  ❯ poetry run python main4.py\n",{"type":36,"tag":95,"props":2029,"children":2031},{"class":97,"line":2030},27,[2032],{"type":36,"tag":95,"props":2033,"children":2034},{"style":1370},[2035],{"type":42,"value":2036},"#  before sleep\n",{"type":36,"tag":95,"props":2038,"children":2040},{"class":97,"line":2039},28,[2041],{"type":36,"tag":95,"props":2042,"children":2043},{"style":1370},[2044],{"type":42,"value":2045},"#  start\n",{"type":36,"tag":95,"props":2047,"children":2049},{"class":97,"line":2048},29,[2050],{"type":36,"tag":95,"props":2051,"children":2052},{"style":1370},[2053],{"type":42,"value":2054},"#  done!\n",{"type":36,"tag":95,"props":2056,"children":2058},{"class":97,"line":2057},30,[2059],{"type":36,"tag":95,"props":2060,"children":2061},{"style":1370},[2062],{"type":42,"value":2063},"#  after sleep\n",{"type":36,"tag":52,"props":2065,"children":2066},{},[2067,2072,2074,2079,2080,2085,2087,2093,2095,2100,2102,2108],{"type":36,"tag":45,"props":2068,"children":2070},{"className":2069},[],[2071],{"type":42,"value":69},{"type":42,"value":2073}," 또는 ",{"type":36,"tag":45,"props":2075,"children":2077},{"className":2076},[],[2078],{"type":42,"value":1481},{"type":42,"value":2073},{"type":36,"tag":45,"props":2081,"children":2083},{"className":2082},[],[2084],{"type":42,"value":1051},{"type":42,"value":2086},"메소드를 직업 호출하지 않았지만,\n",{"type":36,"tag":45,"props":2088,"children":2090},{"className":2089},[],[2091],{"type":42,"value":2092},"test",{"type":42,"value":2094},"로 정의된 비동기 함수는 정상적으로 실행됐다.\n왜냐하면 신규 ",{"type":36,"tag":45,"props":2096,"children":2098},{"className":2097},[],[2099],{"type":42,"value":1508},{"type":42,"value":2101},"객체를 생성했고,\n이후 ",{"type":36,"tag":45,"props":2103,"children":2105},{"className":2104},[],[2106],{"type":42,"value":2107},"await asyncio.sleep(2)",{"type":42,"value":2109},"를 통해 콘텍스트 스위칭을 유발했기 때문이다.",{"type":36,"tag":52,"props":2111,"children":2112},{},[2113],{"type":42,"value":2114},"정리하자면 다음과 같다.",{"type":36,"tag":2116,"props":2117,"children":2118},"ol",{},[2119,2130,2143,2169,2188,2198,2210],{"type":36,"tag":2120,"props":2121,"children":2122},"li",{},[2123,2128],{"type":36,"tag":45,"props":2124,"children":2126},{"className":2125},[],[2127],{"type":42,"value":2092},{"type":42,"value":2129},"함수를 실행하여 코루틴을 생성한다.",{"type":36,"tag":2120,"props":2131,"children":2132},{},[2133,2135,2141],{"type":42,"value":2134},"생성한 코루틴을 ",{"type":36,"tag":45,"props":2136,"children":2138},{"className":2137},[],[2139],{"type":42,"value":2140},"asyncio.create_task",{"type":42,"value":2142},"함수를 사용하여, 이벤트루프에 예약한다.",{"type":36,"tag":2120,"props":2144,"children":2145},{},[2146,2152,2154,2159,2161,2167],{"type":36,"tag":45,"props":2147,"children":2149},{"className":2148},[],[2150],{"type":42,"value":2151},"create_task",{"type":42,"value":2153},"함수가 ",{"type":36,"tag":45,"props":2155,"children":2157},{"className":2156},[],[2158],{"type":42,"value":1508},{"type":42,"value":2160},"객체를 반환한다.(의도적으로 ",{"type":36,"tag":45,"props":2162,"children":2164},{"className":2163},[],[2165],{"type":42,"value":2166},"_",{"type":42,"value":2168},"를 사용하여 무시하였다.)",{"type":36,"tag":2120,"props":2170,"children":2171},{},[2172,2174,2179,2181,2186],{"type":42,"value":2173},"아직 ",{"type":36,"tag":45,"props":2175,"children":2177},{"className":2176},[],[2178],{"type":42,"value":1443},{"type":42,"value":2180},"함수가 콘텍스트를 점유중이므로, 앞서 생성한 ",{"type":36,"tag":45,"props":2182,"children":2184},{"className":2183},[],[2185],{"type":42,"value":1508},{"type":42,"value":2187},"는 실행되지 않았다.",{"type":36,"tag":2120,"props":2189,"children":2190},{},[2191,2196],{"type":36,"tag":45,"props":2192,"children":2194},{"className":2193},[],[2195],{"type":42,"value":2107},{"type":42,"value":2197},"를 통해, 콘텍스트 점유를 해제한다.",{"type":36,"tag":2120,"props":2199,"children":2200},{},[2201,2203,2208],{"type":42,"value":2202},"앞서 생성한 ",{"type":36,"tag":45,"props":2204,"children":2206},{"className":2205},[],[2207],{"type":42,"value":1508},{"type":42,"value":2209},"로 콘텍스트가 변경된다.",{"type":36,"tag":2120,"props":2211,"children":2212},{},[2213],{"type":42,"value":2214},"이하 생략",{"type":36,"tag":52,"props":2216,"children":2217},{},[2218,2219,2224,2226,2231],{"type":42,"value":1457},{"type":36,"tag":45,"props":2220,"children":2222},{"className":2221},[],[2223],{"type":42,"value":69},{"type":42,"value":2225},"이 콘텍스트 스위칭에 대한 문법 설탕이자,\n동시에 ",{"type":36,"tag":45,"props":2227,"children":2229},{"className":2228},[],[2230],{"type":42,"value":1508},{"type":42,"value":2232},"를 생성하는 문법 설탕인 것을 알 수 있다.",{"type":36,"tag":52,"props":2234,"children":2235},{},[2236],{"type":42,"value":2237},"여기서 한가지 궁금한 점이 생긴다.",{"type":36,"tag":2116,"props":2239,"children":2240},{},[2241,2253,2265],{"type":36,"tag":2120,"props":2242,"children":2243},{},[2244,2246,2251],{"type":42,"value":2245},"한번 생성한 코루틴은, 한번만 ",{"type":36,"tag":45,"props":2247,"children":2249},{"className":2248},[],[2250],{"type":42,"value":69},{"type":42,"value":2252},"으로 대기할 수 있다.",{"type":36,"tag":2120,"props":2254,"children":2255},{},[2256,2258,2263],{"type":42,"value":2257},"한번 생성한 코루틴은, ",{"type":36,"tag":45,"props":2259,"children":2261},{"className":2260},[],[2262],{"type":42,"value":1508},{"type":42,"value":2264},"를 생성할 수 있다.",{"type":36,"tag":2120,"props":2266,"children":2267},{},[2268,2273,2274,2279,2281,2286],{"type":36,"tag":45,"props":2269,"children":2271},{"className":2270},[],[2272],{"type":42,"value":1508},{"type":42,"value":1551},{"type":36,"tag":45,"props":2275,"children":2277},{"className":2276},[],[2278],{"type":42,"value":1031},{"type":42,"value":2280},"이므로 ",{"type":36,"tag":45,"props":2282,"children":2284},{"className":2283},[],[2285],{"type":42,"value":69},{"type":42,"value":2252},{"type":36,"tag":52,"props":2288,"children":2289},{},[2290,2292,2297,2299,2305,2306,2311],{"type":42,"value":2291},"이전의 ",{"type":36,"tag":45,"props":2293,"children":2295},{"className":2294},[],[2296],{"type":42,"value":1675},{"type":42,"value":2298}," 스크립트에서 코루틴 ",{"type":36,"tag":45,"props":2300,"children":2302},{"className":2301},[],[2303],{"type":42,"value":2304},"coro",{"type":42,"value":1551},{"type":36,"tag":45,"props":2307,"children":2309},{"className":2308},[],[2310],{"type":42,"value":2151},{"type":42,"value":2312},"함수를 통해\n이미 실행된 상태다.",{"type":36,"tag":52,"props":2314,"children":2315},{},[2316,2318,2323],{"type":42,"value":2317},"이후 생성한 ",{"type":36,"tag":45,"props":2319,"children":2321},{"className":2320},[],[2322],{"type":42,"value":1508},{"type":42,"value":2324},"를 대기하는 것이 가능할까?",{"type":36,"tag":85,"props":2326,"children":2329},{"className":87,"code":2327,"filename":2328,"language":25,"meta":26,"style":26},"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -> int:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n    return 1\n\n\nasync def main() -> None:\n    coro = test()\n    task = asyncio.create_task(coro)\n\n    logger.info(\"before sleep\")\n\n    queue = asyncio.Queue(1)\n    task.add_done_callback(lambda task: queue.put_nowait(task.result()))\n\n    value = await task\n\n    logger.info(\"after sleep\")\n\n    result = task.result()\n    queue_value = await queue.get()\n    logger.info(\"value=%r, result=%r, queue_value=%r\", value, result, queue_value)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main5.py\n# before sleep\n# start\n# done!\n# after sleep\n# value=1, result=1, queue_value=1\n","main5.py",[2330],{"type":36,"tag":45,"props":2331,"children":2332},{"__ignoreMap":26},[2333,2344,2355,2366,2373,2388,2403,2410,2417,2424,2451,2466,2485,2500,2512,2519,2526,2553,2568,2584,2591,2606,2613,2638,2656,2663,2685,2692,2707,2714,2731,2753,2798,2806,2814,2838,2846,2855,2864,2873,2882,2891],{"type":36,"tag":95,"props":2334,"children":2335},{"class":97,"line":98},[2336,2340],{"type":36,"tag":95,"props":2337,"children":2338},{"style":102},[2339],{"type":42,"value":105},{"type":36,"tag":95,"props":2341,"children":2342},{"style":108},[2343],{"type":42,"value":111},{"type":36,"tag":95,"props":2345,"children":2346},{"class":97,"line":114},[2347,2351],{"type":36,"tag":95,"props":2348,"children":2349},{"style":102},[2350],{"type":42,"value":105},{"type":36,"tag":95,"props":2352,"children":2353},{"style":108},[2354],{"type":42,"value":356},{"type":36,"tag":95,"props":2356,"children":2357},{"class":97,"line":123},[2358,2362],{"type":36,"tag":95,"props":2359,"children":2360},{"style":102},[2361],{"type":42,"value":105},{"type":36,"tag":95,"props":2363,"children":2364},{"style":108},[2365],{"type":42,"value":380},{"type":36,"tag":95,"props":2367,"children":2368},{"class":97,"line":131},[2369],{"type":36,"tag":95,"props":2370,"children":2371},{"emptyLinePlaceholder":5},[2372],{"type":42,"value":120},{"type":36,"tag":95,"props":2374,"children":2375},{"class":97,"line":166},[2376,2380,2384],{"type":36,"tag":95,"props":2377,"children":2378},{"style":108},[2379],{"type":42,"value":395},{"type":36,"tag":95,"props":2381,"children":2382},{"style":102},[2383],{"type":42,"value":400},{"type":36,"tag":95,"props":2385,"children":2386},{"style":108},[2387],{"type":42,"value":405},{"type":36,"tag":95,"props":2389,"children":2390},{"class":97,"line":190},[2391,2395,2399],{"type":36,"tag":95,"props":2392,"children":2393},{"style":108},[2394],{"type":42,"value":413},{"type":36,"tag":95,"props":2396,"children":2397},{"style":155},[2398],{"type":42,"value":418},{"type":36,"tag":95,"props":2400,"children":2401},{"style":108},[2402],{"type":42,"value":187},{"type":36,"tag":95,"props":2404,"children":2405},{"class":97,"line":198},[2406],{"type":36,"tag":95,"props":2407,"children":2408},{"style":108},[2409],{"type":42,"value":430},{"type":36,"tag":95,"props":2411,"children":2412},{"class":97,"line":206},[2413],{"type":36,"tag":95,"props":2414,"children":2415},{"emptyLinePlaceholder":5},[2416],{"type":42,"value":120},{"type":36,"tag":95,"props":2418,"children":2419},{"class":97,"line":235},[2420],{"type":36,"tag":95,"props":2421,"children":2422},{"emptyLinePlaceholder":5},[2423],{"type":42,"value":120},{"type":36,"tag":95,"props":2425,"children":2426},{"class":97,"line":248},[2427,2431,2435,2439,2443,2447],{"type":36,"tag":95,"props":2428,"children":2429},{"style":102},[2430],{"type":42,"value":30},{"type":36,"tag":95,"props":2432,"children":2433},{"style":102},[2434],{"type":42,"value":141},{"type":36,"tag":95,"props":2436,"children":2437},{"style":144},[2438],{"type":42,"value":147},{"type":36,"tag":95,"props":2440,"children":2441},{"style":108},[2442],{"type":42,"value":152},{"type":36,"tag":95,"props":2444,"children":2445},{"style":155},[2446],{"type":42,"value":469},{"type":36,"tag":95,"props":2448,"children":2449},{"style":108},[2450],{"type":42,"value":163},{"type":36,"tag":95,"props":2452,"children":2453},{"class":97,"line":256},[2454,2458,2462],{"type":36,"tag":95,"props":2455,"children":2456},{"style":108},[2457],{"type":42,"value":490},{"type":36,"tag":95,"props":2459,"children":2460},{"style":283},[2461],{"type":42,"value":1809},{"type":36,"tag":95,"props":2463,"children":2464},{"style":108},[2465],{"type":42,"value":187},{"type":36,"tag":95,"props":2467,"children":2468},{"class":97,"line":264},[2469,2473,2477,2481],{"type":36,"tag":95,"props":2470,"children":2471},{"style":102},[2472],{"type":42,"value":172},{"type":36,"tag":95,"props":2474,"children":2475},{"style":108},[2476],{"type":42,"value":177},{"type":36,"tag":95,"props":2478,"children":2479},{"style":155},[2480],{"type":42,"value":182},{"type":36,"tag":95,"props":2482,"children":2483},{"style":108},[2484],{"type":42,"value":187},{"type":36,"tag":95,"props":2486,"children":2487},{"class":97,"line":293},[2488,2492,2496],{"type":36,"tag":95,"props":2489,"children":2490},{"style":108},[2491],{"type":42,"value":490},{"type":36,"tag":95,"props":2493,"children":2494},{"style":283},[2495],{"type":42,"value":1844},{"type":36,"tag":95,"props":2497,"children":2498},{"style":108},[2499],{"type":42,"value":187},{"type":36,"tag":95,"props":2501,"children":2502},{"class":97,"line":525},[2503,2508],{"type":36,"tag":95,"props":2504,"children":2505},{"style":102},[2506],{"type":42,"value":2507},"    return",{"type":36,"tag":95,"props":2509,"children":2510},{"style":155},[2511],{"type":42,"value":786},{"type":36,"tag":95,"props":2513,"children":2514},{"class":97,"line":550},[2515],{"type":36,"tag":95,"props":2516,"children":2517},{"emptyLinePlaceholder":5},[2518],{"type":42,"value":120},{"type":36,"tag":95,"props":2520,"children":2521},{"class":97,"line":558},[2522],{"type":36,"tag":95,"props":2523,"children":2524},{"emptyLinePlaceholder":5},[2525],{"type":42,"value":120},{"type":36,"tag":95,"props":2527,"children":2528},{"class":97,"line":566},[2529,2533,2537,2541,2545,2549],{"type":36,"tag":95,"props":2530,"children":2531},{"style":102},[2532],{"type":42,"value":30},{"type":36,"tag":95,"props":2534,"children":2535},{"style":102},[2536],{"type":42,"value":141},{"type":36,"tag":95,"props":2538,"children":2539},{"style":144},[2540],{"type":42,"value":220},{"type":36,"tag":95,"props":2542,"children":2543},{"style":108},[2544],{"type":42,"value":152},{"type":36,"tag":95,"props":2546,"children":2547},{"style":155},[2548],{"type":42,"value":158},{"type":36,"tag":95,"props":2550,"children":2551},{"style":108},[2552],{"type":42,"value":163},{"type":36,"tag":95,"props":2554,"children":2555},{"class":97,"line":594},[2556,2560,2564],{"type":36,"tag":95,"props":2557,"children":2558},{"style":108},[2559],{"type":42,"value":1897},{"type":36,"tag":95,"props":2561,"children":2562},{"style":102},[2563],{"type":42,"value":400},{"type":36,"tag":95,"props":2565,"children":2566},{"style":108},[2567],{"type":42,"value":245},{"type":36,"tag":95,"props":2569,"children":2570},{"class":97,"line":652},[2571,2576,2580],{"type":36,"tag":95,"props":2572,"children":2573},{"style":108},[2574],{"type":42,"value":2575},"    task ",{"type":36,"tag":95,"props":2577,"children":2578},{"style":102},[2579],{"type":42,"value":400},{"type":36,"tag":95,"props":2581,"children":2582},{"style":108},[2583],{"type":42,"value":1922},{"type":36,"tag":95,"props":2585,"children":2586},{"class":97,"line":660},[2587],{"type":36,"tag":95,"props":2588,"children":2589},{"emptyLinePlaceholder":5},[2590],{"type":42,"value":120},{"type":36,"tag":95,"props":2592,"children":2593},{"class":97,"line":668},[2594,2598,2602],{"type":36,"tag":95,"props":2595,"children":2596},{"style":108},[2597],{"type":42,"value":490},{"type":36,"tag":95,"props":2599,"children":2600},{"style":283},[2601],{"type":42,"value":1934},{"type":36,"tag":95,"props":2603,"children":2604},{"style":108},[2605],{"type":42,"value":187},{"type":36,"tag":95,"props":2607,"children":2608},{"class":97,"line":692},[2609],{"type":36,"tag":95,"props":2610,"children":2611},{"emptyLinePlaceholder":5},[2612],{"type":42,"value":120},{"type":36,"tag":95,"props":2614,"children":2615},{"class":97,"line":1392},[2616,2621,2625,2630,2634],{"type":36,"tag":95,"props":2617,"children":2618},{"style":108},[2619],{"type":42,"value":2620},"    queue ",{"type":36,"tag":95,"props":2622,"children":2623},{"style":102},[2624],{"type":42,"value":400},{"type":36,"tag":95,"props":2626,"children":2627},{"style":108},[2628],{"type":42,"value":2629}," asyncio.Queue(",{"type":36,"tag":95,"props":2631,"children":2632},{"style":155},[2633],{"type":42,"value":182},{"type":36,"tag":95,"props":2635,"children":2636},{"style":108},[2637],{"type":42,"value":187},{"type":36,"tag":95,"props":2639,"children":2640},{"class":97,"line":1401},[2641,2646,2651],{"type":36,"tag":95,"props":2642,"children":2643},{"style":108},[2644],{"type":42,"value":2645},"    task.add_done_callback(",{"type":36,"tag":95,"props":2647,"children":2648},{"style":102},[2649],{"type":42,"value":2650},"lambda",{"type":36,"tag":95,"props":2652,"children":2653},{"style":108},[2654],{"type":42,"value":2655}," task: queue.put_nowait(task.result()))\n",{"type":36,"tag":95,"props":2657,"children":2658},{"class":97,"line":1410},[2659],{"type":36,"tag":95,"props":2660,"children":2661},{"emptyLinePlaceholder":5},[2662],{"type":42,"value":120},{"type":36,"tag":95,"props":2664,"children":2665},{"class":97,"line":2021},[2666,2671,2675,2680],{"type":36,"tag":95,"props":2667,"children":2668},{"style":108},[2669],{"type":42,"value":2670},"    value ",{"type":36,"tag":95,"props":2672,"children":2673},{"style":102},[2674],{"type":42,"value":400},{"type":36,"tag":95,"props":2676,"children":2677},{"style":102},[2678],{"type":42,"value":2679}," await",{"type":36,"tag":95,"props":2681,"children":2682},{"style":108},[2683],{"type":42,"value":2684}," task\n",{"type":36,"tag":95,"props":2686,"children":2687},{"class":97,"line":2030},[2688],{"type":36,"tag":95,"props":2689,"children":2690},{"emptyLinePlaceholder":5},[2691],{"type":42,"value":120},{"type":36,"tag":95,"props":2693,"children":2694},{"class":97,"line":2039},[2695,2699,2703],{"type":36,"tag":95,"props":2696,"children":2697},{"style":108},[2698],{"type":42,"value":490},{"type":36,"tag":95,"props":2700,"children":2701},{"style":283},[2702],{"type":42,"value":1970},{"type":36,"tag":95,"props":2704,"children":2705},{"style":108},[2706],{"type":42,"value":187},{"type":36,"tag":95,"props":2708,"children":2709},{"class":97,"line":2048},[2710],{"type":36,"tag":95,"props":2711,"children":2712},{"emptyLinePlaceholder":5},[2713],{"type":42,"value":120},{"type":36,"tag":95,"props":2715,"children":2716},{"class":97,"line":2057},[2717,2722,2726],{"type":36,"tag":95,"props":2718,"children":2719},{"style":108},[2720],{"type":42,"value":2721},"    result ",{"type":36,"tag":95,"props":2723,"children":2724},{"style":102},[2725],{"type":42,"value":400},{"type":36,"tag":95,"props":2727,"children":2728},{"style":108},[2729],{"type":42,"value":2730}," task.result()\n",{"type":36,"tag":95,"props":2732,"children":2734},{"class":97,"line":2733},31,[2735,2740,2744,2748],{"type":36,"tag":95,"props":2736,"children":2737},{"style":108},[2738],{"type":42,"value":2739},"    queue_value ",{"type":36,"tag":95,"props":2741,"children":2742},{"style":102},[2743],{"type":42,"value":400},{"type":36,"tag":95,"props":2745,"children":2746},{"style":102},[2747],{"type":42,"value":2679},{"type":36,"tag":95,"props":2749,"children":2750},{"style":108},[2751],{"type":42,"value":2752}," queue.get()\n",{"type":36,"tag":95,"props":2754,"children":2756},{"class":97,"line":2755},32,[2757,2761,2766,2771,2776,2780,2785,2789,2793],{"type":36,"tag":95,"props":2758,"children":2759},{"style":108},[2760],{"type":42,"value":490},{"type":36,"tag":95,"props":2762,"children":2763},{"style":283},[2764],{"type":42,"value":2765},"\"value=",{"type":36,"tag":95,"props":2767,"children":2768},{"style":155},[2769],{"type":42,"value":2770},"%r",{"type":36,"tag":95,"props":2772,"children":2773},{"style":283},[2774],{"type":42,"value":2775},", result=",{"type":36,"tag":95,"props":2777,"children":2778},{"style":155},[2779],{"type":42,"value":2770},{"type":36,"tag":95,"props":2781,"children":2782},{"style":283},[2783],{"type":42,"value":2784},", queue_value=",{"type":36,"tag":95,"props":2786,"children":2787},{"style":155},[2788],{"type":42,"value":2770},{"type":36,"tag":95,"props":2790,"children":2791},{"style":283},[2792],{"type":42,"value":505},{"type":36,"tag":95,"props":2794,"children":2795},{"style":108},[2796],{"type":42,"value":2797},", value, result, queue_value)\n",{"type":36,"tag":95,"props":2799,"children":2801},{"class":97,"line":2800},33,[2802],{"type":36,"tag":95,"props":2803,"children":2804},{"emptyLinePlaceholder":5},[2805],{"type":42,"value":120},{"type":36,"tag":95,"props":2807,"children":2809},{"class":97,"line":2808},34,[2810],{"type":36,"tag":95,"props":2811,"children":2812},{"emptyLinePlaceholder":5},[2813],{"type":42,"value":120},{"type":36,"tag":95,"props":2815,"children":2817},{"class":97,"line":2816},35,[2818,2822,2826,2830,2834],{"type":36,"tag":95,"props":2819,"children":2820},{"style":102},[2821],{"type":42,"value":270},{"type":36,"tag":95,"props":2823,"children":2824},{"style":155},[2825],{"type":42,"value":275},{"type":36,"tag":95,"props":2827,"children":2828},{"style":102},[2829],{"type":42,"value":280},{"type":36,"tag":95,"props":2831,"children":2832},{"style":283},[2833],{"type":42,"value":286},{"type":36,"tag":95,"props":2835,"children":2836},{"style":108},[2837],{"type":42,"value":163},{"type":36,"tag":95,"props":2839,"children":2841},{"class":97,"line":2840},36,[2842],{"type":36,"tag":95,"props":2843,"children":2844},{"style":108},[2845],{"type":42,"value":299},{"type":36,"tag":95,"props":2847,"children":2849},{"class":97,"line":2848},37,[2850],{"type":36,"tag":95,"props":2851,"children":2852},{"style":1370},[2853],{"type":42,"value":2854},"# ❯ poetry run python main5.py\n",{"type":36,"tag":95,"props":2856,"children":2858},{"class":97,"line":2857},38,[2859],{"type":36,"tag":95,"props":2860,"children":2861},{"style":1370},[2862],{"type":42,"value":2863},"# before sleep\n",{"type":36,"tag":95,"props":2865,"children":2867},{"class":97,"line":2866},39,[2868],{"type":36,"tag":95,"props":2869,"children":2870},{"style":1370},[2871],{"type":42,"value":2872},"# start\n",{"type":36,"tag":95,"props":2874,"children":2876},{"class":97,"line":2875},40,[2877],{"type":36,"tag":95,"props":2878,"children":2879},{"style":1370},[2880],{"type":42,"value":2881},"# done!\n",{"type":36,"tag":95,"props":2883,"children":2885},{"class":97,"line":2884},41,[2886],{"type":36,"tag":95,"props":2887,"children":2888},{"style":1370},[2889],{"type":42,"value":2890},"# after sleep\n",{"type":36,"tag":95,"props":2892,"children":2894},{"class":97,"line":2893},42,[2895],{"type":36,"tag":95,"props":2896,"children":2897},{"style":1370},[2898],{"type":42,"value":2899},"# value=1, result=1, queue_value=1\n",{"type":36,"tag":52,"props":2901,"children":2902},{},[2903,2905,2910],{"type":42,"value":2904},"가능하다. ",{"type":36,"tag":45,"props":2906,"children":2908},{"className":2907},[],[2909],{"type":42,"value":1508},{"type":42,"value":2911},"는 코루틴을 이벤트 루프에 예약하는 객체지, 코루틴 그 자체가 아니기 때문이다.",{"type":36,"tag":52,"props":2913,"children":2914},{},[2915,2917,2922,2924,2929,2931,2937,2939,2945],{"type":42,"value":2916},"그렇기에 단 한번 ",{"type":36,"tag":45,"props":2918,"children":2920},{"className":2919},[],[2921],{"type":42,"value":69},{"type":42,"value":2923},"으로 대기할 수 있다.\n동시에 ",{"type":36,"tag":45,"props":2925,"children":2927},{"className":2926},[],[2928],{"type":42,"value":1501},{"type":42,"value":2930},"이기에, ",{"type":36,"tag":45,"props":2932,"children":2934},{"className":2933},[],[2935],{"type":42,"value":2936},"result",{"type":42,"value":2938}," 메소드를 사용하여 값을 가져올 수도 있으며\n",{"type":36,"tag":45,"props":2940,"children":2942},{"className":2941},[],[2943],{"type":42,"value":2944},"add_done_callback",{"type":42,"value":2946}," 메소드를 사용하여, 콜백을 추가할 수도 있다.",{"type":36,"tag":37,"props":2948,"children":2950},{"id":2949},"future와-task는-언제-사용할까",[2951,2956,2957,2962],{"type":36,"tag":45,"props":2952,"children":2954},{"className":2953},[],[2955],{"type":42,"value":1501},{"type":42,"value":63},{"type":36,"tag":45,"props":2958,"children":2960},{"className":2959},[],[2961],{"type":42,"value":1508},{"type":42,"value":2963},"는 언제 사용할까",{"type":36,"tag":52,"props":2965,"children":2966},{},[2967,2972,2973,2978],{"type":36,"tag":45,"props":2968,"children":2970},{"className":2969},[],[2971],{"type":42,"value":1501},{"type":42,"value":2073},{"type":36,"tag":45,"props":2974,"children":2976},{"className":2975},[],[2977],{"type":42,"value":1508},{"type":42,"value":2979},"는 대부분의 경우 직접 사용할 일이 없다.\n하지만 저수준 api를 다뤄야 하거나, 효율적인 코드를 목표로 한다면,\n필연적으로 다뤄야 하는 순간이 온다.",{"type":36,"tag":964,"props":2981,"children":2983},{"id":2982},"task가-필요한-상황",[2984,2989],{"type":36,"tag":45,"props":2985,"children":2987},{"className":2986},[],[2988],{"type":42,"value":1508},{"type":42,"value":2990},"가 필요한 상황",{"type":36,"tag":85,"props":2992,"children":2995},{"className":87,"code":2993,"filename":2994,"language":25,"meta":26,"style":26},"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom typing import Awaitable\n\n\nasync def test(value: int) -> int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod > rand:\n        error_msg = f\"mod > {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -> int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\nasync def main() -> None:\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    result = await asyncio.gather(*(shield(coro) for coro in coros))\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6.py\n# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n","main6.py",[2996],{"type":36,"tag":45,"props":2997,"children":2998},{"__ignoreMap":26},[2999,3021,3028,3039,3050,3070,3077,3084,3120,3147,3180,3199,3222,3264,3282,3294,3301,3308,3356,3368,3384,3400,3411,3418,3425,3452,3522,3568,3581,3588,3595,3618,3625,3633],{"type":36,"tag":95,"props":3000,"children":3001},{"class":97,"line":98},[3002,3006,3011,3016],{"type":36,"tag":95,"props":3003,"children":3004},{"style":102},[3005],{"type":42,"value":1107},{"type":36,"tag":95,"props":3007,"children":3008},{"style":155},[3009],{"type":42,"value":3010}," __future__",{"type":36,"tag":95,"props":3012,"children":3013},{"style":102},[3014],{"type":42,"value":3015}," import",{"type":36,"tag":95,"props":3017,"children":3018},{"style":108},[3019],{"type":42,"value":3020}," annotations\n",{"type":36,"tag":95,"props":3022,"children":3023},{"class":97,"line":114},[3024],{"type":36,"tag":95,"props":3025,"children":3026},{"emptyLinePlaceholder":5},[3027],{"type":42,"value":120},{"type":36,"tag":95,"props":3029,"children":3030},{"class":97,"line":123},[3031,3035],{"type":36,"tag":95,"props":3032,"children":3033},{"style":102},[3034],{"type":42,"value":105},{"type":36,"tag":95,"props":3036,"children":3037},{"style":108},[3038],{"type":42,"value":111},{"type":36,"tag":95,"props":3040,"children":3041},{"class":97,"line":131},[3042,3046],{"type":36,"tag":95,"props":3043,"children":3044},{"style":102},[3045],{"type":42,"value":105},{"type":36,"tag":95,"props":3047,"children":3048},{"style":108},[3049],{"type":42,"value":368},{"type":36,"tag":95,"props":3051,"children":3052},{"class":97,"line":166},[3053,3057,3061,3065],{"type":36,"tag":95,"props":3054,"children":3055},{"style":102},[3056],{"type":42,"value":1107},{"type":36,"tag":95,"props":3058,"children":3059},{"style":108},[3060],{"type":42,"value":1112},{"type":36,"tag":95,"props":3062,"children":3063},{"style":102},[3064],{"type":42,"value":105},{"type":36,"tag":95,"props":3066,"children":3067},{"style":108},[3068],{"type":42,"value":3069}," Awaitable\n",{"type":36,"tag":95,"props":3071,"children":3072},{"class":97,"line":190},[3073],{"type":36,"tag":95,"props":3074,"children":3075},{"emptyLinePlaceholder":5},[3076],{"type":42,"value":120},{"type":36,"tag":95,"props":3078,"children":3079},{"class":97,"line":198},[3080],{"type":36,"tag":95,"props":3081,"children":3082},{"emptyLinePlaceholder":5},[3083],{"type":42,"value":120},{"type":36,"tag":95,"props":3085,"children":3086},{"class":97,"line":206},[3087,3091,3095,3099,3104,3108,3112,3116],{"type":36,"tag":95,"props":3088,"children":3089},{"style":102},[3090],{"type":42,"value":30},{"type":36,"tag":95,"props":3092,"children":3093},{"style":102},[3094],{"type":42,"value":141},{"type":36,"tag":95,"props":3096,"children":3097},{"style":144},[3098],{"type":42,"value":147},{"type":36,"tag":95,"props":3100,"children":3101},{"style":108},[3102],{"type":42,"value":3103},"(value: ",{"type":36,"tag":95,"props":3105,"children":3106},{"style":155},[3107],{"type":42,"value":469},{"type":36,"tag":95,"props":3109,"children":3110},{"style":108},[3111],{"type":42,"value":474},{"type":36,"tag":95,"props":3113,"children":3114},{"style":155},[3115],{"type":42,"value":469},{"type":36,"tag":95,"props":3117,"children":3118},{"style":108},[3119],{"type":42,"value":163},{"type":36,"tag":95,"props":3121,"children":3122},{"class":97,"line":235},[3123,3128,3132,3137,3142],{"type":36,"tag":95,"props":3124,"children":3125},{"style":108},[3126],{"type":42,"value":3127},"    mod ",{"type":36,"tag":95,"props":3129,"children":3130},{"style":102},[3131],{"type":42,"value":400},{"type":36,"tag":95,"props":3133,"children":3134},{"style":108},[3135],{"type":42,"value":3136}," value ",{"type":36,"tag":95,"props":3138,"children":3139},{"style":102},[3140],{"type":42,"value":3141},"%",{"type":36,"tag":95,"props":3143,"children":3144},{"style":155},[3145],{"type":42,"value":3146}," 10\n",{"type":36,"tag":95,"props":3148,"children":3149},{"class":97,"line":248},[3150,3155,3159,3164,3168,3172,3176],{"type":36,"tag":95,"props":3151,"children":3152},{"style":108},[3153],{"type":42,"value":3154},"    rand ",{"type":36,"tag":95,"props":3156,"children":3157},{"style":102},[3158],{"type":42,"value":400},{"type":36,"tag":95,"props":3160,"children":3161},{"style":108},[3162],{"type":42,"value":3163}," random.randint(",{"type":36,"tag":95,"props":3165,"children":3166},{"style":155},[3167],{"type":42,"value":182},{"type":36,"tag":95,"props":3169,"children":3170},{"style":108},[3171],{"type":42,"value":987},{"type":36,"tag":95,"props":3173,"children":3174},{"style":155},[3175],{"type":42,"value":644},{"type":36,"tag":95,"props":3177,"children":3178},{"style":108},[3179],{"type":42,"value":187},{"type":36,"tag":95,"props":3181,"children":3182},{"class":97,"line":256},[3183,3187,3191,3195],{"type":36,"tag":95,"props":3184,"children":3185},{"style":102},[3186],{"type":42,"value":172},{"type":36,"tag":95,"props":3188,"children":3189},{"style":108},[3190],{"type":42,"value":177},{"type":36,"tag":95,"props":3192,"children":3193},{"style":155},[3194],{"type":42,"value":182},{"type":36,"tag":95,"props":3196,"children":3197},{"style":108},[3198],{"type":42,"value":187},{"type":36,"tag":95,"props":3200,"children":3201},{"class":97,"line":264},[3202,3207,3212,3217],{"type":36,"tag":95,"props":3203,"children":3204},{"style":102},[3205],{"type":42,"value":3206},"    if",{"type":36,"tag":95,"props":3208,"children":3209},{"style":108},[3210],{"type":42,"value":3211}," mod ",{"type":36,"tag":95,"props":3213,"children":3214},{"style":102},[3215],{"type":42,"value":3216},">",{"type":36,"tag":95,"props":3218,"children":3219},{"style":108},[3220],{"type":42,"value":3221}," rand:\n",{"type":36,"tag":95,"props":3223,"children":3224},{"class":97,"line":293},[3225,3230,3234,3239,3244,3249,3254,3259],{"type":36,"tag":95,"props":3226,"children":3227},{"style":108},[3228],{"type":42,"value":3229},"        error_msg ",{"type":36,"tag":95,"props":3231,"children":3232},{"style":102},[3233],{"type":42,"value":400},{"type":36,"tag":95,"props":3235,"children":3236},{"style":102},[3237],{"type":42,"value":3238}," f",{"type":36,"tag":95,"props":3240,"children":3241},{"style":283},[3242],{"type":42,"value":3243},"\"mod > ",{"type":36,"tag":95,"props":3245,"children":3246},{"style":155},[3247],{"type":42,"value":3248},"{",{"type":36,"tag":95,"props":3250,"children":3251},{"style":108},[3252],{"type":42,"value":3253},"rand",{"type":36,"tag":95,"props":3255,"children":3256},{"style":155},[3257],{"type":42,"value":3258},"}",{"type":36,"tag":95,"props":3260,"children":3261},{"style":283},[3262],{"type":42,"value":3263},"\"\n",{"type":36,"tag":95,"props":3265,"children":3266},{"class":97,"line":525},[3267,3272,3277],{"type":36,"tag":95,"props":3268,"children":3269},{"style":102},[3270],{"type":42,"value":3271},"        raise",{"type":36,"tag":95,"props":3273,"children":3274},{"style":155},[3275],{"type":42,"value":3276}," ValueError",{"type":36,"tag":95,"props":3278,"children":3279},{"style":108},[3280],{"type":42,"value":3281},"(error_msg)\n",{"type":36,"tag":95,"props":3283,"children":3284},{"class":97,"line":550},[3285,3289],{"type":36,"tag":95,"props":3286,"children":3287},{"style":102},[3288],{"type":42,"value":2507},{"type":36,"tag":95,"props":3290,"children":3291},{"style":108},[3292],{"type":42,"value":3293}," mod\n",{"type":36,"tag":95,"props":3295,"children":3296},{"class":97,"line":558},[3297],{"type":36,"tag":95,"props":3298,"children":3299},{"emptyLinePlaceholder":5},[3300],{"type":42,"value":120},{"type":36,"tag":95,"props":3302,"children":3303},{"class":97,"line":566},[3304],{"type":36,"tag":95,"props":3305,"children":3306},{"emptyLinePlaceholder":5},[3307],{"type":42,"value":120},{"type":36,"tag":95,"props":3309,"children":3310},{"class":97,"line":594},[3311,3315,3319,3324,3329,3333,3338,3342,3347,3352],{"type":36,"tag":95,"props":3312,"children":3313},{"style":102},[3314],{"type":42,"value":30},{"type":36,"tag":95,"props":3316,"children":3317},{"style":102},[3318],{"type":42,"value":141},{"type":36,"tag":95,"props":3320,"children":3321},{"style":144},[3322],{"type":42,"value":3323}," shield",{"type":36,"tag":95,"props":3325,"children":3326},{"style":108},[3327],{"type":42,"value":3328},"(coro: Awaitable[",{"type":36,"tag":95,"props":3330,"children":3331},{"style":155},[3332],{"type":42,"value":469},{"type":36,"tag":95,"props":3334,"children":3335},{"style":108},[3336],{"type":42,"value":3337},"]) -> ",{"type":36,"tag":95,"props":3339,"children":3340},{"style":155},[3341],{"type":42,"value":469},{"type":36,"tag":95,"props":3343,"children":3344},{"style":102},[3345],{"type":42,"value":3346}," |",{"type":36,"tag":95,"props":3348,"children":3349},{"style":155},[3350],{"type":42,"value":3351}," None",{"type":36,"tag":95,"props":3353,"children":3354},{"style":108},[3355],{"type":42,"value":163},{"type":36,"tag":95,"props":3357,"children":3358},{"class":97,"line":652},[3359,3364],{"type":36,"tag":95,"props":3360,"children":3361},{"style":102},[3362],{"type":42,"value":3363},"    try",{"type":36,"tag":95,"props":3365,"children":3366},{"style":108},[3367],{"type":42,"value":163},{"type":36,"tag":95,"props":3369,"children":3370},{"class":97,"line":660},[3371,3375,3379],{"type":36,"tag":95,"props":3372,"children":3373},{"style":102},[3374],{"type":42,"value":1256},{"type":36,"tag":95,"props":3376,"children":3377},{"style":102},[3378],{"type":42,"value":2679},{"type":36,"tag":95,"props":3380,"children":3381},{"style":108},[3382],{"type":42,"value":3383}," asyncio.shield(coro)\n",{"type":36,"tag":95,"props":3385,"children":3386},{"class":97,"line":668},[3387,3392,3396],{"type":36,"tag":95,"props":3388,"children":3389},{"style":102},[3390],{"type":42,"value":3391},"    except",{"type":36,"tag":95,"props":3393,"children":3394},{"style":155},[3395],{"type":42,"value":3276},{"type":36,"tag":95,"props":3397,"children":3398},{"style":108},[3399],{"type":42,"value":163},{"type":36,"tag":95,"props":3401,"children":3402},{"class":97,"line":692},[3403,3407],{"type":36,"tag":95,"props":3404,"children":3405},{"style":102},[3406],{"type":42,"value":1256},{"type":36,"tag":95,"props":3408,"children":3409},{"style":155},[3410],{"type":42,"value":1248},{"type":36,"tag":95,"props":3412,"children":3413},{"class":97,"line":1392},[3414],{"type":36,"tag":95,"props":3415,"children":3416},{"emptyLinePlaceholder":5},[3417],{"type":42,"value":120},{"type":36,"tag":95,"props":3419,"children":3420},{"class":97,"line":1401},[3421],{"type":36,"tag":95,"props":3422,"children":3423},{"emptyLinePlaceholder":5},[3424],{"type":42,"value":120},{"type":36,"tag":95,"props":3426,"children":3427},{"class":97,"line":1410},[3428,3432,3436,3440,3444,3448],{"type":36,"tag":95,"props":3429,"children":3430},{"style":102},[3431],{"type":42,"value":30},{"type":36,"tag":95,"props":3433,"children":3434},{"style":102},[3435],{"type":42,"value":141},{"type":36,"tag":95,"props":3437,"children":3438},{"style":144},[3439],{"type":42,"value":220},{"type":36,"tag":95,"props":3441,"children":3442},{"style":108},[3443],{"type":42,"value":152},{"type":36,"tag":95,"props":3445,"children":3446},{"style":155},[3447],{"type":42,"value":158},{"type":36,"tag":95,"props":3449,"children":3450},{"style":108},[3451],{"type":42,"value":163},{"type":36,"tag":95,"props":3453,"children":3454},{"class":97,"line":2021},[3455,3460,3464,3469,3473,3478,3482,3487,3492,3496,3501,3505,3509,3513,3517],{"type":36,"tag":95,"props":3456,"children":3457},{"style":108},[3458],{"type":42,"value":3459},"    coros ",{"type":36,"tag":95,"props":3461,"children":3462},{"style":102},[3463],{"type":42,"value":400},{"type":36,"tag":95,"props":3465,"children":3466},{"style":108},[3467],{"type":42,"value":3468}," [test(",{"type":36,"tag":95,"props":3470,"children":3471},{"style":155},[3472],{"type":42,"value":469},{"type":36,"tag":95,"props":3474,"children":3475},{"style":108},[3476],{"type":42,"value":3477},"(random.random() ",{"type":36,"tag":95,"props":3479,"children":3480},{"style":102},[3481],{"type":42,"value":609},{"type":36,"tag":95,"props":3483,"children":3484},{"style":155},[3485],{"type":42,"value":3486}," 100",{"type":36,"tag":95,"props":3488,"children":3489},{"style":108},[3490],{"type":42,"value":3491},")) ",{"type":36,"tag":95,"props":3493,"children":3494},{"style":102},[3495],{"type":42,"value":619},{"type":36,"tag":95,"props":3497,"children":3498},{"style":108},[3499],{"type":42,"value":3500}," _ ",{"type":36,"tag":95,"props":3502,"children":3503},{"style":102},[3504],{"type":42,"value":629},{"type":36,"tag":95,"props":3506,"children":3507},{"style":155},[3508],{"type":42,"value":634},{"type":36,"tag":95,"props":3510,"children":3511},{"style":108},[3512],{"type":42,"value":639},{"type":36,"tag":95,"props":3514,"children":3515},{"style":155},[3516],{"type":42,"value":644},{"type":36,"tag":95,"props":3518,"children":3519},{"style":108},[3520],{"type":42,"value":3521},")]\n",{"type":36,"tag":95,"props":3523,"children":3524},{"class":97,"line":2030},[3525,3529,3533,3537,3541,3545,3550,3554,3559,3563],{"type":36,"tag":95,"props":3526,"children":3527},{"style":108},[3528],{"type":42,"value":2721},{"type":36,"tag":95,"props":3530,"children":3531},{"style":102},[3532],{"type":42,"value":400},{"type":36,"tag":95,"props":3534,"children":3535},{"style":102},[3536],{"type":42,"value":2679},{"type":36,"tag":95,"props":3538,"children":3539},{"style":108},[3540],{"type":42,"value":604},{"type":36,"tag":95,"props":3542,"children":3543},{"style":102},[3544],{"type":42,"value":609},{"type":36,"tag":95,"props":3546,"children":3547},{"style":108},[3548],{"type":42,"value":3549},"(shield(coro) ",{"type":36,"tag":95,"props":3551,"children":3552},{"style":102},[3553],{"type":42,"value":619},{"type":36,"tag":95,"props":3555,"children":3556},{"style":108},[3557],{"type":42,"value":3558}," coro ",{"type":36,"tag":95,"props":3560,"children":3561},{"style":102},[3562],{"type":42,"value":629},{"type":36,"tag":95,"props":3564,"children":3565},{"style":108},[3566],{"type":42,"value":3567}," coros))\n",{"type":36,"tag":95,"props":3569,"children":3570},{"class":97,"line":2039},[3571,3576],{"type":36,"tag":95,"props":3572,"children":3573},{"style":155},[3574],{"type":42,"value":3575},"    print",{"type":36,"tag":95,"props":3577,"children":3578},{"style":108},[3579],{"type":42,"value":3580},"(result)\n",{"type":36,"tag":95,"props":3582,"children":3583},{"class":97,"line":2048},[3584],{"type":36,"tag":95,"props":3585,"children":3586},{"emptyLinePlaceholder":5},[3587],{"type":42,"value":120},{"type":36,"tag":95,"props":3589,"children":3590},{"class":97,"line":2057},[3591],{"type":36,"tag":95,"props":3592,"children":3593},{"emptyLinePlaceholder":5},[3594],{"type":42,"value":120},{"type":36,"tag":95,"props":3596,"children":3597},{"class":97,"line":2733},[3598,3602,3606,3610,3614],{"type":36,"tag":95,"props":3599,"children":3600},{"style":102},[3601],{"type":42,"value":270},{"type":36,"tag":95,"props":3603,"children":3604},{"style":155},[3605],{"type":42,"value":275},{"type":36,"tag":95,"props":3607,"children":3608},{"style":102},[3609],{"type":42,"value":280},{"type":36,"tag":95,"props":3611,"children":3612},{"style":283},[3613],{"type":42,"value":286},{"type":36,"tag":95,"props":3615,"children":3616},{"style":108},[3617],{"type":42,"value":163},{"type":36,"tag":95,"props":3619,"children":3620},{"class":97,"line":2755},[3621],{"type":36,"tag":95,"props":3622,"children":3623},{"style":108},[3624],{"type":42,"value":299},{"type":36,"tag":95,"props":3626,"children":3627},{"class":97,"line":2800},[3628],{"type":36,"tag":95,"props":3629,"children":3630},{"style":1370},[3631],{"type":42,"value":3632},"# ❯ poetry run python main6.py\n",{"type":36,"tag":95,"props":3634,"children":3635},{"class":97,"line":2808},[3636],{"type":36,"tag":95,"props":3637,"children":3638},{"style":1370},[3639],{"type":42,"value":3640},"# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n",{"type":36,"tag":52,"props":3642,"children":3643},{},[3644,3646,3651],{"type":42,"value":3645},"위와 같은 상황이 있을 때,\n",{"type":36,"tag":45,"props":3647,"children":3649},{"className":3648},[],[3650],{"type":42,"value":2092},{"type":42,"value":3652},"함수에서 에러가 발생하면 None값이 아닌 -1을 반환받고 싶다고 하자.",{"type":36,"tag":52,"props":3654,"children":3655},{},[3656,3658,3664,3666,3671],{"type":42,"value":3657},"가장 간단한 방법은 ",{"type":36,"tag":45,"props":3659,"children":3661},{"className":3660},[],[3662],{"type":42,"value":3663},"shield",{"type":42,"value":3665},"를 수정하는 것이고,\n그 다음으로는 ",{"type":36,"tag":45,"props":3667,"children":3669},{"className":3668},[],[3670],{"type":42,"value":2092},{"type":42,"value":3672},"를 수정하는 것이다.",{"type":36,"tag":52,"props":3674,"children":3675},{},[3676],{"type":42,"value":3677},"하지만 위 스크립트는 굉장히 간단하게 작성된 스크립트라 그런 것이고,\n손대면 손댈수록 너무 복잡해져서 수정하기 힘들거나,\n특수한 사정으로 인해 수정 자체가 불가능한 경우가 있다.",{"type":36,"tag":52,"props":3679,"children":3680},{},[3681,3683,3688],{"type":42,"value":3682},"그럴때 ",{"type":36,"tag":45,"props":3684,"children":3686},{"className":3685},[],[3687],{"type":42,"value":1508},{"type":42,"value":3689},"에 콜백을 추가하여 문제를 해결할 수 있다.",{"type":36,"tag":85,"props":3691,"children":3694},{"className":87,"code":3692,"filename":3693,"language":25,"meta":26,"style":26},"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom collections import deque\nfrom functools import partial\nfrom typing import Awaitable\n\n\nasync def test(value: int) -> int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod > rand:\n        error_msg = f\"mod > {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -> int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\ndef add(task: asyncio.Task[int], queue: asyncio.Queue[int]) -> None:\n    if task.exception():\n        queue.put_nowait(-1)\n        return\n    queue.put_nowait(task.result())\n\n\nasync def main() -> None:\n    queue = asyncio.Queue()\n    add_in_queue = partial(add, queue=queue)\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    tasks = deque()\n    for coro in coros:\n        task = asyncio.create_task(coro)\n        task.add_done_callback(add_in_queue)\n        tasks.append(task)\n\n    await asyncio.gather(*(shield(task) for task in tasks))\n    result = [queue.get_nowait() for _ in range(10)]\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6-2.py\n# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n","main6-2.py",[3695],{"type":36,"tag":45,"props":3696,"children":3697},{"__ignoreMap":26},[3698,3717,3724,3735,3746,3767,3788,3807,3814,3821,3856,3879,3910,3929,3948,3983,3998,4009,4016,4023,4066,4077,4092,4107,4118,4125,4132,4175,4187,4208,4216,4224,4231,4238,4265,4281,4313,4376,4393,4414,4430,4438,4446,4454,4493,4538,4550,4558,4566,4590,4598,4607],{"type":36,"tag":95,"props":3699,"children":3700},{"class":97,"line":98},[3701,3705,3709,3713],{"type":36,"tag":95,"props":3702,"children":3703},{"style":102},[3704],{"type":42,"value":1107},{"type":36,"tag":95,"props":3706,"children":3707},{"style":155},[3708],{"type":42,"value":3010},{"type":36,"tag":95,"props":3710,"children":3711},{"style":102},[3712],{"type":42,"value":3015},{"type":36,"tag":95,"props":3714,"children":3715},{"style":108},[3716],{"type":42,"value":3020},{"type":36,"tag":95,"props":3718,"children":3719},{"class":97,"line":114},[3720],{"type":36,"tag":95,"props":3721,"children":3722},{"emptyLinePlaceholder":5},[3723],{"type":42,"value":120},{"type":36,"tag":95,"props":3725,"children":3726},{"class":97,"line":123},[3727,3731],{"type":36,"tag":95,"props":3728,"children":3729},{"style":102},[3730],{"type":42,"value":105},{"type":36,"tag":95,"props":3732,"children":3733},{"style":108},[3734],{"type":42,"value":111},{"type":36,"tag":95,"props":3736,"children":3737},{"class":97,"line":131},[3738,3742],{"type":36,"tag":95,"props":3739,"children":3740},{"style":102},[3741],{"type":42,"value":105},{"type":36,"tag":95,"props":3743,"children":3744},{"style":108},[3745],{"type":42,"value":368},{"type":36,"tag":95,"props":3747,"children":3748},{"class":97,"line":166},[3749,3753,3758,3762],{"type":36,"tag":95,"props":3750,"children":3751},{"style":102},[3752],{"type":42,"value":1107},{"type":36,"tag":95,"props":3754,"children":3755},{"style":108},[3756],{"type":42,"value":3757}," collections ",{"type":36,"tag":95,"props":3759,"children":3760},{"style":102},[3761],{"type":42,"value":105},{"type":36,"tag":95,"props":3763,"children":3764},{"style":108},[3765],{"type":42,"value":3766}," deque\n",{"type":36,"tag":95,"props":3768,"children":3769},{"class":97,"line":190},[3770,3774,3779,3783],{"type":36,"tag":95,"props":3771,"children":3772},{"style":102},[3773],{"type":42,"value":1107},{"type":36,"tag":95,"props":3775,"children":3776},{"style":108},[3777],{"type":42,"value":3778}," functools ",{"type":36,"tag":95,"props":3780,"children":3781},{"style":102},[3782],{"type":42,"value":105},{"type":36,"tag":95,"props":3784,"children":3785},{"style":108},[3786],{"type":42,"value":3787}," partial\n",{"type":36,"tag":95,"props":3789,"children":3790},{"class":97,"line":198},[3791,3795,3799,3803],{"type":36,"tag":95,"props":3792,"children":3793},{"style":102},[3794],{"type":42,"value":1107},{"type":36,"tag":95,"props":3796,"children":3797},{"style":108},[3798],{"type":42,"value":1112},{"type":36,"tag":95,"props":3800,"children":3801},{"style":102},[3802],{"type":42,"value":105},{"type":36,"tag":95,"props":3804,"children":3805},{"style":108},[3806],{"type":42,"value":3069},{"type":36,"tag":95,"props":3808,"children":3809},{"class":97,"line":206},[3810],{"type":36,"tag":95,"props":3811,"children":3812},{"emptyLinePlaceholder":5},[3813],{"type":42,"value":120},{"type":36,"tag":95,"props":3815,"children":3816},{"class":97,"line":235},[3817],{"type":36,"tag":95,"props":3818,"children":3819},{"emptyLinePlaceholder":5},[3820],{"type":42,"value":120},{"type":36,"tag":95,"props":3822,"children":3823},{"class":97,"line":248},[3824,3828,3832,3836,3840,3844,3848,3852],{"type":36,"tag":95,"props":3825,"children":3826},{"style":102},[3827],{"type":42,"value":30},{"type":36,"tag":95,"props":3829,"children":3830},{"style":102},[3831],{"type":42,"value":141},{"type":36,"tag":95,"props":3833,"children":3834},{"style":144},[3835],{"type":42,"value":147},{"type":36,"tag":95,"props":3837,"children":3838},{"style":108},[3839],{"type":42,"value":3103},{"type":36,"tag":95,"props":3841,"children":3842},{"style":155},[3843],{"type":42,"value":469},{"type":36,"tag":95,"props":3845,"children":3846},{"style":108},[3847],{"type":42,"value":474},{"type":36,"tag":95,"props":3849,"children":3850},{"style":155},[3851],{"type":42,"value":469},{"type":36,"tag":95,"props":3853,"children":3854},{"style":108},[3855],{"type":42,"value":163},{"type":36,"tag":95,"props":3857,"children":3858},{"class":97,"line":256},[3859,3863,3867,3871,3875],{"type":36,"tag":95,"props":3860,"children":3861},{"style":108},[3862],{"type":42,"value":3127},{"type":36,"tag":95,"props":3864,"children":3865},{"style":102},[3866],{"type":42,"value":400},{"type":36,"tag":95,"props":3868,"children":3869},{"style":108},[3870],{"type":42,"value":3136},{"type":36,"tag":95,"props":3872,"children":3873},{"style":102},[3874],{"type":42,"value":3141},{"type":36,"tag":95,"props":3876,"children":3877},{"style":155},[3878],{"type":42,"value":3146},{"type":36,"tag":95,"props":3880,"children":3881},{"class":97,"line":264},[3882,3886,3890,3894,3898,3902,3906],{"type":36,"tag":95,"props":3883,"children":3884},{"style":108},[3885],{"type":42,"value":3154},{"type":36,"tag":95,"props":3887,"children":3888},{"style":102},[3889],{"type":42,"value":400},{"type":36,"tag":95,"props":3891,"children":3892},{"style":108},[3893],{"type":42,"value":3163},{"type":36,"tag":95,"props":3895,"children":3896},{"style":155},[3897],{"type":42,"value":182},{"type":36,"tag":95,"props":3899,"children":3900},{"style":108},[3901],{"type":42,"value":987},{"type":36,"tag":95,"props":3903,"children":3904},{"style":155},[3905],{"type":42,"value":644},{"type":36,"tag":95,"props":3907,"children":3908},{"style":108},[3909],{"type":42,"value":187},{"type":36,"tag":95,"props":3911,"children":3912},{"class":97,"line":293},[3913,3917,3921,3925],{"type":36,"tag":95,"props":3914,"children":3915},{"style":102},[3916],{"type":42,"value":172},{"type":36,"tag":95,"props":3918,"children":3919},{"style":108},[3920],{"type":42,"value":177},{"type":36,"tag":95,"props":3922,"children":3923},{"style":155},[3924],{"type":42,"value":182},{"type":36,"tag":95,"props":3926,"children":3927},{"style":108},[3928],{"type":42,"value":187},{"type":36,"tag":95,"props":3930,"children":3931},{"class":97,"line":525},[3932,3936,3940,3944],{"type":36,"tag":95,"props":3933,"children":3934},{"style":102},[3935],{"type":42,"value":3206},{"type":36,"tag":95,"props":3937,"children":3938},{"style":108},[3939],{"type":42,"value":3211},{"type":36,"tag":95,"props":3941,"children":3942},{"style":102},[3943],{"type":42,"value":3216},{"type":36,"tag":95,"props":3945,"children":3946},{"style":108},[3947],{"type":42,"value":3221},{"type":36,"tag":95,"props":3949,"children":3950},{"class":97,"line":550},[3951,3955,3959,3963,3967,3971,3975,3979],{"type":36,"tag":95,"props":3952,"children":3953},{"style":108},[3954],{"type":42,"value":3229},{"type":36,"tag":95,"props":3956,"children":3957},{"style":102},[3958],{"type":42,"value":400},{"type":36,"tag":95,"props":3960,"children":3961},{"style":102},[3962],{"type":42,"value":3238},{"type":36,"tag":95,"props":3964,"children":3965},{"style":283},[3966],{"type":42,"value":3243},{"type":36,"tag":95,"props":3968,"children":3969},{"style":155},[3970],{"type":42,"value":3248},{"type":36,"tag":95,"props":3972,"children":3973},{"style":108},[3974],{"type":42,"value":3253},{"type":36,"tag":95,"props":3976,"children":3977},{"style":155},[3978],{"type":42,"value":3258},{"type":36,"tag":95,"props":3980,"children":3981},{"style":283},[3982],{"type":42,"value":3263},{"type":36,"tag":95,"props":3984,"children":3985},{"class":97,"line":558},[3986,3990,3994],{"type":36,"tag":95,"props":3987,"children":3988},{"style":102},[3989],{"type":42,"value":3271},{"type":36,"tag":95,"props":3991,"children":3992},{"style":155},[3993],{"type":42,"value":3276},{"type":36,"tag":95,"props":3995,"children":3996},{"style":108},[3997],{"type":42,"value":3281},{"type":36,"tag":95,"props":3999,"children":4000},{"class":97,"line":566},[4001,4005],{"type":36,"tag":95,"props":4002,"children":4003},{"style":102},[4004],{"type":42,"value":2507},{"type":36,"tag":95,"props":4006,"children":4007},{"style":108},[4008],{"type":42,"value":3293},{"type":36,"tag":95,"props":4010,"children":4011},{"class":97,"line":594},[4012],{"type":36,"tag":95,"props":4013,"children":4014},{"emptyLinePlaceholder":5},[4015],{"type":42,"value":120},{"type":36,"tag":95,"props":4017,"children":4018},{"class":97,"line":652},[4019],{"type":36,"tag":95,"props":4020,"children":4021},{"emptyLinePlaceholder":5},[4022],{"type":42,"value":120},{"type":36,"tag":95,"props":4024,"children":4025},{"class":97,"line":660},[4026,4030,4034,4038,4042,4046,4050,4054,4058,4062],{"type":36,"tag":95,"props":4027,"children":4028},{"style":102},[4029],{"type":42,"value":30},{"type":36,"tag":95,"props":4031,"children":4032},{"style":102},[4033],{"type":42,"value":141},{"type":36,"tag":95,"props":4035,"children":4036},{"style":144},[4037],{"type":42,"value":3323},{"type":36,"tag":95,"props":4039,"children":4040},{"style":108},[4041],{"type":42,"value":3328},{"type":36,"tag":95,"props":4043,"children":4044},{"style":155},[4045],{"type":42,"value":469},{"type":36,"tag":95,"props":4047,"children":4048},{"style":108},[4049],{"type":42,"value":3337},{"type":36,"tag":95,"props":4051,"children":4052},{"style":155},[4053],{"type":42,"value":469},{"type":36,"tag":95,"props":4055,"children":4056},{"style":102},[4057],{"type":42,"value":3346},{"type":36,"tag":95,"props":4059,"children":4060},{"style":155},[4061],{"type":42,"value":3351},{"type":36,"tag":95,"props":4063,"children":4064},{"style":108},[4065],{"type":42,"value":163},{"type":36,"tag":95,"props":4067,"children":4068},{"class":97,"line":668},[4069,4073],{"type":36,"tag":95,"props":4070,"children":4071},{"style":102},[4072],{"type":42,"value":3363},{"type":36,"tag":95,"props":4074,"children":4075},{"style":108},[4076],{"type":42,"value":163},{"type":36,"tag":95,"props":4078,"children":4079},{"class":97,"line":692},[4080,4084,4088],{"type":36,"tag":95,"props":4081,"children":4082},{"style":102},[4083],{"type":42,"value":1256},{"type":36,"tag":95,"props":4085,"children":4086},{"style":102},[4087],{"type":42,"value":2679},{"type":36,"tag":95,"props":4089,"children":4090},{"style":108},[4091],{"type":42,"value":3383},{"type":36,"tag":95,"props":4093,"children":4094},{"class":97,"line":1392},[4095,4099,4103],{"type":36,"tag":95,"props":4096,"children":4097},{"style":102},[4098],{"type":42,"value":3391},{"type":36,"tag":95,"props":4100,"children":4101},{"style":155},[4102],{"type":42,"value":3276},{"type":36,"tag":95,"props":4104,"children":4105},{"style":108},[4106],{"type":42,"value":163},{"type":36,"tag":95,"props":4108,"children":4109},{"class":97,"line":1401},[4110,4114],{"type":36,"tag":95,"props":4111,"children":4112},{"style":102},[4113],{"type":42,"value":1256},{"type":36,"tag":95,"props":4115,"children":4116},{"style":155},[4117],{"type":42,"value":1248},{"type":36,"tag":95,"props":4119,"children":4120},{"class":97,"line":1410},[4121],{"type":36,"tag":95,"props":4122,"children":4123},{"emptyLinePlaceholder":5},[4124],{"type":42,"value":120},{"type":36,"tag":95,"props":4126,"children":4127},{"class":97,"line":2021},[4128],{"type":36,"tag":95,"props":4129,"children":4130},{"emptyLinePlaceholder":5},[4131],{"type":42,"value":120},{"type":36,"tag":95,"props":4133,"children":4134},{"class":97,"line":2030},[4135,4140,4145,4150,4154,4159,4163,4167,4171],{"type":36,"tag":95,"props":4136,"children":4137},{"style":102},[4138],{"type":42,"value":4139},"def",{"type":36,"tag":95,"props":4141,"children":4142},{"style":144},[4143],{"type":42,"value":4144}," add",{"type":36,"tag":95,"props":4146,"children":4147},{"style":108},[4148],{"type":42,"value":4149},"(task: asyncio.Task[",{"type":36,"tag":95,"props":4151,"children":4152},{"style":155},[4153],{"type":42,"value":469},{"type":36,"tag":95,"props":4155,"children":4156},{"style":108},[4157],{"type":42,"value":4158},"], queue: asyncio.Queue[",{"type":36,"tag":95,"props":4160,"children":4161},{"style":155},[4162],{"type":42,"value":469},{"type":36,"tag":95,"props":4164,"children":4165},{"style":108},[4166],{"type":42,"value":3337},{"type":36,"tag":95,"props":4168,"children":4169},{"style":155},[4170],{"type":42,"value":158},{"type":36,"tag":95,"props":4172,"children":4173},{"style":108},[4174],{"type":42,"value":163},{"type":36,"tag":95,"props":4176,"children":4177},{"class":97,"line":2039},[4178,4182],{"type":36,"tag":95,"props":4179,"children":4180},{"style":102},[4181],{"type":42,"value":3206},{"type":36,"tag":95,"props":4183,"children":4184},{"style":108},[4185],{"type":42,"value":4186}," task.exception():\n",{"type":36,"tag":95,"props":4188,"children":4189},{"class":97,"line":2048},[4190,4195,4200,4204],{"type":36,"tag":95,"props":4191,"children":4192},{"style":108},[4193],{"type":42,"value":4194},"        queue.put_nowait(",{"type":36,"tag":95,"props":4196,"children":4197},{"style":102},[4198],{"type":42,"value":4199},"-",{"type":36,"tag":95,"props":4201,"children":4202},{"style":155},[4203],{"type":42,"value":182},{"type":36,"tag":95,"props":4205,"children":4206},{"style":108},[4207],{"type":42,"value":187},{"type":36,"tag":95,"props":4209,"children":4210},{"class":97,"line":2057},[4211],{"type":36,"tag":95,"props":4212,"children":4213},{"style":102},[4214],{"type":42,"value":4215},"        return\n",{"type":36,"tag":95,"props":4217,"children":4218},{"class":97,"line":2733},[4219],{"type":36,"tag":95,"props":4220,"children":4221},{"style":108},[4222],{"type":42,"value":4223},"    queue.put_nowait(task.result())\n",{"type":36,"tag":95,"props":4225,"children":4226},{"class":97,"line":2755},[4227],{"type":36,"tag":95,"props":4228,"children":4229},{"emptyLinePlaceholder":5},[4230],{"type":42,"value":120},{"type":36,"tag":95,"props":4232,"children":4233},{"class":97,"line":2800},[4234],{"type":36,"tag":95,"props":4235,"children":4236},{"emptyLinePlaceholder":5},[4237],{"type":42,"value":120},{"type":36,"tag":95,"props":4239,"children":4240},{"class":97,"line":2808},[4241,4245,4249,4253,4257,4261],{"type":36,"tag":95,"props":4242,"children":4243},{"style":102},[4244],{"type":42,"value":30},{"type":36,"tag":95,"props":4246,"children":4247},{"style":102},[4248],{"type":42,"value":141},{"type":36,"tag":95,"props":4250,"children":4251},{"style":144},[4252],{"type":42,"value":220},{"type":36,"tag":95,"props":4254,"children":4255},{"style":108},[4256],{"type":42,"value":152},{"type":36,"tag":95,"props":4258,"children":4259},{"style":155},[4260],{"type":42,"value":158},{"type":36,"tag":95,"props":4262,"children":4263},{"style":108},[4264],{"type":42,"value":163},{"type":36,"tag":95,"props":4266,"children":4267},{"class":97,"line":2816},[4268,4272,4276],{"type":36,"tag":95,"props":4269,"children":4270},{"style":108},[4271],{"type":42,"value":2620},{"type":36,"tag":95,"props":4273,"children":4274},{"style":102},[4275],{"type":42,"value":400},{"type":36,"tag":95,"props":4277,"children":4278},{"style":108},[4279],{"type":42,"value":4280}," asyncio.Queue()\n",{"type":36,"tag":95,"props":4282,"children":4283},{"class":97,"line":2840},[4284,4289,4293,4298,4304,4308],{"type":36,"tag":95,"props":4285,"children":4286},{"style":108},[4287],{"type":42,"value":4288},"    add_in_queue ",{"type":36,"tag":95,"props":4290,"children":4291},{"style":102},[4292],{"type":42,"value":400},{"type":36,"tag":95,"props":4294,"children":4295},{"style":108},[4296],{"type":42,"value":4297}," partial(add, ",{"type":36,"tag":95,"props":4299,"children":4301},{"style":4300},"--shiki-default:#E36209;--shiki-dark:#FFAB70",[4302],{"type":42,"value":4303},"queue",{"type":36,"tag":95,"props":4305,"children":4306},{"style":102},[4307],{"type":42,"value":400},{"type":36,"tag":95,"props":4309,"children":4310},{"style":108},[4311],{"type":42,"value":4312},"queue)\n",{"type":36,"tag":95,"props":4314,"children":4315},{"class":97,"line":2848},[4316,4320,4324,4328,4332,4336,4340,4344,4348,4352,4356,4360,4364,4368,4372],{"type":36,"tag":95,"props":4317,"children":4318},{"style":108},[4319],{"type":42,"value":3459},{"type":36,"tag":95,"props":4321,"children":4322},{"style":102},[4323],{"type":42,"value":400},{"type":36,"tag":95,"props":4325,"children":4326},{"style":108},[4327],{"type":42,"value":3468},{"type":36,"tag":95,"props":4329,"children":4330},{"style":155},[4331],{"type":42,"value":469},{"type":36,"tag":95,"props":4333,"children":4334},{"style":108},[4335],{"type":42,"value":3477},{"type":36,"tag":95,"props":4337,"children":4338},{"style":102},[4339],{"type":42,"value":609},{"type":36,"tag":95,"props":4341,"children":4342},{"style":155},[4343],{"type":42,"value":3486},{"type":36,"tag":95,"props":4345,"children":4346},{"style":108},[4347],{"type":42,"value":3491},{"type":36,"tag":95,"props":4349,"children":4350},{"style":102},[4351],{"type":42,"value":619},{"type":36,"tag":95,"props":4353,"children":4354},{"style":108},[4355],{"type":42,"value":3500},{"type":36,"tag":95,"props":4357,"children":4358},{"style":102},[4359],{"type":42,"value":629},{"type":36,"tag":95,"props":4361,"children":4362},{"style":155},[4363],{"type":42,"value":634},{"type":36,"tag":95,"props":4365,"children":4366},{"style":108},[4367],{"type":42,"value":639},{"type":36,"tag":95,"props":4369,"children":4370},{"style":155},[4371],{"type":42,"value":644},{"type":36,"tag":95,"props":4373,"children":4374},{"style":108},[4375],{"type":42,"value":3521},{"type":36,"tag":95,"props":4377,"children":4378},{"class":97,"line":2857},[4379,4384,4388],{"type":36,"tag":95,"props":4380,"children":4381},{"style":108},[4382],{"type":42,"value":4383},"    tasks ",{"type":36,"tag":95,"props":4385,"children":4386},{"style":102},[4387],{"type":42,"value":400},{"type":36,"tag":95,"props":4389,"children":4390},{"style":108},[4391],{"type":42,"value":4392}," deque()\n",{"type":36,"tag":95,"props":4394,"children":4395},{"class":97,"line":2866},[4396,4401,4405,4409],{"type":36,"tag":95,"props":4397,"children":4398},{"style":102},[4399],{"type":42,"value":4400},"    for",{"type":36,"tag":95,"props":4402,"children":4403},{"style":108},[4404],{"type":42,"value":3558},{"type":36,"tag":95,"props":4406,"children":4407},{"style":102},[4408],{"type":42,"value":629},{"type":36,"tag":95,"props":4410,"children":4411},{"style":108},[4412],{"type":42,"value":4413}," coros:\n",{"type":36,"tag":95,"props":4415,"children":4416},{"class":97,"line":2875},[4417,4422,4426],{"type":36,"tag":95,"props":4418,"children":4419},{"style":108},[4420],{"type":42,"value":4421},"        task ",{"type":36,"tag":95,"props":4423,"children":4424},{"style":102},[4425],{"type":42,"value":400},{"type":36,"tag":95,"props":4427,"children":4428},{"style":108},[4429],{"type":42,"value":1922},{"type":36,"tag":95,"props":4431,"children":4432},{"class":97,"line":2884},[4433],{"type":36,"tag":95,"props":4434,"children":4435},{"style":108},[4436],{"type":42,"value":4437},"        task.add_done_callback(add_in_queue)\n",{"type":36,"tag":95,"props":4439,"children":4440},{"class":97,"line":2893},[4441],{"type":36,"tag":95,"props":4442,"children":4443},{"style":108},[4444],{"type":42,"value":4445},"        tasks.append(task)\n",{"type":36,"tag":95,"props":4447,"children":4449},{"class":97,"line":4448},43,[4450],{"type":36,"tag":95,"props":4451,"children":4452},{"emptyLinePlaceholder":5},[4453],{"type":42,"value":120},{"type":36,"tag":95,"props":4455,"children":4457},{"class":97,"line":4456},44,[4458,4462,4466,4470,4475,4479,4484,4488],{"type":36,"tag":95,"props":4459,"children":4460},{"style":102},[4461],{"type":42,"value":172},{"type":36,"tag":95,"props":4463,"children":4464},{"style":108},[4465],{"type":42,"value":604},{"type":36,"tag":95,"props":4467,"children":4468},{"style":102},[4469],{"type":42,"value":609},{"type":36,"tag":95,"props":4471,"children":4472},{"style":108},[4473],{"type":42,"value":4474},"(shield(task) ",{"type":36,"tag":95,"props":4476,"children":4477},{"style":102},[4478],{"type":42,"value":619},{"type":36,"tag":95,"props":4480,"children":4481},{"style":108},[4482],{"type":42,"value":4483}," task ",{"type":36,"tag":95,"props":4485,"children":4486},{"style":102},[4487],{"type":42,"value":629},{"type":36,"tag":95,"props":4489,"children":4490},{"style":108},[4491],{"type":42,"value":4492}," tasks))\n",{"type":36,"tag":95,"props":4494,"children":4496},{"class":97,"line":4495},45,[4497,4501,4505,4510,4514,4518,4522,4526,4530,4534],{"type":36,"tag":95,"props":4498,"children":4499},{"style":108},[4500],{"type":42,"value":2721},{"type":36,"tag":95,"props":4502,"children":4503},{"style":102},[4504],{"type":42,"value":400},{"type":36,"tag":95,"props":4506,"children":4507},{"style":108},[4508],{"type":42,"value":4509}," [queue.get_nowait() ",{"type":36,"tag":95,"props":4511,"children":4512},{"style":102},[4513],{"type":42,"value":619},{"type":36,"tag":95,"props":4515,"children":4516},{"style":108},[4517],{"type":42,"value":3500},{"type":36,"tag":95,"props":4519,"children":4520},{"style":102},[4521],{"type":42,"value":629},{"type":36,"tag":95,"props":4523,"children":4524},{"style":155},[4525],{"type":42,"value":634},{"type":36,"tag":95,"props":4527,"children":4528},{"style":108},[4529],{"type":42,"value":639},{"type":36,"tag":95,"props":4531,"children":4532},{"style":155},[4533],{"type":42,"value":644},{"type":36,"tag":95,"props":4535,"children":4536},{"style":108},[4537],{"type":42,"value":3521},{"type":36,"tag":95,"props":4539,"children":4541},{"class":97,"line":4540},46,[4542,4546],{"type":36,"tag":95,"props":4543,"children":4544},{"style":155},[4545],{"type":42,"value":3575},{"type":36,"tag":95,"props":4547,"children":4548},{"style":108},[4549],{"type":42,"value":3580},{"type":36,"tag":95,"props":4551,"children":4553},{"class":97,"line":4552},47,[4554],{"type":36,"tag":95,"props":4555,"children":4556},{"emptyLinePlaceholder":5},[4557],{"type":42,"value":120},{"type":36,"tag":95,"props":4559,"children":4561},{"class":97,"line":4560},48,[4562],{"type":36,"tag":95,"props":4563,"children":4564},{"emptyLinePlaceholder":5},[4565],{"type":42,"value":120},{"type":36,"tag":95,"props":4567,"children":4569},{"class":97,"line":4568},49,[4570,4574,4578,4582,4586],{"type":36,"tag":95,"props":4571,"children":4572},{"style":102},[4573],{"type":42,"value":270},{"type":36,"tag":95,"props":4575,"children":4576},{"style":155},[4577],{"type":42,"value":275},{"type":36,"tag":95,"props":4579,"children":4580},{"style":102},[4581],{"type":42,"value":280},{"type":36,"tag":95,"props":4583,"children":4584},{"style":283},[4585],{"type":42,"value":286},{"type":36,"tag":95,"props":4587,"children":4588},{"style":108},[4589],{"type":42,"value":163},{"type":36,"tag":95,"props":4591,"children":4593},{"class":97,"line":4592},50,[4594],{"type":36,"tag":95,"props":4595,"children":4596},{"style":108},[4597],{"type":42,"value":299},{"type":36,"tag":95,"props":4599,"children":4601},{"class":97,"line":4600},51,[4602],{"type":36,"tag":95,"props":4603,"children":4604},{"style":1370},[4605],{"type":42,"value":4606},"# ❯ poetry run python main6-2.py\n",{"type":36,"tag":95,"props":4608,"children":4610},{"class":97,"line":4609},52,[4611],{"type":36,"tag":95,"props":4612,"children":4613},{"style":1370},[4614],{"type":42,"value":4615},"# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n",{"type":36,"tag":52,"props":4617,"children":4618},{},[4619,4621,4626,4627,4632],{"type":42,"value":4620},"핵심 로직이라 할 수 있는 ",{"type":36,"tag":45,"props":4622,"children":4624},{"className":4623},[],[4625],{"type":42,"value":2092},{"type":42,"value":63},{"type":36,"tag":45,"props":4628,"children":4630},{"className":4629},[],[4631],{"type":42,"value":3663},{"type":42,"value":4633},"를 수정하지 않고,\n콜백을 사용하여 문제를 해결할 수 있다.",{"type":36,"tag":964,"props":4635,"children":4637},{"id":4636},"future가-필요한-상황",[4638,4643],{"type":36,"tag":45,"props":4639,"children":4641},{"className":4640},[],[4642],{"type":42,"value":1501},{"type":42,"value":2990},{"type":36,"tag":52,"props":4645,"children":4646},{},[4647,4652,4654,4659,4661,4666,4668,4673,4674,4679,4681,4686],{"type":36,"tag":45,"props":4648,"children":4650},{"className":4649},[],[4651],{"type":42,"value":1508},{"type":42,"value":4653},"가 ",{"type":36,"tag":45,"props":4655,"children":4657},{"className":4656},[],[4658],{"type":42,"value":1501},{"type":42,"value":4660},"를 상속받았기에, 대부분의 경우 ",{"type":36,"tag":45,"props":4662,"children":4664},{"className":4663},[],[4665],{"type":42,"value":1508},{"type":42,"value":4667},"에서 문제가 해결된다.\n",{"type":36,"tag":45,"props":4669,"children":4671},{"className":4670},[],[4672],{"type":42,"value":1501},{"type":42,"value":63},{"type":36,"tag":45,"props":4675,"children":4677},{"className":4676},[],[4678],{"type":42,"value":1508},{"type":42,"value":4680},"의 결정적인 차이점은\n",{"type":36,"tag":45,"props":4682,"children":4684},{"className":4683},[],[4685],{"type":42,"value":1501},{"type":42,"value":4687},"는 이벤트루프에 예약되지 않은 상태가 존재한다는 것이다.",{"type":36,"tag":52,"props":4689,"children":4690},{},[4691,4693,4698,4700,4705,4706,4711,4713,4718],{"type":42,"value":4692},"코루틴이 비동기 작업에 대한 정의라면\n",{"type":36,"tag":45,"props":4694,"children":4696},{"className":4695},[],[4697],{"type":42,"value":1508},{"type":42,"value":4699},"는 코루틴의 실재이고,\n",{"type":36,"tag":45,"props":4701,"children":4703},{"className":4702},[],[4704],{"type":42,"value":1501},{"type":42,"value":1551},{"type":36,"tag":45,"props":4707,"children":4709},{"className":4708},[],[4710],{"type":42,"value":1508},{"type":42,"value":4712},"의 선물이다.\n따라서 ",{"type":36,"tag":45,"props":4714,"children":4716},{"className":4715},[],[4717],{"type":42,"value":1501},{"type":42,"value":4719},"를 사용한다면, 비동기 작업이 선언 또는 실행되기 이전에\n콜백을 정의하고 추가하여 제공할 수 있다.",{"type":36,"tag":52,"props":4721,"children":4722},{},[4723,4725,4730,4732,4738],{"type":42,"value":4724},"이러한 방법은 ",{"type":36,"tag":45,"props":4726,"children":4728},{"className":4727},[],[4729],{"type":42,"value":50},{"type":42,"value":4731},"의 내부 함수를 구현하는데 많이 사용되는데,\n그 중 하나인 ",{"type":36,"tag":45,"props":4733,"children":4735},{"className":4734},[],[4736],{"type":42,"value":4737},"wait_for",{"type":42,"value":4739},"를 좀 더 알아보기 쉽게 나타내면 다음과 같다.",{"type":36,"tag":85,"props":4741,"children":4744},{"className":87,"code":4742,"filename":4743,"language":25,"meta":26,"style":26},"from __future__ import annotations\n\nimport asyncio\nimport logging\nimport sys\nfrom functools import partial\nfrom typing import Any, Awaitable\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\ndef release(waiter: asyncio.Future[Any], *args: Any) -> None:\n    if not waiter.done():\n        waiter.set_result(None)\n\n\nasync def cancel(future: asyncio.Future[Any]) -> None:\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future.add_done_callback(callback)\n\n    try:\n        future.cancel()\n        await waiter\n    finally:\n        future.remove_done_callback(callback)\n\n\nasync def wait_for(coro: Awaitable[Any]) -> None:\n    logger.info(\"wait\")\n\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future = asyncio.ensure_future(coro)\n    future.add_done_callback(callback)\n\n    try:\n        await waiter\n    except asyncio.CancelledError:\n        if future.done():\n            return\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise\n\n    if not future.done():\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise RuntimeError\n\n\nasync def test() -> None:\n    logger.info(\"start\")\n    await asyncio.sleep(3)\n    logger.info(\"end\")\n\n\nasync def main() -> None:\n    coro = test()\n    task = asyncio.create_task(coro)\n    await asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main7.py\n# start\n# wait\n# wait\n# wait\n# end\n","main7.py",[4745],{"type":36,"tag":45,"props":4746,"children":4747},{"__ignoreMap":26},[4748,4767,4774,4785,4796,4807,4826,4846,4853,4868,4883,4890,4897,4904,4938,4955,4971,4978,4985,5014,5031,5048,5065,5073,5080,5091,5099,5112,5124,5132,5139,5146,5175,5191,5198,5213,5228,5243,5260,5267,5274,5285,5296,5308,5321,5329,5336,5348,5356,5363,5378,5385,5396,5409,5417,5425,5453,5469,5490,5507,5515,5523,5551,5567,5583,5596,5604,5612,5636,5644,5653,5661,5670,5678,5686],{"type":36,"tag":95,"props":4749,"children":4750},{"class":97,"line":98},[4751,4755,4759,4763],{"type":36,"tag":95,"props":4752,"children":4753},{"style":102},[4754],{"type":42,"value":1107},{"type":36,"tag":95,"props":4756,"children":4757},{"style":155},[4758],{"type":42,"value":3010},{"type":36,"tag":95,"props":4760,"children":4761},{"style":102},[4762],{"type":42,"value":3015},{"type":36,"tag":95,"props":4764,"children":4765},{"style":108},[4766],{"type":42,"value":3020},{"type":36,"tag":95,"props":4768,"children":4769},{"class":97,"line":114},[4770],{"type":36,"tag":95,"props":4771,"children":4772},{"emptyLinePlaceholder":5},[4773],{"type":42,"value":120},{"type":36,"tag":95,"props":4775,"children":4776},{"class":97,"line":123},[4777,4781],{"type":36,"tag":95,"props":4778,"children":4779},{"style":102},[4780],{"type":42,"value":105},{"type":36,"tag":95,"props":4782,"children":4783},{"style":108},[4784],{"type":42,"value":111},{"type":36,"tag":95,"props":4786,"children":4787},{"class":97,"line":131},[4788,4792],{"type":36,"tag":95,"props":4789,"children":4790},{"style":102},[4791],{"type":42,"value":105},{"type":36,"tag":95,"props":4793,"children":4794},{"style":108},[4795],{"type":42,"value":356},{"type":36,"tag":95,"props":4797,"children":4798},{"class":97,"line":166},[4799,4803],{"type":36,"tag":95,"props":4800,"children":4801},{"style":102},[4802],{"type":42,"value":105},{"type":36,"tag":95,"props":4804,"children":4805},{"style":108},[4806],{"type":42,"value":380},{"type":36,"tag":95,"props":4808,"children":4809},{"class":97,"line":190},[4810,4814,4818,4822],{"type":36,"tag":95,"props":4811,"children":4812},{"style":102},[4813],{"type":42,"value":1107},{"type":36,"tag":95,"props":4815,"children":4816},{"style":108},[4817],{"type":42,"value":3778},{"type":36,"tag":95,"props":4819,"children":4820},{"style":102},[4821],{"type":42,"value":105},{"type":36,"tag":95,"props":4823,"children":4824},{"style":108},[4825],{"type":42,"value":3787},{"type":36,"tag":95,"props":4827,"children":4828},{"class":97,"line":198},[4829,4833,4837,4841],{"type":36,"tag":95,"props":4830,"children":4831},{"style":102},[4832],{"type":42,"value":1107},{"type":36,"tag":95,"props":4834,"children":4835},{"style":108},[4836],{"type":42,"value":1112},{"type":36,"tag":95,"props":4838,"children":4839},{"style":102},[4840],{"type":42,"value":105},{"type":36,"tag":95,"props":4842,"children":4843},{"style":108},[4844],{"type":42,"value":4845}," Any, Awaitable\n",{"type":36,"tag":95,"props":4847,"children":4848},{"class":97,"line":206},[4849],{"type":36,"tag":95,"props":4850,"children":4851},{"emptyLinePlaceholder":5},[4852],{"type":42,"value":120},{"type":36,"tag":95,"props":4854,"children":4855},{"class":97,"line":235},[4856,4860,4864],{"type":36,"tag":95,"props":4857,"children":4858},{"style":108},[4859],{"type":42,"value":395},{"type":36,"tag":95,"props":4861,"children":4862},{"style":102},[4863],{"type":42,"value":400},{"type":36,"tag":95,"props":4865,"children":4866},{"style":108},[4867],{"type":42,"value":405},{"type":36,"tag":95,"props":4869,"children":4870},{"class":97,"line":248},[4871,4875,4879],{"type":36,"tag":95,"props":4872,"children":4873},{"style":108},[4874],{"type":42,"value":413},{"type":36,"tag":95,"props":4876,"children":4877},{"style":155},[4878],{"type":42,"value":418},{"type":36,"tag":95,"props":4880,"children":4881},{"style":108},[4882],{"type":42,"value":187},{"type":36,"tag":95,"props":4884,"children":4885},{"class":97,"line":256},[4886],{"type":36,"tag":95,"props":4887,"children":4888},{"style":108},[4889],{"type":42,"value":430},{"type":36,"tag":95,"props":4891,"children":4892},{"class":97,"line":264},[4893],{"type":36,"tag":95,"props":4894,"children":4895},{"emptyLinePlaceholder":5},[4896],{"type":42,"value":120},{"type":36,"tag":95,"props":4898,"children":4899},{"class":97,"line":293},[4900],{"type":36,"tag":95,"props":4901,"children":4902},{"emptyLinePlaceholder":5},[4903],{"type":42,"value":120},{"type":36,"tag":95,"props":4905,"children":4906},{"class":97,"line":525},[4907,4911,4916,4921,4925,4930,4934],{"type":36,"tag":95,"props":4908,"children":4909},{"style":102},[4910],{"type":42,"value":4139},{"type":36,"tag":95,"props":4912,"children":4913},{"style":144},[4914],{"type":42,"value":4915}," release",{"type":36,"tag":95,"props":4917,"children":4918},{"style":108},[4919],{"type":42,"value":4920},"(waiter: asyncio.Future[Any], ",{"type":36,"tag":95,"props":4922,"children":4923},{"style":102},[4924],{"type":42,"value":609},{"type":36,"tag":95,"props":4926,"children":4927},{"style":108},[4928],{"type":42,"value":4929},"args: Any) -> ",{"type":36,"tag":95,"props":4931,"children":4932},{"style":155},[4933],{"type":42,"value":158},{"type":36,"tag":95,"props":4935,"children":4936},{"style":108},[4937],{"type":42,"value":163},{"type":36,"tag":95,"props":4939,"children":4940},{"class":97,"line":550},[4941,4945,4950],{"type":36,"tag":95,"props":4942,"children":4943},{"style":102},[4944],{"type":42,"value":3206},{"type":36,"tag":95,"props":4946,"children":4947},{"style":102},[4948],{"type":42,"value":4949}," not",{"type":36,"tag":95,"props":4951,"children":4952},{"style":108},[4953],{"type":42,"value":4954}," waiter.done():\n",{"type":36,"tag":95,"props":4956,"children":4957},{"class":97,"line":558},[4958,4963,4967],{"type":36,"tag":95,"props":4959,"children":4960},{"style":108},[4961],{"type":42,"value":4962},"        waiter.set_result(",{"type":36,"tag":95,"props":4964,"children":4965},{"style":155},[4966],{"type":42,"value":158},{"type":36,"tag":95,"props":4968,"children":4969},{"style":108},[4970],{"type":42,"value":187},{"type":36,"tag":95,"props":4972,"children":4973},{"class":97,"line":566},[4974],{"type":36,"tag":95,"props":4975,"children":4976},{"emptyLinePlaceholder":5},[4977],{"type":42,"value":120},{"type":36,"tag":95,"props":4979,"children":4980},{"class":97,"line":594},[4981],{"type":36,"tag":95,"props":4982,"children":4983},{"emptyLinePlaceholder":5},[4984],{"type":42,"value":120},{"type":36,"tag":95,"props":4986,"children":4987},{"class":97,"line":652},[4988,4992,4996,5001,5006,5010],{"type":36,"tag":95,"props":4989,"children":4990},{"style":102},[4991],{"type":42,"value":30},{"type":36,"tag":95,"props":4993,"children":4994},{"style":102},[4995],{"type":42,"value":141},{"type":36,"tag":95,"props":4997,"children":4998},{"style":144},[4999],{"type":42,"value":5000}," cancel",{"type":36,"tag":95,"props":5002,"children":5003},{"style":108},[5004],{"type":42,"value":5005},"(future: asyncio.Future[Any]) -> ",{"type":36,"tag":95,"props":5007,"children":5008},{"style":155},[5009],{"type":42,"value":158},{"type":36,"tag":95,"props":5011,"children":5012},{"style":108},[5013],{"type":42,"value":163},{"type":36,"tag":95,"props":5015,"children":5016},{"class":97,"line":660},[5017,5022,5026],{"type":36,"tag":95,"props":5018,"children":5019},{"style":108},[5020],{"type":42,"value":5021},"    loop ",{"type":36,"tag":95,"props":5023,"children":5024},{"style":102},[5025],{"type":42,"value":400},{"type":36,"tag":95,"props":5027,"children":5028},{"style":108},[5029],{"type":42,"value":5030}," asyncio.get_running_loop()\n",{"type":36,"tag":95,"props":5032,"children":5033},{"class":97,"line":668},[5034,5039,5043],{"type":36,"tag":95,"props":5035,"children":5036},{"style":108},[5037],{"type":42,"value":5038},"    waiter ",{"type":36,"tag":95,"props":5040,"children":5041},{"style":102},[5042],{"type":42,"value":400},{"type":36,"tag":95,"props":5044,"children":5045},{"style":108},[5046],{"type":42,"value":5047}," loop.create_future()\n",{"type":36,"tag":95,"props":5049,"children":5050},{"class":97,"line":692},[5051,5056,5060],{"type":36,"tag":95,"props":5052,"children":5053},{"style":108},[5054],{"type":42,"value":5055},"    callback ",{"type":36,"tag":95,"props":5057,"children":5058},{"style":102},[5059],{"type":42,"value":400},{"type":36,"tag":95,"props":5061,"children":5062},{"style":108},[5063],{"type":42,"value":5064}," partial(release, waiter)\n",{"type":36,"tag":95,"props":5066,"children":5067},{"class":97,"line":1392},[5068],{"type":36,"tag":95,"props":5069,"children":5070},{"style":108},[5071],{"type":42,"value":5072},"    future.add_done_callback(callback)\n",{"type":36,"tag":95,"props":5074,"children":5075},{"class":97,"line":1401},[5076],{"type":36,"tag":95,"props":5077,"children":5078},{"emptyLinePlaceholder":5},[5079],{"type":42,"value":120},{"type":36,"tag":95,"props":5081,"children":5082},{"class":97,"line":1410},[5083,5087],{"type":36,"tag":95,"props":5084,"children":5085},{"style":102},[5086],{"type":42,"value":3363},{"type":36,"tag":95,"props":5088,"children":5089},{"style":108},[5090],{"type":42,"value":163},{"type":36,"tag":95,"props":5092,"children":5093},{"class":97,"line":2021},[5094],{"type":36,"tag":95,"props":5095,"children":5096},{"style":108},[5097],{"type":42,"value":5098},"        future.cancel()\n",{"type":36,"tag":95,"props":5100,"children":5101},{"class":97,"line":2030},[5102,5107],{"type":36,"tag":95,"props":5103,"children":5104},{"style":102},[5105],{"type":42,"value":5106},"        await",{"type":36,"tag":95,"props":5108,"children":5109},{"style":108},[5110],{"type":42,"value":5111}," waiter\n",{"type":36,"tag":95,"props":5113,"children":5114},{"class":97,"line":2039},[5115,5120],{"type":36,"tag":95,"props":5116,"children":5117},{"style":102},[5118],{"type":42,"value":5119},"    finally",{"type":36,"tag":95,"props":5121,"children":5122},{"style":108},[5123],{"type":42,"value":163},{"type":36,"tag":95,"props":5125,"children":5126},{"class":97,"line":2048},[5127],{"type":36,"tag":95,"props":5128,"children":5129},{"style":108},[5130],{"type":42,"value":5131},"        future.remove_done_callback(callback)\n",{"type":36,"tag":95,"props":5133,"children":5134},{"class":97,"line":2057},[5135],{"type":36,"tag":95,"props":5136,"children":5137},{"emptyLinePlaceholder":5},[5138],{"type":42,"value":120},{"type":36,"tag":95,"props":5140,"children":5141},{"class":97,"line":2733},[5142],{"type":36,"tag":95,"props":5143,"children":5144},{"emptyLinePlaceholder":5},[5145],{"type":42,"value":120},{"type":36,"tag":95,"props":5147,"children":5148},{"class":97,"line":2755},[5149,5153,5157,5162,5167,5171],{"type":36,"tag":95,"props":5150,"children":5151},{"style":102},[5152],{"type":42,"value":30},{"type":36,"tag":95,"props":5154,"children":5155},{"style":102},[5156],{"type":42,"value":141},{"type":36,"tag":95,"props":5158,"children":5159},{"style":144},[5160],{"type":42,"value":5161}," wait_for",{"type":36,"tag":95,"props":5163,"children":5164},{"style":108},[5165],{"type":42,"value":5166},"(coro: Awaitable[Any]) -> ",{"type":36,"tag":95,"props":5168,"children":5169},{"style":155},[5170],{"type":42,"value":158},{"type":36,"tag":95,"props":5172,"children":5173},{"style":108},[5174],{"type":42,"value":163},{"type":36,"tag":95,"props":5176,"children":5177},{"class":97,"line":2800},[5178,5182,5187],{"type":36,"tag":95,"props":5179,"children":5180},{"style":108},[5181],{"type":42,"value":490},{"type":36,"tag":95,"props":5183,"children":5184},{"style":283},[5185],{"type":42,"value":5186},"\"wait\"",{"type":36,"tag":95,"props":5188,"children":5189},{"style":108},[5190],{"type":42,"value":187},{"type":36,"tag":95,"props":5192,"children":5193},{"class":97,"line":2808},[5194],{"type":36,"tag":95,"props":5195,"children":5196},{"emptyLinePlaceholder":5},[5197],{"type":42,"value":120},{"type":36,"tag":95,"props":5199,"children":5200},{"class":97,"line":2816},[5201,5205,5209],{"type":36,"tag":95,"props":5202,"children":5203},{"style":108},[5204],{"type":42,"value":5021},{"type":36,"tag":95,"props":5206,"children":5207},{"style":102},[5208],{"type":42,"value":400},{"type":36,"tag":95,"props":5210,"children":5211},{"style":108},[5212],{"type":42,"value":5030},{"type":36,"tag":95,"props":5214,"children":5215},{"class":97,"line":2840},[5216,5220,5224],{"type":36,"tag":95,"props":5217,"children":5218},{"style":108},[5219],{"type":42,"value":5038},{"type":36,"tag":95,"props":5221,"children":5222},{"style":102},[5223],{"type":42,"value":400},{"type":36,"tag":95,"props":5225,"children":5226},{"style":108},[5227],{"type":42,"value":5047},{"type":36,"tag":95,"props":5229,"children":5230},{"class":97,"line":2848},[5231,5235,5239],{"type":36,"tag":95,"props":5232,"children":5233},{"style":108},[5234],{"type":42,"value":5055},{"type":36,"tag":95,"props":5236,"children":5237},{"style":102},[5238],{"type":42,"value":400},{"type":36,"tag":95,"props":5240,"children":5241},{"style":108},[5242],{"type":42,"value":5064},{"type":36,"tag":95,"props":5244,"children":5245},{"class":97,"line":2857},[5246,5251,5255],{"type":36,"tag":95,"props":5247,"children":5248},{"style":108},[5249],{"type":42,"value":5250},"    future ",{"type":36,"tag":95,"props":5252,"children":5253},{"style":102},[5254],{"type":42,"value":400},{"type":36,"tag":95,"props":5256,"children":5257},{"style":108},[5258],{"type":42,"value":5259}," asyncio.ensure_future(coro)\n",{"type":36,"tag":95,"props":5261,"children":5262},{"class":97,"line":2866},[5263],{"type":36,"tag":95,"props":5264,"children":5265},{"style":108},[5266],{"type":42,"value":5072},{"type":36,"tag":95,"props":5268,"children":5269},{"class":97,"line":2875},[5270],{"type":36,"tag":95,"props":5271,"children":5272},{"emptyLinePlaceholder":5},[5273],{"type":42,"value":120},{"type":36,"tag":95,"props":5275,"children":5276},{"class":97,"line":2884},[5277,5281],{"type":36,"tag":95,"props":5278,"children":5279},{"style":102},[5280],{"type":42,"value":3363},{"type":36,"tag":95,"props":5282,"children":5283},{"style":108},[5284],{"type":42,"value":163},{"type":36,"tag":95,"props":5286,"children":5287},{"class":97,"line":2893},[5288,5292],{"type":36,"tag":95,"props":5289,"children":5290},{"style":102},[5291],{"type":42,"value":5106},{"type":36,"tag":95,"props":5293,"children":5294},{"style":108},[5295],{"type":42,"value":5111},{"type":36,"tag":95,"props":5297,"children":5298},{"class":97,"line":4448},[5299,5303],{"type":36,"tag":95,"props":5300,"children":5301},{"style":102},[5302],{"type":42,"value":3391},{"type":36,"tag":95,"props":5304,"children":5305},{"style":108},[5306],{"type":42,"value":5307}," asyncio.CancelledError:\n",{"type":36,"tag":95,"props":5309,"children":5310},{"class":97,"line":4456},[5311,5316],{"type":36,"tag":95,"props":5312,"children":5313},{"style":102},[5314],{"type":42,"value":5315},"        if",{"type":36,"tag":95,"props":5317,"children":5318},{"style":108},[5319],{"type":42,"value":5320}," future.done():\n",{"type":36,"tag":95,"props":5322,"children":5323},{"class":97,"line":4495},[5324],{"type":36,"tag":95,"props":5325,"children":5326},{"style":102},[5327],{"type":42,"value":5328},"            return\n",{"type":36,"tag":95,"props":5330,"children":5331},{"class":97,"line":4540},[5332],{"type":36,"tag":95,"props":5333,"children":5334},{"style":108},[5335],{"type":42,"value":5131},{"type":36,"tag":95,"props":5337,"children":5338},{"class":97,"line":4552},[5339,5343],{"type":36,"tag":95,"props":5340,"children":5341},{"style":102},[5342],{"type":42,"value":5106},{"type":36,"tag":95,"props":5344,"children":5345},{"style":108},[5346],{"type":42,"value":5347}," cancel(future)\n",{"type":36,"tag":95,"props":5349,"children":5350},{"class":97,"line":4560},[5351],{"type":36,"tag":95,"props":5352,"children":5353},{"style":102},[5354],{"type":42,"value":5355},"        raise\n",{"type":36,"tag":95,"props":5357,"children":5358},{"class":97,"line":4568},[5359],{"type":36,"tag":95,"props":5360,"children":5361},{"emptyLinePlaceholder":5},[5362],{"type":42,"value":120},{"type":36,"tag":95,"props":5364,"children":5365},{"class":97,"line":4592},[5366,5370,5374],{"type":36,"tag":95,"props":5367,"children":5368},{"style":102},[5369],{"type":42,"value":3206},{"type":36,"tag":95,"props":5371,"children":5372},{"style":102},[5373],{"type":42,"value":4949},{"type":36,"tag":95,"props":5375,"children":5376},{"style":108},[5377],{"type":42,"value":5320},{"type":36,"tag":95,"props":5379,"children":5380},{"class":97,"line":4600},[5381],{"type":36,"tag":95,"props":5382,"children":5383},{"style":108},[5384],{"type":42,"value":5131},{"type":36,"tag":95,"props":5386,"children":5387},{"class":97,"line":4609},[5388,5392],{"type":36,"tag":95,"props":5389,"children":5390},{"style":102},[5391],{"type":42,"value":5106},{"type":36,"tag":95,"props":5393,"children":5394},{"style":108},[5395],{"type":42,"value":5347},{"type":36,"tag":95,"props":5397,"children":5399},{"class":97,"line":5398},53,[5400,5404],{"type":36,"tag":95,"props":5401,"children":5402},{"style":102},[5403],{"type":42,"value":3271},{"type":36,"tag":95,"props":5405,"children":5406},{"style":155},[5407],{"type":42,"value":5408}," RuntimeError\n",{"type":36,"tag":95,"props":5410,"children":5412},{"class":97,"line":5411},54,[5413],{"type":36,"tag":95,"props":5414,"children":5415},{"emptyLinePlaceholder":5},[5416],{"type":42,"value":120},{"type":36,"tag":95,"props":5418,"children":5420},{"class":97,"line":5419},55,[5421],{"type":36,"tag":95,"props":5422,"children":5423},{"emptyLinePlaceholder":5},[5424],{"type":42,"value":120},{"type":36,"tag":95,"props":5426,"children":5428},{"class":97,"line":5427},56,[5429,5433,5437,5441,5445,5449],{"type":36,"tag":95,"props":5430,"children":5431},{"style":102},[5432],{"type":42,"value":30},{"type":36,"tag":95,"props":5434,"children":5435},{"style":102},[5436],{"type":42,"value":141},{"type":36,"tag":95,"props":5438,"children":5439},{"style":144},[5440],{"type":42,"value":147},{"type":36,"tag":95,"props":5442,"children":5443},{"style":108},[5444],{"type":42,"value":152},{"type":36,"tag":95,"props":5446,"children":5447},{"style":155},[5448],{"type":42,"value":158},{"type":36,"tag":95,"props":5450,"children":5451},{"style":108},[5452],{"type":42,"value":163},{"type":36,"tag":95,"props":5454,"children":5456},{"class":97,"line":5455},57,[5457,5461,5465],{"type":36,"tag":95,"props":5458,"children":5459},{"style":108},[5460],{"type":42,"value":490},{"type":36,"tag":95,"props":5462,"children":5463},{"style":283},[5464],{"type":42,"value":1809},{"type":36,"tag":95,"props":5466,"children":5467},{"style":108},[5468],{"type":42,"value":187},{"type":36,"tag":95,"props":5470,"children":5472},{"class":97,"line":5471},58,[5473,5477,5481,5486],{"type":36,"tag":95,"props":5474,"children":5475},{"style":102},[5476],{"type":42,"value":172},{"type":36,"tag":95,"props":5478,"children":5479},{"style":108},[5480],{"type":42,"value":177},{"type":36,"tag":95,"props":5482,"children":5483},{"style":155},[5484],{"type":42,"value":5485},"3",{"type":36,"tag":95,"props":5487,"children":5488},{"style":108},[5489],{"type":42,"value":187},{"type":36,"tag":95,"props":5491,"children":5493},{"class":97,"line":5492},59,[5494,5498,5503],{"type":36,"tag":95,"props":5495,"children":5496},{"style":108},[5497],{"type":42,"value":490},{"type":36,"tag":95,"props":5499,"children":5500},{"style":283},[5501],{"type":42,"value":5502},"\"end\"",{"type":36,"tag":95,"props":5504,"children":5505},{"style":108},[5506],{"type":42,"value":187},{"type":36,"tag":95,"props":5508,"children":5510},{"class":97,"line":5509},60,[5511],{"type":36,"tag":95,"props":5512,"children":5513},{"emptyLinePlaceholder":5},[5514],{"type":42,"value":120},{"type":36,"tag":95,"props":5516,"children":5518},{"class":97,"line":5517},61,[5519],{"type":36,"tag":95,"props":5520,"children":5521},{"emptyLinePlaceholder":5},[5522],{"type":42,"value":120},{"type":36,"tag":95,"props":5524,"children":5526},{"class":97,"line":5525},62,[5527,5531,5535,5539,5543,5547],{"type":36,"tag":95,"props":5528,"children":5529},{"style":102},[5530],{"type":42,"value":30},{"type":36,"tag":95,"props":5532,"children":5533},{"style":102},[5534],{"type":42,"value":141},{"type":36,"tag":95,"props":5536,"children":5537},{"style":144},[5538],{"type":42,"value":220},{"type":36,"tag":95,"props":5540,"children":5541},{"style":108},[5542],{"type":42,"value":152},{"type":36,"tag":95,"props":5544,"children":5545},{"style":155},[5546],{"type":42,"value":158},{"type":36,"tag":95,"props":5548,"children":5549},{"style":108},[5550],{"type":42,"value":163},{"type":36,"tag":95,"props":5552,"children":5554},{"class":97,"line":5553},63,[5555,5559,5563],{"type":36,"tag":95,"props":5556,"children":5557},{"style":108},[5558],{"type":42,"value":1897},{"type":36,"tag":95,"props":5560,"children":5561},{"style":102},[5562],{"type":42,"value":400},{"type":36,"tag":95,"props":5564,"children":5565},{"style":108},[5566],{"type":42,"value":245},{"type":36,"tag":95,"props":5568,"children":5570},{"class":97,"line":5569},64,[5571,5575,5579],{"type":36,"tag":95,"props":5572,"children":5573},{"style":108},[5574],{"type":42,"value":2575},{"type":36,"tag":95,"props":5576,"children":5577},{"style":102},[5578],{"type":42,"value":400},{"type":36,"tag":95,"props":5580,"children":5581},{"style":108},[5582],{"type":42,"value":1922},{"type":36,"tag":95,"props":5584,"children":5586},{"class":97,"line":5585},65,[5587,5591],{"type":36,"tag":95,"props":5588,"children":5589},{"style":102},[5590],{"type":42,"value":172},{"type":36,"tag":95,"props":5592,"children":5593},{"style":108},[5594],{"type":42,"value":5595}," asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n",{"type":36,"tag":95,"props":5597,"children":5599},{"class":97,"line":5598},66,[5600],{"type":36,"tag":95,"props":5601,"children":5602},{"emptyLinePlaceholder":5},[5603],{"type":42,"value":120},{"type":36,"tag":95,"props":5605,"children":5607},{"class":97,"line":5606},67,[5608],{"type":36,"tag":95,"props":5609,"children":5610},{"emptyLinePlaceholder":5},[5611],{"type":42,"value":120},{"type":36,"tag":95,"props":5613,"children":5615},{"class":97,"line":5614},68,[5616,5620,5624,5628,5632],{"type":36,"tag":95,"props":5617,"children":5618},{"style":102},[5619],{"type":42,"value":270},{"type":36,"tag":95,"props":5621,"children":5622},{"style":155},[5623],{"type":42,"value":275},{"type":36,"tag":95,"props":5625,"children":5626},{"style":102},[5627],{"type":42,"value":280},{"type":36,"tag":95,"props":5629,"children":5630},{"style":283},[5631],{"type":42,"value":286},{"type":36,"tag":95,"props":5633,"children":5634},{"style":108},[5635],{"type":42,"value":163},{"type":36,"tag":95,"props":5637,"children":5639},{"class":97,"line":5638},69,[5640],{"type":36,"tag":95,"props":5641,"children":5642},{"style":108},[5643],{"type":42,"value":299},{"type":36,"tag":95,"props":5645,"children":5647},{"class":97,"line":5646},70,[5648],{"type":36,"tag":95,"props":5649,"children":5650},{"style":1370},[5651],{"type":42,"value":5652},"# ❯ poetry run python main7.py\n",{"type":36,"tag":95,"props":5654,"children":5656},{"class":97,"line":5655},71,[5657],{"type":36,"tag":95,"props":5658,"children":5659},{"style":1370},[5660],{"type":42,"value":2872},{"type":36,"tag":95,"props":5662,"children":5664},{"class":97,"line":5663},72,[5665],{"type":36,"tag":95,"props":5666,"children":5667},{"style":1370},[5668],{"type":42,"value":5669},"# wait\n",{"type":36,"tag":95,"props":5671,"children":5673},{"class":97,"line":5672},73,[5674],{"type":36,"tag":95,"props":5675,"children":5676},{"style":1370},[5677],{"type":42,"value":5669},{"type":36,"tag":95,"props":5679,"children":5681},{"class":97,"line":5680},74,[5682],{"type":36,"tag":95,"props":5683,"children":5684},{"style":1370},[5685],{"type":42,"value":5669},{"type":36,"tag":95,"props":5687,"children":5689},{"class":97,"line":5688},75,[5690],{"type":36,"tag":95,"props":5691,"children":5692},{"style":1370},[5693],{"type":42,"value":5694},"# end\n",{"type":36,"tag":52,"props":5696,"children":5697},{},[5698,5703,5705,5710,5712,5718],{"type":36,"tag":45,"props":5699,"children":5701},{"className":5700},[],[5702],{"type":42,"value":4737},{"type":42,"value":5704},"의 실제 구현은 더 정교하지만, 읽기 쉽도록 일부 코드를 수정했다.\n위와 같은 형태로 ",{"type":36,"tag":45,"props":5706,"children":5708},{"className":5707},[],[5709],{"type":42,"value":4737},{"type":42,"value":5711},"를 사용하지 않는다면, ",{"type":36,"tag":45,"props":5713,"children":5715},{"className":5714},[],[5716],{"type":42,"value":5717},"task",{"type":42,"value":5719},"를 2번 이상 실행하게 되고,\n동일한 코루틴을 2번 이상 실행할 수 없다는 에러가 발생한다.",{"type":36,"tag":37,"props":5721,"children":5723},{"id":5722},"요약하자면",[5724],{"type":42,"value":5722},{"type":36,"tag":2116,"props":5726,"children":5727},{},[5728,5751,5774],{"type":36,"tag":2120,"props":5729,"children":5730},{},[5731,5736,5737,5742,5744,5749],{"type":36,"tag":45,"props":5732,"children":5734},{"className":5733},[],[5735],{"type":42,"value":30},{"type":42,"value":987},{"type":36,"tag":45,"props":5738,"children":5740},{"className":5739},[],[5741],{"type":42,"value":69},{"type":42,"value":5743}," 키워드로 비동기 함수를 정의하여 코루틴을 생성하고,\n",{"type":36,"tag":45,"props":5745,"children":5747},{"className":5746},[],[5748],{"type":42,"value":310},{"type":42,"value":5750},"으로 실행한다.",{"type":36,"tag":2120,"props":5752,"children":5753},{},[5754,5759,5760,5765,5767,5772],{"type":36,"tag":45,"props":5755,"children":5757},{"className":5756},[],[5758],{"type":42,"value":1644},{"type":42,"value":1544},{"type":36,"tag":45,"props":5761,"children":5763},{"className":5762},[],[5764],{"type":42,"value":1651},{"type":42,"value":5766},"와 비슷한 객체는 ",{"type":36,"tag":45,"props":5768,"children":5770},{"className":5769},[],[5771],{"type":42,"value":1508},{"type":42,"value":5773},"다.",{"type":36,"tag":2120,"props":5775,"children":5776},{},[5777,5782],{"type":36,"tag":45,"props":5778,"children":5780},{"className":5779},[],[5781],{"type":42,"value":1501},{"type":42,"value":5783},"를 사용하면 콜백을 활용할 수 있다.",{"type":36,"tag":964,"props":5785,"children":5787},{"id":5786},"추가하자면",[5788],{"type":42,"value":5786},{"type":36,"tag":52,"props":5790,"children":5791},{},[5792,5794,5799,5801,5806],{"type":42,"value":5793},"기본 라이브러리인 ",{"type":36,"tag":45,"props":5795,"children":5797},{"className":5796},[],[5798],{"type":42,"value":50},{"type":42,"value":5800}," 위주로 작성된 글이지만,\n비동기 라이브러리는 ",{"type":36,"tag":45,"props":5802,"children":5804},{"className":5803},[],[5805],{"type":42,"value":50},{"type":42,"value":5807},"만이 있는 것은 아니다.",{"type":36,"tag":52,"props":5809,"children":5810},{},[5811,5817,5819,5825,5826,5832,5834,5839,5841,5846,5848,5854],{"type":36,"tag":45,"props":5812,"children":5814},{"className":5813},[],[5815],{"type":42,"value":5816},"twisted",{"type":42,"value":5818},"나 ",{"type":36,"tag":45,"props":5820,"children":5822},{"className":5821},[],[5823],{"type":42,"value":5824},"curio",{"type":42,"value":987},{"type":36,"tag":45,"props":5827,"children":5829},{"className":5828},[],[5830],{"type":42,"value":5831},"trio",{"type":42,"value":5833},"등이 있으며,\n",{"type":36,"tag":45,"props":5835,"children":5837},{"className":5836},[],[5838],{"type":42,"value":5831},{"type":42,"value":5840},"의 로직을 ",{"type":36,"tag":45,"props":5842,"children":5844},{"className":5843},[],[5845],{"type":42,"value":50},{"type":42,"value":5847},"에 적용한 ",{"type":36,"tag":45,"props":5849,"children":5851},{"className":5850},[],[5852],{"type":42,"value":5853},"anyio",{"type":42,"value":5855},"도 있다.",{"type":36,"tag":5857,"props":5858,"children":5859},"blockquote",{},[5860,5883,5902],{"type":36,"tag":52,"props":5861,"children":5862},{},[5863,5868,5870,5875,5876,5881],{"type":36,"tag":45,"props":5864,"children":5866},{"className":5865},[],[5867],{"type":42,"value":5853},{"type":42,"value":5869},"를 사용하면 비동기 로직 구현 후,\n",{"type":36,"tag":45,"props":5871,"children":5873},{"className":5872},[],[5874],{"type":42,"value":50},{"type":42,"value":63},{"type":36,"tag":45,"props":5877,"children":5879},{"className":5878},[],[5880],{"type":42,"value":5831},{"type":42,"value":5882},"중 어떤 것이든 선택하여 사용할 수 있다.",{"type":36,"tag":52,"props":5884,"children":5885},{},[5886,5888,5893,5895,5900],{"type":42,"value":5887},"2.x에서는 ",{"type":36,"tag":45,"props":5889,"children":5891},{"className":5890},[],[5892],{"type":42,"value":5824},{"type":42,"value":5894},"도 지원했지만,\n",{"type":36,"tag":45,"props":5896,"children":5898},{"className":5897},[],[5899],{"type":42,"value":5824},{"type":42,"value":5901},"의 구현 방식에 따른 개발에 어려움이 있어서 3.x부터 제외됐다.",{"type":36,"tag":52,"props":5903,"children":5904},{},[5905,5910,5911,5916,5918,5924,5926,5931],{"type":36,"tag":45,"props":5906,"children":5908},{"className":5907},[],[5909],{"type":42,"value":5816},{"type":42,"value":1551},{"type":36,"tag":45,"props":5912,"children":5914},{"className":5913},[],[5915],{"type":42,"value":5853},{"type":42,"value":5917},"에서 사용하는 ",{"type":36,"tag":45,"props":5919,"children":5921},{"className":5920},[],[5922],{"type":42,"value":5923},"sniffio",{"type":42,"value":5925},"에서 지원하지 않아서\n",{"type":36,"tag":45,"props":5927,"children":5929},{"className":5928},[],[5930],{"type":42,"value":5853},{"type":42,"value":5932},"에서도 지원하지 않는다.",{"type":36,"tag":52,"props":5934,"children":5935},{},[5936,5938,5943,5944,5949,5950,5955],{"type":42,"value":5937},"모든 라이브러리는 코루틴에 대해서는 공유하지만,\n",{"type":36,"tag":45,"props":5939,"children":5941},{"className":5940},[],[5942],{"type":42,"value":1501},{"type":42,"value":63},{"type":36,"tag":45,"props":5945,"children":5947},{"className":5946},[],[5948],{"type":42,"value":1508},{"type":42,"value":1551},{"type":36,"tag":45,"props":5951,"children":5953},{"className":5952},[],[5954],{"type":42,"value":50},{"type":42,"value":5956},"에 정의된 객체이므로,\n따로 정의한 객체를 사용할 수 있다.\n따라서 만약 다른 라이브러리를 사용한다면,\n그 라이브러리에 맞는 방법을 잘 알아보고 사용해야 한다.",{"type":36,"tag":52,"props":5958,"children":5959},{},[5960,5962,5967,5969,5975,5977,5983,5985,5990,5992,5997,5999,6005,6007,6012],{"type":42,"value":5961},"나는 ",{"type":36,"tag":45,"props":5963,"children":5965},{"className":5964},[],[5966],{"type":42,"value":5853},{"type":42,"value":5968},"를 주로 사용하는데,\n",{"type":36,"tag":45,"props":5970,"children":5972},{"className":5971},[],[5973],{"type":42,"value":5974},"TaskGroup",{"type":42,"value":5976},"과 ",{"type":36,"tag":45,"props":5978,"children":5980},{"className":5979},[],[5981],{"type":42,"value":5982},"CancelScope",{"type":42,"value":5984},"가 마음에 들었기 때문이다.\n특히 이 ",{"type":36,"tag":45,"props":5986,"children":5988},{"className":5987},[],[5989],{"type":42,"value":5974},{"type":42,"value":5991},"은 3.11부터는 ",{"type":36,"tag":45,"props":5993,"children":5995},{"className":5994},[],[5996],{"type":42,"value":50},{"type":42,"value":5998},"에 적용된 개념이기도 하니,\n만약 3.11이상의 버전을 사용한다면 ",{"type":36,"tag":45,"props":6000,"children":6002},{"className":6001},[],[6003],{"type":42,"value":6004},"gather",{"type":42,"value":6006}," 대신 ",{"type":36,"tag":45,"props":6008,"children":6010},{"className":6009},[],[6011],{"type":42,"value":5974},{"type":42,"value":6013},"을 사용하자.",{"type":36,"tag":52,"props":6015,"children":6016},{},[6017,6018,6023,6025,6034],{"type":42,"value":969},{"type":36,"tag":45,"props":6019,"children":6021},{"className":6020},[],[6022],{"type":42,"value":5974},{"type":42,"value":6024},"이 좋은지, 왜 사용해야 하는지는\n",{"type":36,"tag":6026,"props":6027,"children":6031},"a",{"href":6028,"rel":6029},"https://blog.lablup.com/posts/2022/03/29/PersistentTaskGroup/",[6030],"nofollow",[6032],{"type":42,"value":6033},"이 글",{"type":42,"value":6035},"에서 상세하게 설명해준다.",{"type":36,"tag":6037,"props":6038,"children":6039},"style",{},[6040],{"type":42,"value":6041},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":26,"searchDepth":166,"depth":166,"links":6043},[6044,6049,6056,6063],{"id":39,"depth":114,"text":6045,"children":6046},"파이썬의 비동기 라이브러리 asyncio",[6047],{"id":966,"depth":123,"text":6048},"왜 asyncio.run을 실행해야 하는가",{"id":1022,"depth":114,"text":6050,"children":6051},"대기할 수 있는 Awaitable객체",[6052,6054],{"id":1526,"depth":123,"text":6053},"콜백 형태의 Future",{"id":1596,"depth":123,"text":6055},"Future를 상속받는 Task",{"id":2949,"depth":114,"text":6057,"children":6058},"Future와 Task는 언제 사용할까",[6059,6061],{"id":2982,"depth":123,"text":6060},"Task가 필요한 상황",{"id":4636,"depth":123,"text":6062},"Future가 필요한 상황",{"id":5722,"depth":114,"text":5722,"children":6064},[6065],{"id":5786,"depth":123,"text":5786},"markdown","content:python:async.md","content","python/async.md","python/async","md",{"_path":6073,"title":6074,"description":6075},"/python/airflow1","새로운 문법으로 Airflow DAG 생성하기","TaskFlow API를 사용하자",{"_path":6077,"title":6078,"description":6079},"/python/pep_695","더 편한 타입 힌트를 위한 PEP695","python 3.12에 새롭게 추가/변경되는 문법",["Set"],{"route_path":19},{"tags":6083,"selected":6084,"count":6085,"posts":6086,"tagged_posts":6087,"toggle":5},["Set"],["Set"],["Map"],[],[],1726936432199]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{name:"phi.log",description:"phi.log",hostname:"https://phi-friday.github.io",post_prefix:"/@post",tag_prefix:"/@tag",sha:"c8b9ae141abf5c0633a85b43e44eb6f1ad1b9b24",default_limit:5,pagination_size:5,comment:{src:"https://utteranc.es/client.js",repo:"phi-friday/phi-friday.github.io",issue_term:"pathname",crossorigin:"anonymous",async:true},google:{search:"https://cse.google.com/cse.js?cx=b368175c2b370414c",seo:"lW107Dj5ageygd67UUzTm-kGls5d-THy9jJQZqLoauw"},mdc:{useNuxtImage:true,components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1726936411006,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:{default:"github-light",dark:"github-dark"},preload:["diff","json","js","ts","shell","html","md","yaml","python"],highlighter:"shiki",langs:["js","jsx","json","ts","tsx","vue","css","html","bash","md","mdc","yaml","diff","json","js","ts","shell","html","md","yaml","python"]},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildId:"ad561fae-7bb0-40c2-966c-c937f541787b",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>