<!DOCTYPE html><html  data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>phi.log - python의 비동기에 대한 얕은 이해</title>
<script async src="https://cse.google.com/cse.js?cx=b368175c2b370414c"></script>
<style>@import url("https://api.fontshare.com/v2/css?f[]=cabinet-grotesk@1,800,500,100,700,400,300,200,900&f[]=satoshi@1,900,700,500,301,701,300,501,401,901,400,2&display=swap");@media (prefers-color-scheme:dark){html:not(.light) .markdown-alert{--color-border-default:#30363d;--color-accent-fg:#58a6ff;--color-accent-emphasis:#1f6feb;--color-danger-fg:#f85149;--color-danger-emphasis:#da3633;--color-attention-fg:#d29922;--color-attention-emphasis:#9e6a03;--color-done-fg:#a371f7;--color-done-emphasis:#8957e5;--color-success-fg:#3fb950;--color-success-emphasis:#238636}}html.dark .markdown-alert{--color-border-default:#30363d;--color-accent-fg:#58a6ff;--color-accent-emphasis:#1f6feb;--color-danger-fg:#f85149;--color-danger-emphasis:#da3633;--color-attention-fg:#d29922;--color-attention-emphasis:#9e6a03;--color-done-fg:#a371f7;--color-done-emphasis:#8957e5;--color-success-fg:#3fb950;--color-success-emphasis:#238636}@media (prefers-color-scheme:light){.markdown-alert{--color-border-default:#d0d7de;--color-accent-fg:#0969da;--color-accent-emphasis:#0969da;--color-danger-fg:#d1242f;--color-danger-emphasis:#cf222e;--color-attention-fg:#9a6700;--color-attention-emphasis:#9a6700;--color-done-fg:#8250df;--color-done-emphasis:#8250df;--color-success-fg:#1a7f37;--color-success-emphasis:#1f883d}}.markdown-alert{border-left:.25em solid var(--borderColor-default,var(--color-border-default));color:inherit;margin-bottom:16px;padding:.5rem 1em}.markdown-alert>:last-child{margin-bottom:0!important}.markdown-alert .markdown-alert-title{align-items:center;display:flex;font-size:14px;font-weight:500;line-height:1}.markdown-alert .markdown-alert-title svg.octicon{margin-right:8px!important;margin-right:var(--base-size-8,8px)!important;fill:currentColor}.markdown-alert.markdown-alert-note{border-left-color:var(--borderColor-accent-emphasis,var(--color-accent-emphasis))}.markdown-alert.markdown-alert-note .markdown-alert-title{color:var(--color-accent-fg);color:var(--fgColor-accent,var(--color-accent-fg))}.markdown-alert.markdown-alert-tip{border-left-color:var(--borderColor-success-emphasis,var(--color-success-emphasis))}.markdown-alert.markdown-alert-tip .markdown-alert-title{color:var(--color-success-fg);color:var(--fgColor-success,var(--color-success-fg))}.markdown-alert.markdown-alert-important{border-left-color:var(--borderColor-done-emphasis,var(--color-done-emphasis))}.markdown-alert.markdown-alert-important .markdown-alert-title{color:var(--color-done-fg);color:var(--fgColor-done,var(--color-done-fg))}.markdown-alert.markdown-alert-warning{border-left-color:var(--borderColor-attention-emphasis,var(--color-attention-emphasis))}.markdown-alert.markdown-alert-warning .markdown-alert-title{color:var(--color-attention-fg);color:var(--fgColor-attention,var(--color-attention-fg))}.markdown-alert.markdown-alert-caution{border-left-color:var(--borderColor-danger-emphasis,var(--color-danger-emphasis))}.markdown-alert.markdown-alert-caution .markdown-alert-title{color:var(--color-danger-fg);color:var(--fgColor-danger,var(--color-danger-fg))}/*! tailwindcss v3.4.10 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:Satoshi,ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-feature-settings:normal;font-variation-settings:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-bottom:1.2em;margin-top:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);font-weight:500;text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-bottom:1.25em;margin-top:1.25em;padding-inline-start:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-bottom:1.25em;margin-top:1.25em;padding-inline-start:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-counters);font-weight:400}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-bottom:3em;margin-top:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){border-inline-start-color:var(--tw-prose-quote-borders);border-inline-start-width:.25rem;color:var(--tw-prose-quotes);font-style:italic;font-weight:500;margin-bottom:1.6em;margin-top:1.6em;padding-inline-start:1em;quotes:"\201C""\201D""\2018""\2019"}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:2.25em;font-weight:800;line-height:1.1111111;margin-bottom:.8888889em;margin-top:0}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:900}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.5em;font-weight:700;line-height:1.3333333;margin-bottom:1em;margin-top:2em}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:800}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.25em;font-weight:600;line-height:1.6;margin-bottom:.6em;margin-top:1.6em}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;line-height:1.5;margin-bottom:.5em;margin-top:1.5em}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-bottom:2em;margin-top:2em}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.3125rem;box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows)/10%),0 3px 0 rgb(var(--tw-prose-kbd-shadows)/10%);color:var(--tw-prose-kbd);font-family:inherit;font-size:.875em;font-weight:500;padding-inline-end:.375em;padding-bottom:.1875em;padding-top:.1875em;padding-inline-start:.375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-size:.875em;font-weight:600}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:var(--tw-prose-pre-bg);border-radius:.375rem;color:var(--tw-prose-pre-code);font-size:.875em;font-weight:400;line-height:1.7142857;margin-bottom:1.7142857em;margin-top:1.7142857em;overflow-x:auto;padding-inline-end:1.1428571em;padding-bottom:.8571429em;padding-top:.8571429em;padding-inline-start:1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-radius:0;border-width:0;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em;line-height:1.7142857;margin-bottom:2em;margin-top:2em;table-layout:auto;width:100%}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-th-borders);border-bottom-width:1px}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em;vertical-align:bottom}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-td-borders);border-bottom-width:1px}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-color:var(--tw-prose-th-borders);border-top-width:1px}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgba(0,0,0,.5);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.5em;margin-top:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-top:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border-width:0;white-space:nowrap}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.bottom-20{bottom:5rem}.bottom-5{bottom:1.25rem}.right-5{right:1.25rem}.top-0{top:0}.col-span-1{grid-column:span 1/span 1}.col-span-full{grid-column:1/-1}.col-start-1{grid-column-start:1}.col-start-2{grid-column-start:2}.row-auto{grid-row:auto}.row-span-1{grid-row:span 1/span 1}.row-start-1{grid-row-start:1}.m-auto{margin:auto}.mx-2{margin-left:.5rem;margin-right:.5rem}.my-0{margin-bottom:0;margin-top:0}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mr-2{margin-right:.5rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.inline-table{display:inline-table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.h-12{height:3rem}.h-3\.5{height:.875rem}.h-8{height:2rem}.max-h-\[calc\(100vh-6rem\)\]{max-height:calc(100vh - 6rem)}.w-3\.5{width:.875rem}.w-8{width:2rem}.w-full{width:100%}.max-w-3xl{max-width:48rem}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-rows-2{grid-template-rows:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-16{gap:4rem}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.gap-x-5{-moz-column-gap:1.25rem;column-gap:1.25rem}.overflow-auto{overflow:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-t{border-top-width:1px}.border-blue-500{--tw-border-opacity:1;border-color:#3b82f6;border-color:rgb(59 130 246/var(--tw-border-opacity))}.border-slate-100{--tw-border-opacity:1;border-color:#f1f5f9;border-color:rgb(241 245 249/var(--tw-border-opacity))}.border-slate-200{--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity))}.border-white{--tw-border-opacity:1;border-color:#fff;border-color:rgb(255 255 255/var(--tw-border-opacity))}.border-opacity-30{--tw-border-opacity:0.3}.bg-neutral-500{--tw-bg-opacity:1;background-color:#737373;background-color:rgb(115 115 115/var(--tw-bg-opacity))}.bg-red-500{--tw-bg-opacity:1;background-color:#ef4444;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.bg-slate-100{--tw-bg-opacity:1;background-color:#f1f5f9;background-color:rgb(241 245 249/var(--tw-bg-opacity))}.bg-slate-50{--tw-bg-opacity:1;background-color:#f8fafc;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.to-emerald-600{--tw-gradient-to:#059669 var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-2{padding:.5rem}.p-4{padding:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-12{padding-bottom:3rem;padding-top:3rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-4{padding-bottom:1rem;padding-top:1rem}.pb-0{padding-bottom:0}.pb-2{padding-bottom:.5rem}.pt-1{padding-top:.25rem}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-semibold{font-weight:600}.font-thin{font-weight:100}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-normal{line-height:1.5}.leading-tight{line-height:1.25}.text-black{--tw-text-opacity:1;color:#000;color:rgb(0 0 0/var(--tw-text-opacity))}.text-blue-700{--tw-text-opacity:1;color:#1d4ed8;color:rgb(29 78 216/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:#111827;color:rgb(17 24 39/var(--tw-text-opacity))}.text-neutral-400{--tw-text-opacity:1;color:#a3a3a3;color:rgb(163 163 163/var(--tw-text-opacity))}.text-neutral-700{--tw-text-opacity:1;color:#404040;color:rgb(64 64 64/var(--tw-text-opacity))}.text-slate-400{--tw-text-opacity:1;color:#94a3b8;color:rgb(148 163 184/var(--tw-text-opacity))}.text-slate-500{--tw-text-opacity:1;color:#64748b;color:rgb(100 116 139/var(--tw-text-opacity))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}.no-underline{text-decoration-line:none}.shadow-\[0_4px_9px_-4px_\#8C8C8C\]{--tw-shadow:0 4px 9px -4px #8c8c8c;--tw-shadow-colored:0 4px 9px -4px var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 4px 9px -4px #8c8c8c;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-\[0_4px_9px_-4px_\#dc4c64\]{--tw-shadow:0 4px 9px -4px #dc4c64;--tw-shadow-colored:0 4px 9px -4px var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 4px 9px -4px #dc4c64;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}.blur{--tw-blur:blur(8px);filter:blur(8px) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur,.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-lg{--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-150,.transition-all{transition-duration:.15s}*{scroll-margin:5rem}html{scroll-behavior:smooth}body{--tw-text-opacity:1;color:#000;color:rgb(0 0 0/var(--tw-text-opacity))}body:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}body{--tw-bg-opacity:1;background-color:#fff;background-color:rgb(255 255 255/var(--tw-bg-opacity))}body:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#000;background-color:rgb(0 0 0/var(--tw-bg-opacity))}a{text-decoration:underline}h1,h2,h3,h4,h5,h6{font-family:Cabinet Grotesk,ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}hr:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity))}.icon{display:inline-flex;height:1.5rem;width:1.5rem}.icon.solid{fill:#64748b}.icon.solid:where([class~=dark],[class~=dark] *){fill:#e5e5e5}.icon.stroke{stroke:#64748b}.icon.stroke:where([class~=dark],[class~=dark] *){stroke:#e5e5e5}.cta{border-radius:.5rem;border-width:1px;font-weight:600;padding:.375rem .5rem;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.cta:hover{--tw-translate-y:-0.125rem;transform:translate(var(--tw-translate-x),-.125rem) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cta:active{--tw-translate-y:0.125rem;transform:translate(var(--tw-translate-x),.125rem) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-shadow:inset 0 2px 4px 0 rgba(0,0,0,.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,inset 0 2px 4px 0 rgba(0,0,0,.05);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.cta{--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#f8fafc;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.cta:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.cta.w-icon{align-items:center;display:flex;gap:.5rem;padding-right:.75rem}.article-tags{display:flex;gap:.5rem;padding-bottom:.5rem;padding-top:.5rem}.article-tags .tag{border-radius:.375rem;font-size:.875rem;line-height:1.25rem;padding:.5rem;padding-bottom:.125rem!important;padding-top:.125rem!important;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.article-tags .tag:hover{--tw-translate-y:-0.125rem;transform:translate(var(--tw-translate-x),-.125rem) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.tag{--tw-text-opacity:1;color:#334155;color:rgb(51 65 85/var(--tw-text-opacity))}.tag:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#fafafa;color:rgb(250 250 250/var(--tw-text-opacity))}.tag{--tw-bg-opacity:1;background-color:#f1f5f9;background-color:rgb(241 245 249/var(--tw-bg-opacity))}.tag:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity))}.tag.select{--tw-bg-opacity:1;background-color:#bae6fd;background-color:rgb(186 230 253/var(--tw-bg-opacity))}.tag.select:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#334155;background-color:rgb(51 65 85/var(--tw-bg-opacity))}.tag-list{align-items:center;border-color:transparent;border-radius:.5rem;border-width:1px;gap:.5rem;padding:.5rem}.tag-list.active{--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity))}.tag-list.active:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#e5e5e5;border-color:rgb(229 229 229/var(--tw-border-opacity))}.page-heading{--tw-bg-opacity:1;background-color:#f8fafc;background-color:rgb(248 250 252/var(--tw-bg-opacity));padding:3rem}.page-heading:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.page-heading>.wrapper,.page-section{margin:auto;max-width:48rem}.page-section{padding:2rem 1rem}.article-list{display:flex;flex-direction:column;gap:1.5rem}.article-item{border-top-width:1px;padding-top:1.5rem}.article-item:first-of-type{border-style:none}.article-item{--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity))}.article-item:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#404040;border-color:rgb(64 64 64/var(--tw-border-opacity))}.article-item a{text-decoration-line:none}.article-item>*>.wrapper{align-items:flex-start;display:flex;gap:1rem}.hover\:bg-blue-500:hover{--tw-bg-opacity:1;background-color:#3b82f6;background-color:rgb(59 130 246/var(--tw-bg-opacity))}.hover\:bg-neutral-100:hover{--tw-bg-opacity:1;background-color:#f5f5f5;background-color:rgb(245 245 245/var(--tw-bg-opacity))}.hover\:bg-neutral-600:hover{--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.hover\:bg-red-600:hover{--tw-bg-opacity:1;background-color:#dc2626;background-color:rgb(220 38 38/var(--tw-bg-opacity))}.hover\:text-white:hover{--tw-text-opacity:1;color:#fff;color:rgb(255 255 255/var(--tw-text-opacity))}.hover\:shadow-\[0_8px_9px_-4px_rgba\(10\2c 10\2c 10\2c 0\.3\)\2c 0_4px_18px_0_rgba\(10\2c 10\2c 10\2c 0\.2\)\]:hover{--tw-shadow:0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.hover\:shadow-\[0_8px_9px_-4px_rgba\(220\2c 76\2c 100\2c 0\.3\)\2c 0_4px_18px_0_rgba\(220\2c 76\2c 100\2c 0\.2\)\]:hover{--tw-shadow:0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:bg-neutral-600:focus{--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.focus\:bg-red-600:focus{--tw-bg-opacity:1;background-color:#dc2626;background-color:rgb(220 38 38/var(--tw-bg-opacity))}.focus\:shadow-\[0_8px_9px_-4px_rgba\(10\2c 10\2c 10\2c 0\.3\)\2c 0_4px_18px_0_rgba\(10\2c 10\2c 10\2c 0\.2\)\]:focus{--tw-shadow:0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:shadow-\[0_8px_9px_-4px_rgba\(220\2c 76\2c 100\2c 0\.3\)\2c 0_4px_18px_0_rgba\(220\2c 76\2c 100\2c 0\.2\)\]:focus{--tw-shadow:0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\:shadow-\[0_8px_9px_-4px_rgba\(10\2c 10\2c 10\2c 0\.3\)\2c 0_4px_18px_0_rgba\(10\2c 10\2c 10\2c 0\.2\)\]:active{--tw-shadow:0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.active\:shadow-\[0_8px_9px_-4px_rgba\(220\2c 76\2c 100\2c 0\.3\)\2c 0_4px_18px_0_rgba\(220\2c 76\2c 100\2c 0\.2\)\]:active{--tw-shadow:0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}@media (min-width:768px){.md\:col-span-2{grid-column:span 2/span 2}.md\:col-span-6{grid-column:span 6/span 6}.md\:col-start-1{grid-column-start:1}.md\:row-start-1{grid-row-start:1}.md\:text-5xl{font-size:3rem;line-height:1}}.dark\:bg-neutral-900:where([class~=dark],[class~=dark] *){--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.dark\:text-neutral-300:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#d4d4d4;color:rgb(212 212 212/var(--tw-text-opacity))}.dark\:text-neutral-700:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#404040;color:rgb(64 64 64/var(--tw-text-opacity))}</style>
<style>html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.sr-only{height:1px!important;margin:-1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;width:1px!important;clip:rect(0,0,0,0)!important;border:0!important;white-space:nowrap!important}</style>
<style>*,:after,:before{border:0 solid #e5e7eb;border-color:var(--un-default-border-color,#e5e7eb);box-sizing:border-box}html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-feature-settings:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}</style>
<style>.site-header[data-v-0eba3425]{background-color:rgba(241,245,249,.4);background-color:rgb(241 245 249/var(--tw-bg-opacity));position:sticky;top:0;width:100%;--tw-bg-opacity:0.4;border-bottom-width:2px;border-color:hsla(0,0%,100%,.3);border-color:rgb(255 255 255/var(--tw-border-opacity));padding:1rem;z-index:20;--tw-border-opacity:0.3;--tw-backdrop-blur:blur(16px);-webkit-backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:blur(16px) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.site-header[data-v-0eba3425]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#262626;border-color:rgb(38 38 38/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.site-header>.wrapper[data-v-0eba3425]{align-items:center;-moz-column-gap:1.25rem;column-gap:1.25rem;display:flex;justify-content:flex-start;margin:auto;max-width:72rem}.site-logo[data-v-0eba3425]{font-weight:900}</style>
<style>.article-main[data-v-ca2484fd]{margin:auto;max-width:64rem;padding:1rem}</style>
<style>.site-footer[data-v-5a1dd750]{border-top-width:1px;--tw-border-opacity:1;border-color:#f1f5f9;border-color:rgb(241 245 249/var(--tw-border-opacity));padding:3rem 1rem}.site-footer[data-v-5a1dd750]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#262626;border-color:rgb(38 38 38/var(--tw-border-opacity))}.site-footer>.wrapper[data-v-5a1dd750]{display:flex;flex-wrap:wrap;gap:4rem;justify-content:space-between;margin:auto;max-width:72rem}</style>
<style>.go-button[data-v-02d19c8f]{border-radius:9999px;display:inline-block;line-height:1.5;padding:.5rem;position:fixed;text-transform:uppercase;transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.go-button[data-v-02d19c8f]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color),var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color),0 0 #0000;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.go-button[data-v-02d19c8f]{--tw-shadow:0 4px 9px -4px #dc4c64;--tw-shadow-colored:0 4px 9px -4px var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 4px 9px -4px #dc4c64;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);--tw-bg-opacity:1;background-color:#ef4444;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.go-button[data-v-02d19c8f]:focus,.go-button[data-v-02d19c8f]:hover{--tw-bg-opacity:1;background-color:#dc2626;background-color:rgb(220 38 38/var(--tw-bg-opacity))}.go-button[data-v-02d19c8f]:active{--tw-bg-opacity:1;background-color:#b91c1c;background-color:rgb(185 28 28/var(--tw-bg-opacity))}.go-button[data-v-02d19c8f]:active,.go-button[data-v-02d19c8f]:focus,.go-button[data-v-02d19c8f]:hover{--tw-shadow:0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px rgba(220,76,100,.3),0 4px 18px 0 rgba(220,76,100,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.go-button.dark[data-v-02d19c8f]{--tw-shadow:0 4px 9px -4px #8c8c8c;--tw-shadow-colored:0 4px 9px -4px var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 4px 9px -4px #8c8c8c;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);--tw-bg-opacity:1;background-color:#737373;background-color:rgb(115 115 115/var(--tw-bg-opacity))}.go-button.dark[data-v-02d19c8f]:focus,.go-button.dark[data-v-02d19c8f]:hover{--tw-bg-opacity:1;background-color:#525252;background-color:rgb(82 82 82/var(--tw-bg-opacity))}.go-button.dark[data-v-02d19c8f]:active{--tw-bg-opacity:1;background-color:#404040;background-color:rgb(64 64 64/var(--tw-bg-opacity))}.go-button.dark[data-v-02d19c8f]:active,.go-button.dark[data-v-02d19c8f]:focus,.go-button.dark[data-v-02d19c8f]:hover{--tw-shadow:0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);--tw-shadow-colored:0 8px 9px -4px var(--tw-shadow-color),0 4px 18px 0 var(--tw-shadow-color);box-shadow:0 0 #0000,0 0 #0000,0 8px 9px -4px hsla(0,0%,4%,.3),0 4px 18px 0 hsla(0,0%,4%,.2);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}</style>
<style>.article-header[data-v-1c360919]{padding:1rem 1rem 3rem}.article-header .heading[data-v-1c360919]{font-size:3rem;font-weight:800;line-height:1.25;word-break:keep-all}.article-header .supporting[data-v-1c360919]{font-size:1.125rem;font-weight:500;line-height:1.75rem}</style>
<style>.article-section[data-v-44d54f11]{display:grid;grid-template-columns:repeat(8,minmax(0,1fr))}.aside[data-v-44d54f11]{grid-column:1/-1;grid-row-start:1;padding-top:3.5rem;width:100%}@media (min-width:768px){.aside[data-v-44d54f11]{grid-column:span 2/span 2}}.aside .toc[data-v-44d54f11]{position:sticky;top:5rem}.article[data-v-44d54f11]{grid-column:1/-1;width:100%}@media (min-width:768px){.article[data-v-44d54f11]{grid-column:span 6/span 6;grid-column-start:1;grid-row-start:1}}.article[data-v-44d54f11]{margin:auto;max-width:48rem;padding:1rem}</style>
<style>.toc[data-v-9aa87b76]{border-radius:.5rem;border-width:1px;max-height:calc(100vh - 6rem);overflow:auto;padding-bottom:1rem;padding-top:1rem;--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#f8fafc;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.toc[data-v-9aa87b76]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity));--tw-bg-opacity:1;background-color:#171717;background-color:rgb(23 23 23/var(--tw-bg-opacity))}.toc-header[data-v-9aa87b76]{border-bottom-width:1px;margin-bottom:.5rem;--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity));padding-bottom:.5rem;padding-left:1rem;padding-right:1rem}.toc-header[data-v-9aa87b76]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity))}.toc-links[data-v-9aa87b76]{display:flex;flex-direction:column;gap:.5rem;padding-left:1rem;padding-right:1rem}.toc-link[data-v-9aa87b76]{font-size:.875rem;line-height:1.25rem;word-break:keep-all;--tw-text-opacity:1;color:#64748b;color:rgb(100 116 139/var(--tw-text-opacity))}.toc-link[data-v-9aa87b76]:where([class~=dark],[class~=dark] *){--tw-text-opacity:1;color:#d4d4d4;color:rgb(212 212 212/var(--tw-text-opacity))}.toc-link._3[data-v-9aa87b76]{padding-left:.75rem}.toc-link._4[data-v-9aa87b76]{padding-left:1.5rem}.toc-link._5[data-v-9aa87b76]{padding-left:2.25rem}.toc-link._undefined[data-v-9aa87b76]{padding-left:2rem}</style>
<style>.prev-next-cont[data-v-5d7182e6]{border-radius:.5rem;border-width:1px;display:flex;gap:1rem;justify-content:space-between;padding:1rem;--tw-border-opacity:1;border-color:#e2e8f0;border-color:rgb(226 232 240/var(--tw-border-opacity))}.prev-next-cont[data-v-5d7182e6]:where([class~=dark],[class~=dark] *){--tw-border-opacity:1;border-color:#525252;border-color:rgb(82 82 82/var(--tw-border-opacity))}.link-item a[data-v-5d7182e6]{display:flex;gap:.5rem}</style>
<style>h2[data-v-8ebd03fb]{display:block;font-family:var(--typography-font-display);font-size:var(--prose-h2-fontSize);font-weight:var(--prose-h2-fontWeight);letter-spacing:var(--prose-h2-letterSpacing);line-height:var(--prose-h2-lineHeight);margin:var(--prose-h2-margin)}h2[data-v-8ebd03fb] .icon{display:inline-block;height:var(--prose-h2-iconSize);margin-inline-start:12px;opacity:0;transition:opacity .1s;width:var(--prose-h2-iconSize)}h2 a[data-v-8ebd03fb]:hover .icon{opacity:1}</style>
<style>code[data-v-b986f687]{background-color:var(--prose-code-inline-backgroundColor);border-radius:var(--prose-code-inline-borderRadius);color:var(--prose-code-inline-color);font-family:var(--typography-font-code);font-size:var(--prose-code-inline-fontSize);font-weight:var(--prose-code-inline-fontWeight);margin-left:1px;margin-right:1px;padding:var(--prose-code-inline-padding)}tbody code[data-v-b986f687]{font-size:var(--prose-tbody-code-inline-fontSize)}h1 a code[data-v-b986f687],h2 a code[data-v-b986f687],h3 a code[data-v-b986f687],h4 a code[data-v-b986f687],h5 a code[data-v-b986f687],h6 a code[data-v-b986f687]{border-radius:var(--prose-code-inline-borderRadius);color:var(--prose-code-inline-color);font-size:.777777em;padding:.15em .5em}a code[data-v-b986f687]{border-color:var(--prose-a-code-border-color-static);border-style:var(--prose-a-code-border-style);border-width:var(--prose-a-code-border-width);color:var(--prose-a-code-color-static)}a:hover code[data-v-b986f687]{background-color:var(--prose-a-code-background-hover);border-color:var(--prose-a-code-border-color-hover);color:var(--prose-a-code-color-hover)}</style>
<style>p[data-v-f32a1575]{font-family:var(--typography-font-body);font-size:var(--prose-p-fontSize);line-height:var(--prose-p-lineHeight);margin:var(--prose-p-margin)}p[data-v-f32a1575] br{content:"";display:block;margin:var(--prose-p-br-margin)}</style>
<style>pre code .line{display:block;min-height:1rem}</style>
<style>.prose-code[data-v-f10d8ba5]{-webkit-backdrop-filter:var(--prose-code-block-backdropFilter);backdrop-filter:var(--prose-code-block-backdropFilter);background-color:var(--prose-code-block-backgroundColor);border-color:var(--prose-code-block-borderColor);border-radius:var(--prose-code-block-borderRadius);border-style:var(--prose-code-block-borderStyle);border-width:var(--prose-code-block-borderWidth);color:var(--prose-code-block-color);font-size:var(--prose-code-block-fontSize);margin:var(--prose-code-block-margin);overflow:hidden;position:relative;width:100%}.prose-code[data-v-f10d8ba5] code{width:100%}.prose-code.highlight-bash[data-v-f10d8ba5] code .line,.prose-code.highlight-sh[data-v-f10d8ba5] code .line,.prose-code.highlight-shell[data-v-f10d8ba5] code .line,.prose-code.highlight-shellscript[data-v-f10d8ba5] code .line,.prose-code.highlight-zsh[data-v-f10d8ba5] code .line{padding-inline-start:1rem;position:relative}.prose-code.highlight-bash[data-v-f10d8ba5] code .line:before,.prose-code.highlight-sh[data-v-f10d8ba5] code .line:before,.prose-code.highlight-shell[data-v-f10d8ba5] code .line:before,.prose-code.highlight-shellscript[data-v-f10d8ba5] code .line:before,.prose-code.highlight-zsh[data-v-f10d8ba5] code .line:before{color:var(--typography-color-primary-500);content:">";display:block;font-family:var(--typography-font-mono);font-weight:700;inset-inline-start:-.1rem;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.copy-button[data-v-f10d8ba5]{bottom:0;inset-inline-end:0;position:absolute}[data-v-f10d8ba5] code{display:flex;flex-direction:column}[data-v-f10d8ba5] .line{display:inline-table;min-height:1rem}.filename[data-v-f10d8ba5]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);border-radius:var(--typography-radii-lg);color:var(--prose-code-block-color);font-family:var(--typography-font-code);font-size:var(--typography-fontSize-xs);inset-inline-end:0;line-height:var(--typography-lead-normal);padding:.5rem .75rem;position:absolute;top:0;transition:opacity .2s}.prose-code:hover .filename[data-v-f10d8ba5]{opacity:0}.prose-code:hover .filename[data-v-f10d8ba5]:hover{opacity:1}[data-v-f10d8ba5] pre{display:flex;flex:1;line-height:var(--typography-lead-relaxed);margin:0;overflow-x:auto;padding:var(--prose-code-block-pre-padding)}[data-v-f10d8ba5] pre code{padding-inline-end:30px}[data-v-f10d8ba5] .line.highlight{background-color:var(--prose-code-block-border-color)}</style>
<style>button[data-v-2310c547]{border-radius:3px;margin:4px;opacity:0;padding:4px;transform:scale(.75);transition:all .2s}button[data-v-2310c547]:focus{box-shadow:0 0 0 2px var(--typography-color-primary-500);opacity:1;outline:none}button.show[data-v-2310c547]{opacity:1;transform:scale(1)}button .icon-wrapper[data-v-2310c547]{display:block;height:18px;position:relative;width:18px}button .icon-wrapper .icon[data-v-2310c547]{display:block;position:absolute}button .icon-wrapper .fade-enter-active[data-v-2310c547],button .icon-wrapper .fade-leave-active[data-v-2310c547]{transition:opacity .2s}button .icon-wrapper .fade-enter-from[data-v-2310c547],button .icon-wrapper .fade-leave-to[data-v-2310c547]{opacity:0}</style>
<style>.icon[data-v-363f1ff4]{display:inline-block;vertical-align:middle}</style>
<style>h3[data-v-2eef1bcb]{display:block;font-family:var(--typography-font-display);font-size:var(--prose-h3-fontSize);font-weight:var(--prose-h3-fontWeight);letter-spacing:var(--prose-h3-letterSpacing);line-height:var(--prose-h3-lineHeight);margin:var(--prose-h3-margin)}h3[data-v-2eef1bcb] .icon{display:inline-block;height:var(--prose-h3-iconSize);margin-inline-start:12px;opacity:0;transition:opacity .1s;width:var(--prose-h3-iconSize)}h3 a[data-v-2eef1bcb]:hover .icon{opacity:1}</style>
<style>ol[data-v-bbccd14d]{font-family:var(--typography-font-body);list-style-type:var(--prose-ol-listStyleType);margin:var(--prose-ol-margin);padding-inline-start:var(--prose-ol-paddingInlineStart)}ol[data-v-bbccd14d]> li::marker{color:var(--prose-ol-li-markerColor)}ol[data-v-bbccd14d]> li ol,ol[data-v-bbccd14d]> li ul{margin:0}</style>
<style>li[data-v-be470a26]{font-family:var(--typography-font-body);list-style-position:var(--prose-li-listStylePosition);margin:var(--prose-li-margin)}</style>
<style>blockquote[data-v-432b31ff]{border-inline-start-color:var(--prose-blockquote-border-color);border-inline-start-style:var(--prose-blockquote-border-style);border-inline-start-width:var(--prose-blockquote-border-width);color:var(--prose-blockquote-color);font-family:var(--typography-font-body);margin:var(--prose-blockquote-margin);padding-inline-start:var(--prose-blockquote-paddingInlineStart);quotes:var(--prose-blockquote-quotes)}blockquote p[data-v-432b31ff]:first-of-type:before,blockquote p[data-v-432b31ff]:last-of-type:after{content:""}</style>
<style>a[data-v-778a91c6]{border-bottom:var(--prose-a-border-width) var(--prose-a-border-style-static) var(--prose-a-border-color-static);color:var(--prose-a-color-static);font-family:var(--typography-font-body);font-weight:var(--prose-a-fontWeight);padding-bottom:var(--prose-a-border-distance);-webkit-text-decoration:var(--prose-a-textDecoration);text-decoration:var(--prose-a-textDecoration)}a[data-v-778a91c6]:hover{border-color:var(--prose-a-border-color-hover);border-style:var(--prose-a-border-style-hover);color:var(--prose-a-color-hover)}a[data-v-778a91c6]:has(img){border-width:0}a[data-v-778a91c6]:has(code){border-bottom:var(--prose-a-hasCode-borderBottom)}a[data-v-778a91c6]:has(code):hover{border-bottom:var(--prose-a-hasCode-borderBottom)}</style>
<link rel="stylesheet" href="/_nuxt/entry.D6ZUVFtc.css">
<link rel="stylesheet" href="/_nuxt/default.Dp9PF03F.css">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/@post/python/async/_payload.json?b2933344-301f-433e-a803-2d4981ea62cc">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CeI5KMoo.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dk8LaHDD.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Pg7Zg60d.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/LdMJXqtQ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D1AkGQFJ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/LlMNVMUQ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CnnFofFn.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/8GOMXxzW.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BCkZuiYT.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dnd51l0P.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/SN4oBPeP.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B7k8lUZV.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BqB4qWRx.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/y10122nk.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DmPXA95s.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CyyNoXIR.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DMJ69Tyt.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/S0WUMpk4.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CDJp3hYI.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/WpRL29YC.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CcEy0jv8.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D0mhuDU4.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/j0fSG5rV.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/dAoXfAMF.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CKLtWJIm.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C8RPGoHT.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B8MeRDtp.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/WLy4DIG7.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/DU1TqHPC.js">
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
<meta name="description" content="코드 중심으로 알아보는 비동기">
<script type="module" src="/_nuxt/CeI5KMoo.js" crossorigin></script><style id="pinceau-runtime-hydratable"></style><style id="pinceau-theme">@media { :root {--pinceau-mq: initial; --prose-code-inline-padding: 0.2rem 0.375rem 0.2rem 0.375rem;--prose-code-block-backdropFilter: contrast(1);--prose-code-block-borderStyle: solid;--prose-code-block-borderWidth: 1px;--prose-tbody-tr-borderBottom-style: dashed;--prose-tbody-tr-borderBottom-width: 1px;--prose-th-textAlign: inherit;--prose-thead-borderBottom-style: solid;--prose-thead-borderBottom-width: 1px;--prose-thead-border-style: solid;--prose-thead-border-width: 0px;--prose-table-textAlign: start;--prose-hr-width: 1px;--prose-hr-style: solid;--prose-li-listStylePosition: outside;--prose-ol-li-markerColor: currentColor;--prose-ol-paddingInlineStart: 21px;--prose-ol-listStyleType: decimal;--prose-ul-li-markerColor: currentColor;--prose-ul-paddingInlineStart: 21px;--prose-ul-listStyleType: disc;--prose-blockquote-border-style: solid;--prose-blockquote-border-width: 4px;--prose-blockquote-quotes: '201C' '201D' '2018' '2019';--prose-blockquote-paddingInlineStart: 24px;--prose-a-code-color-hover: currentColor;--prose-a-hasCode-borderBottom: none;--prose-a-border-distance: 2px;--prose-a-border-color-hover: currentColor;--prose-a-border-color-static: currentColor;--prose-a-border-style-hover: solid;--prose-a-border-style-static: dashed;--prose-a-border-width: 1px;--prose-a-color-static: inherit;--prose-a-textDecoration: none;--prose-h6-margin: 3rem 0 2rem;--prose-h5-margin: 3rem 0 2rem;--prose-h4-margin: 3rem 0 2rem;--prose-h3-margin: 3rem 0 2rem;--prose-h2-margin: 3rem 0 2rem;--prose-h1-margin: 0 0 2rem;--typography-radii-full: 9999px;--typography-radii-6xl: 32px;--typography-radii-5xl: 28px;--typography-radii-4xl: 24px;--typography-radii-3xl: 20px;--typography-radii-2xl: 18px;--typography-radii-xl: 16px;--typography-radii-lg: 14px;--typography-radii-md: 12px;--typography-radii-sm: 10px;--typography-radii-xs: 8px;--typography-radii-2xs: 6px;--typography-radii-3xs: 4px;--typography-radii-4xs: 2px;--typography-radii-none: 0px;--typography-color-secondary-900: #121110;--typography-color-secondary-800: #201E1B;--typography-color-secondary-700: #36332E;--typography-color-secondary-600: #67635D;--typography-color-secondary-500: #97948F;--typography-color-secondary-400: #ADA9A4;--typography-color-secondary-300: #DBD9D3;--typography-color-secondary-200: #ECEBE8;--typography-color-secondary-100: #F6F5F4;--typography-color-secondary-50: #FBFBFB;--typography-color-primary-900: #001238;--typography-color-primary-800: #002370;--typography-color-primary-700: #0035a9;--typography-color-primary-600: #0047e1;--typography-color-primary-500: #1a62ff;--typography-color-primary-400: #407cff;--typography-color-primary-300: #6696ff;--typography-color-primary-200: #8db0ff;--typography-color-primary-100: #b3cbff;--typography-color-primary-50: #d9e5ff;--typography-color-black: #0E0D0D;--typography-color-white: #ffffff;--typography-font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;--typography-font-serif: ui-serif, Georgia, Cambria, Times New Roman, Times, serif;--typography-font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;--typography-lead-loose: 2;--typography-lead-relaxed: 1.625;--typography-lead-normal: 1.5;--typography-lead-snug: 1.375;--typography-lead-tight: 1.25;--typography-lead-none: 1;--typography-lead-10: 2.5rem;--typography-lead-9: 2.25rem;--typography-lead-8: 2rem;--typography-lead-7: 1.75rem;--typography-lead-6: 1.5rem;--typography-lead-5: 1.25rem;--typography-lead-4: 1rem;--typography-lead-3: .75rem;--typography-lead-2: .5rem;--typography-lead-1: .025rem;--typography-fontWeight-black: 900;--typography-fontWeight-extrabold: 800;--typography-fontWeight-bold: 700;--typography-fontWeight-semibold: 600;--typography-fontWeight-medium: 500;--typography-fontWeight-normal: 400;--typography-fontWeight-light: 300;--typography-fontWeight-extralight: 200;--typography-fontWeight-thin: 100;--typography-fontSize-9xl: 128px;--typography-fontSize-8xl: 96px;--typography-fontSize-7xl: 72px;--typography-fontSize-6xl: 60px;--typography-fontSize-5xl: 48px;--typography-fontSize-4xl: 36px;--typography-fontSize-3xl: 30px;--typography-fontSize-2xl: 24px;--typography-fontSize-xl: 20px;--typography-fontSize-lg: 18px;--typography-fontSize-base: 16px;--typography-fontSize-sm: 14px;--typography-fontSize-xs: 12px;--typography-letterSpacing-widest: 0.08em;--typography-letterSpacing-wider: 0.04em;--typography-letterSpacing-wide: 0.02em;--typography-letterSpacing-normal: 0em;--typography-letterSpacing-tight: -0.02em;--typography-letterSpacing-tighter: -0.04em;--typography-verticalMargin-base: 24px;--typography-verticalMargin-sm: 16px;--ease-back-inOut: cubic-bezier(0.68, -0.6, 0.32, 1.6);--ease-back-out: cubic-bezier(0.34, 1.56, 0.64, 1);--ease-back-in: cubic-bezier(0.36, 0, 0.66, -0.56);--ease-circ-inOut: cubic-bezier(0.85, 0, 0.15, 1);--ease-circ-out: cubic-bezier(0, 0.55, 0.45, 1);--ease-circ-in: cubic-bezier(0.55, 0, 1, 0.45);--ease-expo-inOut: cubic-bezier(0.87, 0, 0.13, 1);--ease-expo-out: cubic-bezier(0.16, 1, 0.3, 1);--ease-expo-in: cubic-bezier(0.7, 0, 0.84, 0);--ease-quint-inOut: cubic-bezier(0.83, 0, 0.17, 1);--ease-quint-out: cubic-bezier(0.22, 1, 0.36, 1);--ease-quint-in: cubic-bezier(0.64, 0, 0.78, 0);--ease-quart-inOut: cubic-bezier(0.76, 0, 0.24, 1);--ease-quart-out: cubic-bezier(0.25, 1, 0.5, 1);--ease-quart-in: cubic-bezier(0.5, 0, 0.75, 0);--ease-cubic-inOut: cubic-bezier(0.65, 0, 0.35, 1);--ease-cubic-out: cubic-bezier(0.33, 1, 0.68, 1);--ease-cubic-in: cubic-bezier(0.32, 0, 0.67, 0);--ease-quad-inOut: cubic-bezier(0.45, 0, 0.55, 1);--ease-quad-out: cubic-bezier(0.5, 1, 0.89, 1);--ease-quad-in: cubic-bezier(0.11, 0, 0.5, 0);--ease-sine-inOut: cubic-bezier(0.37, 0, 0.63, 1);--ease-sine-out: cubic-bezier(0.61, 1, 0.88, 1);--ease-sine-in: cubic-bezier(0.12, 0, 0.39, 0);--ease-default-inOut: cubic-bezier(0.4, 0, 0.2, 1);--ease-default-out: cubic-bezier(0, 0, 0.2, 1);--ease-default-in: cubic-bezier(0.4, 0, 1, 1);--ease-linear: cubic-bezier(0, 0, 1, 1);--lead-loose: 2;--lead-relaxed: 1.625;--lead-normal: 1.5;--lead-snug: 1.375;--lead-tight: 1.25;--lead-none: 1;--lead-10: 2.5rem;--lead-9: 2.25rem;--lead-8: 2rem;--lead-7: 1.75rem;--lead-6: 1.5rem;--lead-5: 1.25rem;--lead-4: 1rem;--lead-3: .75rem;--lead-2: .5rem;--lead-1: .025rem;--letterSpacing-widest: 0.08em;--letterSpacing-wider: 0.04em;--letterSpacing-wide: 0.02em;--letterSpacing-normal: 0em;--letterSpacing-tight: -0.02em;--letterSpacing-tighter: -0.04em;--fontSize-9xl: 8rem;--fontSize-8xl: 6rem;--fontSize-7xl: 4.5rem;--fontSize-6xl: 3.75rem;--fontSize-5xl: 3rem;--fontSize-4xl: 2.25rem;--fontSize-3xl: 1.875rem;--fontSize-2xl: 1.5rem;--fontSize-xl: 1.25rem;--fontSize-lg: 1.125rem;--fontSize-base: 1rem;--fontSize-sm: 0.875rem;--fontSize-xs: 0.75rem;--fontWeight-black: 900;--fontWeight-extrabold: 800;--fontWeight-bold: 700;--fontWeight-semibold: 600;--fontWeight-medium: 500;--fontWeight-normal: 400;--fontWeight-light: 300;--fontWeight-extralight: 200;--fontWeight-thin: 100;--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;--font-serif: ui-serif, Georgia, Cambria, Times New Roman, Times, serif;--font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;--opacity-total: 1;--opacity-high: 0.8;--opacity-medium: 0.5;--opacity-soft: 0.3;--opacity-light: 0.15;--opacity-bright: 0.1;--opacity-noOpacity: 0;--borderWidth-lg: 3px;--borderWidth-md: 2px;--borderWidth-sm: 1px;--borderWidth-noBorder: 0;--space-rem-875: 0.875rem;--space-rem-625: 0.625rem;--space-rem-375: 0.375rem;--space-rem-125: 0.125rem;--space-px: 1px;--space-96: 24rem;--space-80: 20rem;--space-72: 18rem;--space-64: 16rem;--space-60: 15rem;--space-56: 14rem;--space-52: 13rem;--space-48: 12rem;--space-44: 11rem;--space-40: 10rem;--space-36: 9rem;--space-32: 8rem;--space-28: 7rem;--space-24: 6rem;--space-20: 5rem;--space-16: 4rem;--space-14: 3.5rem;--space-12: 3rem;--space-11: 2.75rem;--space-10: 2.5rem;--space-9: 2.25rem;--space-8: 2rem;--space-7: 1.75rem;--space-6: 1.5rem;--space-5: 1.25rem;--space-4: 1rem;--space-3: 0.75rem;--space-2: 0.5rem;--space-1: 0.25rem;--space-0: 0px;--size-full: 100%;--size-7xl: 80rem;--size-6xl: 72rem;--size-5xl: 64rem;--size-4xl: 56rem;--size-3xl: 48rem;--size-2xl: 42rem;--size-xl: 36rem;--size-lg: 32rem;--size-md: 28rem;--size-sm: 24rem;--size-xs: 20rem;--size-200: 200px;--size-104: 104px;--size-80: 80px;--size-64: 64px;--size-56: 56px;--size-48: 48px;--size-40: 40px;--size-32: 32px;--size-24: 24px;--size-20: 20px;--size-16: 16px;--size-12: 12px;--size-8: 8px;--size-6: 6px;--size-4: 4px;--size-2: 2px;--size-0: 0px;--radii-full: 9999px;--radii-6xl: 32px;--radii-5xl: 28px;--radii-4xl: 24px;--radii-3xl: 20px;--radii-2xl: 18px;--radii-xl: 16px;--radii-lg: 14px;--radii-md: 12px;--radii-sm: 10px;--radii-xs: 8px;--radii-2xs: 6px;--radii-3xs: 4px;--radii-4xs: 2px;--radii-none: 0px;--shadow-none: 0px 0px 0px 0px transparent;--shadow-lg: 0px 10px 15px -3px #000000, 0px 4px 6px -4px #000000;--shadow-md: 0px 4px 6px -1px #000000, 0px 2px 4px -2px #000000;--shadow-sm: 0px 1px 3px 0px #000000, 0px 1px 2px -1px #000000;--shadow-xs: 0px 1px 2px 0px #000000;--height-screen: 100vh;--width-screen: 100vw;--color-ruby-900: #380011;--color-ruby-800: #700021;--color-ruby-700: #a90032;--color-ruby-600: #e10043;--color-ruby-500: #ff1a5e;--color-ruby-400: #ff4079;--color-ruby-300: #ff6694;--color-ruby-200: #ff8dae;--color-ruby-100: #ffb3c9;--color-ruby-50: #ffd9e4;--color-pink-900: #380025;--color-pink-800: #70004b;--color-pink-700: #a90070;--color-pink-600: #e10095;--color-pink-500: #ff1ab2;--color-pink-400: #ff40bf;--color-pink-300: #ff66cc;--color-pink-200: #ff8dd8;--color-pink-100: #ffb3e5;--color-pink-50: #ffd9f2;--color-purple-900: #080020;--color-purple-800: #14014A;--color-purple-700: #200273;--color-purple-600: #370DAD;--color-purple-500: #6B39FA;--color-purple-400: #8961FD;--color-purple-300: #A589F9;--color-purple-200: #E5DCFF;--color-purple-100: #F1ECFF;--color-purple-50: #F8F5FF;--color-violet-900: #190038;--color-violet-800: #330070;--color-violet-700: #4c00a9;--color-violet-600: #6500e1;--color-violet-500: #811aff;--color-violet-400: #9640ff;--color-violet-300: #ab66ff;--color-violet-200: #c08dff;--color-violet-100: #d5b3ff;--color-violet-50: #ead9ff;--color-royalblue-900: #0b0531;--color-royalblue-800: #160a62;--color-royalblue-700: #211093;--color-royalblue-600: #2c15c4;--color-royalblue-500: #4127e8;--color-royalblue-400: #614bec;--color-royalblue-300: #806ff0;--color-royalblue-200: #a093f3;--color-royalblue-100: #c0b7f7;--color-royalblue-50: #dfdbfb;--color-indigoblue-900: #001238;--color-indigoblue-800: #002370;--color-indigoblue-700: #0035a9;--color-indigoblue-600: #0047e1;--color-indigoblue-500: #1a62ff;--color-indigoblue-400: #407cff;--color-indigoblue-300: #6696ff;--color-indigoblue-200: #8db0ff;--color-indigoblue-100: #b3cbff;--color-indigoblue-50: #d9e5ff;--color-blue-900: #00131D;--color-blue-800: #002235;--color-blue-700: #013858;--color-blue-600: #01659E;--color-blue-500: #1AADFF;--color-blue-400: #64C7FF;--color-blue-300: #A1DDFF;--color-blue-200: #D0EEFF;--color-blue-100: #E2F4FF;--color-blue-50: #F2FAFF;--color-lightblue-900: #001A1F;--color-lightblue-800: #00232B;--color-lightblue-700: #013858;--color-lightblue-600: #0893B1;--color-lightblue-500: #1AD6FF;--color-lightblue-400: #55E1FF;--color-lightblue-300: #82E3FF;--color-lightblue-200: #C5F2FF;--color-lightblue-100: #DCF7FF;--color-lightblue-50: #F1FCFF;--color-teal-900: #062a28;--color-teal-800: #0b544f;--color-teal-700: #117d77;--color-teal-600: #16a79e;--color-teal-500: #1cd1c6;--color-teal-400: #36e4da;--color-teal-300: #5fe9e1;--color-teal-200: #87efe9;--color-teal-100: #aff4f0;--color-teal-50: #d7faf8;--color-pear-900: #2a2b09;--color-pear-800: #545512;--color-pear-700: #7e801b;--color-pear-600: #a8aa24;--color-pear-500: #d0d32f;--color-pear-400: #d8da52;--color-pear-300: #e0e274;--color-pear-200: #e8e997;--color-pear-100: #eff0ba;--color-pear-50: #f7f8dc;--color-red-900: #1C0301;--color-red-800: #340A01;--color-red-700: #550F00;--color-red-600: #AD2203;--color-red-500: #FF3B10;--color-red-400: #FF7353;--color-red-300: #FFA692;--color-red-200: #FFE6E1;--color-red-100: #FFF0EC;--color-red-50: #FFF9F8;--color-pumpkin-900: #381800;--color-pumpkin-800: #702f00;--color-pumpkin-700: #a94700;--color-pumpkin-600: #e15e00;--color-pumpkin-500: #ff7a1a;--color-pumpkin-400: #ff9040;--color-pumpkin-300: #ffa666;--color-pumpkin-200: #ffbd8d;--color-pumpkin-100: #ffd3b3;--color-pumpkin-50: #ffe9d9;--color-orange-900: #1A0A01;--color-orange-800: #2D1102;--color-orange-700: #3F1802;--color-orange-600: #7E3004;--color-orange-500: #FA630E;--color-orange-400: #FC8E51;--color-orange-300: #FDAC7E;--color-orange-200: #FFE5D7;--color-orange-100: #FFEFE5;--color-orange-50: #FFF7F2;--color-yellow-900: #1B1500;--color-yellow-800: #292100;--color-yellow-700: #463801;--color-yellow-600: #AB8A07;--color-yellow-500: #FBCA05;--color-yellow-400: #FFDC4E;--color-yellow-300: #FFE372;--color-yellow-200: #FFF3C0;--color-yellow-100: #FFF7D9;--color-yellow-50: #FFFCEE;--color-green-900: #00190F;--color-green-800: #002817;--color-green-700: #01492C;--color-green-600: #039B5A;--color-green-500: #0DD885;--color-green-400: #3CEEA5;--color-green-300: #86FBCB;--color-green-200: #C0FFE4;--color-green-100: #DBFFF0;--color-green-50: #ECFFF7;--color-gray-900: #121110;--color-gray-800: #1C1B19;--color-gray-700: #292724;--color-gray-600: #3D3B38;--color-gray-500: #97948F;--color-gray-400: #ADA9A4;--color-gray-300: #DBD9D3;--color-gray-200: #ECEBE8;--color-gray-100: #F3F3F2;--color-gray-50: #FBFBFB;--color-black: #0E0D0D;--color-white: #ffffff;--media-portrait: only screen and (orientation: portrait);--media-landscape: only screen and (orientation: landscape);--media-rm: (prefers-reduced-motion: reduce);--media-2xl: (min-width: 1536px);--media-xl: (min-width: 1280px);--media-lg: (min-width: 1024px);--media-md: (min-width: 768px);--media-sm: (min-width: 640px);--media-xs: (min-width: 475px);--prose-code-inline-backgroundColor: var(--typography-color-secondary-100);--prose-code-inline-color: var(--typography-color-secondary-700);--prose-code-inline-fontWeight: var(--typography-fontWeight-normal);--prose-code-inline-fontSize: var(--typography-fontSize-sm);--prose-code-inline-borderRadius: var(--typography-radii-3xs);--prose-code-block-pre-padding: var(--typography-verticalMargin-sm);--prose-code-block-backgroundColor: var(--typography-color-secondary-50);--prose-code-block-color: var(--typography-color-secondary-700);--prose-code-block-borderRadius: var(--typography-radii-3xs);--prose-code-block-borderColor: var(--typography-color-secondary-200);--prose-code-block-margin: var(--typography-verticalMargin-base) 0;--prose-code-block-fontSize: var(--typography-fontSize-sm);--prose-tbody-code-inline-fontSize: var(--typography-fontSize-sm);--prose-tbody-td-padding: var(--typography-verticalMargin-sm);--prose-tbody-tr-borderBottom-color: var(--typography-color-secondary-200);--prose-th-fontWeight: var(--typography-fontWeight-semibold);--prose-th-padding: 0 var(--typography-verticalMargin-sm) var(--typography-verticalMargin-sm) var(--typography-verticalMargin-sm);--prose-th-color: var(--typography-color-secondary-600);--prose-thead-borderBottom-color: var(--typography-color-secondary-200);--prose-thead-border-color: var(--typography-color-secondary-300);--prose-table-lineHeight: var(--typography-lead-6);--prose-table-fontSize: var(--typography-fontSize-sm);--prose-table-margin: var(--typography-verticalMargin-base) 0;--prose-hr-color: var(--typography-color-secondary-200);--prose-hr-margin: var(--typography-verticalMargin-base) 0;--prose-li-margin: var(--typography-verticalMargin-sm) 0;--prose-ol-margin: var(--typography-verticalMargin-base) 0;--prose-ul-margin: var(--typography-verticalMargin-base) 0;--prose-blockquote-border-color: var(--typography-color-secondary-200);--prose-blockquote-color: var(--typography-color-secondary-500);--prose-blockquote-margin: var(--typography-verticalMargin-base) 0;--prose-a-code-background-hover: var(--typography-color-primary-50);--prose-a-code-border-color-hover: var(--typography-color-primary-500);--prose-a-code-border-color-static: var(--typography-color-secondary-400);--prose-a-code-border-style: var(--prose-a-border-style-static);--prose-a-code-border-width: var(--prose-a-border-width);--prose-a-fontWeight: var(--typography-fontWeight-medium);--prose-a-color-hover: var(--typography-color-primary-500);--prose-img-borderRadius: var(--typography-radii-full);--prose-img-margin: var(--typography-verticalMargin-base) 0;--prose-strong-fontWeight: var(--typography-fontWeight-semibold);--prose-h6-iconSize: var(--typography-fontSize-base);--prose-h6-fontWeight: var(--typography-fontWeight-semibold);--prose-h6-lineHeight: var(--typography-lead-normal);--prose-h6-fontSize: var(--typography-fontSize-lg);--prose-h5-iconSize: var(--typography-fontSize-lg);--prose-h5-fontWeight: var(--typography-fontWeight-semibold);--prose-h5-lineHeight: var(--typography-lead-snug);--prose-h5-fontSize: var(--typography-fontSize-xl);--prose-h4-iconSize: var(--typography-fontSize-lg);--prose-h4-letterSpacing: var(--typography-letterSpacing-tight);--prose-h4-fontWeight: var(--typography-fontWeight-semibold);--prose-h4-lineHeight: var(--typography-lead-snug);--prose-h4-fontSize: var(--typography-fontSize-2xl);--prose-h3-iconSize: var(--typography-fontSize-xl);--prose-h3-letterSpacing: var(--typography-letterSpacing-tight);--prose-h3-fontWeight: var(--typography-fontWeight-semibold);--prose-h3-lineHeight: var(--typography-lead-snug);--prose-h3-fontSize: var(--typography-fontSize-3xl);--prose-h2-iconSize: var(--typography-fontSize-2xl);--prose-h2-letterSpacing: var(--typography-letterSpacing-tight);--prose-h2-fontWeight: var(--typography-fontWeight-semibold);--prose-h2-lineHeight: var(--typography-lead-tight);--prose-h2-fontSize: var(--typography-fontSize-4xl);--prose-h1-iconSize: var(--typography-fontSize-3xl);--prose-h1-letterSpacing: var(--typography-letterSpacing-tight);--prose-h1-fontWeight: var(--typography-fontWeight-bold);--prose-h1-lineHeight: var(--typography-lead-tight);--prose-h1-fontSize: var(--typography-fontSize-5xl);--prose-p-br-margin: var(--typography-verticalMargin-base) 0 0 0;--prose-p-margin: var(--typography-verticalMargin-base) 0;--prose-p-lineHeight: var(--typography-lead-normal);--prose-p-fontSize: var(--typography-fontSize-base);--typography-font-code: var(--typography-font-mono);--typography-font-body: var(--typography-font-sans);--typography-font-display: var(--typography-font-sans);--typography-body-backgroundColor: var(--typography-color-white);--typography-body-color: var(--typography-color-black);--text-6xl-lineHeight: var(--lead-none);--text-6xl-fontSize: var(--fontSize-6xl);--text-5xl-lineHeight: var(--lead-none);--text-5xl-fontSize: var(--fontSize-5xl);--text-4xl-lineHeight: var(--lead-10);--text-4xl-fontSize: var(--fontSize-4xl);--text-3xl-lineHeight: var(--lead-9);--text-3xl-fontSize: var(--fontSize-3xl);--text-2xl-lineHeight: var(--lead-8);--text-2xl-fontSize: var(--fontSize-2xl);--text-xl-lineHeight: var(--lead-7);--text-xl-fontSize: var(--fontSize-xl);--text-lg-lineHeight: var(--lead-7);--text-lg-fontSize: var(--fontSize-lg);--text-base-lineHeight: var(--lead-6);--text-base-fontSize: var(--fontSize-base);--text-sm-lineHeight: var(--lead-5);--text-sm-fontSize: var(--fontSize-sm);--text-xs-lineHeight: var(--lead-4);--text-xs-fontSize: var(--fontSize-xs);--shadow-2xl: 0px 25px 50px -12px var(--color-gray-900);--shadow-xl: 0px 20px 25px -5px var(--color-gray-400), 0px 8px 10px -6px #000000;--prose-a-code-color-static: var(--prose-code-inline-color); } }@media { :root.dark {--pinceau-mq: dark; --prose-code-block-backdropFilter: contrast(1);--prose-ol-li-markerColor: currentColor;--prose-ul-li-markerColor: currentColor;--prose-a-code-color-hover: currentColor;--prose-a-border-color-hover: currentColor;--prose-a-border-color-static: currentColor;--prose-a-color-static: inherit;--prose-code-inline-backgroundColor: var(--typography-color-secondary-700);--prose-code-inline-color: var(--typography-color-secondary-200);--prose-code-block-backgroundColor: var(--typography-color-secondary-900);--prose-code-block-color: var(--typography-color-secondary-200);--prose-code-block-borderColor: var(--typography-color-secondary-800);--prose-tbody-tr-borderBottom-color: var(--typography-color-secondary-800);--prose-th-color: var(--typography-color-secondary-400);--prose-thead-borderBottom-color: var(--typography-color-secondary-800);--prose-thead-border-color: var(--typography-color-secondary-600);--prose-hr-color: var(--typography-color-secondary-800);--prose-blockquote-border-color: var(--typography-color-secondary-700);--prose-blockquote-color: var(--typography-color-secondary-400);--prose-a-code-background-hover: var(--typography-color-primary-900);--prose-a-code-border-color-hover: var(--typography-color-primary-600);--prose-a-code-border-color-static: var(--typography-color-secondary-600);--prose-a-color-hover: var(--typography-color-primary-500);--typography-body-backgroundColor: var(--typography-color-black);--typography-body-color: var(--typography-color-white); } }</style><script>"use strict";(()=>{const a=window,e=document.documentElement,c=window.localStorage,d=["dark","light"],n=c&&c.getItem&&c.getItem("nuxt-color-mode")||"system";let l=n==="system"?f():n;const i=e.getAttribute("data-color-mode-forced");i&&(l=i),r(l),a["__NUXT_COLOR_MODE__"]={preference:n,value:l,getColorScheme:f,addColorScheme:r,removeColorScheme:u};function r(o){const t=""+o+"",s="";e.classList?e.classList.add(t):e.className+=" "+t,s&&e.setAttribute("data-"+s,o)}function u(o){const t=""+o+"",s="";e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(t,"g"),""),s&&e.removeAttribute("data-"+s)}function m(o){return a.matchMedia("(prefers-color-scheme"+o+")")}function f(){if(a.matchMedia&&m("").media!=="not all"){for(const o of d)if(m(":"+o).matches)return o}return"light"}})();</script></head><body><div id="__nuxt"><div><header class="site-header" data-v-0eba3425><div class="flex flex-wrap justify-between max-w-6xl m-auto" data-v-0eba3425><div class="flex items-center justify-start gap-x-5" data-v-0eba3425><a href="/" class="no-underline" data-v-0eba3425><figure class="text-2xl site-logo" data-v-0eba3425><h1 data-v-0eba3425>phi.log</h1></figure></a><nav class="site-nav" data-v-0eba3425><div class="grid justify-between grid-cols-2" data-v-0eba3425><div class="col-span-1 col-start-1" data-v-0eba3425><div class="grid justify-between grid-cols-1" data-v-0eba3425><ul class="col-span-1 col-start-1 row-auto mr-2" data-v-0eba3425><a href="/@tag/" class="no-underline" data-v-0eba3425><figure class="pt-1 text-lg site-logo" data-v-0eba3425><h1 data-v-0eba3425>Tags</h1></figure></a></ul></div></div><div class="col-span-1 col-start-2" data-v-0eba3425><div class="w-8 h-8 mx-2 my-0" data-v-0eba3425><span></span></div></div></div></nav></div><div class="flex items-center text-black" data-v-0eba3425><div class="gcse-searchbox-only" data-v-0eba3425></div></div></div></header><!--[--><main id="main" data-v-ca2484fd><div class="article-main" data-v-ca2484fd><header class="article-header" data-v-ca2484fd data-v-1c360919><h1 class="mb-1 heading" data-v-1c360919>python의 비동기에 대한 얕은 이해</h1><p class="mb-1 supporting" data-v-1c360919>코드 중심으로 알아보는 비동기</p><ul class="flex-wrap pb-0 article-tags" data-v-1c360919><p class="pt-1 font-mono text-sm font-thin text-slate-400" data-v-1c360919>tags:</p><!--[--><div data-v-1c360919><li class="tag" data-v-1c360919><a href="/@tag/?select=python" class="">python</a></li></div><div data-v-1c360919><li class="tag" data-v-1c360919><a href="/@tag/?select=async" class="">async</a></li></div><!--]--></ul><p class="font-mono text-sm font-thin text-slate-400" data-v-1c360919> created at: 2023-07-31</p></header><hr data-v-ca2484fd><section class="article-section" data-v-ca2484fd data-v-44d54f11><aside class="aside" data-v-44d54f11><nav class="toc" data-v-44d54f11 data-v-9aa87b76><header class="toc-header" data-v-9aa87b76><h3 class="text-xl font-bold" data-v-9aa87b76>Table of contents</h3></header><ul class="toc-links" data-v-9aa87b76><!--[--><li id="toc-파이썬의-비동기-라이브러리-asyncio" class="_2 toc-link" data-v-9aa87b76><a href="#파이썬의-비동기-라이브러리-asyncio" data-v-9aa87b76>파이썬의 비동기 라이브러리 asyncio</a></li><li id="toc-왜-asynciorun을-실행해야-하는가" class="_3 toc-link" data-v-9aa87b76><a href="#왜-asynciorun을-실행해야-하는가" data-v-9aa87b76>왜 asyncio.run을 실행해야 하는가</a></li><li id="toc-대기할-수-있는-awaitable객체" class="_2 toc-link" data-v-9aa87b76><a href="#대기할-수-있는-awaitable객체" data-v-9aa87b76>대기할 수 있는 Awaitable객체</a></li><li id="toc-콜백-형태의-future" class="_3 toc-link" data-v-9aa87b76><a href="#콜백-형태의-future" data-v-9aa87b76>콜백 형태의 Future</a></li><li id="toc-future를-상속받는-task" class="_3 toc-link" data-v-9aa87b76><a href="#future를-상속받는-task" data-v-9aa87b76>Future를 상속받는 Task</a></li><li id="toc-future와-task는-언제-사용할까" class="_2 toc-link" data-v-9aa87b76><a href="#future와-task는-언제-사용할까" data-v-9aa87b76>Future와 Task는 언제 사용할까</a></li><li id="toc-task가-필요한-상황" class="_3 toc-link" data-v-9aa87b76><a href="#task가-필요한-상황" data-v-9aa87b76>Task가 필요한 상황</a></li><li id="toc-future가-필요한-상황" class="_3 toc-link" data-v-9aa87b76><a href="#future가-필요한-상황" data-v-9aa87b76>Future가 필요한 상황</a></li><li id="toc-요약하자면" class="_2 toc-link" data-v-9aa87b76><a href="#요약하자면" data-v-9aa87b76>요약하자면</a></li><li id="toc-추가하자면" class="_3 toc-link" data-v-9aa87b76><a href="#추가하자면" data-v-9aa87b76>추가하자면</a></li><!--]--></ul></nav></aside><article class="article page" data-v-44d54f11><!--[--><div data-v-44d54f11><h2 id="파이썬의-비동기-라이브러리-asyncio" class="prose-h2" data-v-8ebd03fb><a aria-current="page" href="/@post/python/async/#파이썬의-비동기-라이브러리-asyncio" class="router-link-active router-link-exact-active" data-v-8ebd03fb><!--[-->파이썬의 비동기 라이브러리 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code><!--]--><!----></a></h2><p class="prose-p" data-v-f32a1575><!--[-->파이썬에서 비동기를 객체를 생성하는 가장 간단한 방법은 <code class="prose-code-inline" data-v-b986f687><!--[-->async<!--]--></code>와 <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code>키워드를 사용하는 것이다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->이를 위해 기본 라이브러리로 제공되는 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code>를 사용하자.<!--]--></p><div class="highlight-python prose-code" meta data-v-f10d8ba5><span class="filename" data-v-f10d8ba5>main.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span emptylineplaceholder="true">
</span></span><span class="line" line="8"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="9"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> test()
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span emptylineplaceholder="true">
</span></span><span class="line" line="12"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-f32a1575><!--[-->동기 함수와는 다르게 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio.run<!--]--></code>함수로 <code class="prose-code-inline" data-v-b986f687><!--[-->main()<!--]--></code> 코루틴을 실행하는 형태로 구성된다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->정말로 비동기로 작동하는지 확인하기 위해, 다음과 같이 새로 작성한 코드를 실행해보자.<!--]--></p><div class="highlight-python prose-code" meta data-v-f10d8ba5><span class="filename" data-v-f10d8ba5>main2.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> sys
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging.getLogger()
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.setLevel(logging.</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">INFO</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="8"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.addHandler(logging.StreamHandler(sys.stdout))
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(x: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;start: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, x)
</span></span><span class="line" line="13"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(random.random())
</span></span><span class="line" line="14"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;end: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%d</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, x)
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="18"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.gather(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(test(x) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> x </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)))
</span></span><span class="line" line="19"><span emptylineplaceholder="true">
</span></span><span class="line" line="20"><span emptylineplaceholder="true">
</span></span><span class="line" line="21"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="22"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-f32a1575><!--[-->여기서 사용된 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio.gather<!--]--></code>는 여러개의 코루틴을 동시에 대기할 수 있도록 한다.<!--]--></p><div class="markdown-alert markdown-alert-note"><p class="prose-p markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg><span class="font-bold text-base">NOTE</span></p><!--[--><!--[--><p class="prose-p" data-v-f32a1575><!--[-->3.11부터는 TaskGroup을 사용할 것을 권장한다.<!--]--></p><!--]--><!--]--></div><p class="prose-p" data-v-f32a1575><!--[-->위 스크립트를 실행하면, 다음과 같이 비동기로 실행되는 것을 확인할 수 있다.<!--]--></p><div class="highlight-bash prose-code" meta data-v-f10d8ba5><!----><!--[--><pre class="language-bash shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">❯</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> poetry</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> python</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> main2.py
</span></span><span class="line" line="2"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 0
</span></span><span class="line" line="3"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 1
</span></span><span class="line" line="4"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 2
</span></span><span class="line" line="5"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 3
</span></span><span class="line" line="6"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 4
</span></span><span class="line" line="7"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 5
</span></span><span class="line" line="8"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 6
</span></span><span class="line" line="9"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 7
</span></span><span class="line" line="10"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 8
</span></span><span class="line" line="11"><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0">start:</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 9
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 9
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 8
</span></span><span class="line" line="14"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 6
</span></span><span class="line" line="15"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 3
</span></span><span class="line" line="16"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 4
</span></span><span class="line" line="17"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 0
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 1
</span></span><span class="line" line="19"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 2
</span></span><span class="line" line="20"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 5
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">end: 7
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><h3 id="왜-asynciorun을-실행해야-하는가" class="prose-h3" data-v-2eef1bcb><a aria-current="page" href="/@post/python/async/#왜-asynciorun을-실행해야-하는가" class="router-link-active router-link-exact-active" data-v-2eef1bcb><!--[-->왜 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio.run<!--]--></code>을 실행해야 하는가<!--]--><!----></a></h3><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->asnyc<!--]--></code>, <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code> 키워드를 사용한 함수가 실행되면, <code class="prose-code-inline" data-v-b986f687><!--[-->Coroutine<!--]--></code>(이하 코루틴)객체가 생성된다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->코루틴은 생성과 동시에 실행되는 객체가 아니며,
이벤트 루프에 예약된 상태도 아니다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->이러한 코루틴을 실행하기 위해 이벤트루프를 생성하고,
이벤트루프에 작업을 예약하고,
이벤트루트의 작업을 순차적으로 실행하는 일련의 과정을
<code class="prose-code-inline" data-v-b986f687><!--[-->asyncio.run<!--]--></code>이 담당한다고 볼 수있다.<!--]--></p><h2 id="대기할-수-있는-awaitable객체" class="prose-h2" data-v-8ebd03fb><a aria-current="page" href="/@post/python/async/#대기할-수-있는-awaitable객체" class="router-link-active router-link-exact-active" data-v-8ebd03fb><!--[-->대기할 수 있는 <code class="prose-code-inline" data-v-b986f687><!--[-->Awaitable<!--]--></code>객체<!--]--><!----></a></h2><p class="prose-p" data-v-f32a1575><!--[-->코루틴이 <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code>키워드를 사용하여 대기할 수 있는 이유는,
코루틴에 <code class="prose-code-inline" data-v-b986f687><!--[-->__await__<!--]--></code>이라는 메소드가 정의되어 있기 때문이다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->이러한 객체를 <code class="prose-code-inline" data-v-b986f687><!--[-->Awaitable<!--]--></code> 객체라고 하며, <code class="prose-code-inline" data-v-b986f687><!--[-->typing<!--]--></code> 모듈에서도 확인할 수 있다.
정말 <code class="prose-code-inline" data-v-b986f687><!--[-->__await__<!--]--></code>만 있으면 가능한지 확인해보자.<!--]--></p><div class="highlight-python prose-code" meta data-v-f10d8ba5><span class="filename" data-v-f10d8ba5>main3.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Any, Generator
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> Await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    def</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __await__</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(self) -&gt; Generator[Any, </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">]:
</span></span><span class="line" line="7"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> num </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">5</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">):
</span></span><span class="line" line="8"><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">            print</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(num)
</span></span><span class="line" line="9"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">            yield</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None
</span></span><span class="line" line="10"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 1
</span></span><span class="line" line="11"><span emptylineplaceholder="true">
</span></span><span class="line" line="12"><span emptylineplaceholder="true">
</span></span><span class="line" line="13"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Await()
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="19"><span emptylineplaceholder="true">
</span></span><span class="line" line="20"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main3.py
</span></span><span class="line" line="21"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 0
</span></span><span class="line" line="22"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 1
</span></span><span class="line" line="23"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 2
</span></span><span class="line" line="24"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 3
</span></span><span class="line" line="25"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># 4
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><div class="markdown-alert markdown-alert-note"><p class="prose-p markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg><span class="font-bold text-base">NOTE</span></p><!--[--><!--[--><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Await<!--]--></code>객체를 곧바로 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio.run<!--]--></code>에서 사용하지 않고,
<code class="prose-code-inline" data-v-b986f687><!--[-->main<!--]--></code>함수에서 생성하여 사용하는 이유는,
<code class="prose-code-inline" data-v-b986f687><!--[-->asyncio.run<!--]--></code>에서 코루틴이 아니면 에러를 발생시키기 때문이다.<!--]--></p><!--]--><!--]--></div><p class="prose-p" data-v-f32a1575><!--[-->즉, <code class="prose-code-inline" data-v-b986f687><!--[-->async<!--]--></code>, <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code>은 사실 제너레이터를 활용한
컨텍스트 스위칭에 대한 문법 설탕이라는 것을 알 수 있다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->이러한 문법 설탕이 추가되기 전까지는,
제너레이터 문법인 <code class="prose-code-inline" data-v-b986f687><!--[-->yield from<!--]--></code>을 사용했다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->물론 이러한 사실은 알면 좋지만 별로 중요하지 않다.
대부분의 경우 <code class="prose-code-inline" data-v-b986f687><!--[-->__await__<!--]--></code>를 직접 정의하기는 커녕
<code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>와 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>도 구경하기 어려우며,
<code class="prose-code-inline" data-v-b986f687><!--[-->async<!--]--></code>와 <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code>을 사용한 코루틴만 사용할 것이다.<!--]--></p><h3 id="콜백-형태의-future" class="prose-h3" data-v-2eef1bcb><a aria-current="page" href="/@post/python/async/#콜백-형태의-future" class="router-link-active router-link-exact-active" data-v-2eef1bcb><!--[-->콜백 형태의 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code><!--]--><!----></a></h3><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code>의 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>는 <code class="prose-code-inline" data-v-b986f687><!--[-->concurrent.futures<!--]--></code>의 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>를 본따 만들어졌다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->concurrent.futures<!--]--></code>의 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>는 쓰레드를 제어하기 위해 만들어졌고,
멀티쓰레드 환경의 비동기 제어가 싱글쓰레드 환경으로 확장된 것으로 볼 수도 있다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->앞서 말했듯이, 대부분의 경우 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>에 대해 알 필요가 없고,
구버전 파이썬을 사용한다면 모를까, 이제는 사용할 일도 없는 객체다.<!--]--></p><h3 id="future를-상속받는-task" class="prose-h3" data-v-2eef1bcb><a aria-current="page" href="/@post/python/async/#future를-상속받는-task" class="router-link-active router-link-exact-active" data-v-2eef1bcb><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>를 상속받는 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code><!--]--><!----></a></h3><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>를 상속받아 구현한 <code class="prose-code-inline" data-v-b986f687><!--[-->Awaitable<!--]--></code>한 객체다.
<code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 <code class="prose-code-inline" data-v-b986f687><!--[-->js<!--]--></code>의 <code class="prose-code-inline" data-v-b986f687><!--[-->Promise<!--]--></code>처럼, 생성됐다면 이미 이벤트루프에 예약된 상태다.<!--]--></p><div class="markdown-alert markdown-alert-note"><p class="prose-p markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg><span class="font-bold text-base">NOTE</span></p><!--[--><!--[--><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>는 생성했지만, 이벤트루프에 예약되어 있지 않을 수 있다.<!--]--></p><!--]--><!--]--></div><p class="prose-p" data-v-f32a1575><!--[-->따라서 다음과 같은 코드는, 정상적으로 실행된다.<!--]--></p><div class="highlight-python prose-code" meta data-v-f10d8ba5><span class="filename" data-v-f10d8ba5>main4.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> sys
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging.getLogger()
</span></span><span class="line" line="6"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.setLevel(logging.</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">INFO</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.addHandler(logging.StreamHandler(sys.stdout))
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;start&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="12"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;done!&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="14"><span emptylineplaceholder="true">
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="17"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> test()
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    _ </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.create_task(coro)
</span></span><span class="line" line="19"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;before sleep&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="20"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;after sleep&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="22"><span emptylineplaceholder="true">
</span></span><span class="line" line="23"><span emptylineplaceholder="true">
</span></span><span class="line" line="24"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="25"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="26"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  ❯ poetry run python main4.py
</span></span><span class="line" line="27"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  before sleep
</span></span><span class="line" line="28"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  start
</span></span><span class="line" line="29"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  done!
</span></span><span class="line" line="30"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D">#  after sleep
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code> 또는 <code class="prose-code-inline" data-v-b986f687><!--[-->yield from<!--]--></code> 또는 <code class="prose-code-inline" data-v-b986f687><!--[-->__await__<!--]--></code>메소드를 직업 호출하지 않았지만,
<code class="prose-code-inline" data-v-b986f687><!--[-->test<!--]--></code>로 정의된 비동기 함수는 정상적으로 실행됐다.
왜냐하면 신규 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>객체를 생성했고,
이후 <code class="prose-code-inline" data-v-b986f687><!--[-->await asyncio.sleep(2)<!--]--></code>를 통해 콘텍스트 스위칭을 유발했기 때문이다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->정리하자면 다음과 같다.<!--]--></p><ol class="prose-ol" data-v-bbccd14d><!--[--><li class="prose-li" data-v-be470a26><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->test<!--]--></code>함수를 실행하여 코루틴을 생성한다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[-->생성한 코루틴을 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio.create_task<!--]--></code>함수를 사용하여, 이벤트루프에 예약한다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->create_task<!--]--></code>함수가 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>객체를 반환한다.(의도적으로 <code class="prose-code-inline" data-v-b986f687><!--[-->_<!--]--></code>를 사용하여 무시하였다.)<!--]--></li><li class="prose-li" data-v-be470a26><!--[-->아직 <code class="prose-code-inline" data-v-b986f687><!--[-->main<!--]--></code>함수가 콘텍스트를 점유중이므로, 앞서 생성한 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 실행되지 않았다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->await asyncio.sleep(2)<!--]--></code>를 통해, 콘텍스트 점유를 해제한다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[-->앞서 생성한 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>로 콘텍스트가 변경된다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[-->이하 생략<!--]--></li><!--]--></ol><p class="prose-p" data-v-f32a1575><!--[-->즉, <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code>이 콘텍스트 스위칭에 대한 문법 설탕이자,
동시에 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>를 생성하는 문법 설탕인 것을 알 수 있다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->여기서 한가지 궁금한 점이 생긴다.<!--]--></p><ol class="prose-ol" data-v-bbccd14d><!--[--><li class="prose-li" data-v-be470a26><!--[-->한번 생성한 코루틴은, 한번만 <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code>으로 대기할 수 있다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[-->한번 생성한 코루틴은, <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>를 생성할 수 있다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 <code class="prose-code-inline" data-v-b986f687><!--[-->Awaitable<!--]--></code>이므로 <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code>으로 대기할 수 있다.<!--]--></li><!--]--></ol><p class="prose-p" data-v-f32a1575><!--[-->이전의 <code class="prose-code-inline" data-v-b986f687><!--[-->main4.py<!--]--></code> 스크립트에서 코루틴 <code class="prose-code-inline" data-v-b986f687><!--[-->coro<!--]--></code>는 <code class="prose-code-inline" data-v-b986f687><!--[-->create_task<!--]--></code>함수를 통해
이미 실행된 상태다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->이후 생성한 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>를 대기하는 것이 가능할까?<!--]--></p><div class="highlight-python prose-code" meta data-v-f10d8ba5><span class="filename" data-v-f10d8ba5>main5.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> sys
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging.getLogger()
</span></span><span class="line" line="6"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.setLevel(logging.</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">INFO</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.addHandler(logging.StreamHandler(sys.stdout))
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;start&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="12"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;done!&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 1
</span></span><span class="line" line="15"><span emptylineplaceholder="true">
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> test()
</span></span><span class="line" line="19"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    task </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.create_task(coro)
</span></span><span class="line" line="20"><span emptylineplaceholder="true">
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;before sleep&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="22"><span emptylineplaceholder="true">
</span></span><span class="line" line="23"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    queue </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.Queue(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="24"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    task.add_done_callback(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">lambda</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task: queue.put_nowait(task.result()))
</span></span><span class="line" line="25"><span emptylineplaceholder="true">
</span></span><span class="line" line="26"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    value </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task
</span></span><span class="line" line="27"><span emptylineplaceholder="true">
</span></span><span class="line" line="28"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;after sleep&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="29"><span emptylineplaceholder="true">
</span></span><span class="line" line="30"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task.result()
</span></span><span class="line" line="31"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    queue_value </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> queue.get()
</span></span><span class="line" line="32"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;value=</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%r</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">, result=</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%r</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">, queue_value=</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">%r</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, value, result, queue_value)
</span></span><span class="line" line="33"><span emptylineplaceholder="true">
</span></span><span class="line" line="34"><span emptylineplaceholder="true">
</span></span><span class="line" line="35"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="36"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="37"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main5.py
</span></span><span class="line" line="38"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># before sleep
</span></span><span class="line" line="39"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># start
</span></span><span class="line" line="40"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># done!
</span></span><span class="line" line="41"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># after sleep
</span></span><span class="line" line="42"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># value=1, result=1, queue_value=1
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-f32a1575><!--[-->가능하다. <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 코루틴을 이벤트 루프에 예약하는 객체지, 코루틴 그 자체가 아니기 때문이다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->그렇기에 단 한번 <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code>으로 대기할 수 있다.
동시에 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>이기에, <code class="prose-code-inline" data-v-b986f687><!--[-->result<!--]--></code> 메소드를 사용하여 값을 가져올 수도 있으며
<code class="prose-code-inline" data-v-b986f687><!--[-->add_done_callback<!--]--></code> 메소드를 사용하여, 콜백을 추가할 수도 있다.<!--]--></p><h2 id="future와-task는-언제-사용할까" class="prose-h2" data-v-8ebd03fb><a aria-current="page" href="/@post/python/async/#future와-task는-언제-사용할까" class="router-link-active router-link-exact-active" data-v-8ebd03fb><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>와 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 언제 사용할까<!--]--><!----></a></h2><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code> 또는 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 대부분의 경우 직접 사용할 일이 없다.
하지만 저수준 api를 다뤄야 하거나, 효율적인 코드를 목표로 한다면,
필연적으로 다뤄야 하는 순간이 온다.<!--]--></p><h3 id="task가-필요한-상황" class="prose-h3" data-v-2eef1bcb><a aria-current="page" href="/@post/python/async/#task가-필요한-상황" class="router-link-active router-link-exact-active" data-v-2eef1bcb><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>가 필요한 상황<!--]--><!----></a></h3><div class="highlight-python prose-code" meta data-v-f10d8ba5><span class="filename" data-v-f10d8ba5>main6.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __future__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> annotations
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Awaitable
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span emptylineplaceholder="true">
</span></span><span class="line" line="8"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(value: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="9"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    mod </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">%</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 10
</span></span><span class="line" line="10"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    rand </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random.randint(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="11"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="12"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> mod </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> rand:
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        error_msg </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> f</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;mod &gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">{</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">rand</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        raise</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> ValueError</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(error_msg)
</span></span><span class="line" line="15"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> mod
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span emptylineplaceholder="true">
</span></span><span class="line" line="18"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> shield</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(coro: Awaitable[</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="19"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="20"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.shield(coro)
</span></span><span class="line" line="21"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    except</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> ValueError</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="22"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None
</span></span><span class="line" line="23"><span emptylineplaceholder="true">
</span></span><span class="line" line="24"><span emptylineplaceholder="true">
</span></span><span class="line" line="25"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="26"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coros </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> [test(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(random.random() </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)]
</span></span><span class="line" line="27"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.gather(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(shield(coro) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> coros))
</span></span><span class="line" line="28"><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(result)
</span></span><span class="line" line="29"><span emptylineplaceholder="true">
</span></span><span class="line" line="30"><span emptylineplaceholder="true">
</span></span><span class="line" line="31"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="32"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="33"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main6.py
</span></span><span class="line" line="34"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># [2, 1, None, 2, None, 3, 8, 2, 3, None]
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-f32a1575><!--[-->위와 같은 상황이 있을 때,
<code class="prose-code-inline" data-v-b986f687><!--[-->test<!--]--></code>함수에서 에러가 발생하면 None값이 아닌 -1을 반환받고 싶다고 하자.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->가장 간단한 방법은 <code class="prose-code-inline" data-v-b986f687><!--[-->shield<!--]--></code>를 수정하는 것이고,
그 다음으로는 <code class="prose-code-inline" data-v-b986f687><!--[-->test<!--]--></code>를 수정하는 것이다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->하지만 위 스크립트는 굉장히 간단하게 작성된 스크립트라 그런 것이고,
손대면 손댈수록 너무 복잡해져서 수정하기 힘들거나,
특수한 사정으로 인해 수정 자체가 불가능한 경우가 있다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->그럴때 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>에 콜백을 추가하여 문제를 해결할 수 있다.<!--]--></p><div class="highlight-python prose-code" meta data-v-f10d8ba5><span class="filename" data-v-f10d8ba5>main6-2.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __future__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> annotations
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> collections </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> deque
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> functools </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial
</span></span><span class="line" line="7"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Awaitable
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(value: </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    mod </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> value </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">%</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 10
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    rand </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> random.randint(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="13"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> mod </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> rand:
</span></span><span class="line" line="15"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        error_msg </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> f</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;mod &gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">{</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">rand</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">}</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;
</span></span><span class="line" line="16"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        raise</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> ValueError</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(error_msg)
</span></span><span class="line" line="17"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> mod
</span></span><span class="line" line="18"><span emptylineplaceholder="true">
</span></span><span class="line" line="19"><span emptylineplaceholder="true">
</span></span><span class="line" line="20"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> shield</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(coro: Awaitable[</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="21"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="22"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.shield(coro)
</span></span><span class="line" line="23"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    except</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> ValueError</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="24"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> None
</span></span><span class="line" line="25"><span emptylineplaceholder="true">
</span></span><span class="line" line="26"><span emptylineplaceholder="true">
</span></span><span class="line" line="27"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> add</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(task: asyncio.Task[</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">], queue: asyncio.Queue[</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="28"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task.exception():
</span></span><span class="line" line="29"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        queue.put_nowait(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">-</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="30"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        return
</span></span><span class="line" line="31"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    queue.put_nowait(task.result())
</span></span><span class="line" line="32"><span emptylineplaceholder="true">
</span></span><span class="line" line="33"><span emptylineplaceholder="true">
</span></span><span class="line" line="34"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="35"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    queue </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.Queue()
</span></span><span class="line" line="36"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    add_in_queue </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial(add, </span><span style="--shiki-default:#E36209;--shiki-dark:#FFAB70">queue</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">queue)
</span></span><span class="line" line="37"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coros </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> [test(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">int</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(random.random() </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> 100</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)]
</span></span><span class="line" line="38"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    tasks </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> deque()
</span></span><span class="line" line="39"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> coros:
</span></span><span class="line" line="40"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        task </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.create_task(coro)
</span></span><span class="line" line="41"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        task.add_done_callback(add_in_queue)
</span></span><span class="line" line="42"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        tasks.append(task)
</span></span><span class="line" line="43"><span emptylineplaceholder="true">
</span></span><span class="line" line="44"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.gather(</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(shield(task) </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> task </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> tasks))
</span></span><span class="line" line="45"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    result </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> [queue.get_nowait() </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> _ </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">in</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> range</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">10</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)]
</span></span><span class="line" line="46"><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">    print</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(result)
</span></span><span class="line" line="47"><span emptylineplaceholder="true">
</span></span><span class="line" line="48"><span emptylineplaceholder="true">
</span></span><span class="line" line="49"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="50"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="51"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main6-2.py
</span></span><span class="line" line="52"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-f32a1575><!--[-->핵심 로직이라 할 수 있는 <code class="prose-code-inline" data-v-b986f687><!--[-->test<!--]--></code>와 <code class="prose-code-inline" data-v-b986f687><!--[-->shield<!--]--></code>를 수정하지 않고,
콜백을 사용하여 문제를 해결할 수 있다.<!--]--></p><h3 id="future가-필요한-상황" class="prose-h3" data-v-2eef1bcb><a aria-current="page" href="/@post/python/async/#future가-필요한-상황" class="router-link-active router-link-exact-active" data-v-2eef1bcb><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>가 필요한 상황<!--]--><!----></a></h3><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>가 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>를 상속받았기에, 대부분의 경우 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>에서 문제가 해결된다.
<code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>와 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>의 결정적인 차이점은
<code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>는 이벤트루프에 예약되지 않은 상태가 존재한다는 것이다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->코루틴이 비동기 작업에 대한 정의라면
<code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 코루틴의 실재이고,
<code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>는 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>의 선물이다.
따라서 <code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>를 사용한다면, 비동기 작업이 선언 또는 실행되기 이전에
콜백을 정의하고 추가하여 제공할 수 있다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->이러한 방법은 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code>의 내부 함수를 구현하는데 많이 사용되는데,
그 중 하나인 <code class="prose-code-inline" data-v-b986f687><!--[-->wait_for<!--]--></code>를 좀 더 알아보기 쉽게 나타내면 다음과 같다.<!--]--></p><div class="highlight-python prose-code" meta data-v-f10d8ba5><span class="filename" data-v-f10d8ba5>main7.py</span><!--[--><pre class="language-python shiki shiki-themes github-light github-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __future__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> annotations
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> sys
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> functools </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial
</span></span><span class="line" line="7"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> typing </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> Any, Awaitable
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> logging.getLogger()
</span></span><span class="line" line="10"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.setLevel(logging.</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">INFO</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">logger.addHandler(logging.StreamHandler(sys.stdout))
</span></span><span class="line" line="12"><span emptylineplaceholder="true">
</span></span><span class="line" line="13"><span emptylineplaceholder="true">
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> release</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(waiter: asyncio.Future[Any], </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">args: Any) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="15"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> waiter.done():
</span></span><span class="line" line="16"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        waiter.set_result(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="17"><span emptylineplaceholder="true">
</span></span><span class="line" line="18"><span emptylineplaceholder="true">
</span></span><span class="line" line="19"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> cancel</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(future: asyncio.Future[Any]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="20"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    loop </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.get_running_loop()
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    waiter </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> loop.create_future()
</span></span><span class="line" line="22"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    callback </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial(release, waiter)
</span></span><span class="line" line="23"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    future.add_done_callback(callback)
</span></span><span class="line" line="24"><span emptylineplaceholder="true">
</span></span><span class="line" line="25"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="26"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        future.cancel()
</span></span><span class="line" line="27"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> waiter
</span></span><span class="line" line="28"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    finally</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="29"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        future.remove_done_callback(callback)
</span></span><span class="line" line="30"><span emptylineplaceholder="true">
</span></span><span class="line" line="31"><span emptylineplaceholder="true">
</span></span><span class="line" line="32"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> wait_for</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">(coro: Awaitable[Any]) -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="33"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;wait&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="34"><span emptylineplaceholder="true">
</span></span><span class="line" line="35"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    loop </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.get_running_loop()
</span></span><span class="line" line="36"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    waiter </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> loop.create_future()
</span></span><span class="line" line="37"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    callback </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> partial(release, waiter)
</span></span><span class="line" line="38"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    future </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.ensure_future(coro)
</span></span><span class="line" line="39"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    future.add_done_callback(callback)
</span></span><span class="line" line="40"><span emptylineplaceholder="true">
</span></span><span class="line" line="41"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="42"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> waiter
</span></span><span class="line" line="43"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    except</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.CancelledError:
</span></span><span class="line" line="44"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> future.done():
</span></span><span class="line" line="45"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">            return
</span></span><span class="line" line="46"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        future.remove_done_callback(callback)
</span></span><span class="line" line="47"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> cancel(future)
</span></span><span class="line" line="48"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        raise
</span></span><span class="line" line="49"><span emptylineplaceholder="true">
</span></span><span class="line" line="50"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> not</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> future.done():
</span></span><span class="line" line="51"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">        future.remove_done_callback(callback)
</span></span><span class="line" line="52"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> cancel(future)
</span></span><span class="line" line="53"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">        raise</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> RuntimeError
</span></span><span class="line" line="54"><span emptylineplaceholder="true">
</span></span><span class="line" line="55"><span emptylineplaceholder="true">
</span></span><span class="line" line="56"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> test</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="57"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;start&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="58"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.sleep(</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="59"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    logger.info(</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF">&quot;end&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">)
</span></span><span class="line" line="60"><span emptylineplaceholder="true">
</span></span><span class="line" line="61"><span emptylineplaceholder="true">
</span></span><span class="line" line="62"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> def</span><span style="--shiki-default:#6F42C1;--shiki-dark:#B392F0"> main</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">() -&gt; </span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF">None</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="63"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    coro </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> test()
</span></span><span class="line" line="64"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    task </span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.create_task(coro)
</span></span><span class="line" line="65"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8"> asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))
</span></span><span class="line" line="66"><span emptylineplaceholder="true">
</span></span><span class="line" line="67"><span emptylineplaceholder="true">
</span></span><span class="line" line="68"><span style="--shiki-default:#D73A49;--shiki-dark:#F97583">if</span><span style="--shiki-default:#005CC5;--shiki-dark:#79B8FF"> __name__</span><span style="--shiki-default:#D73A49;--shiki-dark:#F97583"> ==</span><span style="--shiki-default:#032F62;--shiki-dark:#9ECBFF"> &quot;__main__&quot;</span><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">:
</span></span><span class="line" line="69"><span style="--shiki-default:#24292E;--shiki-dark:#E1E4E8">    asyncio.run(main())
</span></span><span class="line" line="70"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># ❯ poetry run python main7.py
</span></span><span class="line" line="71"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># start
</span></span><span class="line" line="72"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># wait
</span></span><span class="line" line="73"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># wait
</span></span><span class="line" line="74"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># wait
</span></span><span class="line" line="75"><span style="--shiki-default:#6A737D;--shiki-dark:#6A737D"># end
</span></span></code><!--]--></pre><!--]--><button class="copy-button" data-v-f10d8ba5 data-v-2310c547><span class="sr-only" data-v-2310c547>Copy to clipboard</span><span class="icon-wrapper" data-v-2310c547><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" data-v-2310c547 style="" width="18px" height="18px" viewBox="0 0 256 256" data-v-363f1ff4><path fill="currentColor" d="M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z"/></svg></span></button></div><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->wait_for<!--]--></code>의 실제 구현은 더 정교하지만, 읽기 쉽도록 일부 코드를 수정했다.
위와 같은 형태로 <code class="prose-code-inline" data-v-b986f687><!--[-->wait_for<!--]--></code>를 사용하지 않는다면, <code class="prose-code-inline" data-v-b986f687><!--[-->task<!--]--></code>를 2번 이상 실행하게 되고,
동일한 코루틴을 2번 이상 실행할 수 없다는 에러가 발생한다.<!--]--></p><h2 id="요약하자면" class="prose-h2" data-v-8ebd03fb><a aria-current="page" href="/@post/python/async/#요약하자면" class="router-link-active router-link-exact-active" data-v-8ebd03fb><!--[-->요약하자면<!--]--><!----></a></h2><ol class="prose-ol" data-v-bbccd14d><!--[--><li class="prose-li" data-v-be470a26><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->async<!--]--></code>, <code class="prose-code-inline" data-v-b986f687><!--[-->await<!--]--></code> 키워드로 비동기 함수를 정의하여 코루틴을 생성하고,
<code class="prose-code-inline" data-v-b986f687><!--[-->asyncio.run<!--]--></code>으로 실행한다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->js<!--]--></code>의 <code class="prose-code-inline" data-v-b986f687><!--[-->Promise<!--]--></code>와 비슷한 객체는 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>다.<!--]--></li><li class="prose-li" data-v-be470a26><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>를 사용하면 콜백을 활용할 수 있다.<!--]--></li><!--]--></ol><h3 id="추가하자면" class="prose-h3" data-v-2eef1bcb><a aria-current="page" href="/@post/python/async/#추가하자면" class="router-link-active router-link-exact-active" data-v-2eef1bcb><!--[-->추가하자면<!--]--><!----></a></h3><p class="prose-p" data-v-f32a1575><!--[-->기본 라이브러리인 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code> 위주로 작성된 글이지만,
비동기 라이브러리는 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code>만이 있는 것은 아니다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->twisted<!--]--></code>나 <code class="prose-code-inline" data-v-b986f687><!--[-->curio<!--]--></code>, <code class="prose-code-inline" data-v-b986f687><!--[-->trio<!--]--></code>등이 있으며,
<code class="prose-code-inline" data-v-b986f687><!--[-->trio<!--]--></code>의 로직을 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code>에 적용한 <code class="prose-code-inline" data-v-b986f687><!--[-->anyio<!--]--></code>도 있다.<!--]--></p><blockquote class="prose-blockquote" data-v-432b31ff><!--[--><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->anyio<!--]--></code>를 사용하면 비동기 로직 구현 후,
<code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code>와 <code class="prose-code-inline" data-v-b986f687><!--[-->trio<!--]--></code>중 어떤 것이든 선택하여 사용할 수 있다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->2.x에서는 <code class="prose-code-inline" data-v-b986f687><!--[-->curio<!--]--></code>도 지원했지만,
<code class="prose-code-inline" data-v-b986f687><!--[-->curio<!--]--></code>의 구현 방식에 따른 개발에 어려움이 있어서 3.x부터 제외됐다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[--><code class="prose-code-inline" data-v-b986f687><!--[-->twisted<!--]--></code>는 <code class="prose-code-inline" data-v-b986f687><!--[-->anyio<!--]--></code>에서 사용하는 <code class="prose-code-inline" data-v-b986f687><!--[-->sniffio<!--]--></code>에서 지원하지 않아서
<code class="prose-code-inline" data-v-b986f687><!--[-->anyio<!--]--></code>에서도 지원하지 않는다.<!--]--></p><!--]--></blockquote><p class="prose-p" data-v-f32a1575><!--[-->모든 라이브러리는 코루틴에 대해서는 공유하지만,
<code class="prose-code-inline" data-v-b986f687><!--[-->Future<!--]--></code>와 <code class="prose-code-inline" data-v-b986f687><!--[-->Task<!--]--></code>는 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code>에 정의된 객체이므로,
따로 정의한 객체를 사용할 수 있다.
따라서 만약 다른 라이브러리를 사용한다면,
그 라이브러리에 맞는 방법을 잘 알아보고 사용해야 한다.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->나는 <code class="prose-code-inline" data-v-b986f687><!--[-->anyio<!--]--></code>를 주로 사용하는데,
<code class="prose-code-inline" data-v-b986f687><!--[-->TaskGroup<!--]--></code>과 <code class="prose-code-inline" data-v-b986f687><!--[-->CancelScope<!--]--></code>가 마음에 들었기 때문이다.
특히 이 <code class="prose-code-inline" data-v-b986f687><!--[-->TaskGroup<!--]--></code>은 3.11부터는 <code class="prose-code-inline" data-v-b986f687><!--[-->asyncio<!--]--></code>에 적용된 개념이기도 하니,
만약 3.11이상의 버전을 사용한다면 <code class="prose-code-inline" data-v-b986f687><!--[-->gather<!--]--></code> 대신 <code class="prose-code-inline" data-v-b986f687><!--[-->TaskGroup<!--]--></code>을 사용하자.<!--]--></p><p class="prose-p" data-v-f32a1575><!--[-->왜 <code class="prose-code-inline" data-v-b986f687><!--[-->TaskGroup<!--]--></code>이 좋은지, 왜 사용해야 하는지는
<a href="https://blog.lablup.com/posts/2022/03/29/PersistentTaskGroup/" rel="nofollow" class="prose-a" data-v-778a91c6><!--[-->이 글<!--]--></a>에서 상세하게 설명해준다.<!--]--></p><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}</style></div><!--]--></article></section><ul class="prev-next-cont" data-v-ca2484fd data-v-5d7182e6><li class="link-item prev" data-v-5d7182e6><a href="/@post/python/airflow1/" class="" data-v-5d7182e6><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="icon stroke" data-v-5d7182e6><path fill-rule="evenodd" d="M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg><span data-v-5d7182e6>새로운 문법으로 Airflow DAG 생성하기</span></a></li><li class="link-item next" data-v-5d7182e6><a href="/@post/python/pep_695/" class="" data-v-5d7182e6><span data-v-5d7182e6>더 편한 타입 힌트를 위한 PEP695</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="icon stroke" data-v-5d7182e6><path fill-rule="evenodd" d="M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg></a></li></ul></div><div data-v-ca2484fd><section class="w-full"></section></div></main><!--]--><footer class="site-footer" data-v-5a1dd750><div class="wrapper" data-v-5a1dd750><div class="footer-info" data-v-5a1dd750></div><ul class="footer-links" data-v-5a1dd750></ul></div></footer><div data-v-02d19c8f><span data-v-02d19c8f></span></div></div></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/@post/python/async/_payload.json?b2933344-301f-433e-a803-2d4981ea62cc">[{"state":1,"once":15,"_errors":16,"serverRendered":5,"path":19,"pinia":20,"prerenderedAt":6090},["Reactive",2],{"$scolor-mode":3,"$sicons":7,"$ssite-config":12},{"preference":4,"value":4,"unknown":5,"forced":6},"system",true,false,{"ph:copy":8},{"left":9,"top":9,"width":10,"height":10,"rotate":9,"vFlip":6,"hFlip":6,"body":11},0,256,"\u003Cpath fill=\"currentColor\" d=\"M216 32H88a8 8 0 0 0-8 8v40H40a8 8 0 0 0-8 8v128a8 8 0 0 0 8 8h128a8 8 0 0 0 8-8v-40h40a8 8 0 0 0 8-8V40a8 8 0 0 0-8-8m-56 176H48V96h112Zm48-48h-32V88a8 8 0 0 0-8-8H96V48h112Z\"/>",{"env":13,"name":14},"production","phi-friday.github.io",["Set"],["ShallowReactive",17],{"selected_data_with_surround_/python/async":18},null,"/@post/python/async/",["Reactive",21],{"color_schema":22,"current_article":24,"current_url":6083,"current_tags":6084},{"color_schema":23},"light",{"nullable_article":25,"prev":6074,"next":6078,"active_toc_ids":6082},{"_path":26,"_dir":27,"_draft":6,"_partial":6,"_locale":28,"title":29,"description":30,"tags":31,"date":33,"publish":5,"body":34,"_type":6068,"_id":6069,"_source":6070,"_file":6071,"_stem":6072,"_extension":6073},"/python/async","python","","python의 비동기에 대한 얕은 이해","코드 중심으로 알아보는 비동기",[27,32],"async","2023-07-31T09:51:28.303Z",{"type":35,"children":36,"toc":6044},"root",[37,53,74,86,302,323,328,700,713,722,727,965,979,1005,1010,1022,1036,1056,1083,1419,1455,1473,1486,1526,1537,1568,1584,1596,1612,1656,1669,1674,2066,2112,2117,2217,2235,2240,2289,2315,2327,2902,2914,2949,2966,2982,2993,3643,3655,3675,3680,3692,4618,4636,4646,4690,4722,4742,5697,5722,5727,5786,5791,5810,5858,5935,5959,6016,6038],{"type":38,"tag":39,"props":40,"children":42},"element","h2",{"id":41},"파이썬의-비동기-라이브러리-asyncio",[43,46],{"type":44,"value":45},"text","파이썬의 비동기 라이브러리 ",{"type":38,"tag":47,"props":48,"children":50},"code",{"className":49},[],[51],{"type":44,"value":52},"asyncio",{"type":38,"tag":54,"props":55,"children":56},"p",{},[57,59,64,66,72],{"type":44,"value":58},"파이썬에서 비동기를 객체를 생성하는 가장 간단한 방법은 ",{"type":38,"tag":47,"props":60,"children":62},{"className":61},[],[63],{"type":44,"value":32},{"type":44,"value":65},"와 ",{"type":38,"tag":47,"props":67,"children":69},{"className":68},[],[70],{"type":44,"value":71},"await",{"type":44,"value":73},"키워드를 사용하는 것이다.",{"type":38,"tag":54,"props":75,"children":76},{},[77,79,84],{"type":44,"value":78},"이를 위해 기본 라이브러리로 제공되는 ",{"type":38,"tag":47,"props":80,"children":82},{"className":81},[],[83],{"type":44,"value":52},{"type":44,"value":85},"를 사용하자.",{"type":38,"tag":87,"props":88,"children":92},"pre",{"className":89,"code":90,"filename":91,"language":27,"meta":28,"style":28},"language-python shiki shiki-themes github-light github-dark","import asyncio\n\n\nasync def test() -> None:\n    await asyncio.sleep(1)\n\n\nasync def main() -> None:\n    await test()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","main.py",[93],{"type":38,"tag":47,"props":94,"children":95},{"__ignoreMap":28},[96,114,123,131,166,190,198,206,235,248,256,264,293],{"type":38,"tag":97,"props":98,"children":101},"span",{"class":99,"line":100},"line",1,[102,108],{"type":38,"tag":97,"props":103,"children":105},{"style":104},"--shiki-default:#D73A49;--shiki-dark:#F97583",[106],{"type":44,"value":107},"import",{"type":38,"tag":97,"props":109,"children":111},{"style":110},"--shiki-default:#24292E;--shiki-dark:#E1E4E8",[112],{"type":44,"value":113}," asyncio\n",{"type":38,"tag":97,"props":115,"children":117},{"class":99,"line":116},2,[118],{"type":38,"tag":97,"props":119,"children":120},{"emptyLinePlaceholder":5},[121],{"type":44,"value":122},"\n",{"type":38,"tag":97,"props":124,"children":126},{"class":99,"line":125},3,[127],{"type":38,"tag":97,"props":128,"children":129},{"emptyLinePlaceholder":5},[130],{"type":44,"value":122},{"type":38,"tag":97,"props":132,"children":134},{"class":99,"line":133},4,[135,139,144,150,155,161],{"type":38,"tag":97,"props":136,"children":137},{"style":104},[138],{"type":44,"value":32},{"type":38,"tag":97,"props":140,"children":141},{"style":104},[142],{"type":44,"value":143}," def",{"type":38,"tag":97,"props":145,"children":147},{"style":146},"--shiki-default:#6F42C1;--shiki-dark:#B392F0",[148],{"type":44,"value":149}," test",{"type":38,"tag":97,"props":151,"children":152},{"style":110},[153],{"type":44,"value":154},"() -> ",{"type":38,"tag":97,"props":156,"children":158},{"style":157},"--shiki-default:#005CC5;--shiki-dark:#79B8FF",[159],{"type":44,"value":160},"None",{"type":38,"tag":97,"props":162,"children":163},{"style":110},[164],{"type":44,"value":165},":\n",{"type":38,"tag":97,"props":167,"children":169},{"class":99,"line":168},5,[170,175,180,185],{"type":38,"tag":97,"props":171,"children":172},{"style":104},[173],{"type":44,"value":174},"    await",{"type":38,"tag":97,"props":176,"children":177},{"style":110},[178],{"type":44,"value":179}," asyncio.sleep(",{"type":38,"tag":97,"props":181,"children":182},{"style":157},[183],{"type":44,"value":184},"1",{"type":38,"tag":97,"props":186,"children":187},{"style":110},[188],{"type":44,"value":189},")\n",{"type":38,"tag":97,"props":191,"children":193},{"class":99,"line":192},6,[194],{"type":38,"tag":97,"props":195,"children":196},{"emptyLinePlaceholder":5},[197],{"type":44,"value":122},{"type":38,"tag":97,"props":199,"children":201},{"class":99,"line":200},7,[202],{"type":38,"tag":97,"props":203,"children":204},{"emptyLinePlaceholder":5},[205],{"type":44,"value":122},{"type":38,"tag":97,"props":207,"children":209},{"class":99,"line":208},8,[210,214,218,223,227,231],{"type":38,"tag":97,"props":211,"children":212},{"style":104},[213],{"type":44,"value":32},{"type":38,"tag":97,"props":215,"children":216},{"style":104},[217],{"type":44,"value":143},{"type":38,"tag":97,"props":219,"children":220},{"style":146},[221],{"type":44,"value":222}," main",{"type":38,"tag":97,"props":224,"children":225},{"style":110},[226],{"type":44,"value":154},{"type":38,"tag":97,"props":228,"children":229},{"style":157},[230],{"type":44,"value":160},{"type":38,"tag":97,"props":232,"children":233},{"style":110},[234],{"type":44,"value":165},{"type":38,"tag":97,"props":236,"children":238},{"class":99,"line":237},9,[239,243],{"type":38,"tag":97,"props":240,"children":241},{"style":104},[242],{"type":44,"value":174},{"type":38,"tag":97,"props":244,"children":245},{"style":110},[246],{"type":44,"value":247}," test()\n",{"type":38,"tag":97,"props":249,"children":251},{"class":99,"line":250},10,[252],{"type":38,"tag":97,"props":253,"children":254},{"emptyLinePlaceholder":5},[255],{"type":44,"value":122},{"type":38,"tag":97,"props":257,"children":259},{"class":99,"line":258},11,[260],{"type":38,"tag":97,"props":261,"children":262},{"emptyLinePlaceholder":5},[263],{"type":44,"value":122},{"type":38,"tag":97,"props":265,"children":267},{"class":99,"line":266},12,[268,273,278,283,289],{"type":38,"tag":97,"props":269,"children":270},{"style":104},[271],{"type":44,"value":272},"if",{"type":38,"tag":97,"props":274,"children":275},{"style":157},[276],{"type":44,"value":277}," __name__",{"type":38,"tag":97,"props":279,"children":280},{"style":104},[281],{"type":44,"value":282}," ==",{"type":38,"tag":97,"props":284,"children":286},{"style":285},"--shiki-default:#032F62;--shiki-dark:#9ECBFF",[287],{"type":44,"value":288}," \"__main__\"",{"type":38,"tag":97,"props":290,"children":291},{"style":110},[292],{"type":44,"value":165},{"type":38,"tag":97,"props":294,"children":296},{"class":99,"line":295},13,[297],{"type":38,"tag":97,"props":298,"children":299},{"style":110},[300],{"type":44,"value":301},"    asyncio.run(main())\n",{"type":38,"tag":54,"props":303,"children":304},{},[305,307,313,315,321],{"type":44,"value":306},"동기 함수와는 다르게 ",{"type":38,"tag":47,"props":308,"children":310},{"className":309},[],[311],{"type":44,"value":312},"asyncio.run",{"type":44,"value":314},"함수로 ",{"type":38,"tag":47,"props":316,"children":318},{"className":317},[],[319],{"type":44,"value":320},"main()",{"type":44,"value":322}," 코루틴을 실행하는 형태로 구성된다.",{"type":38,"tag":54,"props":324,"children":325},{},[326],{"type":44,"value":327},"정말로 비동기로 작동하는지 확인하기 위해, 다음과 같이 새로 작성한 코드를 실행해보자.",{"type":38,"tag":87,"props":329,"children":332},{"className":89,"code":330,"filename":331,"language":27,"meta":28,"style":28},"import asyncio\nimport logging\nimport random\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test(x: int) -> None:\n    logger.info(\"start: %d\", x)\n    await asyncio.sleep(random.random())\n    logger.info(\"end: %d\", x)\n\n\nasync def main() -> None:\n    await asyncio.gather(*(test(x) for x in range(10)))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","main2.py",[333],{"type":38,"tag":47,"props":334,"children":335},{"__ignoreMap":28},[336,347,359,371,383,390,408,425,433,440,447,485,513,525,550,558,566,594,652,660,668,692],{"type":38,"tag":97,"props":337,"children":338},{"class":99,"line":100},[339,343],{"type":38,"tag":97,"props":340,"children":341},{"style":104},[342],{"type":44,"value":107},{"type":38,"tag":97,"props":344,"children":345},{"style":110},[346],{"type":44,"value":113},{"type":38,"tag":97,"props":348,"children":349},{"class":99,"line":116},[350,354],{"type":38,"tag":97,"props":351,"children":352},{"style":104},[353],{"type":44,"value":107},{"type":38,"tag":97,"props":355,"children":356},{"style":110},[357],{"type":44,"value":358}," logging\n",{"type":38,"tag":97,"props":360,"children":361},{"class":99,"line":125},[362,366],{"type":38,"tag":97,"props":363,"children":364},{"style":104},[365],{"type":44,"value":107},{"type":38,"tag":97,"props":367,"children":368},{"style":110},[369],{"type":44,"value":370}," random\n",{"type":38,"tag":97,"props":372,"children":373},{"class":99,"line":133},[374,378],{"type":38,"tag":97,"props":375,"children":376},{"style":104},[377],{"type":44,"value":107},{"type":38,"tag":97,"props":379,"children":380},{"style":110},[381],{"type":44,"value":382}," sys\n",{"type":38,"tag":97,"props":384,"children":385},{"class":99,"line":168},[386],{"type":38,"tag":97,"props":387,"children":388},{"emptyLinePlaceholder":5},[389],{"type":44,"value":122},{"type":38,"tag":97,"props":391,"children":392},{"class":99,"line":192},[393,398,403],{"type":38,"tag":97,"props":394,"children":395},{"style":110},[396],{"type":44,"value":397},"logger ",{"type":38,"tag":97,"props":399,"children":400},{"style":104},[401],{"type":44,"value":402},"=",{"type":38,"tag":97,"props":404,"children":405},{"style":110},[406],{"type":44,"value":407}," logging.getLogger()\n",{"type":38,"tag":97,"props":409,"children":410},{"class":99,"line":200},[411,416,421],{"type":38,"tag":97,"props":412,"children":413},{"style":110},[414],{"type":44,"value":415},"logger.setLevel(logging.",{"type":38,"tag":97,"props":417,"children":418},{"style":157},[419],{"type":44,"value":420},"INFO",{"type":38,"tag":97,"props":422,"children":423},{"style":110},[424],{"type":44,"value":189},{"type":38,"tag":97,"props":426,"children":427},{"class":99,"line":208},[428],{"type":38,"tag":97,"props":429,"children":430},{"style":110},[431],{"type":44,"value":432},"logger.addHandler(logging.StreamHandler(sys.stdout))\n",{"type":38,"tag":97,"props":434,"children":435},{"class":99,"line":237},[436],{"type":38,"tag":97,"props":437,"children":438},{"emptyLinePlaceholder":5},[439],{"type":44,"value":122},{"type":38,"tag":97,"props":441,"children":442},{"class":99,"line":250},[443],{"type":38,"tag":97,"props":444,"children":445},{"emptyLinePlaceholder":5},[446],{"type":44,"value":122},{"type":38,"tag":97,"props":448,"children":449},{"class":99,"line":258},[450,454,458,462,467,472,477,481],{"type":38,"tag":97,"props":451,"children":452},{"style":104},[453],{"type":44,"value":32},{"type":38,"tag":97,"props":455,"children":456},{"style":104},[457],{"type":44,"value":143},{"type":38,"tag":97,"props":459,"children":460},{"style":146},[461],{"type":44,"value":149},{"type":38,"tag":97,"props":463,"children":464},{"style":110},[465],{"type":44,"value":466},"(x: ",{"type":38,"tag":97,"props":468,"children":469},{"style":157},[470],{"type":44,"value":471},"int",{"type":38,"tag":97,"props":473,"children":474},{"style":110},[475],{"type":44,"value":476},") -> ",{"type":38,"tag":97,"props":478,"children":479},{"style":157},[480],{"type":44,"value":160},{"type":38,"tag":97,"props":482,"children":483},{"style":110},[484],{"type":44,"value":165},{"type":38,"tag":97,"props":486,"children":487},{"class":99,"line":266},[488,493,498,503,508],{"type":38,"tag":97,"props":489,"children":490},{"style":110},[491],{"type":44,"value":492},"    logger.info(",{"type":38,"tag":97,"props":494,"children":495},{"style":285},[496],{"type":44,"value":497},"\"start: ",{"type":38,"tag":97,"props":499,"children":500},{"style":157},[501],{"type":44,"value":502},"%d",{"type":38,"tag":97,"props":504,"children":505},{"style":285},[506],{"type":44,"value":507},"\"",{"type":38,"tag":97,"props":509,"children":510},{"style":110},[511],{"type":44,"value":512},", x)\n",{"type":38,"tag":97,"props":514,"children":515},{"class":99,"line":295},[516,520],{"type":38,"tag":97,"props":517,"children":518},{"style":104},[519],{"type":44,"value":174},{"type":38,"tag":97,"props":521,"children":522},{"style":110},[523],{"type":44,"value":524}," asyncio.sleep(random.random())\n",{"type":38,"tag":97,"props":526,"children":528},{"class":99,"line":527},14,[529,533,538,542,546],{"type":38,"tag":97,"props":530,"children":531},{"style":110},[532],{"type":44,"value":492},{"type":38,"tag":97,"props":534,"children":535},{"style":285},[536],{"type":44,"value":537},"\"end: ",{"type":38,"tag":97,"props":539,"children":540},{"style":157},[541],{"type":44,"value":502},{"type":38,"tag":97,"props":543,"children":544},{"style":285},[545],{"type":44,"value":507},{"type":38,"tag":97,"props":547,"children":548},{"style":110},[549],{"type":44,"value":512},{"type":38,"tag":97,"props":551,"children":553},{"class":99,"line":552},15,[554],{"type":38,"tag":97,"props":555,"children":556},{"emptyLinePlaceholder":5},[557],{"type":44,"value":122},{"type":38,"tag":97,"props":559,"children":561},{"class":99,"line":560},16,[562],{"type":38,"tag":97,"props":563,"children":564},{"emptyLinePlaceholder":5},[565],{"type":44,"value":122},{"type":38,"tag":97,"props":567,"children":569},{"class":99,"line":568},17,[570,574,578,582,586,590],{"type":38,"tag":97,"props":571,"children":572},{"style":104},[573],{"type":44,"value":32},{"type":38,"tag":97,"props":575,"children":576},{"style":104},[577],{"type":44,"value":143},{"type":38,"tag":97,"props":579,"children":580},{"style":146},[581],{"type":44,"value":222},{"type":38,"tag":97,"props":583,"children":584},{"style":110},[585],{"type":44,"value":154},{"type":38,"tag":97,"props":587,"children":588},{"style":157},[589],{"type":44,"value":160},{"type":38,"tag":97,"props":591,"children":592},{"style":110},[593],{"type":44,"value":165},{"type":38,"tag":97,"props":595,"children":597},{"class":99,"line":596},18,[598,602,607,612,617,622,627,632,637,642,647],{"type":38,"tag":97,"props":599,"children":600},{"style":104},[601],{"type":44,"value":174},{"type":38,"tag":97,"props":603,"children":604},{"style":110},[605],{"type":44,"value":606}," asyncio.gather(",{"type":38,"tag":97,"props":608,"children":609},{"style":104},[610],{"type":44,"value":611},"*",{"type":38,"tag":97,"props":613,"children":614},{"style":110},[615],{"type":44,"value":616},"(test(x) ",{"type":38,"tag":97,"props":618,"children":619},{"style":104},[620],{"type":44,"value":621},"for",{"type":38,"tag":97,"props":623,"children":624},{"style":110},[625],{"type":44,"value":626}," x ",{"type":38,"tag":97,"props":628,"children":629},{"style":104},[630],{"type":44,"value":631},"in",{"type":38,"tag":97,"props":633,"children":634},{"style":157},[635],{"type":44,"value":636}," range",{"type":38,"tag":97,"props":638,"children":639},{"style":110},[640],{"type":44,"value":641},"(",{"type":38,"tag":97,"props":643,"children":644},{"style":157},[645],{"type":44,"value":646},"10",{"type":38,"tag":97,"props":648,"children":649},{"style":110},[650],{"type":44,"value":651},")))\n",{"type":38,"tag":97,"props":653,"children":655},{"class":99,"line":654},19,[656],{"type":38,"tag":97,"props":657,"children":658},{"emptyLinePlaceholder":5},[659],{"type":44,"value":122},{"type":38,"tag":97,"props":661,"children":663},{"class":99,"line":662},20,[664],{"type":38,"tag":97,"props":665,"children":666},{"emptyLinePlaceholder":5},[667],{"type":44,"value":122},{"type":38,"tag":97,"props":669,"children":671},{"class":99,"line":670},21,[672,676,680,684,688],{"type":38,"tag":97,"props":673,"children":674},{"style":104},[675],{"type":44,"value":272},{"type":38,"tag":97,"props":677,"children":678},{"style":157},[679],{"type":44,"value":277},{"type":38,"tag":97,"props":681,"children":682},{"style":104},[683],{"type":44,"value":282},{"type":38,"tag":97,"props":685,"children":686},{"style":285},[687],{"type":44,"value":288},{"type":38,"tag":97,"props":689,"children":690},{"style":110},[691],{"type":44,"value":165},{"type":38,"tag":97,"props":693,"children":695},{"class":99,"line":694},22,[696],{"type":38,"tag":97,"props":697,"children":698},{"style":110},[699],{"type":44,"value":301},{"type":38,"tag":54,"props":701,"children":702},{},[703,705,711],{"type":44,"value":704},"여기서 사용된 ",{"type":38,"tag":47,"props":706,"children":708},{"className":707},[],[709],{"type":44,"value":710},"asyncio.gather",{"type":44,"value":712},"는 여러개의 코루틴을 동시에 대기할 수 있도록 한다.",{"type":38,"tag":714,"props":715,"children":716},"note",{},[717],{"type":38,"tag":54,"props":718,"children":719},{},[720],{"type":44,"value":721},"3.11부터는 TaskGroup을 사용할 것을 권장한다.",{"type":38,"tag":54,"props":723,"children":724},{},[725],{"type":44,"value":726},"위 스크립트를 실행하면, 다음과 같이 비동기로 실행되는 것을 확인할 수 있다.",{"type":38,"tag":87,"props":728,"children":732},{"className":729,"code":730,"language":731,"meta":28,"style":28},"language-bash shiki shiki-themes github-light github-dark","❯ poetry run python main2.py\nstart: 0\nstart: 1\nstart: 2\nstart: 3\nstart: 4\nstart: 5\nstart: 6\nstart: 7\nstart: 8\nstart: 9\nend: 9\nend: 8\nend: 6\nend: 3\nend: 4\nend: 0\nend: 1\nend: 2\nend: 5\nend: 7\n","bash",[733],{"type":38,"tag":47,"props":734,"children":735},{"__ignoreMap":28},[736,764,777,789,801,813,825,837,849,861,873,885,893,901,909,917,925,933,941,949,957],{"type":38,"tag":97,"props":737,"children":738},{"class":99,"line":100},[739,744,749,754,759],{"type":38,"tag":97,"props":740,"children":741},{"style":146},[742],{"type":44,"value":743},"❯",{"type":38,"tag":97,"props":745,"children":746},{"style":285},[747],{"type":44,"value":748}," poetry",{"type":38,"tag":97,"props":750,"children":751},{"style":285},[752],{"type":44,"value":753}," run",{"type":38,"tag":97,"props":755,"children":756},{"style":285},[757],{"type":44,"value":758}," python",{"type":38,"tag":97,"props":760,"children":761},{"style":285},[762],{"type":44,"value":763}," main2.py\n",{"type":38,"tag":97,"props":765,"children":766},{"class":99,"line":116},[767,772],{"type":38,"tag":97,"props":768,"children":769},{"style":146},[770],{"type":44,"value":771},"start:",{"type":38,"tag":97,"props":773,"children":774},{"style":157},[775],{"type":44,"value":776}," 0\n",{"type":38,"tag":97,"props":778,"children":779},{"class":99,"line":125},[780,784],{"type":38,"tag":97,"props":781,"children":782},{"style":146},[783],{"type":44,"value":771},{"type":38,"tag":97,"props":785,"children":786},{"style":157},[787],{"type":44,"value":788}," 1\n",{"type":38,"tag":97,"props":790,"children":791},{"class":99,"line":133},[792,796],{"type":38,"tag":97,"props":793,"children":794},{"style":146},[795],{"type":44,"value":771},{"type":38,"tag":97,"props":797,"children":798},{"style":157},[799],{"type":44,"value":800}," 2\n",{"type":38,"tag":97,"props":802,"children":803},{"class":99,"line":168},[804,808],{"type":38,"tag":97,"props":805,"children":806},{"style":146},[807],{"type":44,"value":771},{"type":38,"tag":97,"props":809,"children":810},{"style":157},[811],{"type":44,"value":812}," 3\n",{"type":38,"tag":97,"props":814,"children":815},{"class":99,"line":192},[816,820],{"type":38,"tag":97,"props":817,"children":818},{"style":146},[819],{"type":44,"value":771},{"type":38,"tag":97,"props":821,"children":822},{"style":157},[823],{"type":44,"value":824}," 4\n",{"type":38,"tag":97,"props":826,"children":827},{"class":99,"line":200},[828,832],{"type":38,"tag":97,"props":829,"children":830},{"style":146},[831],{"type":44,"value":771},{"type":38,"tag":97,"props":833,"children":834},{"style":157},[835],{"type":44,"value":836}," 5\n",{"type":38,"tag":97,"props":838,"children":839},{"class":99,"line":208},[840,844],{"type":38,"tag":97,"props":841,"children":842},{"style":146},[843],{"type":44,"value":771},{"type":38,"tag":97,"props":845,"children":846},{"style":157},[847],{"type":44,"value":848}," 6\n",{"type":38,"tag":97,"props":850,"children":851},{"class":99,"line":237},[852,856],{"type":38,"tag":97,"props":853,"children":854},{"style":146},[855],{"type":44,"value":771},{"type":38,"tag":97,"props":857,"children":858},{"style":157},[859],{"type":44,"value":860}," 7\n",{"type":38,"tag":97,"props":862,"children":863},{"class":99,"line":250},[864,868],{"type":38,"tag":97,"props":865,"children":866},{"style":146},[867],{"type":44,"value":771},{"type":38,"tag":97,"props":869,"children":870},{"style":157},[871],{"type":44,"value":872}," 8\n",{"type":38,"tag":97,"props":874,"children":875},{"class":99,"line":258},[876,880],{"type":38,"tag":97,"props":877,"children":878},{"style":146},[879],{"type":44,"value":771},{"type":38,"tag":97,"props":881,"children":882},{"style":157},[883],{"type":44,"value":884}," 9\n",{"type":38,"tag":97,"props":886,"children":887},{"class":99,"line":266},[888],{"type":38,"tag":97,"props":889,"children":890},{"style":110},[891],{"type":44,"value":892},"end: 9\n",{"type":38,"tag":97,"props":894,"children":895},{"class":99,"line":295},[896],{"type":38,"tag":97,"props":897,"children":898},{"style":110},[899],{"type":44,"value":900},"end: 8\n",{"type":38,"tag":97,"props":902,"children":903},{"class":99,"line":527},[904],{"type":38,"tag":97,"props":905,"children":906},{"style":110},[907],{"type":44,"value":908},"end: 6\n",{"type":38,"tag":97,"props":910,"children":911},{"class":99,"line":552},[912],{"type":38,"tag":97,"props":913,"children":914},{"style":110},[915],{"type":44,"value":916},"end: 3\n",{"type":38,"tag":97,"props":918,"children":919},{"class":99,"line":560},[920],{"type":38,"tag":97,"props":921,"children":922},{"style":110},[923],{"type":44,"value":924},"end: 4\n",{"type":38,"tag":97,"props":926,"children":927},{"class":99,"line":568},[928],{"type":38,"tag":97,"props":929,"children":930},{"style":110},[931],{"type":44,"value":932},"end: 0\n",{"type":38,"tag":97,"props":934,"children":935},{"class":99,"line":596},[936],{"type":38,"tag":97,"props":937,"children":938},{"style":110},[939],{"type":44,"value":940},"end: 1\n",{"type":38,"tag":97,"props":942,"children":943},{"class":99,"line":654},[944],{"type":38,"tag":97,"props":945,"children":946},{"style":110},[947],{"type":44,"value":948},"end: 2\n",{"type":38,"tag":97,"props":950,"children":951},{"class":99,"line":662},[952],{"type":38,"tag":97,"props":953,"children":954},{"style":110},[955],{"type":44,"value":956},"end: 5\n",{"type":38,"tag":97,"props":958,"children":959},{"class":99,"line":670},[960],{"type":38,"tag":97,"props":961,"children":962},{"style":110},[963],{"type":44,"value":964},"end: 7\n",{"type":38,"tag":966,"props":967,"children":969},"h3",{"id":968},"왜-asynciorun을-실행해야-하는가",[970,972,977],{"type":44,"value":971},"왜 ",{"type":38,"tag":47,"props":973,"children":975},{"className":974},[],[976],{"type":44,"value":312},{"type":44,"value":978},"을 실행해야 하는가",{"type":38,"tag":54,"props":980,"children":981},{},[982,988,990,995,997,1003],{"type":38,"tag":47,"props":983,"children":985},{"className":984},[],[986],{"type":44,"value":987},"asnyc",{"type":44,"value":989},", ",{"type":38,"tag":47,"props":991,"children":993},{"className":992},[],[994],{"type":44,"value":71},{"type":44,"value":996}," 키워드를 사용한 함수가 실행되면, ",{"type":38,"tag":47,"props":998,"children":1000},{"className":999},[],[1001],{"type":44,"value":1002},"Coroutine",{"type":44,"value":1004},"(이하 코루틴)객체가 생성된다.",{"type":38,"tag":54,"props":1006,"children":1007},{},[1008],{"type":44,"value":1009},"코루틴은 생성과 동시에 실행되는 객체가 아니며,\n이벤트 루프에 예약된 상태도 아니다.",{"type":38,"tag":54,"props":1011,"children":1012},{},[1013,1015,1020],{"type":44,"value":1014},"이러한 코루틴을 실행하기 위해 이벤트루프를 생성하고,\n이벤트루프에 작업을 예약하고,\n이벤트루트의 작업을 순차적으로 실행하는 일련의 과정을\n",{"type":38,"tag":47,"props":1016,"children":1018},{"className":1017},[],[1019],{"type":44,"value":312},{"type":44,"value":1021},"이 담당한다고 볼 수있다.",{"type":38,"tag":39,"props":1023,"children":1025},{"id":1024},"대기할-수-있는-awaitable객체",[1026,1028,1034],{"type":44,"value":1027},"대기할 수 있는 ",{"type":38,"tag":47,"props":1029,"children":1031},{"className":1030},[],[1032],{"type":44,"value":1033},"Awaitable",{"type":44,"value":1035},"객체",{"type":38,"tag":54,"props":1037,"children":1038},{},[1039,1041,1046,1048,1054],{"type":44,"value":1040},"코루틴이 ",{"type":38,"tag":47,"props":1042,"children":1044},{"className":1043},[],[1045],{"type":44,"value":71},{"type":44,"value":1047},"키워드를 사용하여 대기할 수 있는 이유는,\n코루틴에 ",{"type":38,"tag":47,"props":1049,"children":1051},{"className":1050},[],[1052],{"type":44,"value":1053},"__await__",{"type":44,"value":1055},"이라는 메소드가 정의되어 있기 때문이다.",{"type":38,"tag":54,"props":1057,"children":1058},{},[1059,1061,1066,1068,1074,1076,1081],{"type":44,"value":1060},"이러한 객체를 ",{"type":38,"tag":47,"props":1062,"children":1064},{"className":1063},[],[1065],{"type":44,"value":1033},{"type":44,"value":1067}," 객체라고 하며, ",{"type":38,"tag":47,"props":1069,"children":1071},{"className":1070},[],[1072],{"type":44,"value":1073},"typing",{"type":44,"value":1075}," 모듈에서도 확인할 수 있다.\n정말 ",{"type":38,"tag":47,"props":1077,"children":1079},{"className":1078},[],[1080],{"type":44,"value":1053},{"type":44,"value":1082},"만 있으면 가능한지 확인해보자.",{"type":38,"tag":87,"props":1084,"children":1087},{"className":89,"code":1085,"filename":1086,"language":27,"meta":28,"style":28},"import asyncio\nfrom typing import Any, Generator\n\n\nclass Await:\n    def __await__(self) -> Generator[Any, None, int]:\n        for num in range(5):\n            print(num)\n            yield None\n        return 1\n\n\nasync def main() -> None:\n    await Await()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n\n# ❯ poetry run python main3.py\n# 0\n# 1\n# 2\n# 3\n# 4\n","main3.py",[1088],{"type":38,"tag":47,"props":1089,"children":1090},{"__ignoreMap":28},[1091,1102,1124,1131,1138,1155,1190,1225,1238,1251,1263,1270,1277,1304,1316,1323,1330,1353,1360,1367,1376,1384,1392,1401,1410],{"type":38,"tag":97,"props":1092,"children":1093},{"class":99,"line":100},[1094,1098],{"type":38,"tag":97,"props":1095,"children":1096},{"style":104},[1097],{"type":44,"value":107},{"type":38,"tag":97,"props":1099,"children":1100},{"style":110},[1101],{"type":44,"value":113},{"type":38,"tag":97,"props":1103,"children":1104},{"class":99,"line":116},[1105,1110,1115,1119],{"type":38,"tag":97,"props":1106,"children":1107},{"style":104},[1108],{"type":44,"value":1109},"from",{"type":38,"tag":97,"props":1111,"children":1112},{"style":110},[1113],{"type":44,"value":1114}," typing ",{"type":38,"tag":97,"props":1116,"children":1117},{"style":104},[1118],{"type":44,"value":107},{"type":38,"tag":97,"props":1120,"children":1121},{"style":110},[1122],{"type":44,"value":1123}," Any, Generator\n",{"type":38,"tag":97,"props":1125,"children":1126},{"class":99,"line":125},[1127],{"type":38,"tag":97,"props":1128,"children":1129},{"emptyLinePlaceholder":5},[1130],{"type":44,"value":122},{"type":38,"tag":97,"props":1132,"children":1133},{"class":99,"line":133},[1134],{"type":38,"tag":97,"props":1135,"children":1136},{"emptyLinePlaceholder":5},[1137],{"type":44,"value":122},{"type":38,"tag":97,"props":1139,"children":1140},{"class":99,"line":168},[1141,1146,1151],{"type":38,"tag":97,"props":1142,"children":1143},{"style":104},[1144],{"type":44,"value":1145},"class",{"type":38,"tag":97,"props":1147,"children":1148},{"style":146},[1149],{"type":44,"value":1150}," Await",{"type":38,"tag":97,"props":1152,"children":1153},{"style":110},[1154],{"type":44,"value":165},{"type":38,"tag":97,"props":1156,"children":1157},{"class":99,"line":192},[1158,1163,1168,1173,1177,1181,1185],{"type":38,"tag":97,"props":1159,"children":1160},{"style":104},[1161],{"type":44,"value":1162},"    def",{"type":38,"tag":97,"props":1164,"children":1165},{"style":157},[1166],{"type":44,"value":1167}," __await__",{"type":38,"tag":97,"props":1169,"children":1170},{"style":110},[1171],{"type":44,"value":1172},"(self) -> Generator[Any, ",{"type":38,"tag":97,"props":1174,"children":1175},{"style":157},[1176],{"type":44,"value":160},{"type":38,"tag":97,"props":1178,"children":1179},{"style":110},[1180],{"type":44,"value":989},{"type":38,"tag":97,"props":1182,"children":1183},{"style":157},[1184],{"type":44,"value":471},{"type":38,"tag":97,"props":1186,"children":1187},{"style":110},[1188],{"type":44,"value":1189},"]:\n",{"type":38,"tag":97,"props":1191,"children":1192},{"class":99,"line":200},[1193,1198,1203,1207,1211,1215,1220],{"type":38,"tag":97,"props":1194,"children":1195},{"style":104},[1196],{"type":44,"value":1197},"        for",{"type":38,"tag":97,"props":1199,"children":1200},{"style":110},[1201],{"type":44,"value":1202}," num ",{"type":38,"tag":97,"props":1204,"children":1205},{"style":104},[1206],{"type":44,"value":631},{"type":38,"tag":97,"props":1208,"children":1209},{"style":157},[1210],{"type":44,"value":636},{"type":38,"tag":97,"props":1212,"children":1213},{"style":110},[1214],{"type":44,"value":641},{"type":38,"tag":97,"props":1216,"children":1217},{"style":157},[1218],{"type":44,"value":1219},"5",{"type":38,"tag":97,"props":1221,"children":1222},{"style":110},[1223],{"type":44,"value":1224},"):\n",{"type":38,"tag":97,"props":1226,"children":1227},{"class":99,"line":208},[1228,1233],{"type":38,"tag":97,"props":1229,"children":1230},{"style":157},[1231],{"type":44,"value":1232},"            print",{"type":38,"tag":97,"props":1234,"children":1235},{"style":110},[1236],{"type":44,"value":1237},"(num)\n",{"type":38,"tag":97,"props":1239,"children":1240},{"class":99,"line":237},[1241,1246],{"type":38,"tag":97,"props":1242,"children":1243},{"style":104},[1244],{"type":44,"value":1245},"            yield",{"type":38,"tag":97,"props":1247,"children":1248},{"style":157},[1249],{"type":44,"value":1250}," None\n",{"type":38,"tag":97,"props":1252,"children":1253},{"class":99,"line":250},[1254,1259],{"type":38,"tag":97,"props":1255,"children":1256},{"style":104},[1257],{"type":44,"value":1258},"        return",{"type":38,"tag":97,"props":1260,"children":1261},{"style":157},[1262],{"type":44,"value":788},{"type":38,"tag":97,"props":1264,"children":1265},{"class":99,"line":258},[1266],{"type":38,"tag":97,"props":1267,"children":1268},{"emptyLinePlaceholder":5},[1269],{"type":44,"value":122},{"type":38,"tag":97,"props":1271,"children":1272},{"class":99,"line":266},[1273],{"type":38,"tag":97,"props":1274,"children":1275},{"emptyLinePlaceholder":5},[1276],{"type":44,"value":122},{"type":38,"tag":97,"props":1278,"children":1279},{"class":99,"line":295},[1280,1284,1288,1292,1296,1300],{"type":38,"tag":97,"props":1281,"children":1282},{"style":104},[1283],{"type":44,"value":32},{"type":38,"tag":97,"props":1285,"children":1286},{"style":104},[1287],{"type":44,"value":143},{"type":38,"tag":97,"props":1289,"children":1290},{"style":146},[1291],{"type":44,"value":222},{"type":38,"tag":97,"props":1293,"children":1294},{"style":110},[1295],{"type":44,"value":154},{"type":38,"tag":97,"props":1297,"children":1298},{"style":157},[1299],{"type":44,"value":160},{"type":38,"tag":97,"props":1301,"children":1302},{"style":110},[1303],{"type":44,"value":165},{"type":38,"tag":97,"props":1305,"children":1306},{"class":99,"line":527},[1307,1311],{"type":38,"tag":97,"props":1308,"children":1309},{"style":104},[1310],{"type":44,"value":174},{"type":38,"tag":97,"props":1312,"children":1313},{"style":110},[1314],{"type":44,"value":1315}," Await()\n",{"type":38,"tag":97,"props":1317,"children":1318},{"class":99,"line":552},[1319],{"type":38,"tag":97,"props":1320,"children":1321},{"emptyLinePlaceholder":5},[1322],{"type":44,"value":122},{"type":38,"tag":97,"props":1324,"children":1325},{"class":99,"line":560},[1326],{"type":38,"tag":97,"props":1327,"children":1328},{"emptyLinePlaceholder":5},[1329],{"type":44,"value":122},{"type":38,"tag":97,"props":1331,"children":1332},{"class":99,"line":568},[1333,1337,1341,1345,1349],{"type":38,"tag":97,"props":1334,"children":1335},{"style":104},[1336],{"type":44,"value":272},{"type":38,"tag":97,"props":1338,"children":1339},{"style":157},[1340],{"type":44,"value":277},{"type":38,"tag":97,"props":1342,"children":1343},{"style":104},[1344],{"type":44,"value":282},{"type":38,"tag":97,"props":1346,"children":1347},{"style":285},[1348],{"type":44,"value":288},{"type":38,"tag":97,"props":1350,"children":1351},{"style":110},[1352],{"type":44,"value":165},{"type":38,"tag":97,"props":1354,"children":1355},{"class":99,"line":596},[1356],{"type":38,"tag":97,"props":1357,"children":1358},{"style":110},[1359],{"type":44,"value":301},{"type":38,"tag":97,"props":1361,"children":1362},{"class":99,"line":654},[1363],{"type":38,"tag":97,"props":1364,"children":1365},{"emptyLinePlaceholder":5},[1366],{"type":44,"value":122},{"type":38,"tag":97,"props":1368,"children":1369},{"class":99,"line":662},[1370],{"type":38,"tag":97,"props":1371,"children":1373},{"style":1372},"--shiki-default:#6A737D;--shiki-dark:#6A737D",[1374],{"type":44,"value":1375},"# ❯ poetry run python main3.py\n",{"type":38,"tag":97,"props":1377,"children":1378},{"class":99,"line":670},[1379],{"type":38,"tag":97,"props":1380,"children":1381},{"style":1372},[1382],{"type":44,"value":1383},"# 0\n",{"type":38,"tag":97,"props":1385,"children":1386},{"class":99,"line":694},[1387],{"type":38,"tag":97,"props":1388,"children":1389},{"style":1372},[1390],{"type":44,"value":1391},"# 1\n",{"type":38,"tag":97,"props":1393,"children":1395},{"class":99,"line":1394},23,[1396],{"type":38,"tag":97,"props":1397,"children":1398},{"style":1372},[1399],{"type":44,"value":1400},"# 2\n",{"type":38,"tag":97,"props":1402,"children":1404},{"class":99,"line":1403},24,[1405],{"type":38,"tag":97,"props":1406,"children":1407},{"style":1372},[1408],{"type":44,"value":1409},"# 3\n",{"type":38,"tag":97,"props":1411,"children":1413},{"class":99,"line":1412},25,[1414],{"type":38,"tag":97,"props":1415,"children":1416},{"style":1372},[1417],{"type":44,"value":1418},"# 4\n",{"type":38,"tag":714,"props":1420,"children":1421},{},[1422],{"type":38,"tag":54,"props":1423,"children":1424},{},[1425,1431,1433,1438,1440,1446,1448,1453],{"type":38,"tag":47,"props":1426,"children":1428},{"className":1427},[],[1429],{"type":44,"value":1430},"Await",{"type":44,"value":1432},"객체를 곧바로 ",{"type":38,"tag":47,"props":1434,"children":1436},{"className":1435},[],[1437],{"type":44,"value":312},{"type":44,"value":1439},"에서 사용하지 않고,\n",{"type":38,"tag":47,"props":1441,"children":1443},{"className":1442},[],[1444],{"type":44,"value":1445},"main",{"type":44,"value":1447},"함수에서 생성하여 사용하는 이유는,\n",{"type":38,"tag":47,"props":1449,"children":1451},{"className":1450},[],[1452],{"type":44,"value":312},{"type":44,"value":1454},"에서 코루틴이 아니면 에러를 발생시키기 때문이다.",{"type":38,"tag":54,"props":1456,"children":1457},{},[1458,1460,1465,1466,1471],{"type":44,"value":1459},"즉, ",{"type":38,"tag":47,"props":1461,"children":1463},{"className":1462},[],[1464],{"type":44,"value":32},{"type":44,"value":989},{"type":38,"tag":47,"props":1467,"children":1469},{"className":1468},[],[1470],{"type":44,"value":71},{"type":44,"value":1472},"은 사실 제너레이터를 활용한\n컨텍스트 스위칭에 대한 문법 설탕이라는 것을 알 수 있다.",{"type":38,"tag":54,"props":1474,"children":1475},{},[1476,1478,1484],{"type":44,"value":1477},"이러한 문법 설탕이 추가되기 전까지는,\n제너레이터 문법인 ",{"type":38,"tag":47,"props":1479,"children":1481},{"className":1480},[],[1482],{"type":44,"value":1483},"yield from",{"type":44,"value":1485},"을 사용했다.",{"type":38,"tag":54,"props":1487,"children":1488},{},[1489,1491,1496,1498,1504,1505,1511,1513,1518,1519,1524],{"type":44,"value":1490},"물론 이러한 사실은 알면 좋지만 별로 중요하지 않다.\n대부분의 경우 ",{"type":38,"tag":47,"props":1492,"children":1494},{"className":1493},[],[1495],{"type":44,"value":1053},{"type":44,"value":1497},"를 직접 정의하기는 커녕\n",{"type":38,"tag":47,"props":1499,"children":1501},{"className":1500},[],[1502],{"type":44,"value":1503},"Future",{"type":44,"value":65},{"type":38,"tag":47,"props":1506,"children":1508},{"className":1507},[],[1509],{"type":44,"value":1510},"Task",{"type":44,"value":1512},"도 구경하기 어려우며,\n",{"type":38,"tag":47,"props":1514,"children":1516},{"className":1515},[],[1517],{"type":44,"value":32},{"type":44,"value":65},{"type":38,"tag":47,"props":1520,"children":1522},{"className":1521},[],[1523],{"type":44,"value":71},{"type":44,"value":1525},"을 사용한 코루틴만 사용할 것이다.",{"type":38,"tag":966,"props":1527,"children":1529},{"id":1528},"콜백-형태의-future",[1530,1532],{"type":44,"value":1531},"콜백 형태의 ",{"type":38,"tag":47,"props":1533,"children":1535},{"className":1534},[],[1536],{"type":44,"value":1503},{"type":38,"tag":54,"props":1538,"children":1539},{},[1540,1545,1547,1552,1554,1560,1561,1566],{"type":38,"tag":47,"props":1541,"children":1543},{"className":1542},[],[1544],{"type":44,"value":52},{"type":44,"value":1546},"의 ",{"type":38,"tag":47,"props":1548,"children":1550},{"className":1549},[],[1551],{"type":44,"value":1503},{"type":44,"value":1553},"는 ",{"type":38,"tag":47,"props":1555,"children":1557},{"className":1556},[],[1558],{"type":44,"value":1559},"concurrent.futures",{"type":44,"value":1546},{"type":38,"tag":47,"props":1562,"children":1564},{"className":1563},[],[1565],{"type":44,"value":1503},{"type":44,"value":1567},"를 본따 만들어졌다.",{"type":38,"tag":54,"props":1569,"children":1570},{},[1571,1576,1577,1582],{"type":38,"tag":47,"props":1572,"children":1574},{"className":1573},[],[1575],{"type":44,"value":1559},{"type":44,"value":1546},{"type":38,"tag":47,"props":1578,"children":1580},{"className":1579},[],[1581],{"type":44,"value":1503},{"type":44,"value":1583},"는 쓰레드를 제어하기 위해 만들어졌고,\n멀티쓰레드 환경의 비동기 제어가 싱글쓰레드 환경으로 확장된 것으로 볼 수도 있다.",{"type":38,"tag":54,"props":1585,"children":1586},{},[1587,1589,1594],{"type":44,"value":1588},"앞서 말했듯이, 대부분의 경우 ",{"type":38,"tag":47,"props":1590,"children":1592},{"className":1591},[],[1593],{"type":44,"value":1503},{"type":44,"value":1595},"에 대해 알 필요가 없고,\n구버전 파이썬을 사용한다면 모를까, 이제는 사용할 일도 없는 객체다.",{"type":38,"tag":966,"props":1597,"children":1599},{"id":1598},"future를-상속받는-task",[1600,1605,1607],{"type":38,"tag":47,"props":1601,"children":1603},{"className":1602},[],[1604],{"type":44,"value":1503},{"type":44,"value":1606},"를 상속받는 ",{"type":38,"tag":47,"props":1608,"children":1610},{"className":1609},[],[1611],{"type":44,"value":1510},{"type":38,"tag":54,"props":1613,"children":1614},{},[1615,1620,1621,1626,1628,1633,1635,1640,1641,1647,1648,1654],{"type":38,"tag":47,"props":1616,"children":1618},{"className":1617},[],[1619],{"type":44,"value":1510},{"type":44,"value":1553},{"type":38,"tag":47,"props":1622,"children":1624},{"className":1623},[],[1625],{"type":44,"value":1503},{"type":44,"value":1627},"를 상속받아 구현한 ",{"type":38,"tag":47,"props":1629,"children":1631},{"className":1630},[],[1632],{"type":44,"value":1033},{"type":44,"value":1634},"한 객체다.\n",{"type":38,"tag":47,"props":1636,"children":1638},{"className":1637},[],[1639],{"type":44,"value":1510},{"type":44,"value":1553},{"type":38,"tag":47,"props":1642,"children":1644},{"className":1643},[],[1645],{"type":44,"value":1646},"js",{"type":44,"value":1546},{"type":38,"tag":47,"props":1649,"children":1651},{"className":1650},[],[1652],{"type":44,"value":1653},"Promise",{"type":44,"value":1655},"처럼, 생성됐다면 이미 이벤트루프에 예약된 상태다.",{"type":38,"tag":714,"props":1657,"children":1658},{},[1659],{"type":38,"tag":54,"props":1660,"children":1661},{},[1662,1667],{"type":38,"tag":47,"props":1663,"children":1665},{"className":1664},[],[1666],{"type":44,"value":1503},{"type":44,"value":1668},"는 생성했지만, 이벤트루프에 예약되어 있지 않을 수 있다.",{"type":38,"tag":54,"props":1670,"children":1671},{},[1672],{"type":44,"value":1673},"따라서 다음과 같은 코드는, 정상적으로 실행된다.",{"type":38,"tag":87,"props":1675,"children":1678},{"className":89,"code":1676,"filename":1677,"language":27,"meta":28,"style":28},"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -> None:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n\n\nasync def main() -> None:\n    coro = test()\n    _ = asyncio.create_task(coro)\n    logger.info(\"before sleep\")\n    await asyncio.sleep(2)\n    logger.info(\"after sleep\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n#  ❯ poetry run python main4.py\n#  before sleep\n#  start\n#  done!\n#  after sleep\n","main4.py",[1679],{"type":38,"tag":47,"props":1680,"children":1681},{"__ignoreMap":28},[1682,1693,1704,1715,1722,1737,1752,1759,1766,1773,1800,1816,1835,1851,1858,1865,1892,1908,1925,1941,1961,1977,1984,1991,2014,2021,2030,2039,2048,2057],{"type":38,"tag":97,"props":1683,"children":1684},{"class":99,"line":100},[1685,1689],{"type":38,"tag":97,"props":1686,"children":1687},{"style":104},[1688],{"type":44,"value":107},{"type":38,"tag":97,"props":1690,"children":1691},{"style":110},[1692],{"type":44,"value":113},{"type":38,"tag":97,"props":1694,"children":1695},{"class":99,"line":116},[1696,1700],{"type":38,"tag":97,"props":1697,"children":1698},{"style":104},[1699],{"type":44,"value":107},{"type":38,"tag":97,"props":1701,"children":1702},{"style":110},[1703],{"type":44,"value":358},{"type":38,"tag":97,"props":1705,"children":1706},{"class":99,"line":125},[1707,1711],{"type":38,"tag":97,"props":1708,"children":1709},{"style":104},[1710],{"type":44,"value":107},{"type":38,"tag":97,"props":1712,"children":1713},{"style":110},[1714],{"type":44,"value":382},{"type":38,"tag":97,"props":1716,"children":1717},{"class":99,"line":133},[1718],{"type":38,"tag":97,"props":1719,"children":1720},{"emptyLinePlaceholder":5},[1721],{"type":44,"value":122},{"type":38,"tag":97,"props":1723,"children":1724},{"class":99,"line":168},[1725,1729,1733],{"type":38,"tag":97,"props":1726,"children":1727},{"style":110},[1728],{"type":44,"value":397},{"type":38,"tag":97,"props":1730,"children":1731},{"style":104},[1732],{"type":44,"value":402},{"type":38,"tag":97,"props":1734,"children":1735},{"style":110},[1736],{"type":44,"value":407},{"type":38,"tag":97,"props":1738,"children":1739},{"class":99,"line":192},[1740,1744,1748],{"type":38,"tag":97,"props":1741,"children":1742},{"style":110},[1743],{"type":44,"value":415},{"type":38,"tag":97,"props":1745,"children":1746},{"style":157},[1747],{"type":44,"value":420},{"type":38,"tag":97,"props":1749,"children":1750},{"style":110},[1751],{"type":44,"value":189},{"type":38,"tag":97,"props":1753,"children":1754},{"class":99,"line":200},[1755],{"type":38,"tag":97,"props":1756,"children":1757},{"style":110},[1758],{"type":44,"value":432},{"type":38,"tag":97,"props":1760,"children":1761},{"class":99,"line":208},[1762],{"type":38,"tag":97,"props":1763,"children":1764},{"emptyLinePlaceholder":5},[1765],{"type":44,"value":122},{"type":38,"tag":97,"props":1767,"children":1768},{"class":99,"line":237},[1769],{"type":38,"tag":97,"props":1770,"children":1771},{"emptyLinePlaceholder":5},[1772],{"type":44,"value":122},{"type":38,"tag":97,"props":1774,"children":1775},{"class":99,"line":250},[1776,1780,1784,1788,1792,1796],{"type":38,"tag":97,"props":1777,"children":1778},{"style":104},[1779],{"type":44,"value":32},{"type":38,"tag":97,"props":1781,"children":1782},{"style":104},[1783],{"type":44,"value":143},{"type":38,"tag":97,"props":1785,"children":1786},{"style":146},[1787],{"type":44,"value":149},{"type":38,"tag":97,"props":1789,"children":1790},{"style":110},[1791],{"type":44,"value":154},{"type":38,"tag":97,"props":1793,"children":1794},{"style":157},[1795],{"type":44,"value":160},{"type":38,"tag":97,"props":1797,"children":1798},{"style":110},[1799],{"type":44,"value":165},{"type":38,"tag":97,"props":1801,"children":1802},{"class":99,"line":258},[1803,1807,1812],{"type":38,"tag":97,"props":1804,"children":1805},{"style":110},[1806],{"type":44,"value":492},{"type":38,"tag":97,"props":1808,"children":1809},{"style":285},[1810],{"type":44,"value":1811},"\"start\"",{"type":38,"tag":97,"props":1813,"children":1814},{"style":110},[1815],{"type":44,"value":189},{"type":38,"tag":97,"props":1817,"children":1818},{"class":99,"line":266},[1819,1823,1827,1831],{"type":38,"tag":97,"props":1820,"children":1821},{"style":104},[1822],{"type":44,"value":174},{"type":38,"tag":97,"props":1824,"children":1825},{"style":110},[1826],{"type":44,"value":179},{"type":38,"tag":97,"props":1828,"children":1829},{"style":157},[1830],{"type":44,"value":184},{"type":38,"tag":97,"props":1832,"children":1833},{"style":110},[1834],{"type":44,"value":189},{"type":38,"tag":97,"props":1836,"children":1837},{"class":99,"line":295},[1838,1842,1847],{"type":38,"tag":97,"props":1839,"children":1840},{"style":110},[1841],{"type":44,"value":492},{"type":38,"tag":97,"props":1843,"children":1844},{"style":285},[1845],{"type":44,"value":1846},"\"done!\"",{"type":38,"tag":97,"props":1848,"children":1849},{"style":110},[1850],{"type":44,"value":189},{"type":38,"tag":97,"props":1852,"children":1853},{"class":99,"line":527},[1854],{"type":38,"tag":97,"props":1855,"children":1856},{"emptyLinePlaceholder":5},[1857],{"type":44,"value":122},{"type":38,"tag":97,"props":1859,"children":1860},{"class":99,"line":552},[1861],{"type":38,"tag":97,"props":1862,"children":1863},{"emptyLinePlaceholder":5},[1864],{"type":44,"value":122},{"type":38,"tag":97,"props":1866,"children":1867},{"class":99,"line":560},[1868,1872,1876,1880,1884,1888],{"type":38,"tag":97,"props":1869,"children":1870},{"style":104},[1871],{"type":44,"value":32},{"type":38,"tag":97,"props":1873,"children":1874},{"style":104},[1875],{"type":44,"value":143},{"type":38,"tag":97,"props":1877,"children":1878},{"style":146},[1879],{"type":44,"value":222},{"type":38,"tag":97,"props":1881,"children":1882},{"style":110},[1883],{"type":44,"value":154},{"type":38,"tag":97,"props":1885,"children":1886},{"style":157},[1887],{"type":44,"value":160},{"type":38,"tag":97,"props":1889,"children":1890},{"style":110},[1891],{"type":44,"value":165},{"type":38,"tag":97,"props":1893,"children":1894},{"class":99,"line":568},[1895,1900,1904],{"type":38,"tag":97,"props":1896,"children":1897},{"style":110},[1898],{"type":44,"value":1899},"    coro ",{"type":38,"tag":97,"props":1901,"children":1902},{"style":104},[1903],{"type":44,"value":402},{"type":38,"tag":97,"props":1905,"children":1906},{"style":110},[1907],{"type":44,"value":247},{"type":38,"tag":97,"props":1909,"children":1910},{"class":99,"line":596},[1911,1916,1920],{"type":38,"tag":97,"props":1912,"children":1913},{"style":110},[1914],{"type":44,"value":1915},"    _ ",{"type":38,"tag":97,"props":1917,"children":1918},{"style":104},[1919],{"type":44,"value":402},{"type":38,"tag":97,"props":1921,"children":1922},{"style":110},[1923],{"type":44,"value":1924}," asyncio.create_task(coro)\n",{"type":38,"tag":97,"props":1926,"children":1927},{"class":99,"line":654},[1928,1932,1937],{"type":38,"tag":97,"props":1929,"children":1930},{"style":110},[1931],{"type":44,"value":492},{"type":38,"tag":97,"props":1933,"children":1934},{"style":285},[1935],{"type":44,"value":1936},"\"before sleep\"",{"type":38,"tag":97,"props":1938,"children":1939},{"style":110},[1940],{"type":44,"value":189},{"type":38,"tag":97,"props":1942,"children":1943},{"class":99,"line":662},[1944,1948,1952,1957],{"type":38,"tag":97,"props":1945,"children":1946},{"style":104},[1947],{"type":44,"value":174},{"type":38,"tag":97,"props":1949,"children":1950},{"style":110},[1951],{"type":44,"value":179},{"type":38,"tag":97,"props":1953,"children":1954},{"style":157},[1955],{"type":44,"value":1956},"2",{"type":38,"tag":97,"props":1958,"children":1959},{"style":110},[1960],{"type":44,"value":189},{"type":38,"tag":97,"props":1962,"children":1963},{"class":99,"line":670},[1964,1968,1973],{"type":38,"tag":97,"props":1965,"children":1966},{"style":110},[1967],{"type":44,"value":492},{"type":38,"tag":97,"props":1969,"children":1970},{"style":285},[1971],{"type":44,"value":1972},"\"after sleep\"",{"type":38,"tag":97,"props":1974,"children":1975},{"style":110},[1976],{"type":44,"value":189},{"type":38,"tag":97,"props":1978,"children":1979},{"class":99,"line":694},[1980],{"type":38,"tag":97,"props":1981,"children":1982},{"emptyLinePlaceholder":5},[1983],{"type":44,"value":122},{"type":38,"tag":97,"props":1985,"children":1986},{"class":99,"line":1394},[1987],{"type":38,"tag":97,"props":1988,"children":1989},{"emptyLinePlaceholder":5},[1990],{"type":44,"value":122},{"type":38,"tag":97,"props":1992,"children":1993},{"class":99,"line":1403},[1994,1998,2002,2006,2010],{"type":38,"tag":97,"props":1995,"children":1996},{"style":104},[1997],{"type":44,"value":272},{"type":38,"tag":97,"props":1999,"children":2000},{"style":157},[2001],{"type":44,"value":277},{"type":38,"tag":97,"props":2003,"children":2004},{"style":104},[2005],{"type":44,"value":282},{"type":38,"tag":97,"props":2007,"children":2008},{"style":285},[2009],{"type":44,"value":288},{"type":38,"tag":97,"props":2011,"children":2012},{"style":110},[2013],{"type":44,"value":165},{"type":38,"tag":97,"props":2015,"children":2016},{"class":99,"line":1412},[2017],{"type":38,"tag":97,"props":2018,"children":2019},{"style":110},[2020],{"type":44,"value":301},{"type":38,"tag":97,"props":2022,"children":2024},{"class":99,"line":2023},26,[2025],{"type":38,"tag":97,"props":2026,"children":2027},{"style":1372},[2028],{"type":44,"value":2029},"#  ❯ poetry run python main4.py\n",{"type":38,"tag":97,"props":2031,"children":2033},{"class":99,"line":2032},27,[2034],{"type":38,"tag":97,"props":2035,"children":2036},{"style":1372},[2037],{"type":44,"value":2038},"#  before sleep\n",{"type":38,"tag":97,"props":2040,"children":2042},{"class":99,"line":2041},28,[2043],{"type":38,"tag":97,"props":2044,"children":2045},{"style":1372},[2046],{"type":44,"value":2047},"#  start\n",{"type":38,"tag":97,"props":2049,"children":2051},{"class":99,"line":2050},29,[2052],{"type":38,"tag":97,"props":2053,"children":2054},{"style":1372},[2055],{"type":44,"value":2056},"#  done!\n",{"type":38,"tag":97,"props":2058,"children":2060},{"class":99,"line":2059},30,[2061],{"type":38,"tag":97,"props":2062,"children":2063},{"style":1372},[2064],{"type":44,"value":2065},"#  after sleep\n",{"type":38,"tag":54,"props":2067,"children":2068},{},[2069,2074,2076,2081,2082,2087,2089,2095,2097,2102,2104,2110],{"type":38,"tag":47,"props":2070,"children":2072},{"className":2071},[],[2073],{"type":44,"value":71},{"type":44,"value":2075}," 또는 ",{"type":38,"tag":47,"props":2077,"children":2079},{"className":2078},[],[2080],{"type":44,"value":1483},{"type":44,"value":2075},{"type":38,"tag":47,"props":2083,"children":2085},{"className":2084},[],[2086],{"type":44,"value":1053},{"type":44,"value":2088},"메소드를 직업 호출하지 않았지만,\n",{"type":38,"tag":47,"props":2090,"children":2092},{"className":2091},[],[2093],{"type":44,"value":2094},"test",{"type":44,"value":2096},"로 정의된 비동기 함수는 정상적으로 실행됐다.\n왜냐하면 신규 ",{"type":38,"tag":47,"props":2098,"children":2100},{"className":2099},[],[2101],{"type":44,"value":1510},{"type":44,"value":2103},"객체를 생성했고,\n이후 ",{"type":38,"tag":47,"props":2105,"children":2107},{"className":2106},[],[2108],{"type":44,"value":2109},"await asyncio.sleep(2)",{"type":44,"value":2111},"를 통해 콘텍스트 스위칭을 유발했기 때문이다.",{"type":38,"tag":54,"props":2113,"children":2114},{},[2115],{"type":44,"value":2116},"정리하자면 다음과 같다.",{"type":38,"tag":2118,"props":2119,"children":2120},"ol",{},[2121,2132,2145,2171,2190,2200,2212],{"type":38,"tag":2122,"props":2123,"children":2124},"li",{},[2125,2130],{"type":38,"tag":47,"props":2126,"children":2128},{"className":2127},[],[2129],{"type":44,"value":2094},{"type":44,"value":2131},"함수를 실행하여 코루틴을 생성한다.",{"type":38,"tag":2122,"props":2133,"children":2134},{},[2135,2137,2143],{"type":44,"value":2136},"생성한 코루틴을 ",{"type":38,"tag":47,"props":2138,"children":2140},{"className":2139},[],[2141],{"type":44,"value":2142},"asyncio.create_task",{"type":44,"value":2144},"함수를 사용하여, 이벤트루프에 예약한다.",{"type":38,"tag":2122,"props":2146,"children":2147},{},[2148,2154,2156,2161,2163,2169],{"type":38,"tag":47,"props":2149,"children":2151},{"className":2150},[],[2152],{"type":44,"value":2153},"create_task",{"type":44,"value":2155},"함수가 ",{"type":38,"tag":47,"props":2157,"children":2159},{"className":2158},[],[2160],{"type":44,"value":1510},{"type":44,"value":2162},"객체를 반환한다.(의도적으로 ",{"type":38,"tag":47,"props":2164,"children":2166},{"className":2165},[],[2167],{"type":44,"value":2168},"_",{"type":44,"value":2170},"를 사용하여 무시하였다.)",{"type":38,"tag":2122,"props":2172,"children":2173},{},[2174,2176,2181,2183,2188],{"type":44,"value":2175},"아직 ",{"type":38,"tag":47,"props":2177,"children":2179},{"className":2178},[],[2180],{"type":44,"value":1445},{"type":44,"value":2182},"함수가 콘텍스트를 점유중이므로, 앞서 생성한 ",{"type":38,"tag":47,"props":2184,"children":2186},{"className":2185},[],[2187],{"type":44,"value":1510},{"type":44,"value":2189},"는 실행되지 않았다.",{"type":38,"tag":2122,"props":2191,"children":2192},{},[2193,2198],{"type":38,"tag":47,"props":2194,"children":2196},{"className":2195},[],[2197],{"type":44,"value":2109},{"type":44,"value":2199},"를 통해, 콘텍스트 점유를 해제한다.",{"type":38,"tag":2122,"props":2201,"children":2202},{},[2203,2205,2210],{"type":44,"value":2204},"앞서 생성한 ",{"type":38,"tag":47,"props":2206,"children":2208},{"className":2207},[],[2209],{"type":44,"value":1510},{"type":44,"value":2211},"로 콘텍스트가 변경된다.",{"type":38,"tag":2122,"props":2213,"children":2214},{},[2215],{"type":44,"value":2216},"이하 생략",{"type":38,"tag":54,"props":2218,"children":2219},{},[2220,2221,2226,2228,2233],{"type":44,"value":1459},{"type":38,"tag":47,"props":2222,"children":2224},{"className":2223},[],[2225],{"type":44,"value":71},{"type":44,"value":2227},"이 콘텍스트 스위칭에 대한 문법 설탕이자,\n동시에 ",{"type":38,"tag":47,"props":2229,"children":2231},{"className":2230},[],[2232],{"type":44,"value":1510},{"type":44,"value":2234},"를 생성하는 문법 설탕인 것을 알 수 있다.",{"type":38,"tag":54,"props":2236,"children":2237},{},[2238],{"type":44,"value":2239},"여기서 한가지 궁금한 점이 생긴다.",{"type":38,"tag":2118,"props":2241,"children":2242},{},[2243,2255,2267],{"type":38,"tag":2122,"props":2244,"children":2245},{},[2246,2248,2253],{"type":44,"value":2247},"한번 생성한 코루틴은, 한번만 ",{"type":38,"tag":47,"props":2249,"children":2251},{"className":2250},[],[2252],{"type":44,"value":71},{"type":44,"value":2254},"으로 대기할 수 있다.",{"type":38,"tag":2122,"props":2256,"children":2257},{},[2258,2260,2265],{"type":44,"value":2259},"한번 생성한 코루틴은, ",{"type":38,"tag":47,"props":2261,"children":2263},{"className":2262},[],[2264],{"type":44,"value":1510},{"type":44,"value":2266},"를 생성할 수 있다.",{"type":38,"tag":2122,"props":2268,"children":2269},{},[2270,2275,2276,2281,2283,2288],{"type":38,"tag":47,"props":2271,"children":2273},{"className":2272},[],[2274],{"type":44,"value":1510},{"type":44,"value":1553},{"type":38,"tag":47,"props":2277,"children":2279},{"className":2278},[],[2280],{"type":44,"value":1033},{"type":44,"value":2282},"이므로 ",{"type":38,"tag":47,"props":2284,"children":2286},{"className":2285},[],[2287],{"type":44,"value":71},{"type":44,"value":2254},{"type":38,"tag":54,"props":2290,"children":2291},{},[2292,2294,2299,2301,2307,2308,2313],{"type":44,"value":2293},"이전의 ",{"type":38,"tag":47,"props":2295,"children":2297},{"className":2296},[],[2298],{"type":44,"value":1677},{"type":44,"value":2300}," 스크립트에서 코루틴 ",{"type":38,"tag":47,"props":2302,"children":2304},{"className":2303},[],[2305],{"type":44,"value":2306},"coro",{"type":44,"value":1553},{"type":38,"tag":47,"props":2309,"children":2311},{"className":2310},[],[2312],{"type":44,"value":2153},{"type":44,"value":2314},"함수를 통해\n이미 실행된 상태다.",{"type":38,"tag":54,"props":2316,"children":2317},{},[2318,2320,2325],{"type":44,"value":2319},"이후 생성한 ",{"type":38,"tag":47,"props":2321,"children":2323},{"className":2322},[],[2324],{"type":44,"value":1510},{"type":44,"value":2326},"를 대기하는 것이 가능할까?",{"type":38,"tag":87,"props":2328,"children":2331},{"className":89,"code":2329,"filename":2330,"language":27,"meta":28,"style":28},"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -> int:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n    return 1\n\n\nasync def main() -> None:\n    coro = test()\n    task = asyncio.create_task(coro)\n\n    logger.info(\"before sleep\")\n\n    queue = asyncio.Queue(1)\n    task.add_done_callback(lambda task: queue.put_nowait(task.result()))\n\n    value = await task\n\n    logger.info(\"after sleep\")\n\n    result = task.result()\n    queue_value = await queue.get()\n    logger.info(\"value=%r, result=%r, queue_value=%r\", value, result, queue_value)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main5.py\n# before sleep\n# start\n# done!\n# after sleep\n# value=1, result=1, queue_value=1\n","main5.py",[2332],{"type":38,"tag":47,"props":2333,"children":2334},{"__ignoreMap":28},[2335,2346,2357,2368,2375,2390,2405,2412,2419,2426,2453,2468,2487,2502,2514,2521,2528,2555,2570,2586,2593,2608,2615,2640,2658,2665,2687,2694,2709,2716,2733,2755,2800,2808,2816,2840,2848,2857,2866,2875,2884,2893],{"type":38,"tag":97,"props":2336,"children":2337},{"class":99,"line":100},[2338,2342],{"type":38,"tag":97,"props":2339,"children":2340},{"style":104},[2341],{"type":44,"value":107},{"type":38,"tag":97,"props":2343,"children":2344},{"style":110},[2345],{"type":44,"value":113},{"type":38,"tag":97,"props":2347,"children":2348},{"class":99,"line":116},[2349,2353],{"type":38,"tag":97,"props":2350,"children":2351},{"style":104},[2352],{"type":44,"value":107},{"type":38,"tag":97,"props":2354,"children":2355},{"style":110},[2356],{"type":44,"value":358},{"type":38,"tag":97,"props":2358,"children":2359},{"class":99,"line":125},[2360,2364],{"type":38,"tag":97,"props":2361,"children":2362},{"style":104},[2363],{"type":44,"value":107},{"type":38,"tag":97,"props":2365,"children":2366},{"style":110},[2367],{"type":44,"value":382},{"type":38,"tag":97,"props":2369,"children":2370},{"class":99,"line":133},[2371],{"type":38,"tag":97,"props":2372,"children":2373},{"emptyLinePlaceholder":5},[2374],{"type":44,"value":122},{"type":38,"tag":97,"props":2376,"children":2377},{"class":99,"line":168},[2378,2382,2386],{"type":38,"tag":97,"props":2379,"children":2380},{"style":110},[2381],{"type":44,"value":397},{"type":38,"tag":97,"props":2383,"children":2384},{"style":104},[2385],{"type":44,"value":402},{"type":38,"tag":97,"props":2387,"children":2388},{"style":110},[2389],{"type":44,"value":407},{"type":38,"tag":97,"props":2391,"children":2392},{"class":99,"line":192},[2393,2397,2401],{"type":38,"tag":97,"props":2394,"children":2395},{"style":110},[2396],{"type":44,"value":415},{"type":38,"tag":97,"props":2398,"children":2399},{"style":157},[2400],{"type":44,"value":420},{"type":38,"tag":97,"props":2402,"children":2403},{"style":110},[2404],{"type":44,"value":189},{"type":38,"tag":97,"props":2406,"children":2407},{"class":99,"line":200},[2408],{"type":38,"tag":97,"props":2409,"children":2410},{"style":110},[2411],{"type":44,"value":432},{"type":38,"tag":97,"props":2413,"children":2414},{"class":99,"line":208},[2415],{"type":38,"tag":97,"props":2416,"children":2417},{"emptyLinePlaceholder":5},[2418],{"type":44,"value":122},{"type":38,"tag":97,"props":2420,"children":2421},{"class":99,"line":237},[2422],{"type":38,"tag":97,"props":2423,"children":2424},{"emptyLinePlaceholder":5},[2425],{"type":44,"value":122},{"type":38,"tag":97,"props":2427,"children":2428},{"class":99,"line":250},[2429,2433,2437,2441,2445,2449],{"type":38,"tag":97,"props":2430,"children":2431},{"style":104},[2432],{"type":44,"value":32},{"type":38,"tag":97,"props":2434,"children":2435},{"style":104},[2436],{"type":44,"value":143},{"type":38,"tag":97,"props":2438,"children":2439},{"style":146},[2440],{"type":44,"value":149},{"type":38,"tag":97,"props":2442,"children":2443},{"style":110},[2444],{"type":44,"value":154},{"type":38,"tag":97,"props":2446,"children":2447},{"style":157},[2448],{"type":44,"value":471},{"type":38,"tag":97,"props":2450,"children":2451},{"style":110},[2452],{"type":44,"value":165},{"type":38,"tag":97,"props":2454,"children":2455},{"class":99,"line":258},[2456,2460,2464],{"type":38,"tag":97,"props":2457,"children":2458},{"style":110},[2459],{"type":44,"value":492},{"type":38,"tag":97,"props":2461,"children":2462},{"style":285},[2463],{"type":44,"value":1811},{"type":38,"tag":97,"props":2465,"children":2466},{"style":110},[2467],{"type":44,"value":189},{"type":38,"tag":97,"props":2469,"children":2470},{"class":99,"line":266},[2471,2475,2479,2483],{"type":38,"tag":97,"props":2472,"children":2473},{"style":104},[2474],{"type":44,"value":174},{"type":38,"tag":97,"props":2476,"children":2477},{"style":110},[2478],{"type":44,"value":179},{"type":38,"tag":97,"props":2480,"children":2481},{"style":157},[2482],{"type":44,"value":184},{"type":38,"tag":97,"props":2484,"children":2485},{"style":110},[2486],{"type":44,"value":189},{"type":38,"tag":97,"props":2488,"children":2489},{"class":99,"line":295},[2490,2494,2498],{"type":38,"tag":97,"props":2491,"children":2492},{"style":110},[2493],{"type":44,"value":492},{"type":38,"tag":97,"props":2495,"children":2496},{"style":285},[2497],{"type":44,"value":1846},{"type":38,"tag":97,"props":2499,"children":2500},{"style":110},[2501],{"type":44,"value":189},{"type":38,"tag":97,"props":2503,"children":2504},{"class":99,"line":527},[2505,2510],{"type":38,"tag":97,"props":2506,"children":2507},{"style":104},[2508],{"type":44,"value":2509},"    return",{"type":38,"tag":97,"props":2511,"children":2512},{"style":157},[2513],{"type":44,"value":788},{"type":38,"tag":97,"props":2515,"children":2516},{"class":99,"line":552},[2517],{"type":38,"tag":97,"props":2518,"children":2519},{"emptyLinePlaceholder":5},[2520],{"type":44,"value":122},{"type":38,"tag":97,"props":2522,"children":2523},{"class":99,"line":560},[2524],{"type":38,"tag":97,"props":2525,"children":2526},{"emptyLinePlaceholder":5},[2527],{"type":44,"value":122},{"type":38,"tag":97,"props":2529,"children":2530},{"class":99,"line":568},[2531,2535,2539,2543,2547,2551],{"type":38,"tag":97,"props":2532,"children":2533},{"style":104},[2534],{"type":44,"value":32},{"type":38,"tag":97,"props":2536,"children":2537},{"style":104},[2538],{"type":44,"value":143},{"type":38,"tag":97,"props":2540,"children":2541},{"style":146},[2542],{"type":44,"value":222},{"type":38,"tag":97,"props":2544,"children":2545},{"style":110},[2546],{"type":44,"value":154},{"type":38,"tag":97,"props":2548,"children":2549},{"style":157},[2550],{"type":44,"value":160},{"type":38,"tag":97,"props":2552,"children":2553},{"style":110},[2554],{"type":44,"value":165},{"type":38,"tag":97,"props":2556,"children":2557},{"class":99,"line":596},[2558,2562,2566],{"type":38,"tag":97,"props":2559,"children":2560},{"style":110},[2561],{"type":44,"value":1899},{"type":38,"tag":97,"props":2563,"children":2564},{"style":104},[2565],{"type":44,"value":402},{"type":38,"tag":97,"props":2567,"children":2568},{"style":110},[2569],{"type":44,"value":247},{"type":38,"tag":97,"props":2571,"children":2572},{"class":99,"line":654},[2573,2578,2582],{"type":38,"tag":97,"props":2574,"children":2575},{"style":110},[2576],{"type":44,"value":2577},"    task ",{"type":38,"tag":97,"props":2579,"children":2580},{"style":104},[2581],{"type":44,"value":402},{"type":38,"tag":97,"props":2583,"children":2584},{"style":110},[2585],{"type":44,"value":1924},{"type":38,"tag":97,"props":2587,"children":2588},{"class":99,"line":662},[2589],{"type":38,"tag":97,"props":2590,"children":2591},{"emptyLinePlaceholder":5},[2592],{"type":44,"value":122},{"type":38,"tag":97,"props":2594,"children":2595},{"class":99,"line":670},[2596,2600,2604],{"type":38,"tag":97,"props":2597,"children":2598},{"style":110},[2599],{"type":44,"value":492},{"type":38,"tag":97,"props":2601,"children":2602},{"style":285},[2603],{"type":44,"value":1936},{"type":38,"tag":97,"props":2605,"children":2606},{"style":110},[2607],{"type":44,"value":189},{"type":38,"tag":97,"props":2609,"children":2610},{"class":99,"line":694},[2611],{"type":38,"tag":97,"props":2612,"children":2613},{"emptyLinePlaceholder":5},[2614],{"type":44,"value":122},{"type":38,"tag":97,"props":2616,"children":2617},{"class":99,"line":1394},[2618,2623,2627,2632,2636],{"type":38,"tag":97,"props":2619,"children":2620},{"style":110},[2621],{"type":44,"value":2622},"    queue ",{"type":38,"tag":97,"props":2624,"children":2625},{"style":104},[2626],{"type":44,"value":402},{"type":38,"tag":97,"props":2628,"children":2629},{"style":110},[2630],{"type":44,"value":2631}," asyncio.Queue(",{"type":38,"tag":97,"props":2633,"children":2634},{"style":157},[2635],{"type":44,"value":184},{"type":38,"tag":97,"props":2637,"children":2638},{"style":110},[2639],{"type":44,"value":189},{"type":38,"tag":97,"props":2641,"children":2642},{"class":99,"line":1403},[2643,2648,2653],{"type":38,"tag":97,"props":2644,"children":2645},{"style":110},[2646],{"type":44,"value":2647},"    task.add_done_callback(",{"type":38,"tag":97,"props":2649,"children":2650},{"style":104},[2651],{"type":44,"value":2652},"lambda",{"type":38,"tag":97,"props":2654,"children":2655},{"style":110},[2656],{"type":44,"value":2657}," task: queue.put_nowait(task.result()))\n",{"type":38,"tag":97,"props":2659,"children":2660},{"class":99,"line":1412},[2661],{"type":38,"tag":97,"props":2662,"children":2663},{"emptyLinePlaceholder":5},[2664],{"type":44,"value":122},{"type":38,"tag":97,"props":2666,"children":2667},{"class":99,"line":2023},[2668,2673,2677,2682],{"type":38,"tag":97,"props":2669,"children":2670},{"style":110},[2671],{"type":44,"value":2672},"    value ",{"type":38,"tag":97,"props":2674,"children":2675},{"style":104},[2676],{"type":44,"value":402},{"type":38,"tag":97,"props":2678,"children":2679},{"style":104},[2680],{"type":44,"value":2681}," await",{"type":38,"tag":97,"props":2683,"children":2684},{"style":110},[2685],{"type":44,"value":2686}," task\n",{"type":38,"tag":97,"props":2688,"children":2689},{"class":99,"line":2032},[2690],{"type":38,"tag":97,"props":2691,"children":2692},{"emptyLinePlaceholder":5},[2693],{"type":44,"value":122},{"type":38,"tag":97,"props":2695,"children":2696},{"class":99,"line":2041},[2697,2701,2705],{"type":38,"tag":97,"props":2698,"children":2699},{"style":110},[2700],{"type":44,"value":492},{"type":38,"tag":97,"props":2702,"children":2703},{"style":285},[2704],{"type":44,"value":1972},{"type":38,"tag":97,"props":2706,"children":2707},{"style":110},[2708],{"type":44,"value":189},{"type":38,"tag":97,"props":2710,"children":2711},{"class":99,"line":2050},[2712],{"type":38,"tag":97,"props":2713,"children":2714},{"emptyLinePlaceholder":5},[2715],{"type":44,"value":122},{"type":38,"tag":97,"props":2717,"children":2718},{"class":99,"line":2059},[2719,2724,2728],{"type":38,"tag":97,"props":2720,"children":2721},{"style":110},[2722],{"type":44,"value":2723},"    result ",{"type":38,"tag":97,"props":2725,"children":2726},{"style":104},[2727],{"type":44,"value":402},{"type":38,"tag":97,"props":2729,"children":2730},{"style":110},[2731],{"type":44,"value":2732}," task.result()\n",{"type":38,"tag":97,"props":2734,"children":2736},{"class":99,"line":2735},31,[2737,2742,2746,2750],{"type":38,"tag":97,"props":2738,"children":2739},{"style":110},[2740],{"type":44,"value":2741},"    queue_value ",{"type":38,"tag":97,"props":2743,"children":2744},{"style":104},[2745],{"type":44,"value":402},{"type":38,"tag":97,"props":2747,"children":2748},{"style":104},[2749],{"type":44,"value":2681},{"type":38,"tag":97,"props":2751,"children":2752},{"style":110},[2753],{"type":44,"value":2754}," queue.get()\n",{"type":38,"tag":97,"props":2756,"children":2758},{"class":99,"line":2757},32,[2759,2763,2768,2773,2778,2782,2787,2791,2795],{"type":38,"tag":97,"props":2760,"children":2761},{"style":110},[2762],{"type":44,"value":492},{"type":38,"tag":97,"props":2764,"children":2765},{"style":285},[2766],{"type":44,"value":2767},"\"value=",{"type":38,"tag":97,"props":2769,"children":2770},{"style":157},[2771],{"type":44,"value":2772},"%r",{"type":38,"tag":97,"props":2774,"children":2775},{"style":285},[2776],{"type":44,"value":2777},", result=",{"type":38,"tag":97,"props":2779,"children":2780},{"style":157},[2781],{"type":44,"value":2772},{"type":38,"tag":97,"props":2783,"children":2784},{"style":285},[2785],{"type":44,"value":2786},", queue_value=",{"type":38,"tag":97,"props":2788,"children":2789},{"style":157},[2790],{"type":44,"value":2772},{"type":38,"tag":97,"props":2792,"children":2793},{"style":285},[2794],{"type":44,"value":507},{"type":38,"tag":97,"props":2796,"children":2797},{"style":110},[2798],{"type":44,"value":2799},", value, result, queue_value)\n",{"type":38,"tag":97,"props":2801,"children":2803},{"class":99,"line":2802},33,[2804],{"type":38,"tag":97,"props":2805,"children":2806},{"emptyLinePlaceholder":5},[2807],{"type":44,"value":122},{"type":38,"tag":97,"props":2809,"children":2811},{"class":99,"line":2810},34,[2812],{"type":38,"tag":97,"props":2813,"children":2814},{"emptyLinePlaceholder":5},[2815],{"type":44,"value":122},{"type":38,"tag":97,"props":2817,"children":2819},{"class":99,"line":2818},35,[2820,2824,2828,2832,2836],{"type":38,"tag":97,"props":2821,"children":2822},{"style":104},[2823],{"type":44,"value":272},{"type":38,"tag":97,"props":2825,"children":2826},{"style":157},[2827],{"type":44,"value":277},{"type":38,"tag":97,"props":2829,"children":2830},{"style":104},[2831],{"type":44,"value":282},{"type":38,"tag":97,"props":2833,"children":2834},{"style":285},[2835],{"type":44,"value":288},{"type":38,"tag":97,"props":2837,"children":2838},{"style":110},[2839],{"type":44,"value":165},{"type":38,"tag":97,"props":2841,"children":2843},{"class":99,"line":2842},36,[2844],{"type":38,"tag":97,"props":2845,"children":2846},{"style":110},[2847],{"type":44,"value":301},{"type":38,"tag":97,"props":2849,"children":2851},{"class":99,"line":2850},37,[2852],{"type":38,"tag":97,"props":2853,"children":2854},{"style":1372},[2855],{"type":44,"value":2856},"# ❯ poetry run python main5.py\n",{"type":38,"tag":97,"props":2858,"children":2860},{"class":99,"line":2859},38,[2861],{"type":38,"tag":97,"props":2862,"children":2863},{"style":1372},[2864],{"type":44,"value":2865},"# before sleep\n",{"type":38,"tag":97,"props":2867,"children":2869},{"class":99,"line":2868},39,[2870],{"type":38,"tag":97,"props":2871,"children":2872},{"style":1372},[2873],{"type":44,"value":2874},"# start\n",{"type":38,"tag":97,"props":2876,"children":2878},{"class":99,"line":2877},40,[2879],{"type":38,"tag":97,"props":2880,"children":2881},{"style":1372},[2882],{"type":44,"value":2883},"# done!\n",{"type":38,"tag":97,"props":2885,"children":2887},{"class":99,"line":2886},41,[2888],{"type":38,"tag":97,"props":2889,"children":2890},{"style":1372},[2891],{"type":44,"value":2892},"# after sleep\n",{"type":38,"tag":97,"props":2894,"children":2896},{"class":99,"line":2895},42,[2897],{"type":38,"tag":97,"props":2898,"children":2899},{"style":1372},[2900],{"type":44,"value":2901},"# value=1, result=1, queue_value=1\n",{"type":38,"tag":54,"props":2903,"children":2904},{},[2905,2907,2912],{"type":44,"value":2906},"가능하다. ",{"type":38,"tag":47,"props":2908,"children":2910},{"className":2909},[],[2911],{"type":44,"value":1510},{"type":44,"value":2913},"는 코루틴을 이벤트 루프에 예약하는 객체지, 코루틴 그 자체가 아니기 때문이다.",{"type":38,"tag":54,"props":2915,"children":2916},{},[2917,2919,2924,2926,2931,2933,2939,2941,2947],{"type":44,"value":2918},"그렇기에 단 한번 ",{"type":38,"tag":47,"props":2920,"children":2922},{"className":2921},[],[2923],{"type":44,"value":71},{"type":44,"value":2925},"으로 대기할 수 있다.\n동시에 ",{"type":38,"tag":47,"props":2927,"children":2929},{"className":2928},[],[2930],{"type":44,"value":1503},{"type":44,"value":2932},"이기에, ",{"type":38,"tag":47,"props":2934,"children":2936},{"className":2935},[],[2937],{"type":44,"value":2938},"result",{"type":44,"value":2940}," 메소드를 사용하여 값을 가져올 수도 있으며\n",{"type":38,"tag":47,"props":2942,"children":2944},{"className":2943},[],[2945],{"type":44,"value":2946},"add_done_callback",{"type":44,"value":2948}," 메소드를 사용하여, 콜백을 추가할 수도 있다.",{"type":38,"tag":39,"props":2950,"children":2952},{"id":2951},"future와-task는-언제-사용할까",[2953,2958,2959,2964],{"type":38,"tag":47,"props":2954,"children":2956},{"className":2955},[],[2957],{"type":44,"value":1503},{"type":44,"value":65},{"type":38,"tag":47,"props":2960,"children":2962},{"className":2961},[],[2963],{"type":44,"value":1510},{"type":44,"value":2965},"는 언제 사용할까",{"type":38,"tag":54,"props":2967,"children":2968},{},[2969,2974,2975,2980],{"type":38,"tag":47,"props":2970,"children":2972},{"className":2971},[],[2973],{"type":44,"value":1503},{"type":44,"value":2075},{"type":38,"tag":47,"props":2976,"children":2978},{"className":2977},[],[2979],{"type":44,"value":1510},{"type":44,"value":2981},"는 대부분의 경우 직접 사용할 일이 없다.\n하지만 저수준 api를 다뤄야 하거나, 효율적인 코드를 목표로 한다면,\n필연적으로 다뤄야 하는 순간이 온다.",{"type":38,"tag":966,"props":2983,"children":2985},{"id":2984},"task가-필요한-상황",[2986,2991],{"type":38,"tag":47,"props":2987,"children":2989},{"className":2988},[],[2990],{"type":44,"value":1510},{"type":44,"value":2992},"가 필요한 상황",{"type":38,"tag":87,"props":2994,"children":2997},{"className":89,"code":2995,"filename":2996,"language":27,"meta":28,"style":28},"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom typing import Awaitable\n\n\nasync def test(value: int) -> int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod > rand:\n        error_msg = f\"mod > {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -> int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\nasync def main() -> None:\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    result = await asyncio.gather(*(shield(coro) for coro in coros))\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6.py\n# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n","main6.py",[2998],{"type":38,"tag":47,"props":2999,"children":3000},{"__ignoreMap":28},[3001,3023,3030,3041,3052,3072,3079,3086,3122,3149,3182,3201,3224,3266,3284,3296,3303,3310,3358,3370,3386,3402,3413,3420,3427,3454,3524,3570,3583,3590,3597,3620,3627,3635],{"type":38,"tag":97,"props":3002,"children":3003},{"class":99,"line":100},[3004,3008,3013,3018],{"type":38,"tag":97,"props":3005,"children":3006},{"style":104},[3007],{"type":44,"value":1109},{"type":38,"tag":97,"props":3009,"children":3010},{"style":157},[3011],{"type":44,"value":3012}," __future__",{"type":38,"tag":97,"props":3014,"children":3015},{"style":104},[3016],{"type":44,"value":3017}," import",{"type":38,"tag":97,"props":3019,"children":3020},{"style":110},[3021],{"type":44,"value":3022}," annotations\n",{"type":38,"tag":97,"props":3024,"children":3025},{"class":99,"line":116},[3026],{"type":38,"tag":97,"props":3027,"children":3028},{"emptyLinePlaceholder":5},[3029],{"type":44,"value":122},{"type":38,"tag":97,"props":3031,"children":3032},{"class":99,"line":125},[3033,3037],{"type":38,"tag":97,"props":3034,"children":3035},{"style":104},[3036],{"type":44,"value":107},{"type":38,"tag":97,"props":3038,"children":3039},{"style":110},[3040],{"type":44,"value":113},{"type":38,"tag":97,"props":3042,"children":3043},{"class":99,"line":133},[3044,3048],{"type":38,"tag":97,"props":3045,"children":3046},{"style":104},[3047],{"type":44,"value":107},{"type":38,"tag":97,"props":3049,"children":3050},{"style":110},[3051],{"type":44,"value":370},{"type":38,"tag":97,"props":3053,"children":3054},{"class":99,"line":168},[3055,3059,3063,3067],{"type":38,"tag":97,"props":3056,"children":3057},{"style":104},[3058],{"type":44,"value":1109},{"type":38,"tag":97,"props":3060,"children":3061},{"style":110},[3062],{"type":44,"value":1114},{"type":38,"tag":97,"props":3064,"children":3065},{"style":104},[3066],{"type":44,"value":107},{"type":38,"tag":97,"props":3068,"children":3069},{"style":110},[3070],{"type":44,"value":3071}," Awaitable\n",{"type":38,"tag":97,"props":3073,"children":3074},{"class":99,"line":192},[3075],{"type":38,"tag":97,"props":3076,"children":3077},{"emptyLinePlaceholder":5},[3078],{"type":44,"value":122},{"type":38,"tag":97,"props":3080,"children":3081},{"class":99,"line":200},[3082],{"type":38,"tag":97,"props":3083,"children":3084},{"emptyLinePlaceholder":5},[3085],{"type":44,"value":122},{"type":38,"tag":97,"props":3087,"children":3088},{"class":99,"line":208},[3089,3093,3097,3101,3106,3110,3114,3118],{"type":38,"tag":97,"props":3090,"children":3091},{"style":104},[3092],{"type":44,"value":32},{"type":38,"tag":97,"props":3094,"children":3095},{"style":104},[3096],{"type":44,"value":143},{"type":38,"tag":97,"props":3098,"children":3099},{"style":146},[3100],{"type":44,"value":149},{"type":38,"tag":97,"props":3102,"children":3103},{"style":110},[3104],{"type":44,"value":3105},"(value: ",{"type":38,"tag":97,"props":3107,"children":3108},{"style":157},[3109],{"type":44,"value":471},{"type":38,"tag":97,"props":3111,"children":3112},{"style":110},[3113],{"type":44,"value":476},{"type":38,"tag":97,"props":3115,"children":3116},{"style":157},[3117],{"type":44,"value":471},{"type":38,"tag":97,"props":3119,"children":3120},{"style":110},[3121],{"type":44,"value":165},{"type":38,"tag":97,"props":3123,"children":3124},{"class":99,"line":237},[3125,3130,3134,3139,3144],{"type":38,"tag":97,"props":3126,"children":3127},{"style":110},[3128],{"type":44,"value":3129},"    mod ",{"type":38,"tag":97,"props":3131,"children":3132},{"style":104},[3133],{"type":44,"value":402},{"type":38,"tag":97,"props":3135,"children":3136},{"style":110},[3137],{"type":44,"value":3138}," value ",{"type":38,"tag":97,"props":3140,"children":3141},{"style":104},[3142],{"type":44,"value":3143},"%",{"type":38,"tag":97,"props":3145,"children":3146},{"style":157},[3147],{"type":44,"value":3148}," 10\n",{"type":38,"tag":97,"props":3150,"children":3151},{"class":99,"line":250},[3152,3157,3161,3166,3170,3174,3178],{"type":38,"tag":97,"props":3153,"children":3154},{"style":110},[3155],{"type":44,"value":3156},"    rand ",{"type":38,"tag":97,"props":3158,"children":3159},{"style":104},[3160],{"type":44,"value":402},{"type":38,"tag":97,"props":3162,"children":3163},{"style":110},[3164],{"type":44,"value":3165}," random.randint(",{"type":38,"tag":97,"props":3167,"children":3168},{"style":157},[3169],{"type":44,"value":184},{"type":38,"tag":97,"props":3171,"children":3172},{"style":110},[3173],{"type":44,"value":989},{"type":38,"tag":97,"props":3175,"children":3176},{"style":157},[3177],{"type":44,"value":646},{"type":38,"tag":97,"props":3179,"children":3180},{"style":110},[3181],{"type":44,"value":189},{"type":38,"tag":97,"props":3183,"children":3184},{"class":99,"line":258},[3185,3189,3193,3197],{"type":38,"tag":97,"props":3186,"children":3187},{"style":104},[3188],{"type":44,"value":174},{"type":38,"tag":97,"props":3190,"children":3191},{"style":110},[3192],{"type":44,"value":179},{"type":38,"tag":97,"props":3194,"children":3195},{"style":157},[3196],{"type":44,"value":184},{"type":38,"tag":97,"props":3198,"children":3199},{"style":110},[3200],{"type":44,"value":189},{"type":38,"tag":97,"props":3202,"children":3203},{"class":99,"line":266},[3204,3209,3214,3219],{"type":38,"tag":97,"props":3205,"children":3206},{"style":104},[3207],{"type":44,"value":3208},"    if",{"type":38,"tag":97,"props":3210,"children":3211},{"style":110},[3212],{"type":44,"value":3213}," mod ",{"type":38,"tag":97,"props":3215,"children":3216},{"style":104},[3217],{"type":44,"value":3218},">",{"type":38,"tag":97,"props":3220,"children":3221},{"style":110},[3222],{"type":44,"value":3223}," rand:\n",{"type":38,"tag":97,"props":3225,"children":3226},{"class":99,"line":295},[3227,3232,3236,3241,3246,3251,3256,3261],{"type":38,"tag":97,"props":3228,"children":3229},{"style":110},[3230],{"type":44,"value":3231},"        error_msg ",{"type":38,"tag":97,"props":3233,"children":3234},{"style":104},[3235],{"type":44,"value":402},{"type":38,"tag":97,"props":3237,"children":3238},{"style":104},[3239],{"type":44,"value":3240}," f",{"type":38,"tag":97,"props":3242,"children":3243},{"style":285},[3244],{"type":44,"value":3245},"\"mod > ",{"type":38,"tag":97,"props":3247,"children":3248},{"style":157},[3249],{"type":44,"value":3250},"{",{"type":38,"tag":97,"props":3252,"children":3253},{"style":110},[3254],{"type":44,"value":3255},"rand",{"type":38,"tag":97,"props":3257,"children":3258},{"style":157},[3259],{"type":44,"value":3260},"}",{"type":38,"tag":97,"props":3262,"children":3263},{"style":285},[3264],{"type":44,"value":3265},"\"\n",{"type":38,"tag":97,"props":3267,"children":3268},{"class":99,"line":527},[3269,3274,3279],{"type":38,"tag":97,"props":3270,"children":3271},{"style":104},[3272],{"type":44,"value":3273},"        raise",{"type":38,"tag":97,"props":3275,"children":3276},{"style":157},[3277],{"type":44,"value":3278}," ValueError",{"type":38,"tag":97,"props":3280,"children":3281},{"style":110},[3282],{"type":44,"value":3283},"(error_msg)\n",{"type":38,"tag":97,"props":3285,"children":3286},{"class":99,"line":552},[3287,3291],{"type":38,"tag":97,"props":3288,"children":3289},{"style":104},[3290],{"type":44,"value":2509},{"type":38,"tag":97,"props":3292,"children":3293},{"style":110},[3294],{"type":44,"value":3295}," mod\n",{"type":38,"tag":97,"props":3297,"children":3298},{"class":99,"line":560},[3299],{"type":38,"tag":97,"props":3300,"children":3301},{"emptyLinePlaceholder":5},[3302],{"type":44,"value":122},{"type":38,"tag":97,"props":3304,"children":3305},{"class":99,"line":568},[3306],{"type":38,"tag":97,"props":3307,"children":3308},{"emptyLinePlaceholder":5},[3309],{"type":44,"value":122},{"type":38,"tag":97,"props":3311,"children":3312},{"class":99,"line":596},[3313,3317,3321,3326,3331,3335,3340,3344,3349,3354],{"type":38,"tag":97,"props":3314,"children":3315},{"style":104},[3316],{"type":44,"value":32},{"type":38,"tag":97,"props":3318,"children":3319},{"style":104},[3320],{"type":44,"value":143},{"type":38,"tag":97,"props":3322,"children":3323},{"style":146},[3324],{"type":44,"value":3325}," shield",{"type":38,"tag":97,"props":3327,"children":3328},{"style":110},[3329],{"type":44,"value":3330},"(coro: Awaitable[",{"type":38,"tag":97,"props":3332,"children":3333},{"style":157},[3334],{"type":44,"value":471},{"type":38,"tag":97,"props":3336,"children":3337},{"style":110},[3338],{"type":44,"value":3339},"]) -> ",{"type":38,"tag":97,"props":3341,"children":3342},{"style":157},[3343],{"type":44,"value":471},{"type":38,"tag":97,"props":3345,"children":3346},{"style":104},[3347],{"type":44,"value":3348}," |",{"type":38,"tag":97,"props":3350,"children":3351},{"style":157},[3352],{"type":44,"value":3353}," None",{"type":38,"tag":97,"props":3355,"children":3356},{"style":110},[3357],{"type":44,"value":165},{"type":38,"tag":97,"props":3359,"children":3360},{"class":99,"line":654},[3361,3366],{"type":38,"tag":97,"props":3362,"children":3363},{"style":104},[3364],{"type":44,"value":3365},"    try",{"type":38,"tag":97,"props":3367,"children":3368},{"style":110},[3369],{"type":44,"value":165},{"type":38,"tag":97,"props":3371,"children":3372},{"class":99,"line":662},[3373,3377,3381],{"type":38,"tag":97,"props":3374,"children":3375},{"style":104},[3376],{"type":44,"value":1258},{"type":38,"tag":97,"props":3378,"children":3379},{"style":104},[3380],{"type":44,"value":2681},{"type":38,"tag":97,"props":3382,"children":3383},{"style":110},[3384],{"type":44,"value":3385}," asyncio.shield(coro)\n",{"type":38,"tag":97,"props":3387,"children":3388},{"class":99,"line":670},[3389,3394,3398],{"type":38,"tag":97,"props":3390,"children":3391},{"style":104},[3392],{"type":44,"value":3393},"    except",{"type":38,"tag":97,"props":3395,"children":3396},{"style":157},[3397],{"type":44,"value":3278},{"type":38,"tag":97,"props":3399,"children":3400},{"style":110},[3401],{"type":44,"value":165},{"type":38,"tag":97,"props":3403,"children":3404},{"class":99,"line":694},[3405,3409],{"type":38,"tag":97,"props":3406,"children":3407},{"style":104},[3408],{"type":44,"value":1258},{"type":38,"tag":97,"props":3410,"children":3411},{"style":157},[3412],{"type":44,"value":1250},{"type":38,"tag":97,"props":3414,"children":3415},{"class":99,"line":1394},[3416],{"type":38,"tag":97,"props":3417,"children":3418},{"emptyLinePlaceholder":5},[3419],{"type":44,"value":122},{"type":38,"tag":97,"props":3421,"children":3422},{"class":99,"line":1403},[3423],{"type":38,"tag":97,"props":3424,"children":3425},{"emptyLinePlaceholder":5},[3426],{"type":44,"value":122},{"type":38,"tag":97,"props":3428,"children":3429},{"class":99,"line":1412},[3430,3434,3438,3442,3446,3450],{"type":38,"tag":97,"props":3431,"children":3432},{"style":104},[3433],{"type":44,"value":32},{"type":38,"tag":97,"props":3435,"children":3436},{"style":104},[3437],{"type":44,"value":143},{"type":38,"tag":97,"props":3439,"children":3440},{"style":146},[3441],{"type":44,"value":222},{"type":38,"tag":97,"props":3443,"children":3444},{"style":110},[3445],{"type":44,"value":154},{"type":38,"tag":97,"props":3447,"children":3448},{"style":157},[3449],{"type":44,"value":160},{"type":38,"tag":97,"props":3451,"children":3452},{"style":110},[3453],{"type":44,"value":165},{"type":38,"tag":97,"props":3455,"children":3456},{"class":99,"line":2023},[3457,3462,3466,3471,3475,3480,3484,3489,3494,3498,3503,3507,3511,3515,3519],{"type":38,"tag":97,"props":3458,"children":3459},{"style":110},[3460],{"type":44,"value":3461},"    coros ",{"type":38,"tag":97,"props":3463,"children":3464},{"style":104},[3465],{"type":44,"value":402},{"type":38,"tag":97,"props":3467,"children":3468},{"style":110},[3469],{"type":44,"value":3470}," [test(",{"type":38,"tag":97,"props":3472,"children":3473},{"style":157},[3474],{"type":44,"value":471},{"type":38,"tag":97,"props":3476,"children":3477},{"style":110},[3478],{"type":44,"value":3479},"(random.random() ",{"type":38,"tag":97,"props":3481,"children":3482},{"style":104},[3483],{"type":44,"value":611},{"type":38,"tag":97,"props":3485,"children":3486},{"style":157},[3487],{"type":44,"value":3488}," 100",{"type":38,"tag":97,"props":3490,"children":3491},{"style":110},[3492],{"type":44,"value":3493},")) ",{"type":38,"tag":97,"props":3495,"children":3496},{"style":104},[3497],{"type":44,"value":621},{"type":38,"tag":97,"props":3499,"children":3500},{"style":110},[3501],{"type":44,"value":3502}," _ ",{"type":38,"tag":97,"props":3504,"children":3505},{"style":104},[3506],{"type":44,"value":631},{"type":38,"tag":97,"props":3508,"children":3509},{"style":157},[3510],{"type":44,"value":636},{"type":38,"tag":97,"props":3512,"children":3513},{"style":110},[3514],{"type":44,"value":641},{"type":38,"tag":97,"props":3516,"children":3517},{"style":157},[3518],{"type":44,"value":646},{"type":38,"tag":97,"props":3520,"children":3521},{"style":110},[3522],{"type":44,"value":3523},")]\n",{"type":38,"tag":97,"props":3525,"children":3526},{"class":99,"line":2032},[3527,3531,3535,3539,3543,3547,3552,3556,3561,3565],{"type":38,"tag":97,"props":3528,"children":3529},{"style":110},[3530],{"type":44,"value":2723},{"type":38,"tag":97,"props":3532,"children":3533},{"style":104},[3534],{"type":44,"value":402},{"type":38,"tag":97,"props":3536,"children":3537},{"style":104},[3538],{"type":44,"value":2681},{"type":38,"tag":97,"props":3540,"children":3541},{"style":110},[3542],{"type":44,"value":606},{"type":38,"tag":97,"props":3544,"children":3545},{"style":104},[3546],{"type":44,"value":611},{"type":38,"tag":97,"props":3548,"children":3549},{"style":110},[3550],{"type":44,"value":3551},"(shield(coro) ",{"type":38,"tag":97,"props":3553,"children":3554},{"style":104},[3555],{"type":44,"value":621},{"type":38,"tag":97,"props":3557,"children":3558},{"style":110},[3559],{"type":44,"value":3560}," coro ",{"type":38,"tag":97,"props":3562,"children":3563},{"style":104},[3564],{"type":44,"value":631},{"type":38,"tag":97,"props":3566,"children":3567},{"style":110},[3568],{"type":44,"value":3569}," coros))\n",{"type":38,"tag":97,"props":3571,"children":3572},{"class":99,"line":2041},[3573,3578],{"type":38,"tag":97,"props":3574,"children":3575},{"style":157},[3576],{"type":44,"value":3577},"    print",{"type":38,"tag":97,"props":3579,"children":3580},{"style":110},[3581],{"type":44,"value":3582},"(result)\n",{"type":38,"tag":97,"props":3584,"children":3585},{"class":99,"line":2050},[3586],{"type":38,"tag":97,"props":3587,"children":3588},{"emptyLinePlaceholder":5},[3589],{"type":44,"value":122},{"type":38,"tag":97,"props":3591,"children":3592},{"class":99,"line":2059},[3593],{"type":38,"tag":97,"props":3594,"children":3595},{"emptyLinePlaceholder":5},[3596],{"type":44,"value":122},{"type":38,"tag":97,"props":3598,"children":3599},{"class":99,"line":2735},[3600,3604,3608,3612,3616],{"type":38,"tag":97,"props":3601,"children":3602},{"style":104},[3603],{"type":44,"value":272},{"type":38,"tag":97,"props":3605,"children":3606},{"style":157},[3607],{"type":44,"value":277},{"type":38,"tag":97,"props":3609,"children":3610},{"style":104},[3611],{"type":44,"value":282},{"type":38,"tag":97,"props":3613,"children":3614},{"style":285},[3615],{"type":44,"value":288},{"type":38,"tag":97,"props":3617,"children":3618},{"style":110},[3619],{"type":44,"value":165},{"type":38,"tag":97,"props":3621,"children":3622},{"class":99,"line":2757},[3623],{"type":38,"tag":97,"props":3624,"children":3625},{"style":110},[3626],{"type":44,"value":301},{"type":38,"tag":97,"props":3628,"children":3629},{"class":99,"line":2802},[3630],{"type":38,"tag":97,"props":3631,"children":3632},{"style":1372},[3633],{"type":44,"value":3634},"# ❯ poetry run python main6.py\n",{"type":38,"tag":97,"props":3636,"children":3637},{"class":99,"line":2810},[3638],{"type":38,"tag":97,"props":3639,"children":3640},{"style":1372},[3641],{"type":44,"value":3642},"# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n",{"type":38,"tag":54,"props":3644,"children":3645},{},[3646,3648,3653],{"type":44,"value":3647},"위와 같은 상황이 있을 때,\n",{"type":38,"tag":47,"props":3649,"children":3651},{"className":3650},[],[3652],{"type":44,"value":2094},{"type":44,"value":3654},"함수에서 에러가 발생하면 None값이 아닌 -1을 반환받고 싶다고 하자.",{"type":38,"tag":54,"props":3656,"children":3657},{},[3658,3660,3666,3668,3673],{"type":44,"value":3659},"가장 간단한 방법은 ",{"type":38,"tag":47,"props":3661,"children":3663},{"className":3662},[],[3664],{"type":44,"value":3665},"shield",{"type":44,"value":3667},"를 수정하는 것이고,\n그 다음으로는 ",{"type":38,"tag":47,"props":3669,"children":3671},{"className":3670},[],[3672],{"type":44,"value":2094},{"type":44,"value":3674},"를 수정하는 것이다.",{"type":38,"tag":54,"props":3676,"children":3677},{},[3678],{"type":44,"value":3679},"하지만 위 스크립트는 굉장히 간단하게 작성된 스크립트라 그런 것이고,\n손대면 손댈수록 너무 복잡해져서 수정하기 힘들거나,\n특수한 사정으로 인해 수정 자체가 불가능한 경우가 있다.",{"type":38,"tag":54,"props":3681,"children":3682},{},[3683,3685,3690],{"type":44,"value":3684},"그럴때 ",{"type":38,"tag":47,"props":3686,"children":3688},{"className":3687},[],[3689],{"type":44,"value":1510},{"type":44,"value":3691},"에 콜백을 추가하여 문제를 해결할 수 있다.",{"type":38,"tag":87,"props":3693,"children":3696},{"className":89,"code":3694,"filename":3695,"language":27,"meta":28,"style":28},"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom collections import deque\nfrom functools import partial\nfrom typing import Awaitable\n\n\nasync def test(value: int) -> int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod > rand:\n        error_msg = f\"mod > {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -> int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\ndef add(task: asyncio.Task[int], queue: asyncio.Queue[int]) -> None:\n    if task.exception():\n        queue.put_nowait(-1)\n        return\n    queue.put_nowait(task.result())\n\n\nasync def main() -> None:\n    queue = asyncio.Queue()\n    add_in_queue = partial(add, queue=queue)\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    tasks = deque()\n    for coro in coros:\n        task = asyncio.create_task(coro)\n        task.add_done_callback(add_in_queue)\n        tasks.append(task)\n\n    await asyncio.gather(*(shield(task) for task in tasks))\n    result = [queue.get_nowait() for _ in range(10)]\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6-2.py\n# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n","main6-2.py",[3697],{"type":38,"tag":47,"props":3698,"children":3699},{"__ignoreMap":28},[3700,3719,3726,3737,3748,3769,3790,3809,3816,3823,3858,3881,3912,3931,3950,3985,4000,4011,4018,4025,4068,4079,4094,4109,4120,4127,4134,4177,4189,4210,4218,4226,4233,4240,4267,4283,4315,4378,4395,4416,4432,4440,4448,4456,4495,4540,4552,4560,4568,4592,4600,4609],{"type":38,"tag":97,"props":3701,"children":3702},{"class":99,"line":100},[3703,3707,3711,3715],{"type":38,"tag":97,"props":3704,"children":3705},{"style":104},[3706],{"type":44,"value":1109},{"type":38,"tag":97,"props":3708,"children":3709},{"style":157},[3710],{"type":44,"value":3012},{"type":38,"tag":97,"props":3712,"children":3713},{"style":104},[3714],{"type":44,"value":3017},{"type":38,"tag":97,"props":3716,"children":3717},{"style":110},[3718],{"type":44,"value":3022},{"type":38,"tag":97,"props":3720,"children":3721},{"class":99,"line":116},[3722],{"type":38,"tag":97,"props":3723,"children":3724},{"emptyLinePlaceholder":5},[3725],{"type":44,"value":122},{"type":38,"tag":97,"props":3727,"children":3728},{"class":99,"line":125},[3729,3733],{"type":38,"tag":97,"props":3730,"children":3731},{"style":104},[3732],{"type":44,"value":107},{"type":38,"tag":97,"props":3734,"children":3735},{"style":110},[3736],{"type":44,"value":113},{"type":38,"tag":97,"props":3738,"children":3739},{"class":99,"line":133},[3740,3744],{"type":38,"tag":97,"props":3741,"children":3742},{"style":104},[3743],{"type":44,"value":107},{"type":38,"tag":97,"props":3745,"children":3746},{"style":110},[3747],{"type":44,"value":370},{"type":38,"tag":97,"props":3749,"children":3750},{"class":99,"line":168},[3751,3755,3760,3764],{"type":38,"tag":97,"props":3752,"children":3753},{"style":104},[3754],{"type":44,"value":1109},{"type":38,"tag":97,"props":3756,"children":3757},{"style":110},[3758],{"type":44,"value":3759}," collections ",{"type":38,"tag":97,"props":3761,"children":3762},{"style":104},[3763],{"type":44,"value":107},{"type":38,"tag":97,"props":3765,"children":3766},{"style":110},[3767],{"type":44,"value":3768}," deque\n",{"type":38,"tag":97,"props":3770,"children":3771},{"class":99,"line":192},[3772,3776,3781,3785],{"type":38,"tag":97,"props":3773,"children":3774},{"style":104},[3775],{"type":44,"value":1109},{"type":38,"tag":97,"props":3777,"children":3778},{"style":110},[3779],{"type":44,"value":3780}," functools ",{"type":38,"tag":97,"props":3782,"children":3783},{"style":104},[3784],{"type":44,"value":107},{"type":38,"tag":97,"props":3786,"children":3787},{"style":110},[3788],{"type":44,"value":3789}," partial\n",{"type":38,"tag":97,"props":3791,"children":3792},{"class":99,"line":200},[3793,3797,3801,3805],{"type":38,"tag":97,"props":3794,"children":3795},{"style":104},[3796],{"type":44,"value":1109},{"type":38,"tag":97,"props":3798,"children":3799},{"style":110},[3800],{"type":44,"value":1114},{"type":38,"tag":97,"props":3802,"children":3803},{"style":104},[3804],{"type":44,"value":107},{"type":38,"tag":97,"props":3806,"children":3807},{"style":110},[3808],{"type":44,"value":3071},{"type":38,"tag":97,"props":3810,"children":3811},{"class":99,"line":208},[3812],{"type":38,"tag":97,"props":3813,"children":3814},{"emptyLinePlaceholder":5},[3815],{"type":44,"value":122},{"type":38,"tag":97,"props":3817,"children":3818},{"class":99,"line":237},[3819],{"type":38,"tag":97,"props":3820,"children":3821},{"emptyLinePlaceholder":5},[3822],{"type":44,"value":122},{"type":38,"tag":97,"props":3824,"children":3825},{"class":99,"line":250},[3826,3830,3834,3838,3842,3846,3850,3854],{"type":38,"tag":97,"props":3827,"children":3828},{"style":104},[3829],{"type":44,"value":32},{"type":38,"tag":97,"props":3831,"children":3832},{"style":104},[3833],{"type":44,"value":143},{"type":38,"tag":97,"props":3835,"children":3836},{"style":146},[3837],{"type":44,"value":149},{"type":38,"tag":97,"props":3839,"children":3840},{"style":110},[3841],{"type":44,"value":3105},{"type":38,"tag":97,"props":3843,"children":3844},{"style":157},[3845],{"type":44,"value":471},{"type":38,"tag":97,"props":3847,"children":3848},{"style":110},[3849],{"type":44,"value":476},{"type":38,"tag":97,"props":3851,"children":3852},{"style":157},[3853],{"type":44,"value":471},{"type":38,"tag":97,"props":3855,"children":3856},{"style":110},[3857],{"type":44,"value":165},{"type":38,"tag":97,"props":3859,"children":3860},{"class":99,"line":258},[3861,3865,3869,3873,3877],{"type":38,"tag":97,"props":3862,"children":3863},{"style":110},[3864],{"type":44,"value":3129},{"type":38,"tag":97,"props":3866,"children":3867},{"style":104},[3868],{"type":44,"value":402},{"type":38,"tag":97,"props":3870,"children":3871},{"style":110},[3872],{"type":44,"value":3138},{"type":38,"tag":97,"props":3874,"children":3875},{"style":104},[3876],{"type":44,"value":3143},{"type":38,"tag":97,"props":3878,"children":3879},{"style":157},[3880],{"type":44,"value":3148},{"type":38,"tag":97,"props":3882,"children":3883},{"class":99,"line":266},[3884,3888,3892,3896,3900,3904,3908],{"type":38,"tag":97,"props":3885,"children":3886},{"style":110},[3887],{"type":44,"value":3156},{"type":38,"tag":97,"props":3889,"children":3890},{"style":104},[3891],{"type":44,"value":402},{"type":38,"tag":97,"props":3893,"children":3894},{"style":110},[3895],{"type":44,"value":3165},{"type":38,"tag":97,"props":3897,"children":3898},{"style":157},[3899],{"type":44,"value":184},{"type":38,"tag":97,"props":3901,"children":3902},{"style":110},[3903],{"type":44,"value":989},{"type":38,"tag":97,"props":3905,"children":3906},{"style":157},[3907],{"type":44,"value":646},{"type":38,"tag":97,"props":3909,"children":3910},{"style":110},[3911],{"type":44,"value":189},{"type":38,"tag":97,"props":3913,"children":3914},{"class":99,"line":295},[3915,3919,3923,3927],{"type":38,"tag":97,"props":3916,"children":3917},{"style":104},[3918],{"type":44,"value":174},{"type":38,"tag":97,"props":3920,"children":3921},{"style":110},[3922],{"type":44,"value":179},{"type":38,"tag":97,"props":3924,"children":3925},{"style":157},[3926],{"type":44,"value":184},{"type":38,"tag":97,"props":3928,"children":3929},{"style":110},[3930],{"type":44,"value":189},{"type":38,"tag":97,"props":3932,"children":3933},{"class":99,"line":527},[3934,3938,3942,3946],{"type":38,"tag":97,"props":3935,"children":3936},{"style":104},[3937],{"type":44,"value":3208},{"type":38,"tag":97,"props":3939,"children":3940},{"style":110},[3941],{"type":44,"value":3213},{"type":38,"tag":97,"props":3943,"children":3944},{"style":104},[3945],{"type":44,"value":3218},{"type":38,"tag":97,"props":3947,"children":3948},{"style":110},[3949],{"type":44,"value":3223},{"type":38,"tag":97,"props":3951,"children":3952},{"class":99,"line":552},[3953,3957,3961,3965,3969,3973,3977,3981],{"type":38,"tag":97,"props":3954,"children":3955},{"style":110},[3956],{"type":44,"value":3231},{"type":38,"tag":97,"props":3958,"children":3959},{"style":104},[3960],{"type":44,"value":402},{"type":38,"tag":97,"props":3962,"children":3963},{"style":104},[3964],{"type":44,"value":3240},{"type":38,"tag":97,"props":3966,"children":3967},{"style":285},[3968],{"type":44,"value":3245},{"type":38,"tag":97,"props":3970,"children":3971},{"style":157},[3972],{"type":44,"value":3250},{"type":38,"tag":97,"props":3974,"children":3975},{"style":110},[3976],{"type":44,"value":3255},{"type":38,"tag":97,"props":3978,"children":3979},{"style":157},[3980],{"type":44,"value":3260},{"type":38,"tag":97,"props":3982,"children":3983},{"style":285},[3984],{"type":44,"value":3265},{"type":38,"tag":97,"props":3986,"children":3987},{"class":99,"line":560},[3988,3992,3996],{"type":38,"tag":97,"props":3989,"children":3990},{"style":104},[3991],{"type":44,"value":3273},{"type":38,"tag":97,"props":3993,"children":3994},{"style":157},[3995],{"type":44,"value":3278},{"type":38,"tag":97,"props":3997,"children":3998},{"style":110},[3999],{"type":44,"value":3283},{"type":38,"tag":97,"props":4001,"children":4002},{"class":99,"line":568},[4003,4007],{"type":38,"tag":97,"props":4004,"children":4005},{"style":104},[4006],{"type":44,"value":2509},{"type":38,"tag":97,"props":4008,"children":4009},{"style":110},[4010],{"type":44,"value":3295},{"type":38,"tag":97,"props":4012,"children":4013},{"class":99,"line":596},[4014],{"type":38,"tag":97,"props":4015,"children":4016},{"emptyLinePlaceholder":5},[4017],{"type":44,"value":122},{"type":38,"tag":97,"props":4019,"children":4020},{"class":99,"line":654},[4021],{"type":38,"tag":97,"props":4022,"children":4023},{"emptyLinePlaceholder":5},[4024],{"type":44,"value":122},{"type":38,"tag":97,"props":4026,"children":4027},{"class":99,"line":662},[4028,4032,4036,4040,4044,4048,4052,4056,4060,4064],{"type":38,"tag":97,"props":4029,"children":4030},{"style":104},[4031],{"type":44,"value":32},{"type":38,"tag":97,"props":4033,"children":4034},{"style":104},[4035],{"type":44,"value":143},{"type":38,"tag":97,"props":4037,"children":4038},{"style":146},[4039],{"type":44,"value":3325},{"type":38,"tag":97,"props":4041,"children":4042},{"style":110},[4043],{"type":44,"value":3330},{"type":38,"tag":97,"props":4045,"children":4046},{"style":157},[4047],{"type":44,"value":471},{"type":38,"tag":97,"props":4049,"children":4050},{"style":110},[4051],{"type":44,"value":3339},{"type":38,"tag":97,"props":4053,"children":4054},{"style":157},[4055],{"type":44,"value":471},{"type":38,"tag":97,"props":4057,"children":4058},{"style":104},[4059],{"type":44,"value":3348},{"type":38,"tag":97,"props":4061,"children":4062},{"style":157},[4063],{"type":44,"value":3353},{"type":38,"tag":97,"props":4065,"children":4066},{"style":110},[4067],{"type":44,"value":165},{"type":38,"tag":97,"props":4069,"children":4070},{"class":99,"line":670},[4071,4075],{"type":38,"tag":97,"props":4072,"children":4073},{"style":104},[4074],{"type":44,"value":3365},{"type":38,"tag":97,"props":4076,"children":4077},{"style":110},[4078],{"type":44,"value":165},{"type":38,"tag":97,"props":4080,"children":4081},{"class":99,"line":694},[4082,4086,4090],{"type":38,"tag":97,"props":4083,"children":4084},{"style":104},[4085],{"type":44,"value":1258},{"type":38,"tag":97,"props":4087,"children":4088},{"style":104},[4089],{"type":44,"value":2681},{"type":38,"tag":97,"props":4091,"children":4092},{"style":110},[4093],{"type":44,"value":3385},{"type":38,"tag":97,"props":4095,"children":4096},{"class":99,"line":1394},[4097,4101,4105],{"type":38,"tag":97,"props":4098,"children":4099},{"style":104},[4100],{"type":44,"value":3393},{"type":38,"tag":97,"props":4102,"children":4103},{"style":157},[4104],{"type":44,"value":3278},{"type":38,"tag":97,"props":4106,"children":4107},{"style":110},[4108],{"type":44,"value":165},{"type":38,"tag":97,"props":4110,"children":4111},{"class":99,"line":1403},[4112,4116],{"type":38,"tag":97,"props":4113,"children":4114},{"style":104},[4115],{"type":44,"value":1258},{"type":38,"tag":97,"props":4117,"children":4118},{"style":157},[4119],{"type":44,"value":1250},{"type":38,"tag":97,"props":4121,"children":4122},{"class":99,"line":1412},[4123],{"type":38,"tag":97,"props":4124,"children":4125},{"emptyLinePlaceholder":5},[4126],{"type":44,"value":122},{"type":38,"tag":97,"props":4128,"children":4129},{"class":99,"line":2023},[4130],{"type":38,"tag":97,"props":4131,"children":4132},{"emptyLinePlaceholder":5},[4133],{"type":44,"value":122},{"type":38,"tag":97,"props":4135,"children":4136},{"class":99,"line":2032},[4137,4142,4147,4152,4156,4161,4165,4169,4173],{"type":38,"tag":97,"props":4138,"children":4139},{"style":104},[4140],{"type":44,"value":4141},"def",{"type":38,"tag":97,"props":4143,"children":4144},{"style":146},[4145],{"type":44,"value":4146}," add",{"type":38,"tag":97,"props":4148,"children":4149},{"style":110},[4150],{"type":44,"value":4151},"(task: asyncio.Task[",{"type":38,"tag":97,"props":4153,"children":4154},{"style":157},[4155],{"type":44,"value":471},{"type":38,"tag":97,"props":4157,"children":4158},{"style":110},[4159],{"type":44,"value":4160},"], queue: asyncio.Queue[",{"type":38,"tag":97,"props":4162,"children":4163},{"style":157},[4164],{"type":44,"value":471},{"type":38,"tag":97,"props":4166,"children":4167},{"style":110},[4168],{"type":44,"value":3339},{"type":38,"tag":97,"props":4170,"children":4171},{"style":157},[4172],{"type":44,"value":160},{"type":38,"tag":97,"props":4174,"children":4175},{"style":110},[4176],{"type":44,"value":165},{"type":38,"tag":97,"props":4178,"children":4179},{"class":99,"line":2041},[4180,4184],{"type":38,"tag":97,"props":4181,"children":4182},{"style":104},[4183],{"type":44,"value":3208},{"type":38,"tag":97,"props":4185,"children":4186},{"style":110},[4187],{"type":44,"value":4188}," task.exception():\n",{"type":38,"tag":97,"props":4190,"children":4191},{"class":99,"line":2050},[4192,4197,4202,4206],{"type":38,"tag":97,"props":4193,"children":4194},{"style":110},[4195],{"type":44,"value":4196},"        queue.put_nowait(",{"type":38,"tag":97,"props":4198,"children":4199},{"style":104},[4200],{"type":44,"value":4201},"-",{"type":38,"tag":97,"props":4203,"children":4204},{"style":157},[4205],{"type":44,"value":184},{"type":38,"tag":97,"props":4207,"children":4208},{"style":110},[4209],{"type":44,"value":189},{"type":38,"tag":97,"props":4211,"children":4212},{"class":99,"line":2059},[4213],{"type":38,"tag":97,"props":4214,"children":4215},{"style":104},[4216],{"type":44,"value":4217},"        return\n",{"type":38,"tag":97,"props":4219,"children":4220},{"class":99,"line":2735},[4221],{"type":38,"tag":97,"props":4222,"children":4223},{"style":110},[4224],{"type":44,"value":4225},"    queue.put_nowait(task.result())\n",{"type":38,"tag":97,"props":4227,"children":4228},{"class":99,"line":2757},[4229],{"type":38,"tag":97,"props":4230,"children":4231},{"emptyLinePlaceholder":5},[4232],{"type":44,"value":122},{"type":38,"tag":97,"props":4234,"children":4235},{"class":99,"line":2802},[4236],{"type":38,"tag":97,"props":4237,"children":4238},{"emptyLinePlaceholder":5},[4239],{"type":44,"value":122},{"type":38,"tag":97,"props":4241,"children":4242},{"class":99,"line":2810},[4243,4247,4251,4255,4259,4263],{"type":38,"tag":97,"props":4244,"children":4245},{"style":104},[4246],{"type":44,"value":32},{"type":38,"tag":97,"props":4248,"children":4249},{"style":104},[4250],{"type":44,"value":143},{"type":38,"tag":97,"props":4252,"children":4253},{"style":146},[4254],{"type":44,"value":222},{"type":38,"tag":97,"props":4256,"children":4257},{"style":110},[4258],{"type":44,"value":154},{"type":38,"tag":97,"props":4260,"children":4261},{"style":157},[4262],{"type":44,"value":160},{"type":38,"tag":97,"props":4264,"children":4265},{"style":110},[4266],{"type":44,"value":165},{"type":38,"tag":97,"props":4268,"children":4269},{"class":99,"line":2818},[4270,4274,4278],{"type":38,"tag":97,"props":4271,"children":4272},{"style":110},[4273],{"type":44,"value":2622},{"type":38,"tag":97,"props":4275,"children":4276},{"style":104},[4277],{"type":44,"value":402},{"type":38,"tag":97,"props":4279,"children":4280},{"style":110},[4281],{"type":44,"value":4282}," asyncio.Queue()\n",{"type":38,"tag":97,"props":4284,"children":4285},{"class":99,"line":2842},[4286,4291,4295,4300,4306,4310],{"type":38,"tag":97,"props":4287,"children":4288},{"style":110},[4289],{"type":44,"value":4290},"    add_in_queue ",{"type":38,"tag":97,"props":4292,"children":4293},{"style":104},[4294],{"type":44,"value":402},{"type":38,"tag":97,"props":4296,"children":4297},{"style":110},[4298],{"type":44,"value":4299}," partial(add, ",{"type":38,"tag":97,"props":4301,"children":4303},{"style":4302},"--shiki-default:#E36209;--shiki-dark:#FFAB70",[4304],{"type":44,"value":4305},"queue",{"type":38,"tag":97,"props":4307,"children":4308},{"style":104},[4309],{"type":44,"value":402},{"type":38,"tag":97,"props":4311,"children":4312},{"style":110},[4313],{"type":44,"value":4314},"queue)\n",{"type":38,"tag":97,"props":4316,"children":4317},{"class":99,"line":2850},[4318,4322,4326,4330,4334,4338,4342,4346,4350,4354,4358,4362,4366,4370,4374],{"type":38,"tag":97,"props":4319,"children":4320},{"style":110},[4321],{"type":44,"value":3461},{"type":38,"tag":97,"props":4323,"children":4324},{"style":104},[4325],{"type":44,"value":402},{"type":38,"tag":97,"props":4327,"children":4328},{"style":110},[4329],{"type":44,"value":3470},{"type":38,"tag":97,"props":4331,"children":4332},{"style":157},[4333],{"type":44,"value":471},{"type":38,"tag":97,"props":4335,"children":4336},{"style":110},[4337],{"type":44,"value":3479},{"type":38,"tag":97,"props":4339,"children":4340},{"style":104},[4341],{"type":44,"value":611},{"type":38,"tag":97,"props":4343,"children":4344},{"style":157},[4345],{"type":44,"value":3488},{"type":38,"tag":97,"props":4347,"children":4348},{"style":110},[4349],{"type":44,"value":3493},{"type":38,"tag":97,"props":4351,"children":4352},{"style":104},[4353],{"type":44,"value":621},{"type":38,"tag":97,"props":4355,"children":4356},{"style":110},[4357],{"type":44,"value":3502},{"type":38,"tag":97,"props":4359,"children":4360},{"style":104},[4361],{"type":44,"value":631},{"type":38,"tag":97,"props":4363,"children":4364},{"style":157},[4365],{"type":44,"value":636},{"type":38,"tag":97,"props":4367,"children":4368},{"style":110},[4369],{"type":44,"value":641},{"type":38,"tag":97,"props":4371,"children":4372},{"style":157},[4373],{"type":44,"value":646},{"type":38,"tag":97,"props":4375,"children":4376},{"style":110},[4377],{"type":44,"value":3523},{"type":38,"tag":97,"props":4379,"children":4380},{"class":99,"line":2859},[4381,4386,4390],{"type":38,"tag":97,"props":4382,"children":4383},{"style":110},[4384],{"type":44,"value":4385},"    tasks ",{"type":38,"tag":97,"props":4387,"children":4388},{"style":104},[4389],{"type":44,"value":402},{"type":38,"tag":97,"props":4391,"children":4392},{"style":110},[4393],{"type":44,"value":4394}," deque()\n",{"type":38,"tag":97,"props":4396,"children":4397},{"class":99,"line":2868},[4398,4403,4407,4411],{"type":38,"tag":97,"props":4399,"children":4400},{"style":104},[4401],{"type":44,"value":4402},"    for",{"type":38,"tag":97,"props":4404,"children":4405},{"style":110},[4406],{"type":44,"value":3560},{"type":38,"tag":97,"props":4408,"children":4409},{"style":104},[4410],{"type":44,"value":631},{"type":38,"tag":97,"props":4412,"children":4413},{"style":110},[4414],{"type":44,"value":4415}," coros:\n",{"type":38,"tag":97,"props":4417,"children":4418},{"class":99,"line":2877},[4419,4424,4428],{"type":38,"tag":97,"props":4420,"children":4421},{"style":110},[4422],{"type":44,"value":4423},"        task ",{"type":38,"tag":97,"props":4425,"children":4426},{"style":104},[4427],{"type":44,"value":402},{"type":38,"tag":97,"props":4429,"children":4430},{"style":110},[4431],{"type":44,"value":1924},{"type":38,"tag":97,"props":4433,"children":4434},{"class":99,"line":2886},[4435],{"type":38,"tag":97,"props":4436,"children":4437},{"style":110},[4438],{"type":44,"value":4439},"        task.add_done_callback(add_in_queue)\n",{"type":38,"tag":97,"props":4441,"children":4442},{"class":99,"line":2895},[4443],{"type":38,"tag":97,"props":4444,"children":4445},{"style":110},[4446],{"type":44,"value":4447},"        tasks.append(task)\n",{"type":38,"tag":97,"props":4449,"children":4451},{"class":99,"line":4450},43,[4452],{"type":38,"tag":97,"props":4453,"children":4454},{"emptyLinePlaceholder":5},[4455],{"type":44,"value":122},{"type":38,"tag":97,"props":4457,"children":4459},{"class":99,"line":4458},44,[4460,4464,4468,4472,4477,4481,4486,4490],{"type":38,"tag":97,"props":4461,"children":4462},{"style":104},[4463],{"type":44,"value":174},{"type":38,"tag":97,"props":4465,"children":4466},{"style":110},[4467],{"type":44,"value":606},{"type":38,"tag":97,"props":4469,"children":4470},{"style":104},[4471],{"type":44,"value":611},{"type":38,"tag":97,"props":4473,"children":4474},{"style":110},[4475],{"type":44,"value":4476},"(shield(task) ",{"type":38,"tag":97,"props":4478,"children":4479},{"style":104},[4480],{"type":44,"value":621},{"type":38,"tag":97,"props":4482,"children":4483},{"style":110},[4484],{"type":44,"value":4485}," task ",{"type":38,"tag":97,"props":4487,"children":4488},{"style":104},[4489],{"type":44,"value":631},{"type":38,"tag":97,"props":4491,"children":4492},{"style":110},[4493],{"type":44,"value":4494}," tasks))\n",{"type":38,"tag":97,"props":4496,"children":4498},{"class":99,"line":4497},45,[4499,4503,4507,4512,4516,4520,4524,4528,4532,4536],{"type":38,"tag":97,"props":4500,"children":4501},{"style":110},[4502],{"type":44,"value":2723},{"type":38,"tag":97,"props":4504,"children":4505},{"style":104},[4506],{"type":44,"value":402},{"type":38,"tag":97,"props":4508,"children":4509},{"style":110},[4510],{"type":44,"value":4511}," [queue.get_nowait() ",{"type":38,"tag":97,"props":4513,"children":4514},{"style":104},[4515],{"type":44,"value":621},{"type":38,"tag":97,"props":4517,"children":4518},{"style":110},[4519],{"type":44,"value":3502},{"type":38,"tag":97,"props":4521,"children":4522},{"style":104},[4523],{"type":44,"value":631},{"type":38,"tag":97,"props":4525,"children":4526},{"style":157},[4527],{"type":44,"value":636},{"type":38,"tag":97,"props":4529,"children":4530},{"style":110},[4531],{"type":44,"value":641},{"type":38,"tag":97,"props":4533,"children":4534},{"style":157},[4535],{"type":44,"value":646},{"type":38,"tag":97,"props":4537,"children":4538},{"style":110},[4539],{"type":44,"value":3523},{"type":38,"tag":97,"props":4541,"children":4543},{"class":99,"line":4542},46,[4544,4548],{"type":38,"tag":97,"props":4545,"children":4546},{"style":157},[4547],{"type":44,"value":3577},{"type":38,"tag":97,"props":4549,"children":4550},{"style":110},[4551],{"type":44,"value":3582},{"type":38,"tag":97,"props":4553,"children":4555},{"class":99,"line":4554},47,[4556],{"type":38,"tag":97,"props":4557,"children":4558},{"emptyLinePlaceholder":5},[4559],{"type":44,"value":122},{"type":38,"tag":97,"props":4561,"children":4563},{"class":99,"line":4562},48,[4564],{"type":38,"tag":97,"props":4565,"children":4566},{"emptyLinePlaceholder":5},[4567],{"type":44,"value":122},{"type":38,"tag":97,"props":4569,"children":4571},{"class":99,"line":4570},49,[4572,4576,4580,4584,4588],{"type":38,"tag":97,"props":4573,"children":4574},{"style":104},[4575],{"type":44,"value":272},{"type":38,"tag":97,"props":4577,"children":4578},{"style":157},[4579],{"type":44,"value":277},{"type":38,"tag":97,"props":4581,"children":4582},{"style":104},[4583],{"type":44,"value":282},{"type":38,"tag":97,"props":4585,"children":4586},{"style":285},[4587],{"type":44,"value":288},{"type":38,"tag":97,"props":4589,"children":4590},{"style":110},[4591],{"type":44,"value":165},{"type":38,"tag":97,"props":4593,"children":4595},{"class":99,"line":4594},50,[4596],{"type":38,"tag":97,"props":4597,"children":4598},{"style":110},[4599],{"type":44,"value":301},{"type":38,"tag":97,"props":4601,"children":4603},{"class":99,"line":4602},51,[4604],{"type":38,"tag":97,"props":4605,"children":4606},{"style":1372},[4607],{"type":44,"value":4608},"# ❯ poetry run python main6-2.py\n",{"type":38,"tag":97,"props":4610,"children":4612},{"class":99,"line":4611},52,[4613],{"type":38,"tag":97,"props":4614,"children":4615},{"style":1372},[4616],{"type":44,"value":4617},"# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n",{"type":38,"tag":54,"props":4619,"children":4620},{},[4621,4623,4628,4629,4634],{"type":44,"value":4622},"핵심 로직이라 할 수 있는 ",{"type":38,"tag":47,"props":4624,"children":4626},{"className":4625},[],[4627],{"type":44,"value":2094},{"type":44,"value":65},{"type":38,"tag":47,"props":4630,"children":4632},{"className":4631},[],[4633],{"type":44,"value":3665},{"type":44,"value":4635},"를 수정하지 않고,\n콜백을 사용하여 문제를 해결할 수 있다.",{"type":38,"tag":966,"props":4637,"children":4639},{"id":4638},"future가-필요한-상황",[4640,4645],{"type":38,"tag":47,"props":4641,"children":4643},{"className":4642},[],[4644],{"type":44,"value":1503},{"type":44,"value":2992},{"type":38,"tag":54,"props":4647,"children":4648},{},[4649,4654,4656,4661,4663,4668,4670,4675,4676,4681,4683,4688],{"type":38,"tag":47,"props":4650,"children":4652},{"className":4651},[],[4653],{"type":44,"value":1510},{"type":44,"value":4655},"가 ",{"type":38,"tag":47,"props":4657,"children":4659},{"className":4658},[],[4660],{"type":44,"value":1503},{"type":44,"value":4662},"를 상속받았기에, 대부분의 경우 ",{"type":38,"tag":47,"props":4664,"children":4666},{"className":4665},[],[4667],{"type":44,"value":1510},{"type":44,"value":4669},"에서 문제가 해결된다.\n",{"type":38,"tag":47,"props":4671,"children":4673},{"className":4672},[],[4674],{"type":44,"value":1503},{"type":44,"value":65},{"type":38,"tag":47,"props":4677,"children":4679},{"className":4678},[],[4680],{"type":44,"value":1510},{"type":44,"value":4682},"의 결정적인 차이점은\n",{"type":38,"tag":47,"props":4684,"children":4686},{"className":4685},[],[4687],{"type":44,"value":1503},{"type":44,"value":4689},"는 이벤트루프에 예약되지 않은 상태가 존재한다는 것이다.",{"type":38,"tag":54,"props":4691,"children":4692},{},[4693,4695,4700,4702,4707,4708,4713,4715,4720],{"type":44,"value":4694},"코루틴이 비동기 작업에 대한 정의라면\n",{"type":38,"tag":47,"props":4696,"children":4698},{"className":4697},[],[4699],{"type":44,"value":1510},{"type":44,"value":4701},"는 코루틴의 실재이고,\n",{"type":38,"tag":47,"props":4703,"children":4705},{"className":4704},[],[4706],{"type":44,"value":1503},{"type":44,"value":1553},{"type":38,"tag":47,"props":4709,"children":4711},{"className":4710},[],[4712],{"type":44,"value":1510},{"type":44,"value":4714},"의 선물이다.\n따라서 ",{"type":38,"tag":47,"props":4716,"children":4718},{"className":4717},[],[4719],{"type":44,"value":1503},{"type":44,"value":4721},"를 사용한다면, 비동기 작업이 선언 또는 실행되기 이전에\n콜백을 정의하고 추가하여 제공할 수 있다.",{"type":38,"tag":54,"props":4723,"children":4724},{},[4725,4727,4732,4734,4740],{"type":44,"value":4726},"이러한 방법은 ",{"type":38,"tag":47,"props":4728,"children":4730},{"className":4729},[],[4731],{"type":44,"value":52},{"type":44,"value":4733},"의 내부 함수를 구현하는데 많이 사용되는데,\n그 중 하나인 ",{"type":38,"tag":47,"props":4735,"children":4737},{"className":4736},[],[4738],{"type":44,"value":4739},"wait_for",{"type":44,"value":4741},"를 좀 더 알아보기 쉽게 나타내면 다음과 같다.",{"type":38,"tag":87,"props":4743,"children":4746},{"className":89,"code":4744,"filename":4745,"language":27,"meta":28,"style":28},"from __future__ import annotations\n\nimport asyncio\nimport logging\nimport sys\nfrom functools import partial\nfrom typing import Any, Awaitable\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\ndef release(waiter: asyncio.Future[Any], *args: Any) -> None:\n    if not waiter.done():\n        waiter.set_result(None)\n\n\nasync def cancel(future: asyncio.Future[Any]) -> None:\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future.add_done_callback(callback)\n\n    try:\n        future.cancel()\n        await waiter\n    finally:\n        future.remove_done_callback(callback)\n\n\nasync def wait_for(coro: Awaitable[Any]) -> None:\n    logger.info(\"wait\")\n\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future = asyncio.ensure_future(coro)\n    future.add_done_callback(callback)\n\n    try:\n        await waiter\n    except asyncio.CancelledError:\n        if future.done():\n            return\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise\n\n    if not future.done():\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise RuntimeError\n\n\nasync def test() -> None:\n    logger.info(\"start\")\n    await asyncio.sleep(3)\n    logger.info(\"end\")\n\n\nasync def main() -> None:\n    coro = test()\n    task = asyncio.create_task(coro)\n    await asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main7.py\n# start\n# wait\n# wait\n# wait\n# end\n","main7.py",[4747],{"type":38,"tag":47,"props":4748,"children":4749},{"__ignoreMap":28},[4750,4769,4776,4787,4798,4809,4828,4848,4855,4870,4885,4892,4899,4906,4940,4957,4973,4980,4987,5016,5033,5050,5067,5075,5082,5093,5101,5114,5126,5134,5141,5148,5177,5193,5200,5215,5230,5245,5262,5269,5276,5287,5298,5310,5323,5331,5338,5350,5358,5365,5380,5387,5398,5411,5419,5427,5455,5471,5492,5509,5517,5525,5553,5569,5585,5598,5606,5614,5638,5646,5655,5663,5672,5680,5688],{"type":38,"tag":97,"props":4751,"children":4752},{"class":99,"line":100},[4753,4757,4761,4765],{"type":38,"tag":97,"props":4754,"children":4755},{"style":104},[4756],{"type":44,"value":1109},{"type":38,"tag":97,"props":4758,"children":4759},{"style":157},[4760],{"type":44,"value":3012},{"type":38,"tag":97,"props":4762,"children":4763},{"style":104},[4764],{"type":44,"value":3017},{"type":38,"tag":97,"props":4766,"children":4767},{"style":110},[4768],{"type":44,"value":3022},{"type":38,"tag":97,"props":4770,"children":4771},{"class":99,"line":116},[4772],{"type":38,"tag":97,"props":4773,"children":4774},{"emptyLinePlaceholder":5},[4775],{"type":44,"value":122},{"type":38,"tag":97,"props":4777,"children":4778},{"class":99,"line":125},[4779,4783],{"type":38,"tag":97,"props":4780,"children":4781},{"style":104},[4782],{"type":44,"value":107},{"type":38,"tag":97,"props":4784,"children":4785},{"style":110},[4786],{"type":44,"value":113},{"type":38,"tag":97,"props":4788,"children":4789},{"class":99,"line":133},[4790,4794],{"type":38,"tag":97,"props":4791,"children":4792},{"style":104},[4793],{"type":44,"value":107},{"type":38,"tag":97,"props":4795,"children":4796},{"style":110},[4797],{"type":44,"value":358},{"type":38,"tag":97,"props":4799,"children":4800},{"class":99,"line":168},[4801,4805],{"type":38,"tag":97,"props":4802,"children":4803},{"style":104},[4804],{"type":44,"value":107},{"type":38,"tag":97,"props":4806,"children":4807},{"style":110},[4808],{"type":44,"value":382},{"type":38,"tag":97,"props":4810,"children":4811},{"class":99,"line":192},[4812,4816,4820,4824],{"type":38,"tag":97,"props":4813,"children":4814},{"style":104},[4815],{"type":44,"value":1109},{"type":38,"tag":97,"props":4817,"children":4818},{"style":110},[4819],{"type":44,"value":3780},{"type":38,"tag":97,"props":4821,"children":4822},{"style":104},[4823],{"type":44,"value":107},{"type":38,"tag":97,"props":4825,"children":4826},{"style":110},[4827],{"type":44,"value":3789},{"type":38,"tag":97,"props":4829,"children":4830},{"class":99,"line":200},[4831,4835,4839,4843],{"type":38,"tag":97,"props":4832,"children":4833},{"style":104},[4834],{"type":44,"value":1109},{"type":38,"tag":97,"props":4836,"children":4837},{"style":110},[4838],{"type":44,"value":1114},{"type":38,"tag":97,"props":4840,"children":4841},{"style":104},[4842],{"type":44,"value":107},{"type":38,"tag":97,"props":4844,"children":4845},{"style":110},[4846],{"type":44,"value":4847}," Any, Awaitable\n",{"type":38,"tag":97,"props":4849,"children":4850},{"class":99,"line":208},[4851],{"type":38,"tag":97,"props":4852,"children":4853},{"emptyLinePlaceholder":5},[4854],{"type":44,"value":122},{"type":38,"tag":97,"props":4856,"children":4857},{"class":99,"line":237},[4858,4862,4866],{"type":38,"tag":97,"props":4859,"children":4860},{"style":110},[4861],{"type":44,"value":397},{"type":38,"tag":97,"props":4863,"children":4864},{"style":104},[4865],{"type":44,"value":402},{"type":38,"tag":97,"props":4867,"children":4868},{"style":110},[4869],{"type":44,"value":407},{"type":38,"tag":97,"props":4871,"children":4872},{"class":99,"line":250},[4873,4877,4881],{"type":38,"tag":97,"props":4874,"children":4875},{"style":110},[4876],{"type":44,"value":415},{"type":38,"tag":97,"props":4878,"children":4879},{"style":157},[4880],{"type":44,"value":420},{"type":38,"tag":97,"props":4882,"children":4883},{"style":110},[4884],{"type":44,"value":189},{"type":38,"tag":97,"props":4886,"children":4887},{"class":99,"line":258},[4888],{"type":38,"tag":97,"props":4889,"children":4890},{"style":110},[4891],{"type":44,"value":432},{"type":38,"tag":97,"props":4893,"children":4894},{"class":99,"line":266},[4895],{"type":38,"tag":97,"props":4896,"children":4897},{"emptyLinePlaceholder":5},[4898],{"type":44,"value":122},{"type":38,"tag":97,"props":4900,"children":4901},{"class":99,"line":295},[4902],{"type":38,"tag":97,"props":4903,"children":4904},{"emptyLinePlaceholder":5},[4905],{"type":44,"value":122},{"type":38,"tag":97,"props":4907,"children":4908},{"class":99,"line":527},[4909,4913,4918,4923,4927,4932,4936],{"type":38,"tag":97,"props":4910,"children":4911},{"style":104},[4912],{"type":44,"value":4141},{"type":38,"tag":97,"props":4914,"children":4915},{"style":146},[4916],{"type":44,"value":4917}," release",{"type":38,"tag":97,"props":4919,"children":4920},{"style":110},[4921],{"type":44,"value":4922},"(waiter: asyncio.Future[Any], ",{"type":38,"tag":97,"props":4924,"children":4925},{"style":104},[4926],{"type":44,"value":611},{"type":38,"tag":97,"props":4928,"children":4929},{"style":110},[4930],{"type":44,"value":4931},"args: Any) -> ",{"type":38,"tag":97,"props":4933,"children":4934},{"style":157},[4935],{"type":44,"value":160},{"type":38,"tag":97,"props":4937,"children":4938},{"style":110},[4939],{"type":44,"value":165},{"type":38,"tag":97,"props":4941,"children":4942},{"class":99,"line":552},[4943,4947,4952],{"type":38,"tag":97,"props":4944,"children":4945},{"style":104},[4946],{"type":44,"value":3208},{"type":38,"tag":97,"props":4948,"children":4949},{"style":104},[4950],{"type":44,"value":4951}," not",{"type":38,"tag":97,"props":4953,"children":4954},{"style":110},[4955],{"type":44,"value":4956}," waiter.done():\n",{"type":38,"tag":97,"props":4958,"children":4959},{"class":99,"line":560},[4960,4965,4969],{"type":38,"tag":97,"props":4961,"children":4962},{"style":110},[4963],{"type":44,"value":4964},"        waiter.set_result(",{"type":38,"tag":97,"props":4966,"children":4967},{"style":157},[4968],{"type":44,"value":160},{"type":38,"tag":97,"props":4970,"children":4971},{"style":110},[4972],{"type":44,"value":189},{"type":38,"tag":97,"props":4974,"children":4975},{"class":99,"line":568},[4976],{"type":38,"tag":97,"props":4977,"children":4978},{"emptyLinePlaceholder":5},[4979],{"type":44,"value":122},{"type":38,"tag":97,"props":4981,"children":4982},{"class":99,"line":596},[4983],{"type":38,"tag":97,"props":4984,"children":4985},{"emptyLinePlaceholder":5},[4986],{"type":44,"value":122},{"type":38,"tag":97,"props":4988,"children":4989},{"class":99,"line":654},[4990,4994,4998,5003,5008,5012],{"type":38,"tag":97,"props":4991,"children":4992},{"style":104},[4993],{"type":44,"value":32},{"type":38,"tag":97,"props":4995,"children":4996},{"style":104},[4997],{"type":44,"value":143},{"type":38,"tag":97,"props":4999,"children":5000},{"style":146},[5001],{"type":44,"value":5002}," cancel",{"type":38,"tag":97,"props":5004,"children":5005},{"style":110},[5006],{"type":44,"value":5007},"(future: asyncio.Future[Any]) -> ",{"type":38,"tag":97,"props":5009,"children":5010},{"style":157},[5011],{"type":44,"value":160},{"type":38,"tag":97,"props":5013,"children":5014},{"style":110},[5015],{"type":44,"value":165},{"type":38,"tag":97,"props":5017,"children":5018},{"class":99,"line":662},[5019,5024,5028],{"type":38,"tag":97,"props":5020,"children":5021},{"style":110},[5022],{"type":44,"value":5023},"    loop ",{"type":38,"tag":97,"props":5025,"children":5026},{"style":104},[5027],{"type":44,"value":402},{"type":38,"tag":97,"props":5029,"children":5030},{"style":110},[5031],{"type":44,"value":5032}," asyncio.get_running_loop()\n",{"type":38,"tag":97,"props":5034,"children":5035},{"class":99,"line":670},[5036,5041,5045],{"type":38,"tag":97,"props":5037,"children":5038},{"style":110},[5039],{"type":44,"value":5040},"    waiter ",{"type":38,"tag":97,"props":5042,"children":5043},{"style":104},[5044],{"type":44,"value":402},{"type":38,"tag":97,"props":5046,"children":5047},{"style":110},[5048],{"type":44,"value":5049}," loop.create_future()\n",{"type":38,"tag":97,"props":5051,"children":5052},{"class":99,"line":694},[5053,5058,5062],{"type":38,"tag":97,"props":5054,"children":5055},{"style":110},[5056],{"type":44,"value":5057},"    callback ",{"type":38,"tag":97,"props":5059,"children":5060},{"style":104},[5061],{"type":44,"value":402},{"type":38,"tag":97,"props":5063,"children":5064},{"style":110},[5065],{"type":44,"value":5066}," partial(release, waiter)\n",{"type":38,"tag":97,"props":5068,"children":5069},{"class":99,"line":1394},[5070],{"type":38,"tag":97,"props":5071,"children":5072},{"style":110},[5073],{"type":44,"value":5074},"    future.add_done_callback(callback)\n",{"type":38,"tag":97,"props":5076,"children":5077},{"class":99,"line":1403},[5078],{"type":38,"tag":97,"props":5079,"children":5080},{"emptyLinePlaceholder":5},[5081],{"type":44,"value":122},{"type":38,"tag":97,"props":5083,"children":5084},{"class":99,"line":1412},[5085,5089],{"type":38,"tag":97,"props":5086,"children":5087},{"style":104},[5088],{"type":44,"value":3365},{"type":38,"tag":97,"props":5090,"children":5091},{"style":110},[5092],{"type":44,"value":165},{"type":38,"tag":97,"props":5094,"children":5095},{"class":99,"line":2023},[5096],{"type":38,"tag":97,"props":5097,"children":5098},{"style":110},[5099],{"type":44,"value":5100},"        future.cancel()\n",{"type":38,"tag":97,"props":5102,"children":5103},{"class":99,"line":2032},[5104,5109],{"type":38,"tag":97,"props":5105,"children":5106},{"style":104},[5107],{"type":44,"value":5108},"        await",{"type":38,"tag":97,"props":5110,"children":5111},{"style":110},[5112],{"type":44,"value":5113}," waiter\n",{"type":38,"tag":97,"props":5115,"children":5116},{"class":99,"line":2041},[5117,5122],{"type":38,"tag":97,"props":5118,"children":5119},{"style":104},[5120],{"type":44,"value":5121},"    finally",{"type":38,"tag":97,"props":5123,"children":5124},{"style":110},[5125],{"type":44,"value":165},{"type":38,"tag":97,"props":5127,"children":5128},{"class":99,"line":2050},[5129],{"type":38,"tag":97,"props":5130,"children":5131},{"style":110},[5132],{"type":44,"value":5133},"        future.remove_done_callback(callback)\n",{"type":38,"tag":97,"props":5135,"children":5136},{"class":99,"line":2059},[5137],{"type":38,"tag":97,"props":5138,"children":5139},{"emptyLinePlaceholder":5},[5140],{"type":44,"value":122},{"type":38,"tag":97,"props":5142,"children":5143},{"class":99,"line":2735},[5144],{"type":38,"tag":97,"props":5145,"children":5146},{"emptyLinePlaceholder":5},[5147],{"type":44,"value":122},{"type":38,"tag":97,"props":5149,"children":5150},{"class":99,"line":2757},[5151,5155,5159,5164,5169,5173],{"type":38,"tag":97,"props":5152,"children":5153},{"style":104},[5154],{"type":44,"value":32},{"type":38,"tag":97,"props":5156,"children":5157},{"style":104},[5158],{"type":44,"value":143},{"type":38,"tag":97,"props":5160,"children":5161},{"style":146},[5162],{"type":44,"value":5163}," wait_for",{"type":38,"tag":97,"props":5165,"children":5166},{"style":110},[5167],{"type":44,"value":5168},"(coro: Awaitable[Any]) -> ",{"type":38,"tag":97,"props":5170,"children":5171},{"style":157},[5172],{"type":44,"value":160},{"type":38,"tag":97,"props":5174,"children":5175},{"style":110},[5176],{"type":44,"value":165},{"type":38,"tag":97,"props":5178,"children":5179},{"class":99,"line":2802},[5180,5184,5189],{"type":38,"tag":97,"props":5181,"children":5182},{"style":110},[5183],{"type":44,"value":492},{"type":38,"tag":97,"props":5185,"children":5186},{"style":285},[5187],{"type":44,"value":5188},"\"wait\"",{"type":38,"tag":97,"props":5190,"children":5191},{"style":110},[5192],{"type":44,"value":189},{"type":38,"tag":97,"props":5194,"children":5195},{"class":99,"line":2810},[5196],{"type":38,"tag":97,"props":5197,"children":5198},{"emptyLinePlaceholder":5},[5199],{"type":44,"value":122},{"type":38,"tag":97,"props":5201,"children":5202},{"class":99,"line":2818},[5203,5207,5211],{"type":38,"tag":97,"props":5204,"children":5205},{"style":110},[5206],{"type":44,"value":5023},{"type":38,"tag":97,"props":5208,"children":5209},{"style":104},[5210],{"type":44,"value":402},{"type":38,"tag":97,"props":5212,"children":5213},{"style":110},[5214],{"type":44,"value":5032},{"type":38,"tag":97,"props":5216,"children":5217},{"class":99,"line":2842},[5218,5222,5226],{"type":38,"tag":97,"props":5219,"children":5220},{"style":110},[5221],{"type":44,"value":5040},{"type":38,"tag":97,"props":5223,"children":5224},{"style":104},[5225],{"type":44,"value":402},{"type":38,"tag":97,"props":5227,"children":5228},{"style":110},[5229],{"type":44,"value":5049},{"type":38,"tag":97,"props":5231,"children":5232},{"class":99,"line":2850},[5233,5237,5241],{"type":38,"tag":97,"props":5234,"children":5235},{"style":110},[5236],{"type":44,"value":5057},{"type":38,"tag":97,"props":5238,"children":5239},{"style":104},[5240],{"type":44,"value":402},{"type":38,"tag":97,"props":5242,"children":5243},{"style":110},[5244],{"type":44,"value":5066},{"type":38,"tag":97,"props":5246,"children":5247},{"class":99,"line":2859},[5248,5253,5257],{"type":38,"tag":97,"props":5249,"children":5250},{"style":110},[5251],{"type":44,"value":5252},"    future ",{"type":38,"tag":97,"props":5254,"children":5255},{"style":104},[5256],{"type":44,"value":402},{"type":38,"tag":97,"props":5258,"children":5259},{"style":110},[5260],{"type":44,"value":5261}," asyncio.ensure_future(coro)\n",{"type":38,"tag":97,"props":5263,"children":5264},{"class":99,"line":2868},[5265],{"type":38,"tag":97,"props":5266,"children":5267},{"style":110},[5268],{"type":44,"value":5074},{"type":38,"tag":97,"props":5270,"children":5271},{"class":99,"line":2877},[5272],{"type":38,"tag":97,"props":5273,"children":5274},{"emptyLinePlaceholder":5},[5275],{"type":44,"value":122},{"type":38,"tag":97,"props":5277,"children":5278},{"class":99,"line":2886},[5279,5283],{"type":38,"tag":97,"props":5280,"children":5281},{"style":104},[5282],{"type":44,"value":3365},{"type":38,"tag":97,"props":5284,"children":5285},{"style":110},[5286],{"type":44,"value":165},{"type":38,"tag":97,"props":5288,"children":5289},{"class":99,"line":2895},[5290,5294],{"type":38,"tag":97,"props":5291,"children":5292},{"style":104},[5293],{"type":44,"value":5108},{"type":38,"tag":97,"props":5295,"children":5296},{"style":110},[5297],{"type":44,"value":5113},{"type":38,"tag":97,"props":5299,"children":5300},{"class":99,"line":4450},[5301,5305],{"type":38,"tag":97,"props":5302,"children":5303},{"style":104},[5304],{"type":44,"value":3393},{"type":38,"tag":97,"props":5306,"children":5307},{"style":110},[5308],{"type":44,"value":5309}," asyncio.CancelledError:\n",{"type":38,"tag":97,"props":5311,"children":5312},{"class":99,"line":4458},[5313,5318],{"type":38,"tag":97,"props":5314,"children":5315},{"style":104},[5316],{"type":44,"value":5317},"        if",{"type":38,"tag":97,"props":5319,"children":5320},{"style":110},[5321],{"type":44,"value":5322}," future.done():\n",{"type":38,"tag":97,"props":5324,"children":5325},{"class":99,"line":4497},[5326],{"type":38,"tag":97,"props":5327,"children":5328},{"style":104},[5329],{"type":44,"value":5330},"            return\n",{"type":38,"tag":97,"props":5332,"children":5333},{"class":99,"line":4542},[5334],{"type":38,"tag":97,"props":5335,"children":5336},{"style":110},[5337],{"type":44,"value":5133},{"type":38,"tag":97,"props":5339,"children":5340},{"class":99,"line":4554},[5341,5345],{"type":38,"tag":97,"props":5342,"children":5343},{"style":104},[5344],{"type":44,"value":5108},{"type":38,"tag":97,"props":5346,"children":5347},{"style":110},[5348],{"type":44,"value":5349}," cancel(future)\n",{"type":38,"tag":97,"props":5351,"children":5352},{"class":99,"line":4562},[5353],{"type":38,"tag":97,"props":5354,"children":5355},{"style":104},[5356],{"type":44,"value":5357},"        raise\n",{"type":38,"tag":97,"props":5359,"children":5360},{"class":99,"line":4570},[5361],{"type":38,"tag":97,"props":5362,"children":5363},{"emptyLinePlaceholder":5},[5364],{"type":44,"value":122},{"type":38,"tag":97,"props":5366,"children":5367},{"class":99,"line":4594},[5368,5372,5376],{"type":38,"tag":97,"props":5369,"children":5370},{"style":104},[5371],{"type":44,"value":3208},{"type":38,"tag":97,"props":5373,"children":5374},{"style":104},[5375],{"type":44,"value":4951},{"type":38,"tag":97,"props":5377,"children":5378},{"style":110},[5379],{"type":44,"value":5322},{"type":38,"tag":97,"props":5381,"children":5382},{"class":99,"line":4602},[5383],{"type":38,"tag":97,"props":5384,"children":5385},{"style":110},[5386],{"type":44,"value":5133},{"type":38,"tag":97,"props":5388,"children":5389},{"class":99,"line":4611},[5390,5394],{"type":38,"tag":97,"props":5391,"children":5392},{"style":104},[5393],{"type":44,"value":5108},{"type":38,"tag":97,"props":5395,"children":5396},{"style":110},[5397],{"type":44,"value":5349},{"type":38,"tag":97,"props":5399,"children":5401},{"class":99,"line":5400},53,[5402,5406],{"type":38,"tag":97,"props":5403,"children":5404},{"style":104},[5405],{"type":44,"value":3273},{"type":38,"tag":97,"props":5407,"children":5408},{"style":157},[5409],{"type":44,"value":5410}," RuntimeError\n",{"type":38,"tag":97,"props":5412,"children":5414},{"class":99,"line":5413},54,[5415],{"type":38,"tag":97,"props":5416,"children":5417},{"emptyLinePlaceholder":5},[5418],{"type":44,"value":122},{"type":38,"tag":97,"props":5420,"children":5422},{"class":99,"line":5421},55,[5423],{"type":38,"tag":97,"props":5424,"children":5425},{"emptyLinePlaceholder":5},[5426],{"type":44,"value":122},{"type":38,"tag":97,"props":5428,"children":5430},{"class":99,"line":5429},56,[5431,5435,5439,5443,5447,5451],{"type":38,"tag":97,"props":5432,"children":5433},{"style":104},[5434],{"type":44,"value":32},{"type":38,"tag":97,"props":5436,"children":5437},{"style":104},[5438],{"type":44,"value":143},{"type":38,"tag":97,"props":5440,"children":5441},{"style":146},[5442],{"type":44,"value":149},{"type":38,"tag":97,"props":5444,"children":5445},{"style":110},[5446],{"type":44,"value":154},{"type":38,"tag":97,"props":5448,"children":5449},{"style":157},[5450],{"type":44,"value":160},{"type":38,"tag":97,"props":5452,"children":5453},{"style":110},[5454],{"type":44,"value":165},{"type":38,"tag":97,"props":5456,"children":5458},{"class":99,"line":5457},57,[5459,5463,5467],{"type":38,"tag":97,"props":5460,"children":5461},{"style":110},[5462],{"type":44,"value":492},{"type":38,"tag":97,"props":5464,"children":5465},{"style":285},[5466],{"type":44,"value":1811},{"type":38,"tag":97,"props":5468,"children":5469},{"style":110},[5470],{"type":44,"value":189},{"type":38,"tag":97,"props":5472,"children":5474},{"class":99,"line":5473},58,[5475,5479,5483,5488],{"type":38,"tag":97,"props":5476,"children":5477},{"style":104},[5478],{"type":44,"value":174},{"type":38,"tag":97,"props":5480,"children":5481},{"style":110},[5482],{"type":44,"value":179},{"type":38,"tag":97,"props":5484,"children":5485},{"style":157},[5486],{"type":44,"value":5487},"3",{"type":38,"tag":97,"props":5489,"children":5490},{"style":110},[5491],{"type":44,"value":189},{"type":38,"tag":97,"props":5493,"children":5495},{"class":99,"line":5494},59,[5496,5500,5505],{"type":38,"tag":97,"props":5497,"children":5498},{"style":110},[5499],{"type":44,"value":492},{"type":38,"tag":97,"props":5501,"children":5502},{"style":285},[5503],{"type":44,"value":5504},"\"end\"",{"type":38,"tag":97,"props":5506,"children":5507},{"style":110},[5508],{"type":44,"value":189},{"type":38,"tag":97,"props":5510,"children":5512},{"class":99,"line":5511},60,[5513],{"type":38,"tag":97,"props":5514,"children":5515},{"emptyLinePlaceholder":5},[5516],{"type":44,"value":122},{"type":38,"tag":97,"props":5518,"children":5520},{"class":99,"line":5519},61,[5521],{"type":38,"tag":97,"props":5522,"children":5523},{"emptyLinePlaceholder":5},[5524],{"type":44,"value":122},{"type":38,"tag":97,"props":5526,"children":5528},{"class":99,"line":5527},62,[5529,5533,5537,5541,5545,5549],{"type":38,"tag":97,"props":5530,"children":5531},{"style":104},[5532],{"type":44,"value":32},{"type":38,"tag":97,"props":5534,"children":5535},{"style":104},[5536],{"type":44,"value":143},{"type":38,"tag":97,"props":5538,"children":5539},{"style":146},[5540],{"type":44,"value":222},{"type":38,"tag":97,"props":5542,"children":5543},{"style":110},[5544],{"type":44,"value":154},{"type":38,"tag":97,"props":5546,"children":5547},{"style":157},[5548],{"type":44,"value":160},{"type":38,"tag":97,"props":5550,"children":5551},{"style":110},[5552],{"type":44,"value":165},{"type":38,"tag":97,"props":5554,"children":5556},{"class":99,"line":5555},63,[5557,5561,5565],{"type":38,"tag":97,"props":5558,"children":5559},{"style":110},[5560],{"type":44,"value":1899},{"type":38,"tag":97,"props":5562,"children":5563},{"style":104},[5564],{"type":44,"value":402},{"type":38,"tag":97,"props":5566,"children":5567},{"style":110},[5568],{"type":44,"value":247},{"type":38,"tag":97,"props":5570,"children":5572},{"class":99,"line":5571},64,[5573,5577,5581],{"type":38,"tag":97,"props":5574,"children":5575},{"style":110},[5576],{"type":44,"value":2577},{"type":38,"tag":97,"props":5578,"children":5579},{"style":104},[5580],{"type":44,"value":402},{"type":38,"tag":97,"props":5582,"children":5583},{"style":110},[5584],{"type":44,"value":1924},{"type":38,"tag":97,"props":5586,"children":5588},{"class":99,"line":5587},65,[5589,5593],{"type":38,"tag":97,"props":5590,"children":5591},{"style":104},[5592],{"type":44,"value":174},{"type":38,"tag":97,"props":5594,"children":5595},{"style":110},[5596],{"type":44,"value":5597}," asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n",{"type":38,"tag":97,"props":5599,"children":5601},{"class":99,"line":5600},66,[5602],{"type":38,"tag":97,"props":5603,"children":5604},{"emptyLinePlaceholder":5},[5605],{"type":44,"value":122},{"type":38,"tag":97,"props":5607,"children":5609},{"class":99,"line":5608},67,[5610],{"type":38,"tag":97,"props":5611,"children":5612},{"emptyLinePlaceholder":5},[5613],{"type":44,"value":122},{"type":38,"tag":97,"props":5615,"children":5617},{"class":99,"line":5616},68,[5618,5622,5626,5630,5634],{"type":38,"tag":97,"props":5619,"children":5620},{"style":104},[5621],{"type":44,"value":272},{"type":38,"tag":97,"props":5623,"children":5624},{"style":157},[5625],{"type":44,"value":277},{"type":38,"tag":97,"props":5627,"children":5628},{"style":104},[5629],{"type":44,"value":282},{"type":38,"tag":97,"props":5631,"children":5632},{"style":285},[5633],{"type":44,"value":288},{"type":38,"tag":97,"props":5635,"children":5636},{"style":110},[5637],{"type":44,"value":165},{"type":38,"tag":97,"props":5639,"children":5641},{"class":99,"line":5640},69,[5642],{"type":38,"tag":97,"props":5643,"children":5644},{"style":110},[5645],{"type":44,"value":301},{"type":38,"tag":97,"props":5647,"children":5649},{"class":99,"line":5648},70,[5650],{"type":38,"tag":97,"props":5651,"children":5652},{"style":1372},[5653],{"type":44,"value":5654},"# ❯ poetry run python main7.py\n",{"type":38,"tag":97,"props":5656,"children":5658},{"class":99,"line":5657},71,[5659],{"type":38,"tag":97,"props":5660,"children":5661},{"style":1372},[5662],{"type":44,"value":2874},{"type":38,"tag":97,"props":5664,"children":5666},{"class":99,"line":5665},72,[5667],{"type":38,"tag":97,"props":5668,"children":5669},{"style":1372},[5670],{"type":44,"value":5671},"# wait\n",{"type":38,"tag":97,"props":5673,"children":5675},{"class":99,"line":5674},73,[5676],{"type":38,"tag":97,"props":5677,"children":5678},{"style":1372},[5679],{"type":44,"value":5671},{"type":38,"tag":97,"props":5681,"children":5683},{"class":99,"line":5682},74,[5684],{"type":38,"tag":97,"props":5685,"children":5686},{"style":1372},[5687],{"type":44,"value":5671},{"type":38,"tag":97,"props":5689,"children":5691},{"class":99,"line":5690},75,[5692],{"type":38,"tag":97,"props":5693,"children":5694},{"style":1372},[5695],{"type":44,"value":5696},"# end\n",{"type":38,"tag":54,"props":5698,"children":5699},{},[5700,5705,5707,5712,5714,5720],{"type":38,"tag":47,"props":5701,"children":5703},{"className":5702},[],[5704],{"type":44,"value":4739},{"type":44,"value":5706},"의 실제 구현은 더 정교하지만, 읽기 쉽도록 일부 코드를 수정했다.\n위와 같은 형태로 ",{"type":38,"tag":47,"props":5708,"children":5710},{"className":5709},[],[5711],{"type":44,"value":4739},{"type":44,"value":5713},"를 사용하지 않는다면, ",{"type":38,"tag":47,"props":5715,"children":5717},{"className":5716},[],[5718],{"type":44,"value":5719},"task",{"type":44,"value":5721},"를 2번 이상 실행하게 되고,\n동일한 코루틴을 2번 이상 실행할 수 없다는 에러가 발생한다.",{"type":38,"tag":39,"props":5723,"children":5725},{"id":5724},"요약하자면",[5726],{"type":44,"value":5724},{"type":38,"tag":2118,"props":5728,"children":5729},{},[5730,5753,5776],{"type":38,"tag":2122,"props":5731,"children":5732},{},[5733,5738,5739,5744,5746,5751],{"type":38,"tag":47,"props":5734,"children":5736},{"className":5735},[],[5737],{"type":44,"value":32},{"type":44,"value":989},{"type":38,"tag":47,"props":5740,"children":5742},{"className":5741},[],[5743],{"type":44,"value":71},{"type":44,"value":5745}," 키워드로 비동기 함수를 정의하여 코루틴을 생성하고,\n",{"type":38,"tag":47,"props":5747,"children":5749},{"className":5748},[],[5750],{"type":44,"value":312},{"type":44,"value":5752},"으로 실행한다.",{"type":38,"tag":2122,"props":5754,"children":5755},{},[5756,5761,5762,5767,5769,5774],{"type":38,"tag":47,"props":5757,"children":5759},{"className":5758},[],[5760],{"type":44,"value":1646},{"type":44,"value":1546},{"type":38,"tag":47,"props":5763,"children":5765},{"className":5764},[],[5766],{"type":44,"value":1653},{"type":44,"value":5768},"와 비슷한 객체는 ",{"type":38,"tag":47,"props":5770,"children":5772},{"className":5771},[],[5773],{"type":44,"value":1510},{"type":44,"value":5775},"다.",{"type":38,"tag":2122,"props":5777,"children":5778},{},[5779,5784],{"type":38,"tag":47,"props":5780,"children":5782},{"className":5781},[],[5783],{"type":44,"value":1503},{"type":44,"value":5785},"를 사용하면 콜백을 활용할 수 있다.",{"type":38,"tag":966,"props":5787,"children":5789},{"id":5788},"추가하자면",[5790],{"type":44,"value":5788},{"type":38,"tag":54,"props":5792,"children":5793},{},[5794,5796,5801,5803,5808],{"type":44,"value":5795},"기본 라이브러리인 ",{"type":38,"tag":47,"props":5797,"children":5799},{"className":5798},[],[5800],{"type":44,"value":52},{"type":44,"value":5802}," 위주로 작성된 글이지만,\n비동기 라이브러리는 ",{"type":38,"tag":47,"props":5804,"children":5806},{"className":5805},[],[5807],{"type":44,"value":52},{"type":44,"value":5809},"만이 있는 것은 아니다.",{"type":38,"tag":54,"props":5811,"children":5812},{},[5813,5819,5821,5827,5828,5834,5836,5841,5843,5848,5850,5856],{"type":38,"tag":47,"props":5814,"children":5816},{"className":5815},[],[5817],{"type":44,"value":5818},"twisted",{"type":44,"value":5820},"나 ",{"type":38,"tag":47,"props":5822,"children":5824},{"className":5823},[],[5825],{"type":44,"value":5826},"curio",{"type":44,"value":989},{"type":38,"tag":47,"props":5829,"children":5831},{"className":5830},[],[5832],{"type":44,"value":5833},"trio",{"type":44,"value":5835},"등이 있으며,\n",{"type":38,"tag":47,"props":5837,"children":5839},{"className":5838},[],[5840],{"type":44,"value":5833},{"type":44,"value":5842},"의 로직을 ",{"type":38,"tag":47,"props":5844,"children":5846},{"className":5845},[],[5847],{"type":44,"value":52},{"type":44,"value":5849},"에 적용한 ",{"type":38,"tag":47,"props":5851,"children":5853},{"className":5852},[],[5854],{"type":44,"value":5855},"anyio",{"type":44,"value":5857},"도 있다.",{"type":38,"tag":5859,"props":5860,"children":5861},"blockquote",{},[5862,5885,5904],{"type":38,"tag":54,"props":5863,"children":5864},{},[5865,5870,5872,5877,5878,5883],{"type":38,"tag":47,"props":5866,"children":5868},{"className":5867},[],[5869],{"type":44,"value":5855},{"type":44,"value":5871},"를 사용하면 비동기 로직 구현 후,\n",{"type":38,"tag":47,"props":5873,"children":5875},{"className":5874},[],[5876],{"type":44,"value":52},{"type":44,"value":65},{"type":38,"tag":47,"props":5879,"children":5881},{"className":5880},[],[5882],{"type":44,"value":5833},{"type":44,"value":5884},"중 어떤 것이든 선택하여 사용할 수 있다.",{"type":38,"tag":54,"props":5886,"children":5887},{},[5888,5890,5895,5897,5902],{"type":44,"value":5889},"2.x에서는 ",{"type":38,"tag":47,"props":5891,"children":5893},{"className":5892},[],[5894],{"type":44,"value":5826},{"type":44,"value":5896},"도 지원했지만,\n",{"type":38,"tag":47,"props":5898,"children":5900},{"className":5899},[],[5901],{"type":44,"value":5826},{"type":44,"value":5903},"의 구현 방식에 따른 개발에 어려움이 있어서 3.x부터 제외됐다.",{"type":38,"tag":54,"props":5905,"children":5906},{},[5907,5912,5913,5918,5920,5926,5928,5933],{"type":38,"tag":47,"props":5908,"children":5910},{"className":5909},[],[5911],{"type":44,"value":5818},{"type":44,"value":1553},{"type":38,"tag":47,"props":5914,"children":5916},{"className":5915},[],[5917],{"type":44,"value":5855},{"type":44,"value":5919},"에서 사용하는 ",{"type":38,"tag":47,"props":5921,"children":5923},{"className":5922},[],[5924],{"type":44,"value":5925},"sniffio",{"type":44,"value":5927},"에서 지원하지 않아서\n",{"type":38,"tag":47,"props":5929,"children":5931},{"className":5930},[],[5932],{"type":44,"value":5855},{"type":44,"value":5934},"에서도 지원하지 않는다.",{"type":38,"tag":54,"props":5936,"children":5937},{},[5938,5940,5945,5946,5951,5952,5957],{"type":44,"value":5939},"모든 라이브러리는 코루틴에 대해서는 공유하지만,\n",{"type":38,"tag":47,"props":5941,"children":5943},{"className":5942},[],[5944],{"type":44,"value":1503},{"type":44,"value":65},{"type":38,"tag":47,"props":5947,"children":5949},{"className":5948},[],[5950],{"type":44,"value":1510},{"type":44,"value":1553},{"type":38,"tag":47,"props":5953,"children":5955},{"className":5954},[],[5956],{"type":44,"value":52},{"type":44,"value":5958},"에 정의된 객체이므로,\n따로 정의한 객체를 사용할 수 있다.\n따라서 만약 다른 라이브러리를 사용한다면,\n그 라이브러리에 맞는 방법을 잘 알아보고 사용해야 한다.",{"type":38,"tag":54,"props":5960,"children":5961},{},[5962,5964,5969,5971,5977,5979,5985,5987,5992,5994,5999,6001,6007,6009,6014],{"type":44,"value":5963},"나는 ",{"type":38,"tag":47,"props":5965,"children":5967},{"className":5966},[],[5968],{"type":44,"value":5855},{"type":44,"value":5970},"를 주로 사용하는데,\n",{"type":38,"tag":47,"props":5972,"children":5974},{"className":5973},[],[5975],{"type":44,"value":5976},"TaskGroup",{"type":44,"value":5978},"과 ",{"type":38,"tag":47,"props":5980,"children":5982},{"className":5981},[],[5983],{"type":44,"value":5984},"CancelScope",{"type":44,"value":5986},"가 마음에 들었기 때문이다.\n특히 이 ",{"type":38,"tag":47,"props":5988,"children":5990},{"className":5989},[],[5991],{"type":44,"value":5976},{"type":44,"value":5993},"은 3.11부터는 ",{"type":38,"tag":47,"props":5995,"children":5997},{"className":5996},[],[5998],{"type":44,"value":52},{"type":44,"value":6000},"에 적용된 개념이기도 하니,\n만약 3.11이상의 버전을 사용한다면 ",{"type":38,"tag":47,"props":6002,"children":6004},{"className":6003},[],[6005],{"type":44,"value":6006},"gather",{"type":44,"value":6008}," 대신 ",{"type":38,"tag":47,"props":6010,"children":6012},{"className":6011},[],[6013],{"type":44,"value":5976},{"type":44,"value":6015},"을 사용하자.",{"type":38,"tag":54,"props":6017,"children":6018},{},[6019,6020,6025,6027,6036],{"type":44,"value":971},{"type":38,"tag":47,"props":6021,"children":6023},{"className":6022},[],[6024],{"type":44,"value":5976},{"type":44,"value":6026},"이 좋은지, 왜 사용해야 하는지는\n",{"type":38,"tag":6028,"props":6029,"children":6033},"a",{"href":6030,"rel":6031},"https://blog.lablup.com/posts/2022/03/29/PersistentTaskGroup/",[6032],"nofollow",[6034],{"type":44,"value":6035},"이 글",{"type":44,"value":6037},"에서 상세하게 설명해준다.",{"type":38,"tag":6039,"props":6040,"children":6041},"style",{},[6042],{"type":44,"value":6043},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":28,"searchDepth":168,"depth":168,"links":6045},[6046,6051,6058,6065],{"id":41,"depth":116,"text":6047,"children":6048},"파이썬의 비동기 라이브러리 asyncio",[6049],{"id":968,"depth":125,"text":6050},"왜 asyncio.run을 실행해야 하는가",{"id":1024,"depth":116,"text":6052,"children":6053},"대기할 수 있는 Awaitable객체",[6054,6056],{"id":1528,"depth":125,"text":6055},"콜백 형태의 Future",{"id":1598,"depth":125,"text":6057},"Future를 상속받는 Task",{"id":2951,"depth":116,"text":6059,"children":6060},"Future와 Task는 언제 사용할까",[6061,6063],{"id":2984,"depth":125,"text":6062},"Task가 필요한 상황",{"id":4638,"depth":125,"text":6064},"Future가 필요한 상황",{"id":5724,"depth":116,"text":5724,"children":6066},[6067],{"id":5788,"depth":125,"text":5788},"markdown","content:python:async.md","content","python/async.md","python/async","md",{"_path":6075,"title":6076,"description":6077},"/python/airflow1","새로운 문법으로 Airflow DAG 생성하기","TaskFlow API를 사용하자",{"_path":6079,"title":6080,"description":6081},"/python/pep_695","더 편한 타입 힌트를 위한 PEP695","python 3.12에 새롭게 추가/변경되는 문법",["Set"],{"route_path":19},{"tags":6085,"selected":6086,"count":6087,"posts":6088,"tagged_posts":6089,"toggle":5},["Set"],["Set"],["Map"],[],[],1726160465040]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{name:"phi.log",description:"phi.log",hostname:"https://phi-friday.github.io",post_prefix:"/@post",tag_prefix:"/@tag",default_limit:5,pagination_size:5,comment:{src:"https://utteranc.es/client.js",repo:"phi-friday/phi-friday.github.io",issue_term:"pathname",crossorigin:"anonymous",async:true},google:{search:"https://cse.google.com/cse.js?cx=b368175c2b370414c",seo:"lW107Dj5ageygd67UUzTm-kGls5d-THy9jJQZqLoauw"},mdc:{useNuxtImage:true,components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1726160444298,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:{default:"github-light",dark:"github-dark"},preload:["diff","json","js","ts","shell","html","md","yaml","python"],highlighter:"shiki",langs:["js","jsx","json","ts","tsx","vue","css","html","bash","md","mdc","yaml","diff","json","js","ts","shell","html","md","yaml","python"]},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildId:"b2933344-301f-433e-a803-2d4981ea62cc",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>