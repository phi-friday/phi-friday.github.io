[{"data":1,"prerenderedAt":6064},["ShallowReactive",2],{"selected_data_with_surround_/python/async":3},{"article":4,"surround":6055},{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"tags":11,"date":13,"publish":14,"body":15,"_type":6049,"_id":6050,"_source":6051,"_file":6052,"_stem":6053,"_extension":6054},"/python/async","python",false,"","python의 비동기에 대한 얕은 이해","코드 중심으로 알아보는 비동기",[6,12],"async","2023-07-31T09:51:28.303Z",true,{"type":16,"children":17,"toc":6025},"root",[18,34,55,67,283,304,309,681,694,703,708,946,960,986,991,1003,1017,1037,1064,1400,1436,1454,1467,1507,1518,1549,1565,1577,1593,1637,1650,1655,2047,2093,2098,2198,2216,2221,2270,2296,2308,2883,2895,2930,2947,2963,2974,3624,3636,3656,3661,3673,4599,4617,4627,4671,4703,4723,5678,5703,5708,5767,5772,5791,5839,5916,5940,5997,6019],{"type":19,"tag":20,"props":21,"children":23},"element","h2",{"id":22},"파이썬의-비동기-라이브러리-asyncio",[24,27],{"type":25,"value":26},"text","파이썬의 비동기 라이브러리 ",{"type":19,"tag":28,"props":29,"children":31},"code",{"className":30},[],[32],{"type":25,"value":33},"asyncio",{"type":19,"tag":35,"props":36,"children":37},"p",{},[38,40,45,47,53],{"type":25,"value":39},"파이썬에서 비동기를 객체를 생성하는 가장 간단한 방법은 ",{"type":19,"tag":28,"props":41,"children":43},{"className":42},[],[44],{"type":25,"value":12},{"type":25,"value":46},"와 ",{"type":19,"tag":28,"props":48,"children":50},{"className":49},[],[51],{"type":25,"value":52},"await",{"type":25,"value":54},"키워드를 사용하는 것이다.",{"type":19,"tag":35,"props":56,"children":57},{},[58,60,65],{"type":25,"value":59},"이를 위해 기본 라이브러리로 제공되는 ",{"type":19,"tag":28,"props":61,"children":63},{"className":62},[],[64],{"type":25,"value":33},{"type":25,"value":66},"를 사용하자.",{"type":19,"tag":68,"props":69,"children":73},"pre",{"className":70,"code":71,"filename":72,"language":6,"meta":8,"style":8},"language-python shiki shiki-themes github-light github-dark","import asyncio\n\n\nasync def test() -> None:\n    await asyncio.sleep(1)\n\n\nasync def main() -> None:\n    await test()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","main.py",[74],{"type":19,"tag":28,"props":75,"children":76},{"__ignoreMap":8},[77,95,104,112,147,171,179,187,216,229,237,245,274],{"type":19,"tag":78,"props":79,"children":82},"span",{"class":80,"line":81},"line",1,[83,89],{"type":19,"tag":78,"props":84,"children":86},{"style":85},"--shiki-default:#D73A49;--shiki-dark:#F97583",[87],{"type":25,"value":88},"import",{"type":19,"tag":78,"props":90,"children":92},{"style":91},"--shiki-default:#24292E;--shiki-dark:#E1E4E8",[93],{"type":25,"value":94}," asyncio\n",{"type":19,"tag":78,"props":96,"children":98},{"class":80,"line":97},2,[99],{"type":19,"tag":78,"props":100,"children":101},{"emptyLinePlaceholder":14},[102],{"type":25,"value":103},"\n",{"type":19,"tag":78,"props":105,"children":107},{"class":80,"line":106},3,[108],{"type":19,"tag":78,"props":109,"children":110},{"emptyLinePlaceholder":14},[111],{"type":25,"value":103},{"type":19,"tag":78,"props":113,"children":115},{"class":80,"line":114},4,[116,120,125,131,136,142],{"type":19,"tag":78,"props":117,"children":118},{"style":85},[119],{"type":25,"value":12},{"type":19,"tag":78,"props":121,"children":122},{"style":85},[123],{"type":25,"value":124}," def",{"type":19,"tag":78,"props":126,"children":128},{"style":127},"--shiki-default:#6F42C1;--shiki-dark:#B392F0",[129],{"type":25,"value":130}," test",{"type":19,"tag":78,"props":132,"children":133},{"style":91},[134],{"type":25,"value":135},"() -> ",{"type":19,"tag":78,"props":137,"children":139},{"style":138},"--shiki-default:#005CC5;--shiki-dark:#79B8FF",[140],{"type":25,"value":141},"None",{"type":19,"tag":78,"props":143,"children":144},{"style":91},[145],{"type":25,"value":146},":\n",{"type":19,"tag":78,"props":148,"children":150},{"class":80,"line":149},5,[151,156,161,166],{"type":19,"tag":78,"props":152,"children":153},{"style":85},[154],{"type":25,"value":155},"    await",{"type":19,"tag":78,"props":157,"children":158},{"style":91},[159],{"type":25,"value":160}," asyncio.sleep(",{"type":19,"tag":78,"props":162,"children":163},{"style":138},[164],{"type":25,"value":165},"1",{"type":19,"tag":78,"props":167,"children":168},{"style":91},[169],{"type":25,"value":170},")\n",{"type":19,"tag":78,"props":172,"children":174},{"class":80,"line":173},6,[175],{"type":19,"tag":78,"props":176,"children":177},{"emptyLinePlaceholder":14},[178],{"type":25,"value":103},{"type":19,"tag":78,"props":180,"children":182},{"class":80,"line":181},7,[183],{"type":19,"tag":78,"props":184,"children":185},{"emptyLinePlaceholder":14},[186],{"type":25,"value":103},{"type":19,"tag":78,"props":188,"children":190},{"class":80,"line":189},8,[191,195,199,204,208,212],{"type":19,"tag":78,"props":192,"children":193},{"style":85},[194],{"type":25,"value":12},{"type":19,"tag":78,"props":196,"children":197},{"style":85},[198],{"type":25,"value":124},{"type":19,"tag":78,"props":200,"children":201},{"style":127},[202],{"type":25,"value":203}," main",{"type":19,"tag":78,"props":205,"children":206},{"style":91},[207],{"type":25,"value":135},{"type":19,"tag":78,"props":209,"children":210},{"style":138},[211],{"type":25,"value":141},{"type":19,"tag":78,"props":213,"children":214},{"style":91},[215],{"type":25,"value":146},{"type":19,"tag":78,"props":217,"children":219},{"class":80,"line":218},9,[220,224],{"type":19,"tag":78,"props":221,"children":222},{"style":85},[223],{"type":25,"value":155},{"type":19,"tag":78,"props":225,"children":226},{"style":91},[227],{"type":25,"value":228}," test()\n",{"type":19,"tag":78,"props":230,"children":232},{"class":80,"line":231},10,[233],{"type":19,"tag":78,"props":234,"children":235},{"emptyLinePlaceholder":14},[236],{"type":25,"value":103},{"type":19,"tag":78,"props":238,"children":240},{"class":80,"line":239},11,[241],{"type":19,"tag":78,"props":242,"children":243},{"emptyLinePlaceholder":14},[244],{"type":25,"value":103},{"type":19,"tag":78,"props":246,"children":248},{"class":80,"line":247},12,[249,254,259,264,270],{"type":19,"tag":78,"props":250,"children":251},{"style":85},[252],{"type":25,"value":253},"if",{"type":19,"tag":78,"props":255,"children":256},{"style":138},[257],{"type":25,"value":258}," __name__",{"type":19,"tag":78,"props":260,"children":261},{"style":85},[262],{"type":25,"value":263}," ==",{"type":19,"tag":78,"props":265,"children":267},{"style":266},"--shiki-default:#032F62;--shiki-dark:#9ECBFF",[268],{"type":25,"value":269}," \"__main__\"",{"type":19,"tag":78,"props":271,"children":272},{"style":91},[273],{"type":25,"value":146},{"type":19,"tag":78,"props":275,"children":277},{"class":80,"line":276},13,[278],{"type":19,"tag":78,"props":279,"children":280},{"style":91},[281],{"type":25,"value":282},"    asyncio.run(main())\n",{"type":19,"tag":35,"props":284,"children":285},{},[286,288,294,296,302],{"type":25,"value":287},"동기 함수와는 다르게 ",{"type":19,"tag":28,"props":289,"children":291},{"className":290},[],[292],{"type":25,"value":293},"asyncio.run",{"type":25,"value":295},"함수로 ",{"type":19,"tag":28,"props":297,"children":299},{"className":298},[],[300],{"type":25,"value":301},"main()",{"type":25,"value":303}," 코루틴을 실행하는 형태로 구성된다.",{"type":19,"tag":35,"props":305,"children":306},{},[307],{"type":25,"value":308},"정말로 비동기로 작동하는지 확인하기 위해, 다음과 같이 새로 작성한 코드를 실행해보자.",{"type":19,"tag":68,"props":310,"children":313},{"className":70,"code":311,"filename":312,"language":6,"meta":8,"style":8},"import asyncio\nimport logging\nimport random\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test(x: int) -> None:\n    logger.info(\"start: %d\", x)\n    await asyncio.sleep(random.random())\n    logger.info(\"end: %d\", x)\n\n\nasync def main() -> None:\n    await asyncio.gather(*(test(x) for x in range(10)))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","main2.py",[314],{"type":19,"tag":28,"props":315,"children":316},{"__ignoreMap":8},[317,328,340,352,364,371,389,406,414,421,428,466,494,506,531,539,547,575,633,641,649,673],{"type":19,"tag":78,"props":318,"children":319},{"class":80,"line":81},[320,324],{"type":19,"tag":78,"props":321,"children":322},{"style":85},[323],{"type":25,"value":88},{"type":19,"tag":78,"props":325,"children":326},{"style":91},[327],{"type":25,"value":94},{"type":19,"tag":78,"props":329,"children":330},{"class":80,"line":97},[331,335],{"type":19,"tag":78,"props":332,"children":333},{"style":85},[334],{"type":25,"value":88},{"type":19,"tag":78,"props":336,"children":337},{"style":91},[338],{"type":25,"value":339}," logging\n",{"type":19,"tag":78,"props":341,"children":342},{"class":80,"line":106},[343,347],{"type":19,"tag":78,"props":344,"children":345},{"style":85},[346],{"type":25,"value":88},{"type":19,"tag":78,"props":348,"children":349},{"style":91},[350],{"type":25,"value":351}," random\n",{"type":19,"tag":78,"props":353,"children":354},{"class":80,"line":114},[355,359],{"type":19,"tag":78,"props":356,"children":357},{"style":85},[358],{"type":25,"value":88},{"type":19,"tag":78,"props":360,"children":361},{"style":91},[362],{"type":25,"value":363}," sys\n",{"type":19,"tag":78,"props":365,"children":366},{"class":80,"line":149},[367],{"type":19,"tag":78,"props":368,"children":369},{"emptyLinePlaceholder":14},[370],{"type":25,"value":103},{"type":19,"tag":78,"props":372,"children":373},{"class":80,"line":173},[374,379,384],{"type":19,"tag":78,"props":375,"children":376},{"style":91},[377],{"type":25,"value":378},"logger ",{"type":19,"tag":78,"props":380,"children":381},{"style":85},[382],{"type":25,"value":383},"=",{"type":19,"tag":78,"props":385,"children":386},{"style":91},[387],{"type":25,"value":388}," logging.getLogger()\n",{"type":19,"tag":78,"props":390,"children":391},{"class":80,"line":181},[392,397,402],{"type":19,"tag":78,"props":393,"children":394},{"style":91},[395],{"type":25,"value":396},"logger.setLevel(logging.",{"type":19,"tag":78,"props":398,"children":399},{"style":138},[400],{"type":25,"value":401},"INFO",{"type":19,"tag":78,"props":403,"children":404},{"style":91},[405],{"type":25,"value":170},{"type":19,"tag":78,"props":407,"children":408},{"class":80,"line":189},[409],{"type":19,"tag":78,"props":410,"children":411},{"style":91},[412],{"type":25,"value":413},"logger.addHandler(logging.StreamHandler(sys.stdout))\n",{"type":19,"tag":78,"props":415,"children":416},{"class":80,"line":218},[417],{"type":19,"tag":78,"props":418,"children":419},{"emptyLinePlaceholder":14},[420],{"type":25,"value":103},{"type":19,"tag":78,"props":422,"children":423},{"class":80,"line":231},[424],{"type":19,"tag":78,"props":425,"children":426},{"emptyLinePlaceholder":14},[427],{"type":25,"value":103},{"type":19,"tag":78,"props":429,"children":430},{"class":80,"line":239},[431,435,439,443,448,453,458,462],{"type":19,"tag":78,"props":432,"children":433},{"style":85},[434],{"type":25,"value":12},{"type":19,"tag":78,"props":436,"children":437},{"style":85},[438],{"type":25,"value":124},{"type":19,"tag":78,"props":440,"children":441},{"style":127},[442],{"type":25,"value":130},{"type":19,"tag":78,"props":444,"children":445},{"style":91},[446],{"type":25,"value":447},"(x: ",{"type":19,"tag":78,"props":449,"children":450},{"style":138},[451],{"type":25,"value":452},"int",{"type":19,"tag":78,"props":454,"children":455},{"style":91},[456],{"type":25,"value":457},") -> ",{"type":19,"tag":78,"props":459,"children":460},{"style":138},[461],{"type":25,"value":141},{"type":19,"tag":78,"props":463,"children":464},{"style":91},[465],{"type":25,"value":146},{"type":19,"tag":78,"props":467,"children":468},{"class":80,"line":247},[469,474,479,484,489],{"type":19,"tag":78,"props":470,"children":471},{"style":91},[472],{"type":25,"value":473},"    logger.info(",{"type":19,"tag":78,"props":475,"children":476},{"style":266},[477],{"type":25,"value":478},"\"start: ",{"type":19,"tag":78,"props":480,"children":481},{"style":138},[482],{"type":25,"value":483},"%d",{"type":19,"tag":78,"props":485,"children":486},{"style":266},[487],{"type":25,"value":488},"\"",{"type":19,"tag":78,"props":490,"children":491},{"style":91},[492],{"type":25,"value":493},", x)\n",{"type":19,"tag":78,"props":495,"children":496},{"class":80,"line":276},[497,501],{"type":19,"tag":78,"props":498,"children":499},{"style":85},[500],{"type":25,"value":155},{"type":19,"tag":78,"props":502,"children":503},{"style":91},[504],{"type":25,"value":505}," asyncio.sleep(random.random())\n",{"type":19,"tag":78,"props":507,"children":509},{"class":80,"line":508},14,[510,514,519,523,527],{"type":19,"tag":78,"props":511,"children":512},{"style":91},[513],{"type":25,"value":473},{"type":19,"tag":78,"props":515,"children":516},{"style":266},[517],{"type":25,"value":518},"\"end: ",{"type":19,"tag":78,"props":520,"children":521},{"style":138},[522],{"type":25,"value":483},{"type":19,"tag":78,"props":524,"children":525},{"style":266},[526],{"type":25,"value":488},{"type":19,"tag":78,"props":528,"children":529},{"style":91},[530],{"type":25,"value":493},{"type":19,"tag":78,"props":532,"children":534},{"class":80,"line":533},15,[535],{"type":19,"tag":78,"props":536,"children":537},{"emptyLinePlaceholder":14},[538],{"type":25,"value":103},{"type":19,"tag":78,"props":540,"children":542},{"class":80,"line":541},16,[543],{"type":19,"tag":78,"props":544,"children":545},{"emptyLinePlaceholder":14},[546],{"type":25,"value":103},{"type":19,"tag":78,"props":548,"children":550},{"class":80,"line":549},17,[551,555,559,563,567,571],{"type":19,"tag":78,"props":552,"children":553},{"style":85},[554],{"type":25,"value":12},{"type":19,"tag":78,"props":556,"children":557},{"style":85},[558],{"type":25,"value":124},{"type":19,"tag":78,"props":560,"children":561},{"style":127},[562],{"type":25,"value":203},{"type":19,"tag":78,"props":564,"children":565},{"style":91},[566],{"type":25,"value":135},{"type":19,"tag":78,"props":568,"children":569},{"style":138},[570],{"type":25,"value":141},{"type":19,"tag":78,"props":572,"children":573},{"style":91},[574],{"type":25,"value":146},{"type":19,"tag":78,"props":576,"children":578},{"class":80,"line":577},18,[579,583,588,593,598,603,608,613,618,623,628],{"type":19,"tag":78,"props":580,"children":581},{"style":85},[582],{"type":25,"value":155},{"type":19,"tag":78,"props":584,"children":585},{"style":91},[586],{"type":25,"value":587}," asyncio.gather(",{"type":19,"tag":78,"props":589,"children":590},{"style":85},[591],{"type":25,"value":592},"*",{"type":19,"tag":78,"props":594,"children":595},{"style":91},[596],{"type":25,"value":597},"(test(x) ",{"type":19,"tag":78,"props":599,"children":600},{"style":85},[601],{"type":25,"value":602},"for",{"type":19,"tag":78,"props":604,"children":605},{"style":91},[606],{"type":25,"value":607}," x ",{"type":19,"tag":78,"props":609,"children":610},{"style":85},[611],{"type":25,"value":612},"in",{"type":19,"tag":78,"props":614,"children":615},{"style":138},[616],{"type":25,"value":617}," range",{"type":19,"tag":78,"props":619,"children":620},{"style":91},[621],{"type":25,"value":622},"(",{"type":19,"tag":78,"props":624,"children":625},{"style":138},[626],{"type":25,"value":627},"10",{"type":19,"tag":78,"props":629,"children":630},{"style":91},[631],{"type":25,"value":632},")))\n",{"type":19,"tag":78,"props":634,"children":636},{"class":80,"line":635},19,[637],{"type":19,"tag":78,"props":638,"children":639},{"emptyLinePlaceholder":14},[640],{"type":25,"value":103},{"type":19,"tag":78,"props":642,"children":644},{"class":80,"line":643},20,[645],{"type":19,"tag":78,"props":646,"children":647},{"emptyLinePlaceholder":14},[648],{"type":25,"value":103},{"type":19,"tag":78,"props":650,"children":652},{"class":80,"line":651},21,[653,657,661,665,669],{"type":19,"tag":78,"props":654,"children":655},{"style":85},[656],{"type":25,"value":253},{"type":19,"tag":78,"props":658,"children":659},{"style":138},[660],{"type":25,"value":258},{"type":19,"tag":78,"props":662,"children":663},{"style":85},[664],{"type":25,"value":263},{"type":19,"tag":78,"props":666,"children":667},{"style":266},[668],{"type":25,"value":269},{"type":19,"tag":78,"props":670,"children":671},{"style":91},[672],{"type":25,"value":146},{"type":19,"tag":78,"props":674,"children":676},{"class":80,"line":675},22,[677],{"type":19,"tag":78,"props":678,"children":679},{"style":91},[680],{"type":25,"value":282},{"type":19,"tag":35,"props":682,"children":683},{},[684,686,692],{"type":25,"value":685},"여기서 사용된 ",{"type":19,"tag":28,"props":687,"children":689},{"className":688},[],[690],{"type":25,"value":691},"asyncio.gather",{"type":25,"value":693},"는 여러개의 코루틴을 동시에 대기할 수 있도록 한다.",{"type":19,"tag":695,"props":696,"children":697},"note",{},[698],{"type":19,"tag":35,"props":699,"children":700},{},[701],{"type":25,"value":702},"3.11부터는 TaskGroup을 사용할 것을 권장한다.",{"type":19,"tag":35,"props":704,"children":705},{},[706],{"type":25,"value":707},"위 스크립트를 실행하면, 다음과 같이 비동기로 실행되는 것을 확인할 수 있다.",{"type":19,"tag":68,"props":709,"children":713},{"className":710,"code":711,"language":712,"meta":8,"style":8},"language-bash shiki shiki-themes github-light github-dark","❯ poetry run python main2.py\nstart: 0\nstart: 1\nstart: 2\nstart: 3\nstart: 4\nstart: 5\nstart: 6\nstart: 7\nstart: 8\nstart: 9\nend: 9\nend: 8\nend: 6\nend: 3\nend: 4\nend: 0\nend: 1\nend: 2\nend: 5\nend: 7\n","bash",[714],{"type":19,"tag":28,"props":715,"children":716},{"__ignoreMap":8},[717,745,758,770,782,794,806,818,830,842,854,866,874,882,890,898,906,914,922,930,938],{"type":19,"tag":78,"props":718,"children":719},{"class":80,"line":81},[720,725,730,735,740],{"type":19,"tag":78,"props":721,"children":722},{"style":127},[723],{"type":25,"value":724},"❯",{"type":19,"tag":78,"props":726,"children":727},{"style":266},[728],{"type":25,"value":729}," poetry",{"type":19,"tag":78,"props":731,"children":732},{"style":266},[733],{"type":25,"value":734}," run",{"type":19,"tag":78,"props":736,"children":737},{"style":266},[738],{"type":25,"value":739}," python",{"type":19,"tag":78,"props":741,"children":742},{"style":266},[743],{"type":25,"value":744}," main2.py\n",{"type":19,"tag":78,"props":746,"children":747},{"class":80,"line":97},[748,753],{"type":19,"tag":78,"props":749,"children":750},{"style":127},[751],{"type":25,"value":752},"start:",{"type":19,"tag":78,"props":754,"children":755},{"style":138},[756],{"type":25,"value":757}," 0\n",{"type":19,"tag":78,"props":759,"children":760},{"class":80,"line":106},[761,765],{"type":19,"tag":78,"props":762,"children":763},{"style":127},[764],{"type":25,"value":752},{"type":19,"tag":78,"props":766,"children":767},{"style":138},[768],{"type":25,"value":769}," 1\n",{"type":19,"tag":78,"props":771,"children":772},{"class":80,"line":114},[773,777],{"type":19,"tag":78,"props":774,"children":775},{"style":127},[776],{"type":25,"value":752},{"type":19,"tag":78,"props":778,"children":779},{"style":138},[780],{"type":25,"value":781}," 2\n",{"type":19,"tag":78,"props":783,"children":784},{"class":80,"line":149},[785,789],{"type":19,"tag":78,"props":786,"children":787},{"style":127},[788],{"type":25,"value":752},{"type":19,"tag":78,"props":790,"children":791},{"style":138},[792],{"type":25,"value":793}," 3\n",{"type":19,"tag":78,"props":795,"children":796},{"class":80,"line":173},[797,801],{"type":19,"tag":78,"props":798,"children":799},{"style":127},[800],{"type":25,"value":752},{"type":19,"tag":78,"props":802,"children":803},{"style":138},[804],{"type":25,"value":805}," 4\n",{"type":19,"tag":78,"props":807,"children":808},{"class":80,"line":181},[809,813],{"type":19,"tag":78,"props":810,"children":811},{"style":127},[812],{"type":25,"value":752},{"type":19,"tag":78,"props":814,"children":815},{"style":138},[816],{"type":25,"value":817}," 5\n",{"type":19,"tag":78,"props":819,"children":820},{"class":80,"line":189},[821,825],{"type":19,"tag":78,"props":822,"children":823},{"style":127},[824],{"type":25,"value":752},{"type":19,"tag":78,"props":826,"children":827},{"style":138},[828],{"type":25,"value":829}," 6\n",{"type":19,"tag":78,"props":831,"children":832},{"class":80,"line":218},[833,837],{"type":19,"tag":78,"props":834,"children":835},{"style":127},[836],{"type":25,"value":752},{"type":19,"tag":78,"props":838,"children":839},{"style":138},[840],{"type":25,"value":841}," 7\n",{"type":19,"tag":78,"props":843,"children":844},{"class":80,"line":231},[845,849],{"type":19,"tag":78,"props":846,"children":847},{"style":127},[848],{"type":25,"value":752},{"type":19,"tag":78,"props":850,"children":851},{"style":138},[852],{"type":25,"value":853}," 8\n",{"type":19,"tag":78,"props":855,"children":856},{"class":80,"line":239},[857,861],{"type":19,"tag":78,"props":858,"children":859},{"style":127},[860],{"type":25,"value":752},{"type":19,"tag":78,"props":862,"children":863},{"style":138},[864],{"type":25,"value":865}," 9\n",{"type":19,"tag":78,"props":867,"children":868},{"class":80,"line":247},[869],{"type":19,"tag":78,"props":870,"children":871},{"style":91},[872],{"type":25,"value":873},"end: 9\n",{"type":19,"tag":78,"props":875,"children":876},{"class":80,"line":276},[877],{"type":19,"tag":78,"props":878,"children":879},{"style":91},[880],{"type":25,"value":881},"end: 8\n",{"type":19,"tag":78,"props":883,"children":884},{"class":80,"line":508},[885],{"type":19,"tag":78,"props":886,"children":887},{"style":91},[888],{"type":25,"value":889},"end: 6\n",{"type":19,"tag":78,"props":891,"children":892},{"class":80,"line":533},[893],{"type":19,"tag":78,"props":894,"children":895},{"style":91},[896],{"type":25,"value":897},"end: 3\n",{"type":19,"tag":78,"props":899,"children":900},{"class":80,"line":541},[901],{"type":19,"tag":78,"props":902,"children":903},{"style":91},[904],{"type":25,"value":905},"end: 4\n",{"type":19,"tag":78,"props":907,"children":908},{"class":80,"line":549},[909],{"type":19,"tag":78,"props":910,"children":911},{"style":91},[912],{"type":25,"value":913},"end: 0\n",{"type":19,"tag":78,"props":915,"children":916},{"class":80,"line":577},[917],{"type":19,"tag":78,"props":918,"children":919},{"style":91},[920],{"type":25,"value":921},"end: 1\n",{"type":19,"tag":78,"props":923,"children":924},{"class":80,"line":635},[925],{"type":19,"tag":78,"props":926,"children":927},{"style":91},[928],{"type":25,"value":929},"end: 2\n",{"type":19,"tag":78,"props":931,"children":932},{"class":80,"line":643},[933],{"type":19,"tag":78,"props":934,"children":935},{"style":91},[936],{"type":25,"value":937},"end: 5\n",{"type":19,"tag":78,"props":939,"children":940},{"class":80,"line":651},[941],{"type":19,"tag":78,"props":942,"children":943},{"style":91},[944],{"type":25,"value":945},"end: 7\n",{"type":19,"tag":947,"props":948,"children":950},"h3",{"id":949},"왜-asynciorun을-실행해야-하는가",[951,953,958],{"type":25,"value":952},"왜 ",{"type":19,"tag":28,"props":954,"children":956},{"className":955},[],[957],{"type":25,"value":293},{"type":25,"value":959},"을 실행해야 하는가",{"type":19,"tag":35,"props":961,"children":962},{},[963,969,971,976,978,984],{"type":19,"tag":28,"props":964,"children":966},{"className":965},[],[967],{"type":25,"value":968},"asnyc",{"type":25,"value":970},", ",{"type":19,"tag":28,"props":972,"children":974},{"className":973},[],[975],{"type":25,"value":52},{"type":25,"value":977}," 키워드를 사용한 함수가 실행되면, ",{"type":19,"tag":28,"props":979,"children":981},{"className":980},[],[982],{"type":25,"value":983},"Coroutine",{"type":25,"value":985},"(이하 코루틴)객체가 생성된다.",{"type":19,"tag":35,"props":987,"children":988},{},[989],{"type":25,"value":990},"코루틴은 생성과 동시에 실행되는 객체가 아니며,\n이벤트 루프에 예약된 상태도 아니다.",{"type":19,"tag":35,"props":992,"children":993},{},[994,996,1001],{"type":25,"value":995},"이러한 코루틴을 실행하기 위해 이벤트루프를 생성하고,\n이벤트루프에 작업을 예약하고,\n이벤트루트의 작업을 순차적으로 실행하는 일련의 과정을\n",{"type":19,"tag":28,"props":997,"children":999},{"className":998},[],[1000],{"type":25,"value":293},{"type":25,"value":1002},"이 담당한다고 볼 수있다.",{"type":19,"tag":20,"props":1004,"children":1006},{"id":1005},"대기할-수-있는-awaitable객체",[1007,1009,1015],{"type":25,"value":1008},"대기할 수 있는 ",{"type":19,"tag":28,"props":1010,"children":1012},{"className":1011},[],[1013],{"type":25,"value":1014},"Awaitable",{"type":25,"value":1016},"객체",{"type":19,"tag":35,"props":1018,"children":1019},{},[1020,1022,1027,1029,1035],{"type":25,"value":1021},"코루틴이 ",{"type":19,"tag":28,"props":1023,"children":1025},{"className":1024},[],[1026],{"type":25,"value":52},{"type":25,"value":1028},"키워드를 사용하여 대기할 수 있는 이유는,\n코루틴에 ",{"type":19,"tag":28,"props":1030,"children":1032},{"className":1031},[],[1033],{"type":25,"value":1034},"__await__",{"type":25,"value":1036},"이라는 메소드가 정의되어 있기 때문이다.",{"type":19,"tag":35,"props":1038,"children":1039},{},[1040,1042,1047,1049,1055,1057,1062],{"type":25,"value":1041},"이러한 객체를 ",{"type":19,"tag":28,"props":1043,"children":1045},{"className":1044},[],[1046],{"type":25,"value":1014},{"type":25,"value":1048}," 객체라고 하며, ",{"type":19,"tag":28,"props":1050,"children":1052},{"className":1051},[],[1053],{"type":25,"value":1054},"typing",{"type":25,"value":1056}," 모듈에서도 확인할 수 있다.\n정말 ",{"type":19,"tag":28,"props":1058,"children":1060},{"className":1059},[],[1061],{"type":25,"value":1034},{"type":25,"value":1063},"만 있으면 가능한지 확인해보자.",{"type":19,"tag":68,"props":1065,"children":1068},{"className":70,"code":1066,"filename":1067,"language":6,"meta":8,"style":8},"import asyncio\nfrom typing import Any, Generator\n\n\nclass Await:\n    def __await__(self) -> Generator[Any, None, int]:\n        for num in range(5):\n            print(num)\n            yield None\n        return 1\n\n\nasync def main() -> None:\n    await Await()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n\n# ❯ poetry run python main3.py\n# 0\n# 1\n# 2\n# 3\n# 4\n","main3.py",[1069],{"type":19,"tag":28,"props":1070,"children":1071},{"__ignoreMap":8},[1072,1083,1105,1112,1119,1136,1171,1206,1219,1232,1244,1251,1258,1285,1297,1304,1311,1334,1341,1348,1357,1365,1373,1382,1391],{"type":19,"tag":78,"props":1073,"children":1074},{"class":80,"line":81},[1075,1079],{"type":19,"tag":78,"props":1076,"children":1077},{"style":85},[1078],{"type":25,"value":88},{"type":19,"tag":78,"props":1080,"children":1081},{"style":91},[1082],{"type":25,"value":94},{"type":19,"tag":78,"props":1084,"children":1085},{"class":80,"line":97},[1086,1091,1096,1100],{"type":19,"tag":78,"props":1087,"children":1088},{"style":85},[1089],{"type":25,"value":1090},"from",{"type":19,"tag":78,"props":1092,"children":1093},{"style":91},[1094],{"type":25,"value":1095}," typing ",{"type":19,"tag":78,"props":1097,"children":1098},{"style":85},[1099],{"type":25,"value":88},{"type":19,"tag":78,"props":1101,"children":1102},{"style":91},[1103],{"type":25,"value":1104}," Any, Generator\n",{"type":19,"tag":78,"props":1106,"children":1107},{"class":80,"line":106},[1108],{"type":19,"tag":78,"props":1109,"children":1110},{"emptyLinePlaceholder":14},[1111],{"type":25,"value":103},{"type":19,"tag":78,"props":1113,"children":1114},{"class":80,"line":114},[1115],{"type":19,"tag":78,"props":1116,"children":1117},{"emptyLinePlaceholder":14},[1118],{"type":25,"value":103},{"type":19,"tag":78,"props":1120,"children":1121},{"class":80,"line":149},[1122,1127,1132],{"type":19,"tag":78,"props":1123,"children":1124},{"style":85},[1125],{"type":25,"value":1126},"class",{"type":19,"tag":78,"props":1128,"children":1129},{"style":127},[1130],{"type":25,"value":1131}," Await",{"type":19,"tag":78,"props":1133,"children":1134},{"style":91},[1135],{"type":25,"value":146},{"type":19,"tag":78,"props":1137,"children":1138},{"class":80,"line":173},[1139,1144,1149,1154,1158,1162,1166],{"type":19,"tag":78,"props":1140,"children":1141},{"style":85},[1142],{"type":25,"value":1143},"    def",{"type":19,"tag":78,"props":1145,"children":1146},{"style":138},[1147],{"type":25,"value":1148}," __await__",{"type":19,"tag":78,"props":1150,"children":1151},{"style":91},[1152],{"type":25,"value":1153},"(self) -> Generator[Any, ",{"type":19,"tag":78,"props":1155,"children":1156},{"style":138},[1157],{"type":25,"value":141},{"type":19,"tag":78,"props":1159,"children":1160},{"style":91},[1161],{"type":25,"value":970},{"type":19,"tag":78,"props":1163,"children":1164},{"style":138},[1165],{"type":25,"value":452},{"type":19,"tag":78,"props":1167,"children":1168},{"style":91},[1169],{"type":25,"value":1170},"]:\n",{"type":19,"tag":78,"props":1172,"children":1173},{"class":80,"line":181},[1174,1179,1184,1188,1192,1196,1201],{"type":19,"tag":78,"props":1175,"children":1176},{"style":85},[1177],{"type":25,"value":1178},"        for",{"type":19,"tag":78,"props":1180,"children":1181},{"style":91},[1182],{"type":25,"value":1183}," num ",{"type":19,"tag":78,"props":1185,"children":1186},{"style":85},[1187],{"type":25,"value":612},{"type":19,"tag":78,"props":1189,"children":1190},{"style":138},[1191],{"type":25,"value":617},{"type":19,"tag":78,"props":1193,"children":1194},{"style":91},[1195],{"type":25,"value":622},{"type":19,"tag":78,"props":1197,"children":1198},{"style":138},[1199],{"type":25,"value":1200},"5",{"type":19,"tag":78,"props":1202,"children":1203},{"style":91},[1204],{"type":25,"value":1205},"):\n",{"type":19,"tag":78,"props":1207,"children":1208},{"class":80,"line":189},[1209,1214],{"type":19,"tag":78,"props":1210,"children":1211},{"style":138},[1212],{"type":25,"value":1213},"            print",{"type":19,"tag":78,"props":1215,"children":1216},{"style":91},[1217],{"type":25,"value":1218},"(num)\n",{"type":19,"tag":78,"props":1220,"children":1221},{"class":80,"line":218},[1222,1227],{"type":19,"tag":78,"props":1223,"children":1224},{"style":85},[1225],{"type":25,"value":1226},"            yield",{"type":19,"tag":78,"props":1228,"children":1229},{"style":138},[1230],{"type":25,"value":1231}," None\n",{"type":19,"tag":78,"props":1233,"children":1234},{"class":80,"line":231},[1235,1240],{"type":19,"tag":78,"props":1236,"children":1237},{"style":85},[1238],{"type":25,"value":1239},"        return",{"type":19,"tag":78,"props":1241,"children":1242},{"style":138},[1243],{"type":25,"value":769},{"type":19,"tag":78,"props":1245,"children":1246},{"class":80,"line":239},[1247],{"type":19,"tag":78,"props":1248,"children":1249},{"emptyLinePlaceholder":14},[1250],{"type":25,"value":103},{"type":19,"tag":78,"props":1252,"children":1253},{"class":80,"line":247},[1254],{"type":19,"tag":78,"props":1255,"children":1256},{"emptyLinePlaceholder":14},[1257],{"type":25,"value":103},{"type":19,"tag":78,"props":1259,"children":1260},{"class":80,"line":276},[1261,1265,1269,1273,1277,1281],{"type":19,"tag":78,"props":1262,"children":1263},{"style":85},[1264],{"type":25,"value":12},{"type":19,"tag":78,"props":1266,"children":1267},{"style":85},[1268],{"type":25,"value":124},{"type":19,"tag":78,"props":1270,"children":1271},{"style":127},[1272],{"type":25,"value":203},{"type":19,"tag":78,"props":1274,"children":1275},{"style":91},[1276],{"type":25,"value":135},{"type":19,"tag":78,"props":1278,"children":1279},{"style":138},[1280],{"type":25,"value":141},{"type":19,"tag":78,"props":1282,"children":1283},{"style":91},[1284],{"type":25,"value":146},{"type":19,"tag":78,"props":1286,"children":1287},{"class":80,"line":508},[1288,1292],{"type":19,"tag":78,"props":1289,"children":1290},{"style":85},[1291],{"type":25,"value":155},{"type":19,"tag":78,"props":1293,"children":1294},{"style":91},[1295],{"type":25,"value":1296}," Await()\n",{"type":19,"tag":78,"props":1298,"children":1299},{"class":80,"line":533},[1300],{"type":19,"tag":78,"props":1301,"children":1302},{"emptyLinePlaceholder":14},[1303],{"type":25,"value":103},{"type":19,"tag":78,"props":1305,"children":1306},{"class":80,"line":541},[1307],{"type":19,"tag":78,"props":1308,"children":1309},{"emptyLinePlaceholder":14},[1310],{"type":25,"value":103},{"type":19,"tag":78,"props":1312,"children":1313},{"class":80,"line":549},[1314,1318,1322,1326,1330],{"type":19,"tag":78,"props":1315,"children":1316},{"style":85},[1317],{"type":25,"value":253},{"type":19,"tag":78,"props":1319,"children":1320},{"style":138},[1321],{"type":25,"value":258},{"type":19,"tag":78,"props":1323,"children":1324},{"style":85},[1325],{"type":25,"value":263},{"type":19,"tag":78,"props":1327,"children":1328},{"style":266},[1329],{"type":25,"value":269},{"type":19,"tag":78,"props":1331,"children":1332},{"style":91},[1333],{"type":25,"value":146},{"type":19,"tag":78,"props":1335,"children":1336},{"class":80,"line":577},[1337],{"type":19,"tag":78,"props":1338,"children":1339},{"style":91},[1340],{"type":25,"value":282},{"type":19,"tag":78,"props":1342,"children":1343},{"class":80,"line":635},[1344],{"type":19,"tag":78,"props":1345,"children":1346},{"emptyLinePlaceholder":14},[1347],{"type":25,"value":103},{"type":19,"tag":78,"props":1349,"children":1350},{"class":80,"line":643},[1351],{"type":19,"tag":78,"props":1352,"children":1354},{"style":1353},"--shiki-default:#6A737D;--shiki-dark:#6A737D",[1355],{"type":25,"value":1356},"# ❯ poetry run python main3.py\n",{"type":19,"tag":78,"props":1358,"children":1359},{"class":80,"line":651},[1360],{"type":19,"tag":78,"props":1361,"children":1362},{"style":1353},[1363],{"type":25,"value":1364},"# 0\n",{"type":19,"tag":78,"props":1366,"children":1367},{"class":80,"line":675},[1368],{"type":19,"tag":78,"props":1369,"children":1370},{"style":1353},[1371],{"type":25,"value":1372},"# 1\n",{"type":19,"tag":78,"props":1374,"children":1376},{"class":80,"line":1375},23,[1377],{"type":19,"tag":78,"props":1378,"children":1379},{"style":1353},[1380],{"type":25,"value":1381},"# 2\n",{"type":19,"tag":78,"props":1383,"children":1385},{"class":80,"line":1384},24,[1386],{"type":19,"tag":78,"props":1387,"children":1388},{"style":1353},[1389],{"type":25,"value":1390},"# 3\n",{"type":19,"tag":78,"props":1392,"children":1394},{"class":80,"line":1393},25,[1395],{"type":19,"tag":78,"props":1396,"children":1397},{"style":1353},[1398],{"type":25,"value":1399},"# 4\n",{"type":19,"tag":695,"props":1401,"children":1402},{},[1403],{"type":19,"tag":35,"props":1404,"children":1405},{},[1406,1412,1414,1419,1421,1427,1429,1434],{"type":19,"tag":28,"props":1407,"children":1409},{"className":1408},[],[1410],{"type":25,"value":1411},"Await",{"type":25,"value":1413},"객체를 곧바로 ",{"type":19,"tag":28,"props":1415,"children":1417},{"className":1416},[],[1418],{"type":25,"value":293},{"type":25,"value":1420},"에서 사용하지 않고,\n",{"type":19,"tag":28,"props":1422,"children":1424},{"className":1423},[],[1425],{"type":25,"value":1426},"main",{"type":25,"value":1428},"함수에서 생성하여 사용하는 이유는,\n",{"type":19,"tag":28,"props":1430,"children":1432},{"className":1431},[],[1433],{"type":25,"value":293},{"type":25,"value":1435},"에서 코루틴이 아니면 에러를 발생시키기 때문이다.",{"type":19,"tag":35,"props":1437,"children":1438},{},[1439,1441,1446,1447,1452],{"type":25,"value":1440},"즉, ",{"type":19,"tag":28,"props":1442,"children":1444},{"className":1443},[],[1445],{"type":25,"value":12},{"type":25,"value":970},{"type":19,"tag":28,"props":1448,"children":1450},{"className":1449},[],[1451],{"type":25,"value":52},{"type":25,"value":1453},"은 사실 제너레이터를 활용한\n컨텍스트 스위칭에 대한 문법 설탕이라는 것을 알 수 있다.",{"type":19,"tag":35,"props":1455,"children":1456},{},[1457,1459,1465],{"type":25,"value":1458},"이러한 문법 설탕이 추가되기 전까지는,\n제너레이터 문법인 ",{"type":19,"tag":28,"props":1460,"children":1462},{"className":1461},[],[1463],{"type":25,"value":1464},"yield from",{"type":25,"value":1466},"을 사용했다.",{"type":19,"tag":35,"props":1468,"children":1469},{},[1470,1472,1477,1479,1485,1486,1492,1494,1499,1500,1505],{"type":25,"value":1471},"물론 이러한 사실은 알면 좋지만 별로 중요하지 않다.\n대부분의 경우 ",{"type":19,"tag":28,"props":1473,"children":1475},{"className":1474},[],[1476],{"type":25,"value":1034},{"type":25,"value":1478},"를 직접 정의하기는 커녕\n",{"type":19,"tag":28,"props":1480,"children":1482},{"className":1481},[],[1483],{"type":25,"value":1484},"Future",{"type":25,"value":46},{"type":19,"tag":28,"props":1487,"children":1489},{"className":1488},[],[1490],{"type":25,"value":1491},"Task",{"type":25,"value":1493},"도 구경하기 어려우며,\n",{"type":19,"tag":28,"props":1495,"children":1497},{"className":1496},[],[1498],{"type":25,"value":12},{"type":25,"value":46},{"type":19,"tag":28,"props":1501,"children":1503},{"className":1502},[],[1504],{"type":25,"value":52},{"type":25,"value":1506},"을 사용한 코루틴만 사용할 것이다.",{"type":19,"tag":947,"props":1508,"children":1510},{"id":1509},"콜백-형태의-future",[1511,1513],{"type":25,"value":1512},"콜백 형태의 ",{"type":19,"tag":28,"props":1514,"children":1516},{"className":1515},[],[1517],{"type":25,"value":1484},{"type":19,"tag":35,"props":1519,"children":1520},{},[1521,1526,1528,1533,1535,1541,1542,1547],{"type":19,"tag":28,"props":1522,"children":1524},{"className":1523},[],[1525],{"type":25,"value":33},{"type":25,"value":1527},"의 ",{"type":19,"tag":28,"props":1529,"children":1531},{"className":1530},[],[1532],{"type":25,"value":1484},{"type":25,"value":1534},"는 ",{"type":19,"tag":28,"props":1536,"children":1538},{"className":1537},[],[1539],{"type":25,"value":1540},"concurrent.futures",{"type":25,"value":1527},{"type":19,"tag":28,"props":1543,"children":1545},{"className":1544},[],[1546],{"type":25,"value":1484},{"type":25,"value":1548},"를 본따 만들어졌다.",{"type":19,"tag":35,"props":1550,"children":1551},{},[1552,1557,1558,1563],{"type":19,"tag":28,"props":1553,"children":1555},{"className":1554},[],[1556],{"type":25,"value":1540},{"type":25,"value":1527},{"type":19,"tag":28,"props":1559,"children":1561},{"className":1560},[],[1562],{"type":25,"value":1484},{"type":25,"value":1564},"는 쓰레드를 제어하기 위해 만들어졌고,\n멀티쓰레드 환경의 비동기 제어가 싱글쓰레드 환경으로 확장된 것으로 볼 수도 있다.",{"type":19,"tag":35,"props":1566,"children":1567},{},[1568,1570,1575],{"type":25,"value":1569},"앞서 말했듯이, 대부분의 경우 ",{"type":19,"tag":28,"props":1571,"children":1573},{"className":1572},[],[1574],{"type":25,"value":1484},{"type":25,"value":1576},"에 대해 알 필요가 없고,\n구버전 파이썬을 사용한다면 모를까, 이제는 사용할 일도 없는 객체다.",{"type":19,"tag":947,"props":1578,"children":1580},{"id":1579},"future를-상속받는-task",[1581,1586,1588],{"type":19,"tag":28,"props":1582,"children":1584},{"className":1583},[],[1585],{"type":25,"value":1484},{"type":25,"value":1587},"를 상속받는 ",{"type":19,"tag":28,"props":1589,"children":1591},{"className":1590},[],[1592],{"type":25,"value":1491},{"type":19,"tag":35,"props":1594,"children":1595},{},[1596,1601,1602,1607,1609,1614,1616,1621,1622,1628,1629,1635],{"type":19,"tag":28,"props":1597,"children":1599},{"className":1598},[],[1600],{"type":25,"value":1491},{"type":25,"value":1534},{"type":19,"tag":28,"props":1603,"children":1605},{"className":1604},[],[1606],{"type":25,"value":1484},{"type":25,"value":1608},"를 상속받아 구현한 ",{"type":19,"tag":28,"props":1610,"children":1612},{"className":1611},[],[1613],{"type":25,"value":1014},{"type":25,"value":1615},"한 객체다.\n",{"type":19,"tag":28,"props":1617,"children":1619},{"className":1618},[],[1620],{"type":25,"value":1491},{"type":25,"value":1534},{"type":19,"tag":28,"props":1623,"children":1625},{"className":1624},[],[1626],{"type":25,"value":1627},"js",{"type":25,"value":1527},{"type":19,"tag":28,"props":1630,"children":1632},{"className":1631},[],[1633],{"type":25,"value":1634},"Promise",{"type":25,"value":1636},"처럼, 생성됐다면 이미 이벤트루프에 예약된 상태다.",{"type":19,"tag":695,"props":1638,"children":1639},{},[1640],{"type":19,"tag":35,"props":1641,"children":1642},{},[1643,1648],{"type":19,"tag":28,"props":1644,"children":1646},{"className":1645},[],[1647],{"type":25,"value":1484},{"type":25,"value":1649},"는 생성했지만, 이벤트루프에 예약되어 있지 않을 수 있다.",{"type":19,"tag":35,"props":1651,"children":1652},{},[1653],{"type":25,"value":1654},"따라서 다음과 같은 코드는, 정상적으로 실행된다.",{"type":19,"tag":68,"props":1656,"children":1659},{"className":70,"code":1657,"filename":1658,"language":6,"meta":8,"style":8},"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -> None:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n\n\nasync def main() -> None:\n    coro = test()\n    _ = asyncio.create_task(coro)\n    logger.info(\"before sleep\")\n    await asyncio.sleep(2)\n    logger.info(\"after sleep\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n#  ❯ poetry run python main4.py\n#  before sleep\n#  start\n#  done!\n#  after sleep\n","main4.py",[1660],{"type":19,"tag":28,"props":1661,"children":1662},{"__ignoreMap":8},[1663,1674,1685,1696,1703,1718,1733,1740,1747,1754,1781,1797,1816,1832,1839,1846,1873,1889,1906,1922,1942,1958,1965,1972,1995,2002,2011,2020,2029,2038],{"type":19,"tag":78,"props":1664,"children":1665},{"class":80,"line":81},[1666,1670],{"type":19,"tag":78,"props":1667,"children":1668},{"style":85},[1669],{"type":25,"value":88},{"type":19,"tag":78,"props":1671,"children":1672},{"style":91},[1673],{"type":25,"value":94},{"type":19,"tag":78,"props":1675,"children":1676},{"class":80,"line":97},[1677,1681],{"type":19,"tag":78,"props":1678,"children":1679},{"style":85},[1680],{"type":25,"value":88},{"type":19,"tag":78,"props":1682,"children":1683},{"style":91},[1684],{"type":25,"value":339},{"type":19,"tag":78,"props":1686,"children":1687},{"class":80,"line":106},[1688,1692],{"type":19,"tag":78,"props":1689,"children":1690},{"style":85},[1691],{"type":25,"value":88},{"type":19,"tag":78,"props":1693,"children":1694},{"style":91},[1695],{"type":25,"value":363},{"type":19,"tag":78,"props":1697,"children":1698},{"class":80,"line":114},[1699],{"type":19,"tag":78,"props":1700,"children":1701},{"emptyLinePlaceholder":14},[1702],{"type":25,"value":103},{"type":19,"tag":78,"props":1704,"children":1705},{"class":80,"line":149},[1706,1710,1714],{"type":19,"tag":78,"props":1707,"children":1708},{"style":91},[1709],{"type":25,"value":378},{"type":19,"tag":78,"props":1711,"children":1712},{"style":85},[1713],{"type":25,"value":383},{"type":19,"tag":78,"props":1715,"children":1716},{"style":91},[1717],{"type":25,"value":388},{"type":19,"tag":78,"props":1719,"children":1720},{"class":80,"line":173},[1721,1725,1729],{"type":19,"tag":78,"props":1722,"children":1723},{"style":91},[1724],{"type":25,"value":396},{"type":19,"tag":78,"props":1726,"children":1727},{"style":138},[1728],{"type":25,"value":401},{"type":19,"tag":78,"props":1730,"children":1731},{"style":91},[1732],{"type":25,"value":170},{"type":19,"tag":78,"props":1734,"children":1735},{"class":80,"line":181},[1736],{"type":19,"tag":78,"props":1737,"children":1738},{"style":91},[1739],{"type":25,"value":413},{"type":19,"tag":78,"props":1741,"children":1742},{"class":80,"line":189},[1743],{"type":19,"tag":78,"props":1744,"children":1745},{"emptyLinePlaceholder":14},[1746],{"type":25,"value":103},{"type":19,"tag":78,"props":1748,"children":1749},{"class":80,"line":218},[1750],{"type":19,"tag":78,"props":1751,"children":1752},{"emptyLinePlaceholder":14},[1753],{"type":25,"value":103},{"type":19,"tag":78,"props":1755,"children":1756},{"class":80,"line":231},[1757,1761,1765,1769,1773,1777],{"type":19,"tag":78,"props":1758,"children":1759},{"style":85},[1760],{"type":25,"value":12},{"type":19,"tag":78,"props":1762,"children":1763},{"style":85},[1764],{"type":25,"value":124},{"type":19,"tag":78,"props":1766,"children":1767},{"style":127},[1768],{"type":25,"value":130},{"type":19,"tag":78,"props":1770,"children":1771},{"style":91},[1772],{"type":25,"value":135},{"type":19,"tag":78,"props":1774,"children":1775},{"style":138},[1776],{"type":25,"value":141},{"type":19,"tag":78,"props":1778,"children":1779},{"style":91},[1780],{"type":25,"value":146},{"type":19,"tag":78,"props":1782,"children":1783},{"class":80,"line":239},[1784,1788,1793],{"type":19,"tag":78,"props":1785,"children":1786},{"style":91},[1787],{"type":25,"value":473},{"type":19,"tag":78,"props":1789,"children":1790},{"style":266},[1791],{"type":25,"value":1792},"\"start\"",{"type":19,"tag":78,"props":1794,"children":1795},{"style":91},[1796],{"type":25,"value":170},{"type":19,"tag":78,"props":1798,"children":1799},{"class":80,"line":247},[1800,1804,1808,1812],{"type":19,"tag":78,"props":1801,"children":1802},{"style":85},[1803],{"type":25,"value":155},{"type":19,"tag":78,"props":1805,"children":1806},{"style":91},[1807],{"type":25,"value":160},{"type":19,"tag":78,"props":1809,"children":1810},{"style":138},[1811],{"type":25,"value":165},{"type":19,"tag":78,"props":1813,"children":1814},{"style":91},[1815],{"type":25,"value":170},{"type":19,"tag":78,"props":1817,"children":1818},{"class":80,"line":276},[1819,1823,1828],{"type":19,"tag":78,"props":1820,"children":1821},{"style":91},[1822],{"type":25,"value":473},{"type":19,"tag":78,"props":1824,"children":1825},{"style":266},[1826],{"type":25,"value":1827},"\"done!\"",{"type":19,"tag":78,"props":1829,"children":1830},{"style":91},[1831],{"type":25,"value":170},{"type":19,"tag":78,"props":1833,"children":1834},{"class":80,"line":508},[1835],{"type":19,"tag":78,"props":1836,"children":1837},{"emptyLinePlaceholder":14},[1838],{"type":25,"value":103},{"type":19,"tag":78,"props":1840,"children":1841},{"class":80,"line":533},[1842],{"type":19,"tag":78,"props":1843,"children":1844},{"emptyLinePlaceholder":14},[1845],{"type":25,"value":103},{"type":19,"tag":78,"props":1847,"children":1848},{"class":80,"line":541},[1849,1853,1857,1861,1865,1869],{"type":19,"tag":78,"props":1850,"children":1851},{"style":85},[1852],{"type":25,"value":12},{"type":19,"tag":78,"props":1854,"children":1855},{"style":85},[1856],{"type":25,"value":124},{"type":19,"tag":78,"props":1858,"children":1859},{"style":127},[1860],{"type":25,"value":203},{"type":19,"tag":78,"props":1862,"children":1863},{"style":91},[1864],{"type":25,"value":135},{"type":19,"tag":78,"props":1866,"children":1867},{"style":138},[1868],{"type":25,"value":141},{"type":19,"tag":78,"props":1870,"children":1871},{"style":91},[1872],{"type":25,"value":146},{"type":19,"tag":78,"props":1874,"children":1875},{"class":80,"line":549},[1876,1881,1885],{"type":19,"tag":78,"props":1877,"children":1878},{"style":91},[1879],{"type":25,"value":1880},"    coro ",{"type":19,"tag":78,"props":1882,"children":1883},{"style":85},[1884],{"type":25,"value":383},{"type":19,"tag":78,"props":1886,"children":1887},{"style":91},[1888],{"type":25,"value":228},{"type":19,"tag":78,"props":1890,"children":1891},{"class":80,"line":577},[1892,1897,1901],{"type":19,"tag":78,"props":1893,"children":1894},{"style":91},[1895],{"type":25,"value":1896},"    _ ",{"type":19,"tag":78,"props":1898,"children":1899},{"style":85},[1900],{"type":25,"value":383},{"type":19,"tag":78,"props":1902,"children":1903},{"style":91},[1904],{"type":25,"value":1905}," asyncio.create_task(coro)\n",{"type":19,"tag":78,"props":1907,"children":1908},{"class":80,"line":635},[1909,1913,1918],{"type":19,"tag":78,"props":1910,"children":1911},{"style":91},[1912],{"type":25,"value":473},{"type":19,"tag":78,"props":1914,"children":1915},{"style":266},[1916],{"type":25,"value":1917},"\"before sleep\"",{"type":19,"tag":78,"props":1919,"children":1920},{"style":91},[1921],{"type":25,"value":170},{"type":19,"tag":78,"props":1923,"children":1924},{"class":80,"line":643},[1925,1929,1933,1938],{"type":19,"tag":78,"props":1926,"children":1927},{"style":85},[1928],{"type":25,"value":155},{"type":19,"tag":78,"props":1930,"children":1931},{"style":91},[1932],{"type":25,"value":160},{"type":19,"tag":78,"props":1934,"children":1935},{"style":138},[1936],{"type":25,"value":1937},"2",{"type":19,"tag":78,"props":1939,"children":1940},{"style":91},[1941],{"type":25,"value":170},{"type":19,"tag":78,"props":1943,"children":1944},{"class":80,"line":651},[1945,1949,1954],{"type":19,"tag":78,"props":1946,"children":1947},{"style":91},[1948],{"type":25,"value":473},{"type":19,"tag":78,"props":1950,"children":1951},{"style":266},[1952],{"type":25,"value":1953},"\"after sleep\"",{"type":19,"tag":78,"props":1955,"children":1956},{"style":91},[1957],{"type":25,"value":170},{"type":19,"tag":78,"props":1959,"children":1960},{"class":80,"line":675},[1961],{"type":19,"tag":78,"props":1962,"children":1963},{"emptyLinePlaceholder":14},[1964],{"type":25,"value":103},{"type":19,"tag":78,"props":1966,"children":1967},{"class":80,"line":1375},[1968],{"type":19,"tag":78,"props":1969,"children":1970},{"emptyLinePlaceholder":14},[1971],{"type":25,"value":103},{"type":19,"tag":78,"props":1973,"children":1974},{"class":80,"line":1384},[1975,1979,1983,1987,1991],{"type":19,"tag":78,"props":1976,"children":1977},{"style":85},[1978],{"type":25,"value":253},{"type":19,"tag":78,"props":1980,"children":1981},{"style":138},[1982],{"type":25,"value":258},{"type":19,"tag":78,"props":1984,"children":1985},{"style":85},[1986],{"type":25,"value":263},{"type":19,"tag":78,"props":1988,"children":1989},{"style":266},[1990],{"type":25,"value":269},{"type":19,"tag":78,"props":1992,"children":1993},{"style":91},[1994],{"type":25,"value":146},{"type":19,"tag":78,"props":1996,"children":1997},{"class":80,"line":1393},[1998],{"type":19,"tag":78,"props":1999,"children":2000},{"style":91},[2001],{"type":25,"value":282},{"type":19,"tag":78,"props":2003,"children":2005},{"class":80,"line":2004},26,[2006],{"type":19,"tag":78,"props":2007,"children":2008},{"style":1353},[2009],{"type":25,"value":2010},"#  ❯ poetry run python main4.py\n",{"type":19,"tag":78,"props":2012,"children":2014},{"class":80,"line":2013},27,[2015],{"type":19,"tag":78,"props":2016,"children":2017},{"style":1353},[2018],{"type":25,"value":2019},"#  before sleep\n",{"type":19,"tag":78,"props":2021,"children":2023},{"class":80,"line":2022},28,[2024],{"type":19,"tag":78,"props":2025,"children":2026},{"style":1353},[2027],{"type":25,"value":2028},"#  start\n",{"type":19,"tag":78,"props":2030,"children":2032},{"class":80,"line":2031},29,[2033],{"type":19,"tag":78,"props":2034,"children":2035},{"style":1353},[2036],{"type":25,"value":2037},"#  done!\n",{"type":19,"tag":78,"props":2039,"children":2041},{"class":80,"line":2040},30,[2042],{"type":19,"tag":78,"props":2043,"children":2044},{"style":1353},[2045],{"type":25,"value":2046},"#  after sleep\n",{"type":19,"tag":35,"props":2048,"children":2049},{},[2050,2055,2057,2062,2063,2068,2070,2076,2078,2083,2085,2091],{"type":19,"tag":28,"props":2051,"children":2053},{"className":2052},[],[2054],{"type":25,"value":52},{"type":25,"value":2056}," 또는 ",{"type":19,"tag":28,"props":2058,"children":2060},{"className":2059},[],[2061],{"type":25,"value":1464},{"type":25,"value":2056},{"type":19,"tag":28,"props":2064,"children":2066},{"className":2065},[],[2067],{"type":25,"value":1034},{"type":25,"value":2069},"메소드를 직업 호출하지 않았지만,\n",{"type":19,"tag":28,"props":2071,"children":2073},{"className":2072},[],[2074],{"type":25,"value":2075},"test",{"type":25,"value":2077},"로 정의된 비동기 함수는 정상적으로 실행됐다.\n왜냐하면 신규 ",{"type":19,"tag":28,"props":2079,"children":2081},{"className":2080},[],[2082],{"type":25,"value":1491},{"type":25,"value":2084},"객체를 생성했고,\n이후 ",{"type":19,"tag":28,"props":2086,"children":2088},{"className":2087},[],[2089],{"type":25,"value":2090},"await asyncio.sleep(2)",{"type":25,"value":2092},"를 통해 콘텍스트 스위칭을 유발했기 때문이다.",{"type":19,"tag":35,"props":2094,"children":2095},{},[2096],{"type":25,"value":2097},"정리하자면 다음과 같다.",{"type":19,"tag":2099,"props":2100,"children":2101},"ol",{},[2102,2113,2126,2152,2171,2181,2193],{"type":19,"tag":2103,"props":2104,"children":2105},"li",{},[2106,2111],{"type":19,"tag":28,"props":2107,"children":2109},{"className":2108},[],[2110],{"type":25,"value":2075},{"type":25,"value":2112},"함수를 실행하여 코루틴을 생성한다.",{"type":19,"tag":2103,"props":2114,"children":2115},{},[2116,2118,2124],{"type":25,"value":2117},"생성한 코루틴을 ",{"type":19,"tag":28,"props":2119,"children":2121},{"className":2120},[],[2122],{"type":25,"value":2123},"asyncio.create_task",{"type":25,"value":2125},"함수를 사용하여, 이벤트루프에 예약한다.",{"type":19,"tag":2103,"props":2127,"children":2128},{},[2129,2135,2137,2142,2144,2150],{"type":19,"tag":28,"props":2130,"children":2132},{"className":2131},[],[2133],{"type":25,"value":2134},"create_task",{"type":25,"value":2136},"함수가 ",{"type":19,"tag":28,"props":2138,"children":2140},{"className":2139},[],[2141],{"type":25,"value":1491},{"type":25,"value":2143},"객체를 반환한다.(의도적으로 ",{"type":19,"tag":28,"props":2145,"children":2147},{"className":2146},[],[2148],{"type":25,"value":2149},"_",{"type":25,"value":2151},"를 사용하여 무시하였다.)",{"type":19,"tag":2103,"props":2153,"children":2154},{},[2155,2157,2162,2164,2169],{"type":25,"value":2156},"아직 ",{"type":19,"tag":28,"props":2158,"children":2160},{"className":2159},[],[2161],{"type":25,"value":1426},{"type":25,"value":2163},"함수가 콘텍스트를 점유중이므로, 앞서 생성한 ",{"type":19,"tag":28,"props":2165,"children":2167},{"className":2166},[],[2168],{"type":25,"value":1491},{"type":25,"value":2170},"는 실행되지 않았다.",{"type":19,"tag":2103,"props":2172,"children":2173},{},[2174,2179],{"type":19,"tag":28,"props":2175,"children":2177},{"className":2176},[],[2178],{"type":25,"value":2090},{"type":25,"value":2180},"를 통해, 콘텍스트 점유를 해제한다.",{"type":19,"tag":2103,"props":2182,"children":2183},{},[2184,2186,2191],{"type":25,"value":2185},"앞서 생성한 ",{"type":19,"tag":28,"props":2187,"children":2189},{"className":2188},[],[2190],{"type":25,"value":1491},{"type":25,"value":2192},"로 콘텍스트가 변경된다.",{"type":19,"tag":2103,"props":2194,"children":2195},{},[2196],{"type":25,"value":2197},"이하 생략",{"type":19,"tag":35,"props":2199,"children":2200},{},[2201,2202,2207,2209,2214],{"type":25,"value":1440},{"type":19,"tag":28,"props":2203,"children":2205},{"className":2204},[],[2206],{"type":25,"value":52},{"type":25,"value":2208},"이 콘텍스트 스위칭에 대한 문법 설탕이자,\n동시에 ",{"type":19,"tag":28,"props":2210,"children":2212},{"className":2211},[],[2213],{"type":25,"value":1491},{"type":25,"value":2215},"를 생성하는 문법 설탕인 것을 알 수 있다.",{"type":19,"tag":35,"props":2217,"children":2218},{},[2219],{"type":25,"value":2220},"여기서 한가지 궁금한 점이 생긴다.",{"type":19,"tag":2099,"props":2222,"children":2223},{},[2224,2236,2248],{"type":19,"tag":2103,"props":2225,"children":2226},{},[2227,2229,2234],{"type":25,"value":2228},"한번 생성한 코루틴은, 한번만 ",{"type":19,"tag":28,"props":2230,"children":2232},{"className":2231},[],[2233],{"type":25,"value":52},{"type":25,"value":2235},"으로 대기할 수 있다.",{"type":19,"tag":2103,"props":2237,"children":2238},{},[2239,2241,2246],{"type":25,"value":2240},"한번 생성한 코루틴은, ",{"type":19,"tag":28,"props":2242,"children":2244},{"className":2243},[],[2245],{"type":25,"value":1491},{"type":25,"value":2247},"를 생성할 수 있다.",{"type":19,"tag":2103,"props":2249,"children":2250},{},[2251,2256,2257,2262,2264,2269],{"type":19,"tag":28,"props":2252,"children":2254},{"className":2253},[],[2255],{"type":25,"value":1491},{"type":25,"value":1534},{"type":19,"tag":28,"props":2258,"children":2260},{"className":2259},[],[2261],{"type":25,"value":1014},{"type":25,"value":2263},"이므로 ",{"type":19,"tag":28,"props":2265,"children":2267},{"className":2266},[],[2268],{"type":25,"value":52},{"type":25,"value":2235},{"type":19,"tag":35,"props":2271,"children":2272},{},[2273,2275,2280,2282,2288,2289,2294],{"type":25,"value":2274},"이전의 ",{"type":19,"tag":28,"props":2276,"children":2278},{"className":2277},[],[2279],{"type":25,"value":1658},{"type":25,"value":2281}," 스크립트에서 코루틴 ",{"type":19,"tag":28,"props":2283,"children":2285},{"className":2284},[],[2286],{"type":25,"value":2287},"coro",{"type":25,"value":1534},{"type":19,"tag":28,"props":2290,"children":2292},{"className":2291},[],[2293],{"type":25,"value":2134},{"type":25,"value":2295},"함수를 통해\n이미 실행된 상태다.",{"type":19,"tag":35,"props":2297,"children":2298},{},[2299,2301,2306],{"type":25,"value":2300},"이후 생성한 ",{"type":19,"tag":28,"props":2302,"children":2304},{"className":2303},[],[2305],{"type":25,"value":1491},{"type":25,"value":2307},"를 대기하는 것이 가능할까?",{"type":19,"tag":68,"props":2309,"children":2312},{"className":70,"code":2310,"filename":2311,"language":6,"meta":8,"style":8},"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -> int:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n    return 1\n\n\nasync def main() -> None:\n    coro = test()\n    task = asyncio.create_task(coro)\n\n    logger.info(\"before sleep\")\n\n    queue = asyncio.Queue(1)\n    task.add_done_callback(lambda task: queue.put_nowait(task.result()))\n\n    value = await task\n\n    logger.info(\"after sleep\")\n\n    result = task.result()\n    queue_value = await queue.get()\n    logger.info(\"value=%r, result=%r, queue_value=%r\", value, result, queue_value)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main5.py\n# before sleep\n# start\n# done!\n# after sleep\n# value=1, result=1, queue_value=1\n","main5.py",[2313],{"type":19,"tag":28,"props":2314,"children":2315},{"__ignoreMap":8},[2316,2327,2338,2349,2356,2371,2386,2393,2400,2407,2434,2449,2468,2483,2495,2502,2509,2536,2551,2567,2574,2589,2596,2621,2639,2646,2668,2675,2690,2697,2714,2736,2781,2789,2797,2821,2829,2838,2847,2856,2865,2874],{"type":19,"tag":78,"props":2317,"children":2318},{"class":80,"line":81},[2319,2323],{"type":19,"tag":78,"props":2320,"children":2321},{"style":85},[2322],{"type":25,"value":88},{"type":19,"tag":78,"props":2324,"children":2325},{"style":91},[2326],{"type":25,"value":94},{"type":19,"tag":78,"props":2328,"children":2329},{"class":80,"line":97},[2330,2334],{"type":19,"tag":78,"props":2331,"children":2332},{"style":85},[2333],{"type":25,"value":88},{"type":19,"tag":78,"props":2335,"children":2336},{"style":91},[2337],{"type":25,"value":339},{"type":19,"tag":78,"props":2339,"children":2340},{"class":80,"line":106},[2341,2345],{"type":19,"tag":78,"props":2342,"children":2343},{"style":85},[2344],{"type":25,"value":88},{"type":19,"tag":78,"props":2346,"children":2347},{"style":91},[2348],{"type":25,"value":363},{"type":19,"tag":78,"props":2350,"children":2351},{"class":80,"line":114},[2352],{"type":19,"tag":78,"props":2353,"children":2354},{"emptyLinePlaceholder":14},[2355],{"type":25,"value":103},{"type":19,"tag":78,"props":2357,"children":2358},{"class":80,"line":149},[2359,2363,2367],{"type":19,"tag":78,"props":2360,"children":2361},{"style":91},[2362],{"type":25,"value":378},{"type":19,"tag":78,"props":2364,"children":2365},{"style":85},[2366],{"type":25,"value":383},{"type":19,"tag":78,"props":2368,"children":2369},{"style":91},[2370],{"type":25,"value":388},{"type":19,"tag":78,"props":2372,"children":2373},{"class":80,"line":173},[2374,2378,2382],{"type":19,"tag":78,"props":2375,"children":2376},{"style":91},[2377],{"type":25,"value":396},{"type":19,"tag":78,"props":2379,"children":2380},{"style":138},[2381],{"type":25,"value":401},{"type":19,"tag":78,"props":2383,"children":2384},{"style":91},[2385],{"type":25,"value":170},{"type":19,"tag":78,"props":2387,"children":2388},{"class":80,"line":181},[2389],{"type":19,"tag":78,"props":2390,"children":2391},{"style":91},[2392],{"type":25,"value":413},{"type":19,"tag":78,"props":2394,"children":2395},{"class":80,"line":189},[2396],{"type":19,"tag":78,"props":2397,"children":2398},{"emptyLinePlaceholder":14},[2399],{"type":25,"value":103},{"type":19,"tag":78,"props":2401,"children":2402},{"class":80,"line":218},[2403],{"type":19,"tag":78,"props":2404,"children":2405},{"emptyLinePlaceholder":14},[2406],{"type":25,"value":103},{"type":19,"tag":78,"props":2408,"children":2409},{"class":80,"line":231},[2410,2414,2418,2422,2426,2430],{"type":19,"tag":78,"props":2411,"children":2412},{"style":85},[2413],{"type":25,"value":12},{"type":19,"tag":78,"props":2415,"children":2416},{"style":85},[2417],{"type":25,"value":124},{"type":19,"tag":78,"props":2419,"children":2420},{"style":127},[2421],{"type":25,"value":130},{"type":19,"tag":78,"props":2423,"children":2424},{"style":91},[2425],{"type":25,"value":135},{"type":19,"tag":78,"props":2427,"children":2428},{"style":138},[2429],{"type":25,"value":452},{"type":19,"tag":78,"props":2431,"children":2432},{"style":91},[2433],{"type":25,"value":146},{"type":19,"tag":78,"props":2435,"children":2436},{"class":80,"line":239},[2437,2441,2445],{"type":19,"tag":78,"props":2438,"children":2439},{"style":91},[2440],{"type":25,"value":473},{"type":19,"tag":78,"props":2442,"children":2443},{"style":266},[2444],{"type":25,"value":1792},{"type":19,"tag":78,"props":2446,"children":2447},{"style":91},[2448],{"type":25,"value":170},{"type":19,"tag":78,"props":2450,"children":2451},{"class":80,"line":247},[2452,2456,2460,2464],{"type":19,"tag":78,"props":2453,"children":2454},{"style":85},[2455],{"type":25,"value":155},{"type":19,"tag":78,"props":2457,"children":2458},{"style":91},[2459],{"type":25,"value":160},{"type":19,"tag":78,"props":2461,"children":2462},{"style":138},[2463],{"type":25,"value":165},{"type":19,"tag":78,"props":2465,"children":2466},{"style":91},[2467],{"type":25,"value":170},{"type":19,"tag":78,"props":2469,"children":2470},{"class":80,"line":276},[2471,2475,2479],{"type":19,"tag":78,"props":2472,"children":2473},{"style":91},[2474],{"type":25,"value":473},{"type":19,"tag":78,"props":2476,"children":2477},{"style":266},[2478],{"type":25,"value":1827},{"type":19,"tag":78,"props":2480,"children":2481},{"style":91},[2482],{"type":25,"value":170},{"type":19,"tag":78,"props":2484,"children":2485},{"class":80,"line":508},[2486,2491],{"type":19,"tag":78,"props":2487,"children":2488},{"style":85},[2489],{"type":25,"value":2490},"    return",{"type":19,"tag":78,"props":2492,"children":2493},{"style":138},[2494],{"type":25,"value":769},{"type":19,"tag":78,"props":2496,"children":2497},{"class":80,"line":533},[2498],{"type":19,"tag":78,"props":2499,"children":2500},{"emptyLinePlaceholder":14},[2501],{"type":25,"value":103},{"type":19,"tag":78,"props":2503,"children":2504},{"class":80,"line":541},[2505],{"type":19,"tag":78,"props":2506,"children":2507},{"emptyLinePlaceholder":14},[2508],{"type":25,"value":103},{"type":19,"tag":78,"props":2510,"children":2511},{"class":80,"line":549},[2512,2516,2520,2524,2528,2532],{"type":19,"tag":78,"props":2513,"children":2514},{"style":85},[2515],{"type":25,"value":12},{"type":19,"tag":78,"props":2517,"children":2518},{"style":85},[2519],{"type":25,"value":124},{"type":19,"tag":78,"props":2521,"children":2522},{"style":127},[2523],{"type":25,"value":203},{"type":19,"tag":78,"props":2525,"children":2526},{"style":91},[2527],{"type":25,"value":135},{"type":19,"tag":78,"props":2529,"children":2530},{"style":138},[2531],{"type":25,"value":141},{"type":19,"tag":78,"props":2533,"children":2534},{"style":91},[2535],{"type":25,"value":146},{"type":19,"tag":78,"props":2537,"children":2538},{"class":80,"line":577},[2539,2543,2547],{"type":19,"tag":78,"props":2540,"children":2541},{"style":91},[2542],{"type":25,"value":1880},{"type":19,"tag":78,"props":2544,"children":2545},{"style":85},[2546],{"type":25,"value":383},{"type":19,"tag":78,"props":2548,"children":2549},{"style":91},[2550],{"type":25,"value":228},{"type":19,"tag":78,"props":2552,"children":2553},{"class":80,"line":635},[2554,2559,2563],{"type":19,"tag":78,"props":2555,"children":2556},{"style":91},[2557],{"type":25,"value":2558},"    task ",{"type":19,"tag":78,"props":2560,"children":2561},{"style":85},[2562],{"type":25,"value":383},{"type":19,"tag":78,"props":2564,"children":2565},{"style":91},[2566],{"type":25,"value":1905},{"type":19,"tag":78,"props":2568,"children":2569},{"class":80,"line":643},[2570],{"type":19,"tag":78,"props":2571,"children":2572},{"emptyLinePlaceholder":14},[2573],{"type":25,"value":103},{"type":19,"tag":78,"props":2575,"children":2576},{"class":80,"line":651},[2577,2581,2585],{"type":19,"tag":78,"props":2578,"children":2579},{"style":91},[2580],{"type":25,"value":473},{"type":19,"tag":78,"props":2582,"children":2583},{"style":266},[2584],{"type":25,"value":1917},{"type":19,"tag":78,"props":2586,"children":2587},{"style":91},[2588],{"type":25,"value":170},{"type":19,"tag":78,"props":2590,"children":2591},{"class":80,"line":675},[2592],{"type":19,"tag":78,"props":2593,"children":2594},{"emptyLinePlaceholder":14},[2595],{"type":25,"value":103},{"type":19,"tag":78,"props":2597,"children":2598},{"class":80,"line":1375},[2599,2604,2608,2613,2617],{"type":19,"tag":78,"props":2600,"children":2601},{"style":91},[2602],{"type":25,"value":2603},"    queue ",{"type":19,"tag":78,"props":2605,"children":2606},{"style":85},[2607],{"type":25,"value":383},{"type":19,"tag":78,"props":2609,"children":2610},{"style":91},[2611],{"type":25,"value":2612}," asyncio.Queue(",{"type":19,"tag":78,"props":2614,"children":2615},{"style":138},[2616],{"type":25,"value":165},{"type":19,"tag":78,"props":2618,"children":2619},{"style":91},[2620],{"type":25,"value":170},{"type":19,"tag":78,"props":2622,"children":2623},{"class":80,"line":1384},[2624,2629,2634],{"type":19,"tag":78,"props":2625,"children":2626},{"style":91},[2627],{"type":25,"value":2628},"    task.add_done_callback(",{"type":19,"tag":78,"props":2630,"children":2631},{"style":85},[2632],{"type":25,"value":2633},"lambda",{"type":19,"tag":78,"props":2635,"children":2636},{"style":91},[2637],{"type":25,"value":2638}," task: queue.put_nowait(task.result()))\n",{"type":19,"tag":78,"props":2640,"children":2641},{"class":80,"line":1393},[2642],{"type":19,"tag":78,"props":2643,"children":2644},{"emptyLinePlaceholder":14},[2645],{"type":25,"value":103},{"type":19,"tag":78,"props":2647,"children":2648},{"class":80,"line":2004},[2649,2654,2658,2663],{"type":19,"tag":78,"props":2650,"children":2651},{"style":91},[2652],{"type":25,"value":2653},"    value ",{"type":19,"tag":78,"props":2655,"children":2656},{"style":85},[2657],{"type":25,"value":383},{"type":19,"tag":78,"props":2659,"children":2660},{"style":85},[2661],{"type":25,"value":2662}," await",{"type":19,"tag":78,"props":2664,"children":2665},{"style":91},[2666],{"type":25,"value":2667}," task\n",{"type":19,"tag":78,"props":2669,"children":2670},{"class":80,"line":2013},[2671],{"type":19,"tag":78,"props":2672,"children":2673},{"emptyLinePlaceholder":14},[2674],{"type":25,"value":103},{"type":19,"tag":78,"props":2676,"children":2677},{"class":80,"line":2022},[2678,2682,2686],{"type":19,"tag":78,"props":2679,"children":2680},{"style":91},[2681],{"type":25,"value":473},{"type":19,"tag":78,"props":2683,"children":2684},{"style":266},[2685],{"type":25,"value":1953},{"type":19,"tag":78,"props":2687,"children":2688},{"style":91},[2689],{"type":25,"value":170},{"type":19,"tag":78,"props":2691,"children":2692},{"class":80,"line":2031},[2693],{"type":19,"tag":78,"props":2694,"children":2695},{"emptyLinePlaceholder":14},[2696],{"type":25,"value":103},{"type":19,"tag":78,"props":2698,"children":2699},{"class":80,"line":2040},[2700,2705,2709],{"type":19,"tag":78,"props":2701,"children":2702},{"style":91},[2703],{"type":25,"value":2704},"    result ",{"type":19,"tag":78,"props":2706,"children":2707},{"style":85},[2708],{"type":25,"value":383},{"type":19,"tag":78,"props":2710,"children":2711},{"style":91},[2712],{"type":25,"value":2713}," task.result()\n",{"type":19,"tag":78,"props":2715,"children":2717},{"class":80,"line":2716},31,[2718,2723,2727,2731],{"type":19,"tag":78,"props":2719,"children":2720},{"style":91},[2721],{"type":25,"value":2722},"    queue_value ",{"type":19,"tag":78,"props":2724,"children":2725},{"style":85},[2726],{"type":25,"value":383},{"type":19,"tag":78,"props":2728,"children":2729},{"style":85},[2730],{"type":25,"value":2662},{"type":19,"tag":78,"props":2732,"children":2733},{"style":91},[2734],{"type":25,"value":2735}," queue.get()\n",{"type":19,"tag":78,"props":2737,"children":2739},{"class":80,"line":2738},32,[2740,2744,2749,2754,2759,2763,2768,2772,2776],{"type":19,"tag":78,"props":2741,"children":2742},{"style":91},[2743],{"type":25,"value":473},{"type":19,"tag":78,"props":2745,"children":2746},{"style":266},[2747],{"type":25,"value":2748},"\"value=",{"type":19,"tag":78,"props":2750,"children":2751},{"style":138},[2752],{"type":25,"value":2753},"%r",{"type":19,"tag":78,"props":2755,"children":2756},{"style":266},[2757],{"type":25,"value":2758},", result=",{"type":19,"tag":78,"props":2760,"children":2761},{"style":138},[2762],{"type":25,"value":2753},{"type":19,"tag":78,"props":2764,"children":2765},{"style":266},[2766],{"type":25,"value":2767},", queue_value=",{"type":19,"tag":78,"props":2769,"children":2770},{"style":138},[2771],{"type":25,"value":2753},{"type":19,"tag":78,"props":2773,"children":2774},{"style":266},[2775],{"type":25,"value":488},{"type":19,"tag":78,"props":2777,"children":2778},{"style":91},[2779],{"type":25,"value":2780},", value, result, queue_value)\n",{"type":19,"tag":78,"props":2782,"children":2784},{"class":80,"line":2783},33,[2785],{"type":19,"tag":78,"props":2786,"children":2787},{"emptyLinePlaceholder":14},[2788],{"type":25,"value":103},{"type":19,"tag":78,"props":2790,"children":2792},{"class":80,"line":2791},34,[2793],{"type":19,"tag":78,"props":2794,"children":2795},{"emptyLinePlaceholder":14},[2796],{"type":25,"value":103},{"type":19,"tag":78,"props":2798,"children":2800},{"class":80,"line":2799},35,[2801,2805,2809,2813,2817],{"type":19,"tag":78,"props":2802,"children":2803},{"style":85},[2804],{"type":25,"value":253},{"type":19,"tag":78,"props":2806,"children":2807},{"style":138},[2808],{"type":25,"value":258},{"type":19,"tag":78,"props":2810,"children":2811},{"style":85},[2812],{"type":25,"value":263},{"type":19,"tag":78,"props":2814,"children":2815},{"style":266},[2816],{"type":25,"value":269},{"type":19,"tag":78,"props":2818,"children":2819},{"style":91},[2820],{"type":25,"value":146},{"type":19,"tag":78,"props":2822,"children":2824},{"class":80,"line":2823},36,[2825],{"type":19,"tag":78,"props":2826,"children":2827},{"style":91},[2828],{"type":25,"value":282},{"type":19,"tag":78,"props":2830,"children":2832},{"class":80,"line":2831},37,[2833],{"type":19,"tag":78,"props":2834,"children":2835},{"style":1353},[2836],{"type":25,"value":2837},"# ❯ poetry run python main5.py\n",{"type":19,"tag":78,"props":2839,"children":2841},{"class":80,"line":2840},38,[2842],{"type":19,"tag":78,"props":2843,"children":2844},{"style":1353},[2845],{"type":25,"value":2846},"# before sleep\n",{"type":19,"tag":78,"props":2848,"children":2850},{"class":80,"line":2849},39,[2851],{"type":19,"tag":78,"props":2852,"children":2853},{"style":1353},[2854],{"type":25,"value":2855},"# start\n",{"type":19,"tag":78,"props":2857,"children":2859},{"class":80,"line":2858},40,[2860],{"type":19,"tag":78,"props":2861,"children":2862},{"style":1353},[2863],{"type":25,"value":2864},"# done!\n",{"type":19,"tag":78,"props":2866,"children":2868},{"class":80,"line":2867},41,[2869],{"type":19,"tag":78,"props":2870,"children":2871},{"style":1353},[2872],{"type":25,"value":2873},"# after sleep\n",{"type":19,"tag":78,"props":2875,"children":2877},{"class":80,"line":2876},42,[2878],{"type":19,"tag":78,"props":2879,"children":2880},{"style":1353},[2881],{"type":25,"value":2882},"# value=1, result=1, queue_value=1\n",{"type":19,"tag":35,"props":2884,"children":2885},{},[2886,2888,2893],{"type":25,"value":2887},"가능하다. ",{"type":19,"tag":28,"props":2889,"children":2891},{"className":2890},[],[2892],{"type":25,"value":1491},{"type":25,"value":2894},"는 코루틴을 이벤트 루프에 예약하는 객체지, 코루틴 그 자체가 아니기 때문이다.",{"type":19,"tag":35,"props":2896,"children":2897},{},[2898,2900,2905,2907,2912,2914,2920,2922,2928],{"type":25,"value":2899},"그렇기에 단 한번 ",{"type":19,"tag":28,"props":2901,"children":2903},{"className":2902},[],[2904],{"type":25,"value":52},{"type":25,"value":2906},"으로 대기할 수 있다.\n동시에 ",{"type":19,"tag":28,"props":2908,"children":2910},{"className":2909},[],[2911],{"type":25,"value":1484},{"type":25,"value":2913},"이기에, ",{"type":19,"tag":28,"props":2915,"children":2917},{"className":2916},[],[2918],{"type":25,"value":2919},"result",{"type":25,"value":2921}," 메소드를 사용하여 값을 가져올 수도 있으며\n",{"type":19,"tag":28,"props":2923,"children":2925},{"className":2924},[],[2926],{"type":25,"value":2927},"add_done_callback",{"type":25,"value":2929}," 메소드를 사용하여, 콜백을 추가할 수도 있다.",{"type":19,"tag":20,"props":2931,"children":2933},{"id":2932},"future와-task는-언제-사용할까",[2934,2939,2940,2945],{"type":19,"tag":28,"props":2935,"children":2937},{"className":2936},[],[2938],{"type":25,"value":1484},{"type":25,"value":46},{"type":19,"tag":28,"props":2941,"children":2943},{"className":2942},[],[2944],{"type":25,"value":1491},{"type":25,"value":2946},"는 언제 사용할까",{"type":19,"tag":35,"props":2948,"children":2949},{},[2950,2955,2956,2961],{"type":19,"tag":28,"props":2951,"children":2953},{"className":2952},[],[2954],{"type":25,"value":1484},{"type":25,"value":2056},{"type":19,"tag":28,"props":2957,"children":2959},{"className":2958},[],[2960],{"type":25,"value":1491},{"type":25,"value":2962},"는 대부분의 경우 직접 사용할 일이 없다.\n하지만 저수준 api를 다뤄야 하거나, 효율적인 코드를 목표로 한다면,\n필연적으로 다뤄야 하는 순간이 온다.",{"type":19,"tag":947,"props":2964,"children":2966},{"id":2965},"task가-필요한-상황",[2967,2972],{"type":19,"tag":28,"props":2968,"children":2970},{"className":2969},[],[2971],{"type":25,"value":1491},{"type":25,"value":2973},"가 필요한 상황",{"type":19,"tag":68,"props":2975,"children":2978},{"className":70,"code":2976,"filename":2977,"language":6,"meta":8,"style":8},"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom typing import Awaitable\n\n\nasync def test(value: int) -> int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod > rand:\n        error_msg = f\"mod > {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -> int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\nasync def main() -> None:\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    result = await asyncio.gather(*(shield(coro) for coro in coros))\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6.py\n# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n","main6.py",[2979],{"type":19,"tag":28,"props":2980,"children":2981},{"__ignoreMap":8},[2982,3004,3011,3022,3033,3053,3060,3067,3103,3130,3163,3182,3205,3247,3265,3277,3284,3291,3339,3351,3367,3383,3394,3401,3408,3435,3505,3551,3564,3571,3578,3601,3608,3616],{"type":19,"tag":78,"props":2983,"children":2984},{"class":80,"line":81},[2985,2989,2994,2999],{"type":19,"tag":78,"props":2986,"children":2987},{"style":85},[2988],{"type":25,"value":1090},{"type":19,"tag":78,"props":2990,"children":2991},{"style":138},[2992],{"type":25,"value":2993}," __future__",{"type":19,"tag":78,"props":2995,"children":2996},{"style":85},[2997],{"type":25,"value":2998}," import",{"type":19,"tag":78,"props":3000,"children":3001},{"style":91},[3002],{"type":25,"value":3003}," annotations\n",{"type":19,"tag":78,"props":3005,"children":3006},{"class":80,"line":97},[3007],{"type":19,"tag":78,"props":3008,"children":3009},{"emptyLinePlaceholder":14},[3010],{"type":25,"value":103},{"type":19,"tag":78,"props":3012,"children":3013},{"class":80,"line":106},[3014,3018],{"type":19,"tag":78,"props":3015,"children":3016},{"style":85},[3017],{"type":25,"value":88},{"type":19,"tag":78,"props":3019,"children":3020},{"style":91},[3021],{"type":25,"value":94},{"type":19,"tag":78,"props":3023,"children":3024},{"class":80,"line":114},[3025,3029],{"type":19,"tag":78,"props":3026,"children":3027},{"style":85},[3028],{"type":25,"value":88},{"type":19,"tag":78,"props":3030,"children":3031},{"style":91},[3032],{"type":25,"value":351},{"type":19,"tag":78,"props":3034,"children":3035},{"class":80,"line":149},[3036,3040,3044,3048],{"type":19,"tag":78,"props":3037,"children":3038},{"style":85},[3039],{"type":25,"value":1090},{"type":19,"tag":78,"props":3041,"children":3042},{"style":91},[3043],{"type":25,"value":1095},{"type":19,"tag":78,"props":3045,"children":3046},{"style":85},[3047],{"type":25,"value":88},{"type":19,"tag":78,"props":3049,"children":3050},{"style":91},[3051],{"type":25,"value":3052}," Awaitable\n",{"type":19,"tag":78,"props":3054,"children":3055},{"class":80,"line":173},[3056],{"type":19,"tag":78,"props":3057,"children":3058},{"emptyLinePlaceholder":14},[3059],{"type":25,"value":103},{"type":19,"tag":78,"props":3061,"children":3062},{"class":80,"line":181},[3063],{"type":19,"tag":78,"props":3064,"children":3065},{"emptyLinePlaceholder":14},[3066],{"type":25,"value":103},{"type":19,"tag":78,"props":3068,"children":3069},{"class":80,"line":189},[3070,3074,3078,3082,3087,3091,3095,3099],{"type":19,"tag":78,"props":3071,"children":3072},{"style":85},[3073],{"type":25,"value":12},{"type":19,"tag":78,"props":3075,"children":3076},{"style":85},[3077],{"type":25,"value":124},{"type":19,"tag":78,"props":3079,"children":3080},{"style":127},[3081],{"type":25,"value":130},{"type":19,"tag":78,"props":3083,"children":3084},{"style":91},[3085],{"type":25,"value":3086},"(value: ",{"type":19,"tag":78,"props":3088,"children":3089},{"style":138},[3090],{"type":25,"value":452},{"type":19,"tag":78,"props":3092,"children":3093},{"style":91},[3094],{"type":25,"value":457},{"type":19,"tag":78,"props":3096,"children":3097},{"style":138},[3098],{"type":25,"value":452},{"type":19,"tag":78,"props":3100,"children":3101},{"style":91},[3102],{"type":25,"value":146},{"type":19,"tag":78,"props":3104,"children":3105},{"class":80,"line":218},[3106,3111,3115,3120,3125],{"type":19,"tag":78,"props":3107,"children":3108},{"style":91},[3109],{"type":25,"value":3110},"    mod ",{"type":19,"tag":78,"props":3112,"children":3113},{"style":85},[3114],{"type":25,"value":383},{"type":19,"tag":78,"props":3116,"children":3117},{"style":91},[3118],{"type":25,"value":3119}," value ",{"type":19,"tag":78,"props":3121,"children":3122},{"style":85},[3123],{"type":25,"value":3124},"%",{"type":19,"tag":78,"props":3126,"children":3127},{"style":138},[3128],{"type":25,"value":3129}," 10\n",{"type":19,"tag":78,"props":3131,"children":3132},{"class":80,"line":231},[3133,3138,3142,3147,3151,3155,3159],{"type":19,"tag":78,"props":3134,"children":3135},{"style":91},[3136],{"type":25,"value":3137},"    rand ",{"type":19,"tag":78,"props":3139,"children":3140},{"style":85},[3141],{"type":25,"value":383},{"type":19,"tag":78,"props":3143,"children":3144},{"style":91},[3145],{"type":25,"value":3146}," random.randint(",{"type":19,"tag":78,"props":3148,"children":3149},{"style":138},[3150],{"type":25,"value":165},{"type":19,"tag":78,"props":3152,"children":3153},{"style":91},[3154],{"type":25,"value":970},{"type":19,"tag":78,"props":3156,"children":3157},{"style":138},[3158],{"type":25,"value":627},{"type":19,"tag":78,"props":3160,"children":3161},{"style":91},[3162],{"type":25,"value":170},{"type":19,"tag":78,"props":3164,"children":3165},{"class":80,"line":239},[3166,3170,3174,3178],{"type":19,"tag":78,"props":3167,"children":3168},{"style":85},[3169],{"type":25,"value":155},{"type":19,"tag":78,"props":3171,"children":3172},{"style":91},[3173],{"type":25,"value":160},{"type":19,"tag":78,"props":3175,"children":3176},{"style":138},[3177],{"type":25,"value":165},{"type":19,"tag":78,"props":3179,"children":3180},{"style":91},[3181],{"type":25,"value":170},{"type":19,"tag":78,"props":3183,"children":3184},{"class":80,"line":247},[3185,3190,3195,3200],{"type":19,"tag":78,"props":3186,"children":3187},{"style":85},[3188],{"type":25,"value":3189},"    if",{"type":19,"tag":78,"props":3191,"children":3192},{"style":91},[3193],{"type":25,"value":3194}," mod ",{"type":19,"tag":78,"props":3196,"children":3197},{"style":85},[3198],{"type":25,"value":3199},">",{"type":19,"tag":78,"props":3201,"children":3202},{"style":91},[3203],{"type":25,"value":3204}," rand:\n",{"type":19,"tag":78,"props":3206,"children":3207},{"class":80,"line":276},[3208,3213,3217,3222,3227,3232,3237,3242],{"type":19,"tag":78,"props":3209,"children":3210},{"style":91},[3211],{"type":25,"value":3212},"        error_msg ",{"type":19,"tag":78,"props":3214,"children":3215},{"style":85},[3216],{"type":25,"value":383},{"type":19,"tag":78,"props":3218,"children":3219},{"style":85},[3220],{"type":25,"value":3221}," f",{"type":19,"tag":78,"props":3223,"children":3224},{"style":266},[3225],{"type":25,"value":3226},"\"mod > ",{"type":19,"tag":78,"props":3228,"children":3229},{"style":138},[3230],{"type":25,"value":3231},"{",{"type":19,"tag":78,"props":3233,"children":3234},{"style":91},[3235],{"type":25,"value":3236},"rand",{"type":19,"tag":78,"props":3238,"children":3239},{"style":138},[3240],{"type":25,"value":3241},"}",{"type":19,"tag":78,"props":3243,"children":3244},{"style":266},[3245],{"type":25,"value":3246},"\"\n",{"type":19,"tag":78,"props":3248,"children":3249},{"class":80,"line":508},[3250,3255,3260],{"type":19,"tag":78,"props":3251,"children":3252},{"style":85},[3253],{"type":25,"value":3254},"        raise",{"type":19,"tag":78,"props":3256,"children":3257},{"style":138},[3258],{"type":25,"value":3259}," ValueError",{"type":19,"tag":78,"props":3261,"children":3262},{"style":91},[3263],{"type":25,"value":3264},"(error_msg)\n",{"type":19,"tag":78,"props":3266,"children":3267},{"class":80,"line":533},[3268,3272],{"type":19,"tag":78,"props":3269,"children":3270},{"style":85},[3271],{"type":25,"value":2490},{"type":19,"tag":78,"props":3273,"children":3274},{"style":91},[3275],{"type":25,"value":3276}," mod\n",{"type":19,"tag":78,"props":3278,"children":3279},{"class":80,"line":541},[3280],{"type":19,"tag":78,"props":3281,"children":3282},{"emptyLinePlaceholder":14},[3283],{"type":25,"value":103},{"type":19,"tag":78,"props":3285,"children":3286},{"class":80,"line":549},[3287],{"type":19,"tag":78,"props":3288,"children":3289},{"emptyLinePlaceholder":14},[3290],{"type":25,"value":103},{"type":19,"tag":78,"props":3292,"children":3293},{"class":80,"line":577},[3294,3298,3302,3307,3312,3316,3321,3325,3330,3335],{"type":19,"tag":78,"props":3295,"children":3296},{"style":85},[3297],{"type":25,"value":12},{"type":19,"tag":78,"props":3299,"children":3300},{"style":85},[3301],{"type":25,"value":124},{"type":19,"tag":78,"props":3303,"children":3304},{"style":127},[3305],{"type":25,"value":3306}," shield",{"type":19,"tag":78,"props":3308,"children":3309},{"style":91},[3310],{"type":25,"value":3311},"(coro: Awaitable[",{"type":19,"tag":78,"props":3313,"children":3314},{"style":138},[3315],{"type":25,"value":452},{"type":19,"tag":78,"props":3317,"children":3318},{"style":91},[3319],{"type":25,"value":3320},"]) -> ",{"type":19,"tag":78,"props":3322,"children":3323},{"style":138},[3324],{"type":25,"value":452},{"type":19,"tag":78,"props":3326,"children":3327},{"style":85},[3328],{"type":25,"value":3329}," |",{"type":19,"tag":78,"props":3331,"children":3332},{"style":138},[3333],{"type":25,"value":3334}," None",{"type":19,"tag":78,"props":3336,"children":3337},{"style":91},[3338],{"type":25,"value":146},{"type":19,"tag":78,"props":3340,"children":3341},{"class":80,"line":635},[3342,3347],{"type":19,"tag":78,"props":3343,"children":3344},{"style":85},[3345],{"type":25,"value":3346},"    try",{"type":19,"tag":78,"props":3348,"children":3349},{"style":91},[3350],{"type":25,"value":146},{"type":19,"tag":78,"props":3352,"children":3353},{"class":80,"line":643},[3354,3358,3362],{"type":19,"tag":78,"props":3355,"children":3356},{"style":85},[3357],{"type":25,"value":1239},{"type":19,"tag":78,"props":3359,"children":3360},{"style":85},[3361],{"type":25,"value":2662},{"type":19,"tag":78,"props":3363,"children":3364},{"style":91},[3365],{"type":25,"value":3366}," asyncio.shield(coro)\n",{"type":19,"tag":78,"props":3368,"children":3369},{"class":80,"line":651},[3370,3375,3379],{"type":19,"tag":78,"props":3371,"children":3372},{"style":85},[3373],{"type":25,"value":3374},"    except",{"type":19,"tag":78,"props":3376,"children":3377},{"style":138},[3378],{"type":25,"value":3259},{"type":19,"tag":78,"props":3380,"children":3381},{"style":91},[3382],{"type":25,"value":146},{"type":19,"tag":78,"props":3384,"children":3385},{"class":80,"line":675},[3386,3390],{"type":19,"tag":78,"props":3387,"children":3388},{"style":85},[3389],{"type":25,"value":1239},{"type":19,"tag":78,"props":3391,"children":3392},{"style":138},[3393],{"type":25,"value":1231},{"type":19,"tag":78,"props":3395,"children":3396},{"class":80,"line":1375},[3397],{"type":19,"tag":78,"props":3398,"children":3399},{"emptyLinePlaceholder":14},[3400],{"type":25,"value":103},{"type":19,"tag":78,"props":3402,"children":3403},{"class":80,"line":1384},[3404],{"type":19,"tag":78,"props":3405,"children":3406},{"emptyLinePlaceholder":14},[3407],{"type":25,"value":103},{"type":19,"tag":78,"props":3409,"children":3410},{"class":80,"line":1393},[3411,3415,3419,3423,3427,3431],{"type":19,"tag":78,"props":3412,"children":3413},{"style":85},[3414],{"type":25,"value":12},{"type":19,"tag":78,"props":3416,"children":3417},{"style":85},[3418],{"type":25,"value":124},{"type":19,"tag":78,"props":3420,"children":3421},{"style":127},[3422],{"type":25,"value":203},{"type":19,"tag":78,"props":3424,"children":3425},{"style":91},[3426],{"type":25,"value":135},{"type":19,"tag":78,"props":3428,"children":3429},{"style":138},[3430],{"type":25,"value":141},{"type":19,"tag":78,"props":3432,"children":3433},{"style":91},[3434],{"type":25,"value":146},{"type":19,"tag":78,"props":3436,"children":3437},{"class":80,"line":2004},[3438,3443,3447,3452,3456,3461,3465,3470,3475,3479,3484,3488,3492,3496,3500],{"type":19,"tag":78,"props":3439,"children":3440},{"style":91},[3441],{"type":25,"value":3442},"    coros ",{"type":19,"tag":78,"props":3444,"children":3445},{"style":85},[3446],{"type":25,"value":383},{"type":19,"tag":78,"props":3448,"children":3449},{"style":91},[3450],{"type":25,"value":3451}," [test(",{"type":19,"tag":78,"props":3453,"children":3454},{"style":138},[3455],{"type":25,"value":452},{"type":19,"tag":78,"props":3457,"children":3458},{"style":91},[3459],{"type":25,"value":3460},"(random.random() ",{"type":19,"tag":78,"props":3462,"children":3463},{"style":85},[3464],{"type":25,"value":592},{"type":19,"tag":78,"props":3466,"children":3467},{"style":138},[3468],{"type":25,"value":3469}," 100",{"type":19,"tag":78,"props":3471,"children":3472},{"style":91},[3473],{"type":25,"value":3474},")) ",{"type":19,"tag":78,"props":3476,"children":3477},{"style":85},[3478],{"type":25,"value":602},{"type":19,"tag":78,"props":3480,"children":3481},{"style":91},[3482],{"type":25,"value":3483}," _ ",{"type":19,"tag":78,"props":3485,"children":3486},{"style":85},[3487],{"type":25,"value":612},{"type":19,"tag":78,"props":3489,"children":3490},{"style":138},[3491],{"type":25,"value":617},{"type":19,"tag":78,"props":3493,"children":3494},{"style":91},[3495],{"type":25,"value":622},{"type":19,"tag":78,"props":3497,"children":3498},{"style":138},[3499],{"type":25,"value":627},{"type":19,"tag":78,"props":3501,"children":3502},{"style":91},[3503],{"type":25,"value":3504},")]\n",{"type":19,"tag":78,"props":3506,"children":3507},{"class":80,"line":2013},[3508,3512,3516,3520,3524,3528,3533,3537,3542,3546],{"type":19,"tag":78,"props":3509,"children":3510},{"style":91},[3511],{"type":25,"value":2704},{"type":19,"tag":78,"props":3513,"children":3514},{"style":85},[3515],{"type":25,"value":383},{"type":19,"tag":78,"props":3517,"children":3518},{"style":85},[3519],{"type":25,"value":2662},{"type":19,"tag":78,"props":3521,"children":3522},{"style":91},[3523],{"type":25,"value":587},{"type":19,"tag":78,"props":3525,"children":3526},{"style":85},[3527],{"type":25,"value":592},{"type":19,"tag":78,"props":3529,"children":3530},{"style":91},[3531],{"type":25,"value":3532},"(shield(coro) ",{"type":19,"tag":78,"props":3534,"children":3535},{"style":85},[3536],{"type":25,"value":602},{"type":19,"tag":78,"props":3538,"children":3539},{"style":91},[3540],{"type":25,"value":3541}," coro ",{"type":19,"tag":78,"props":3543,"children":3544},{"style":85},[3545],{"type":25,"value":612},{"type":19,"tag":78,"props":3547,"children":3548},{"style":91},[3549],{"type":25,"value":3550}," coros))\n",{"type":19,"tag":78,"props":3552,"children":3553},{"class":80,"line":2022},[3554,3559],{"type":19,"tag":78,"props":3555,"children":3556},{"style":138},[3557],{"type":25,"value":3558},"    print",{"type":19,"tag":78,"props":3560,"children":3561},{"style":91},[3562],{"type":25,"value":3563},"(result)\n",{"type":19,"tag":78,"props":3565,"children":3566},{"class":80,"line":2031},[3567],{"type":19,"tag":78,"props":3568,"children":3569},{"emptyLinePlaceholder":14},[3570],{"type":25,"value":103},{"type":19,"tag":78,"props":3572,"children":3573},{"class":80,"line":2040},[3574],{"type":19,"tag":78,"props":3575,"children":3576},{"emptyLinePlaceholder":14},[3577],{"type":25,"value":103},{"type":19,"tag":78,"props":3579,"children":3580},{"class":80,"line":2716},[3581,3585,3589,3593,3597],{"type":19,"tag":78,"props":3582,"children":3583},{"style":85},[3584],{"type":25,"value":253},{"type":19,"tag":78,"props":3586,"children":3587},{"style":138},[3588],{"type":25,"value":258},{"type":19,"tag":78,"props":3590,"children":3591},{"style":85},[3592],{"type":25,"value":263},{"type":19,"tag":78,"props":3594,"children":3595},{"style":266},[3596],{"type":25,"value":269},{"type":19,"tag":78,"props":3598,"children":3599},{"style":91},[3600],{"type":25,"value":146},{"type":19,"tag":78,"props":3602,"children":3603},{"class":80,"line":2738},[3604],{"type":19,"tag":78,"props":3605,"children":3606},{"style":91},[3607],{"type":25,"value":282},{"type":19,"tag":78,"props":3609,"children":3610},{"class":80,"line":2783},[3611],{"type":19,"tag":78,"props":3612,"children":3613},{"style":1353},[3614],{"type":25,"value":3615},"# ❯ poetry run python main6.py\n",{"type":19,"tag":78,"props":3617,"children":3618},{"class":80,"line":2791},[3619],{"type":19,"tag":78,"props":3620,"children":3621},{"style":1353},[3622],{"type":25,"value":3623},"# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n",{"type":19,"tag":35,"props":3625,"children":3626},{},[3627,3629,3634],{"type":25,"value":3628},"위와 같은 상황이 있을 때,\n",{"type":19,"tag":28,"props":3630,"children":3632},{"className":3631},[],[3633],{"type":25,"value":2075},{"type":25,"value":3635},"함수에서 에러가 발생하면 None값이 아닌 -1을 반환받고 싶다고 하자.",{"type":19,"tag":35,"props":3637,"children":3638},{},[3639,3641,3647,3649,3654],{"type":25,"value":3640},"가장 간단한 방법은 ",{"type":19,"tag":28,"props":3642,"children":3644},{"className":3643},[],[3645],{"type":25,"value":3646},"shield",{"type":25,"value":3648},"를 수정하는 것이고,\n그 다음으로는 ",{"type":19,"tag":28,"props":3650,"children":3652},{"className":3651},[],[3653],{"type":25,"value":2075},{"type":25,"value":3655},"를 수정하는 것이다.",{"type":19,"tag":35,"props":3657,"children":3658},{},[3659],{"type":25,"value":3660},"하지만 위 스크립트는 굉장히 간단하게 작성된 스크립트라 그런 것이고,\n손대면 손댈수록 너무 복잡해져서 수정하기 힘들거나,\n특수한 사정으로 인해 수정 자체가 불가능한 경우가 있다.",{"type":19,"tag":35,"props":3662,"children":3663},{},[3664,3666,3671],{"type":25,"value":3665},"그럴때 ",{"type":19,"tag":28,"props":3667,"children":3669},{"className":3668},[],[3670],{"type":25,"value":1491},{"type":25,"value":3672},"에 콜백을 추가하여 문제를 해결할 수 있다.",{"type":19,"tag":68,"props":3674,"children":3677},{"className":70,"code":3675,"filename":3676,"language":6,"meta":8,"style":8},"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom collections import deque\nfrom functools import partial\nfrom typing import Awaitable\n\n\nasync def test(value: int) -> int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod > rand:\n        error_msg = f\"mod > {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -> int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\ndef add(task: asyncio.Task[int], queue: asyncio.Queue[int]) -> None:\n    if task.exception():\n        queue.put_nowait(-1)\n        return\n    queue.put_nowait(task.result())\n\n\nasync def main() -> None:\n    queue = asyncio.Queue()\n    add_in_queue = partial(add, queue=queue)\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    tasks = deque()\n    for coro in coros:\n        task = asyncio.create_task(coro)\n        task.add_done_callback(add_in_queue)\n        tasks.append(task)\n\n    await asyncio.gather(*(shield(task) for task in tasks))\n    result = [queue.get_nowait() for _ in range(10)]\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6-2.py\n# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n","main6-2.py",[3678],{"type":19,"tag":28,"props":3679,"children":3680},{"__ignoreMap":8},[3681,3700,3707,3718,3729,3750,3771,3790,3797,3804,3839,3862,3893,3912,3931,3966,3981,3992,3999,4006,4049,4060,4075,4090,4101,4108,4115,4158,4170,4191,4199,4207,4214,4221,4248,4264,4296,4359,4376,4397,4413,4421,4429,4437,4476,4521,4533,4541,4549,4573,4581,4590],{"type":19,"tag":78,"props":3682,"children":3683},{"class":80,"line":81},[3684,3688,3692,3696],{"type":19,"tag":78,"props":3685,"children":3686},{"style":85},[3687],{"type":25,"value":1090},{"type":19,"tag":78,"props":3689,"children":3690},{"style":138},[3691],{"type":25,"value":2993},{"type":19,"tag":78,"props":3693,"children":3694},{"style":85},[3695],{"type":25,"value":2998},{"type":19,"tag":78,"props":3697,"children":3698},{"style":91},[3699],{"type":25,"value":3003},{"type":19,"tag":78,"props":3701,"children":3702},{"class":80,"line":97},[3703],{"type":19,"tag":78,"props":3704,"children":3705},{"emptyLinePlaceholder":14},[3706],{"type":25,"value":103},{"type":19,"tag":78,"props":3708,"children":3709},{"class":80,"line":106},[3710,3714],{"type":19,"tag":78,"props":3711,"children":3712},{"style":85},[3713],{"type":25,"value":88},{"type":19,"tag":78,"props":3715,"children":3716},{"style":91},[3717],{"type":25,"value":94},{"type":19,"tag":78,"props":3719,"children":3720},{"class":80,"line":114},[3721,3725],{"type":19,"tag":78,"props":3722,"children":3723},{"style":85},[3724],{"type":25,"value":88},{"type":19,"tag":78,"props":3726,"children":3727},{"style":91},[3728],{"type":25,"value":351},{"type":19,"tag":78,"props":3730,"children":3731},{"class":80,"line":149},[3732,3736,3741,3745],{"type":19,"tag":78,"props":3733,"children":3734},{"style":85},[3735],{"type":25,"value":1090},{"type":19,"tag":78,"props":3737,"children":3738},{"style":91},[3739],{"type":25,"value":3740}," collections ",{"type":19,"tag":78,"props":3742,"children":3743},{"style":85},[3744],{"type":25,"value":88},{"type":19,"tag":78,"props":3746,"children":3747},{"style":91},[3748],{"type":25,"value":3749}," deque\n",{"type":19,"tag":78,"props":3751,"children":3752},{"class":80,"line":173},[3753,3757,3762,3766],{"type":19,"tag":78,"props":3754,"children":3755},{"style":85},[3756],{"type":25,"value":1090},{"type":19,"tag":78,"props":3758,"children":3759},{"style":91},[3760],{"type":25,"value":3761}," functools ",{"type":19,"tag":78,"props":3763,"children":3764},{"style":85},[3765],{"type":25,"value":88},{"type":19,"tag":78,"props":3767,"children":3768},{"style":91},[3769],{"type":25,"value":3770}," partial\n",{"type":19,"tag":78,"props":3772,"children":3773},{"class":80,"line":181},[3774,3778,3782,3786],{"type":19,"tag":78,"props":3775,"children":3776},{"style":85},[3777],{"type":25,"value":1090},{"type":19,"tag":78,"props":3779,"children":3780},{"style":91},[3781],{"type":25,"value":1095},{"type":19,"tag":78,"props":3783,"children":3784},{"style":85},[3785],{"type":25,"value":88},{"type":19,"tag":78,"props":3787,"children":3788},{"style":91},[3789],{"type":25,"value":3052},{"type":19,"tag":78,"props":3791,"children":3792},{"class":80,"line":189},[3793],{"type":19,"tag":78,"props":3794,"children":3795},{"emptyLinePlaceholder":14},[3796],{"type":25,"value":103},{"type":19,"tag":78,"props":3798,"children":3799},{"class":80,"line":218},[3800],{"type":19,"tag":78,"props":3801,"children":3802},{"emptyLinePlaceholder":14},[3803],{"type":25,"value":103},{"type":19,"tag":78,"props":3805,"children":3806},{"class":80,"line":231},[3807,3811,3815,3819,3823,3827,3831,3835],{"type":19,"tag":78,"props":3808,"children":3809},{"style":85},[3810],{"type":25,"value":12},{"type":19,"tag":78,"props":3812,"children":3813},{"style":85},[3814],{"type":25,"value":124},{"type":19,"tag":78,"props":3816,"children":3817},{"style":127},[3818],{"type":25,"value":130},{"type":19,"tag":78,"props":3820,"children":3821},{"style":91},[3822],{"type":25,"value":3086},{"type":19,"tag":78,"props":3824,"children":3825},{"style":138},[3826],{"type":25,"value":452},{"type":19,"tag":78,"props":3828,"children":3829},{"style":91},[3830],{"type":25,"value":457},{"type":19,"tag":78,"props":3832,"children":3833},{"style":138},[3834],{"type":25,"value":452},{"type":19,"tag":78,"props":3836,"children":3837},{"style":91},[3838],{"type":25,"value":146},{"type":19,"tag":78,"props":3840,"children":3841},{"class":80,"line":239},[3842,3846,3850,3854,3858],{"type":19,"tag":78,"props":3843,"children":3844},{"style":91},[3845],{"type":25,"value":3110},{"type":19,"tag":78,"props":3847,"children":3848},{"style":85},[3849],{"type":25,"value":383},{"type":19,"tag":78,"props":3851,"children":3852},{"style":91},[3853],{"type":25,"value":3119},{"type":19,"tag":78,"props":3855,"children":3856},{"style":85},[3857],{"type":25,"value":3124},{"type":19,"tag":78,"props":3859,"children":3860},{"style":138},[3861],{"type":25,"value":3129},{"type":19,"tag":78,"props":3863,"children":3864},{"class":80,"line":247},[3865,3869,3873,3877,3881,3885,3889],{"type":19,"tag":78,"props":3866,"children":3867},{"style":91},[3868],{"type":25,"value":3137},{"type":19,"tag":78,"props":3870,"children":3871},{"style":85},[3872],{"type":25,"value":383},{"type":19,"tag":78,"props":3874,"children":3875},{"style":91},[3876],{"type":25,"value":3146},{"type":19,"tag":78,"props":3878,"children":3879},{"style":138},[3880],{"type":25,"value":165},{"type":19,"tag":78,"props":3882,"children":3883},{"style":91},[3884],{"type":25,"value":970},{"type":19,"tag":78,"props":3886,"children":3887},{"style":138},[3888],{"type":25,"value":627},{"type":19,"tag":78,"props":3890,"children":3891},{"style":91},[3892],{"type":25,"value":170},{"type":19,"tag":78,"props":3894,"children":3895},{"class":80,"line":276},[3896,3900,3904,3908],{"type":19,"tag":78,"props":3897,"children":3898},{"style":85},[3899],{"type":25,"value":155},{"type":19,"tag":78,"props":3901,"children":3902},{"style":91},[3903],{"type":25,"value":160},{"type":19,"tag":78,"props":3905,"children":3906},{"style":138},[3907],{"type":25,"value":165},{"type":19,"tag":78,"props":3909,"children":3910},{"style":91},[3911],{"type":25,"value":170},{"type":19,"tag":78,"props":3913,"children":3914},{"class":80,"line":508},[3915,3919,3923,3927],{"type":19,"tag":78,"props":3916,"children":3917},{"style":85},[3918],{"type":25,"value":3189},{"type":19,"tag":78,"props":3920,"children":3921},{"style":91},[3922],{"type":25,"value":3194},{"type":19,"tag":78,"props":3924,"children":3925},{"style":85},[3926],{"type":25,"value":3199},{"type":19,"tag":78,"props":3928,"children":3929},{"style":91},[3930],{"type":25,"value":3204},{"type":19,"tag":78,"props":3932,"children":3933},{"class":80,"line":533},[3934,3938,3942,3946,3950,3954,3958,3962],{"type":19,"tag":78,"props":3935,"children":3936},{"style":91},[3937],{"type":25,"value":3212},{"type":19,"tag":78,"props":3939,"children":3940},{"style":85},[3941],{"type":25,"value":383},{"type":19,"tag":78,"props":3943,"children":3944},{"style":85},[3945],{"type":25,"value":3221},{"type":19,"tag":78,"props":3947,"children":3948},{"style":266},[3949],{"type":25,"value":3226},{"type":19,"tag":78,"props":3951,"children":3952},{"style":138},[3953],{"type":25,"value":3231},{"type":19,"tag":78,"props":3955,"children":3956},{"style":91},[3957],{"type":25,"value":3236},{"type":19,"tag":78,"props":3959,"children":3960},{"style":138},[3961],{"type":25,"value":3241},{"type":19,"tag":78,"props":3963,"children":3964},{"style":266},[3965],{"type":25,"value":3246},{"type":19,"tag":78,"props":3967,"children":3968},{"class":80,"line":541},[3969,3973,3977],{"type":19,"tag":78,"props":3970,"children":3971},{"style":85},[3972],{"type":25,"value":3254},{"type":19,"tag":78,"props":3974,"children":3975},{"style":138},[3976],{"type":25,"value":3259},{"type":19,"tag":78,"props":3978,"children":3979},{"style":91},[3980],{"type":25,"value":3264},{"type":19,"tag":78,"props":3982,"children":3983},{"class":80,"line":549},[3984,3988],{"type":19,"tag":78,"props":3985,"children":3986},{"style":85},[3987],{"type":25,"value":2490},{"type":19,"tag":78,"props":3989,"children":3990},{"style":91},[3991],{"type":25,"value":3276},{"type":19,"tag":78,"props":3993,"children":3994},{"class":80,"line":577},[3995],{"type":19,"tag":78,"props":3996,"children":3997},{"emptyLinePlaceholder":14},[3998],{"type":25,"value":103},{"type":19,"tag":78,"props":4000,"children":4001},{"class":80,"line":635},[4002],{"type":19,"tag":78,"props":4003,"children":4004},{"emptyLinePlaceholder":14},[4005],{"type":25,"value":103},{"type":19,"tag":78,"props":4007,"children":4008},{"class":80,"line":643},[4009,4013,4017,4021,4025,4029,4033,4037,4041,4045],{"type":19,"tag":78,"props":4010,"children":4011},{"style":85},[4012],{"type":25,"value":12},{"type":19,"tag":78,"props":4014,"children":4015},{"style":85},[4016],{"type":25,"value":124},{"type":19,"tag":78,"props":4018,"children":4019},{"style":127},[4020],{"type":25,"value":3306},{"type":19,"tag":78,"props":4022,"children":4023},{"style":91},[4024],{"type":25,"value":3311},{"type":19,"tag":78,"props":4026,"children":4027},{"style":138},[4028],{"type":25,"value":452},{"type":19,"tag":78,"props":4030,"children":4031},{"style":91},[4032],{"type":25,"value":3320},{"type":19,"tag":78,"props":4034,"children":4035},{"style":138},[4036],{"type":25,"value":452},{"type":19,"tag":78,"props":4038,"children":4039},{"style":85},[4040],{"type":25,"value":3329},{"type":19,"tag":78,"props":4042,"children":4043},{"style":138},[4044],{"type":25,"value":3334},{"type":19,"tag":78,"props":4046,"children":4047},{"style":91},[4048],{"type":25,"value":146},{"type":19,"tag":78,"props":4050,"children":4051},{"class":80,"line":651},[4052,4056],{"type":19,"tag":78,"props":4053,"children":4054},{"style":85},[4055],{"type":25,"value":3346},{"type":19,"tag":78,"props":4057,"children":4058},{"style":91},[4059],{"type":25,"value":146},{"type":19,"tag":78,"props":4061,"children":4062},{"class":80,"line":675},[4063,4067,4071],{"type":19,"tag":78,"props":4064,"children":4065},{"style":85},[4066],{"type":25,"value":1239},{"type":19,"tag":78,"props":4068,"children":4069},{"style":85},[4070],{"type":25,"value":2662},{"type":19,"tag":78,"props":4072,"children":4073},{"style":91},[4074],{"type":25,"value":3366},{"type":19,"tag":78,"props":4076,"children":4077},{"class":80,"line":1375},[4078,4082,4086],{"type":19,"tag":78,"props":4079,"children":4080},{"style":85},[4081],{"type":25,"value":3374},{"type":19,"tag":78,"props":4083,"children":4084},{"style":138},[4085],{"type":25,"value":3259},{"type":19,"tag":78,"props":4087,"children":4088},{"style":91},[4089],{"type":25,"value":146},{"type":19,"tag":78,"props":4091,"children":4092},{"class":80,"line":1384},[4093,4097],{"type":19,"tag":78,"props":4094,"children":4095},{"style":85},[4096],{"type":25,"value":1239},{"type":19,"tag":78,"props":4098,"children":4099},{"style":138},[4100],{"type":25,"value":1231},{"type":19,"tag":78,"props":4102,"children":4103},{"class":80,"line":1393},[4104],{"type":19,"tag":78,"props":4105,"children":4106},{"emptyLinePlaceholder":14},[4107],{"type":25,"value":103},{"type":19,"tag":78,"props":4109,"children":4110},{"class":80,"line":2004},[4111],{"type":19,"tag":78,"props":4112,"children":4113},{"emptyLinePlaceholder":14},[4114],{"type":25,"value":103},{"type":19,"tag":78,"props":4116,"children":4117},{"class":80,"line":2013},[4118,4123,4128,4133,4137,4142,4146,4150,4154],{"type":19,"tag":78,"props":4119,"children":4120},{"style":85},[4121],{"type":25,"value":4122},"def",{"type":19,"tag":78,"props":4124,"children":4125},{"style":127},[4126],{"type":25,"value":4127}," add",{"type":19,"tag":78,"props":4129,"children":4130},{"style":91},[4131],{"type":25,"value":4132},"(task: asyncio.Task[",{"type":19,"tag":78,"props":4134,"children":4135},{"style":138},[4136],{"type":25,"value":452},{"type":19,"tag":78,"props":4138,"children":4139},{"style":91},[4140],{"type":25,"value":4141},"], queue: asyncio.Queue[",{"type":19,"tag":78,"props":4143,"children":4144},{"style":138},[4145],{"type":25,"value":452},{"type":19,"tag":78,"props":4147,"children":4148},{"style":91},[4149],{"type":25,"value":3320},{"type":19,"tag":78,"props":4151,"children":4152},{"style":138},[4153],{"type":25,"value":141},{"type":19,"tag":78,"props":4155,"children":4156},{"style":91},[4157],{"type":25,"value":146},{"type":19,"tag":78,"props":4159,"children":4160},{"class":80,"line":2022},[4161,4165],{"type":19,"tag":78,"props":4162,"children":4163},{"style":85},[4164],{"type":25,"value":3189},{"type":19,"tag":78,"props":4166,"children":4167},{"style":91},[4168],{"type":25,"value":4169}," task.exception():\n",{"type":19,"tag":78,"props":4171,"children":4172},{"class":80,"line":2031},[4173,4178,4183,4187],{"type":19,"tag":78,"props":4174,"children":4175},{"style":91},[4176],{"type":25,"value":4177},"        queue.put_nowait(",{"type":19,"tag":78,"props":4179,"children":4180},{"style":85},[4181],{"type":25,"value":4182},"-",{"type":19,"tag":78,"props":4184,"children":4185},{"style":138},[4186],{"type":25,"value":165},{"type":19,"tag":78,"props":4188,"children":4189},{"style":91},[4190],{"type":25,"value":170},{"type":19,"tag":78,"props":4192,"children":4193},{"class":80,"line":2040},[4194],{"type":19,"tag":78,"props":4195,"children":4196},{"style":85},[4197],{"type":25,"value":4198},"        return\n",{"type":19,"tag":78,"props":4200,"children":4201},{"class":80,"line":2716},[4202],{"type":19,"tag":78,"props":4203,"children":4204},{"style":91},[4205],{"type":25,"value":4206},"    queue.put_nowait(task.result())\n",{"type":19,"tag":78,"props":4208,"children":4209},{"class":80,"line":2738},[4210],{"type":19,"tag":78,"props":4211,"children":4212},{"emptyLinePlaceholder":14},[4213],{"type":25,"value":103},{"type":19,"tag":78,"props":4215,"children":4216},{"class":80,"line":2783},[4217],{"type":19,"tag":78,"props":4218,"children":4219},{"emptyLinePlaceholder":14},[4220],{"type":25,"value":103},{"type":19,"tag":78,"props":4222,"children":4223},{"class":80,"line":2791},[4224,4228,4232,4236,4240,4244],{"type":19,"tag":78,"props":4225,"children":4226},{"style":85},[4227],{"type":25,"value":12},{"type":19,"tag":78,"props":4229,"children":4230},{"style":85},[4231],{"type":25,"value":124},{"type":19,"tag":78,"props":4233,"children":4234},{"style":127},[4235],{"type":25,"value":203},{"type":19,"tag":78,"props":4237,"children":4238},{"style":91},[4239],{"type":25,"value":135},{"type":19,"tag":78,"props":4241,"children":4242},{"style":138},[4243],{"type":25,"value":141},{"type":19,"tag":78,"props":4245,"children":4246},{"style":91},[4247],{"type":25,"value":146},{"type":19,"tag":78,"props":4249,"children":4250},{"class":80,"line":2799},[4251,4255,4259],{"type":19,"tag":78,"props":4252,"children":4253},{"style":91},[4254],{"type":25,"value":2603},{"type":19,"tag":78,"props":4256,"children":4257},{"style":85},[4258],{"type":25,"value":383},{"type":19,"tag":78,"props":4260,"children":4261},{"style":91},[4262],{"type":25,"value":4263}," asyncio.Queue()\n",{"type":19,"tag":78,"props":4265,"children":4266},{"class":80,"line":2823},[4267,4272,4276,4281,4287,4291],{"type":19,"tag":78,"props":4268,"children":4269},{"style":91},[4270],{"type":25,"value":4271},"    add_in_queue ",{"type":19,"tag":78,"props":4273,"children":4274},{"style":85},[4275],{"type":25,"value":383},{"type":19,"tag":78,"props":4277,"children":4278},{"style":91},[4279],{"type":25,"value":4280}," partial(add, ",{"type":19,"tag":78,"props":4282,"children":4284},{"style":4283},"--shiki-default:#E36209;--shiki-dark:#FFAB70",[4285],{"type":25,"value":4286},"queue",{"type":19,"tag":78,"props":4288,"children":4289},{"style":85},[4290],{"type":25,"value":383},{"type":19,"tag":78,"props":4292,"children":4293},{"style":91},[4294],{"type":25,"value":4295},"queue)\n",{"type":19,"tag":78,"props":4297,"children":4298},{"class":80,"line":2831},[4299,4303,4307,4311,4315,4319,4323,4327,4331,4335,4339,4343,4347,4351,4355],{"type":19,"tag":78,"props":4300,"children":4301},{"style":91},[4302],{"type":25,"value":3442},{"type":19,"tag":78,"props":4304,"children":4305},{"style":85},[4306],{"type":25,"value":383},{"type":19,"tag":78,"props":4308,"children":4309},{"style":91},[4310],{"type":25,"value":3451},{"type":19,"tag":78,"props":4312,"children":4313},{"style":138},[4314],{"type":25,"value":452},{"type":19,"tag":78,"props":4316,"children":4317},{"style":91},[4318],{"type":25,"value":3460},{"type":19,"tag":78,"props":4320,"children":4321},{"style":85},[4322],{"type":25,"value":592},{"type":19,"tag":78,"props":4324,"children":4325},{"style":138},[4326],{"type":25,"value":3469},{"type":19,"tag":78,"props":4328,"children":4329},{"style":91},[4330],{"type":25,"value":3474},{"type":19,"tag":78,"props":4332,"children":4333},{"style":85},[4334],{"type":25,"value":602},{"type":19,"tag":78,"props":4336,"children":4337},{"style":91},[4338],{"type":25,"value":3483},{"type":19,"tag":78,"props":4340,"children":4341},{"style":85},[4342],{"type":25,"value":612},{"type":19,"tag":78,"props":4344,"children":4345},{"style":138},[4346],{"type":25,"value":617},{"type":19,"tag":78,"props":4348,"children":4349},{"style":91},[4350],{"type":25,"value":622},{"type":19,"tag":78,"props":4352,"children":4353},{"style":138},[4354],{"type":25,"value":627},{"type":19,"tag":78,"props":4356,"children":4357},{"style":91},[4358],{"type":25,"value":3504},{"type":19,"tag":78,"props":4360,"children":4361},{"class":80,"line":2840},[4362,4367,4371],{"type":19,"tag":78,"props":4363,"children":4364},{"style":91},[4365],{"type":25,"value":4366},"    tasks ",{"type":19,"tag":78,"props":4368,"children":4369},{"style":85},[4370],{"type":25,"value":383},{"type":19,"tag":78,"props":4372,"children":4373},{"style":91},[4374],{"type":25,"value":4375}," deque()\n",{"type":19,"tag":78,"props":4377,"children":4378},{"class":80,"line":2849},[4379,4384,4388,4392],{"type":19,"tag":78,"props":4380,"children":4381},{"style":85},[4382],{"type":25,"value":4383},"    for",{"type":19,"tag":78,"props":4385,"children":4386},{"style":91},[4387],{"type":25,"value":3541},{"type":19,"tag":78,"props":4389,"children":4390},{"style":85},[4391],{"type":25,"value":612},{"type":19,"tag":78,"props":4393,"children":4394},{"style":91},[4395],{"type":25,"value":4396}," coros:\n",{"type":19,"tag":78,"props":4398,"children":4399},{"class":80,"line":2858},[4400,4405,4409],{"type":19,"tag":78,"props":4401,"children":4402},{"style":91},[4403],{"type":25,"value":4404},"        task ",{"type":19,"tag":78,"props":4406,"children":4407},{"style":85},[4408],{"type":25,"value":383},{"type":19,"tag":78,"props":4410,"children":4411},{"style":91},[4412],{"type":25,"value":1905},{"type":19,"tag":78,"props":4414,"children":4415},{"class":80,"line":2867},[4416],{"type":19,"tag":78,"props":4417,"children":4418},{"style":91},[4419],{"type":25,"value":4420},"        task.add_done_callback(add_in_queue)\n",{"type":19,"tag":78,"props":4422,"children":4423},{"class":80,"line":2876},[4424],{"type":19,"tag":78,"props":4425,"children":4426},{"style":91},[4427],{"type":25,"value":4428},"        tasks.append(task)\n",{"type":19,"tag":78,"props":4430,"children":4432},{"class":80,"line":4431},43,[4433],{"type":19,"tag":78,"props":4434,"children":4435},{"emptyLinePlaceholder":14},[4436],{"type":25,"value":103},{"type":19,"tag":78,"props":4438,"children":4440},{"class":80,"line":4439},44,[4441,4445,4449,4453,4458,4462,4467,4471],{"type":19,"tag":78,"props":4442,"children":4443},{"style":85},[4444],{"type":25,"value":155},{"type":19,"tag":78,"props":4446,"children":4447},{"style":91},[4448],{"type":25,"value":587},{"type":19,"tag":78,"props":4450,"children":4451},{"style":85},[4452],{"type":25,"value":592},{"type":19,"tag":78,"props":4454,"children":4455},{"style":91},[4456],{"type":25,"value":4457},"(shield(task) ",{"type":19,"tag":78,"props":4459,"children":4460},{"style":85},[4461],{"type":25,"value":602},{"type":19,"tag":78,"props":4463,"children":4464},{"style":91},[4465],{"type":25,"value":4466}," task ",{"type":19,"tag":78,"props":4468,"children":4469},{"style":85},[4470],{"type":25,"value":612},{"type":19,"tag":78,"props":4472,"children":4473},{"style":91},[4474],{"type":25,"value":4475}," tasks))\n",{"type":19,"tag":78,"props":4477,"children":4479},{"class":80,"line":4478},45,[4480,4484,4488,4493,4497,4501,4505,4509,4513,4517],{"type":19,"tag":78,"props":4481,"children":4482},{"style":91},[4483],{"type":25,"value":2704},{"type":19,"tag":78,"props":4485,"children":4486},{"style":85},[4487],{"type":25,"value":383},{"type":19,"tag":78,"props":4489,"children":4490},{"style":91},[4491],{"type":25,"value":4492}," [queue.get_nowait() ",{"type":19,"tag":78,"props":4494,"children":4495},{"style":85},[4496],{"type":25,"value":602},{"type":19,"tag":78,"props":4498,"children":4499},{"style":91},[4500],{"type":25,"value":3483},{"type":19,"tag":78,"props":4502,"children":4503},{"style":85},[4504],{"type":25,"value":612},{"type":19,"tag":78,"props":4506,"children":4507},{"style":138},[4508],{"type":25,"value":617},{"type":19,"tag":78,"props":4510,"children":4511},{"style":91},[4512],{"type":25,"value":622},{"type":19,"tag":78,"props":4514,"children":4515},{"style":138},[4516],{"type":25,"value":627},{"type":19,"tag":78,"props":4518,"children":4519},{"style":91},[4520],{"type":25,"value":3504},{"type":19,"tag":78,"props":4522,"children":4524},{"class":80,"line":4523},46,[4525,4529],{"type":19,"tag":78,"props":4526,"children":4527},{"style":138},[4528],{"type":25,"value":3558},{"type":19,"tag":78,"props":4530,"children":4531},{"style":91},[4532],{"type":25,"value":3563},{"type":19,"tag":78,"props":4534,"children":4536},{"class":80,"line":4535},47,[4537],{"type":19,"tag":78,"props":4538,"children":4539},{"emptyLinePlaceholder":14},[4540],{"type":25,"value":103},{"type":19,"tag":78,"props":4542,"children":4544},{"class":80,"line":4543},48,[4545],{"type":19,"tag":78,"props":4546,"children":4547},{"emptyLinePlaceholder":14},[4548],{"type":25,"value":103},{"type":19,"tag":78,"props":4550,"children":4552},{"class":80,"line":4551},49,[4553,4557,4561,4565,4569],{"type":19,"tag":78,"props":4554,"children":4555},{"style":85},[4556],{"type":25,"value":253},{"type":19,"tag":78,"props":4558,"children":4559},{"style":138},[4560],{"type":25,"value":258},{"type":19,"tag":78,"props":4562,"children":4563},{"style":85},[4564],{"type":25,"value":263},{"type":19,"tag":78,"props":4566,"children":4567},{"style":266},[4568],{"type":25,"value":269},{"type":19,"tag":78,"props":4570,"children":4571},{"style":91},[4572],{"type":25,"value":146},{"type":19,"tag":78,"props":4574,"children":4576},{"class":80,"line":4575},50,[4577],{"type":19,"tag":78,"props":4578,"children":4579},{"style":91},[4580],{"type":25,"value":282},{"type":19,"tag":78,"props":4582,"children":4584},{"class":80,"line":4583},51,[4585],{"type":19,"tag":78,"props":4586,"children":4587},{"style":1353},[4588],{"type":25,"value":4589},"# ❯ poetry run python main6-2.py\n",{"type":19,"tag":78,"props":4591,"children":4593},{"class":80,"line":4592},52,[4594],{"type":19,"tag":78,"props":4595,"children":4596},{"style":1353},[4597],{"type":25,"value":4598},"# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n",{"type":19,"tag":35,"props":4600,"children":4601},{},[4602,4604,4609,4610,4615],{"type":25,"value":4603},"핵심 로직이라 할 수 있는 ",{"type":19,"tag":28,"props":4605,"children":4607},{"className":4606},[],[4608],{"type":25,"value":2075},{"type":25,"value":46},{"type":19,"tag":28,"props":4611,"children":4613},{"className":4612},[],[4614],{"type":25,"value":3646},{"type":25,"value":4616},"를 수정하지 않고,\n콜백을 사용하여 문제를 해결할 수 있다.",{"type":19,"tag":947,"props":4618,"children":4620},{"id":4619},"future가-필요한-상황",[4621,4626],{"type":19,"tag":28,"props":4622,"children":4624},{"className":4623},[],[4625],{"type":25,"value":1484},{"type":25,"value":2973},{"type":19,"tag":35,"props":4628,"children":4629},{},[4630,4635,4637,4642,4644,4649,4651,4656,4657,4662,4664,4669],{"type":19,"tag":28,"props":4631,"children":4633},{"className":4632},[],[4634],{"type":25,"value":1491},{"type":25,"value":4636},"가 ",{"type":19,"tag":28,"props":4638,"children":4640},{"className":4639},[],[4641],{"type":25,"value":1484},{"type":25,"value":4643},"를 상속받았기에, 대부분의 경우 ",{"type":19,"tag":28,"props":4645,"children":4647},{"className":4646},[],[4648],{"type":25,"value":1491},{"type":25,"value":4650},"에서 문제가 해결된다.\n",{"type":19,"tag":28,"props":4652,"children":4654},{"className":4653},[],[4655],{"type":25,"value":1484},{"type":25,"value":46},{"type":19,"tag":28,"props":4658,"children":4660},{"className":4659},[],[4661],{"type":25,"value":1491},{"type":25,"value":4663},"의 결정적인 차이점은\n",{"type":19,"tag":28,"props":4665,"children":4667},{"className":4666},[],[4668],{"type":25,"value":1484},{"type":25,"value":4670},"는 이벤트루프에 예약되지 않은 상태가 존재한다는 것이다.",{"type":19,"tag":35,"props":4672,"children":4673},{},[4674,4676,4681,4683,4688,4689,4694,4696,4701],{"type":25,"value":4675},"코루틴이 비동기 작업에 대한 정의라면\n",{"type":19,"tag":28,"props":4677,"children":4679},{"className":4678},[],[4680],{"type":25,"value":1491},{"type":25,"value":4682},"는 코루틴의 실재이고,\n",{"type":19,"tag":28,"props":4684,"children":4686},{"className":4685},[],[4687],{"type":25,"value":1484},{"type":25,"value":1534},{"type":19,"tag":28,"props":4690,"children":4692},{"className":4691},[],[4693],{"type":25,"value":1491},{"type":25,"value":4695},"의 선물이다.\n따라서 ",{"type":19,"tag":28,"props":4697,"children":4699},{"className":4698},[],[4700],{"type":25,"value":1484},{"type":25,"value":4702},"를 사용한다면, 비동기 작업이 선언 또는 실행되기 이전에\n콜백을 정의하고 추가하여 제공할 수 있다.",{"type":19,"tag":35,"props":4704,"children":4705},{},[4706,4708,4713,4715,4721],{"type":25,"value":4707},"이러한 방법은 ",{"type":19,"tag":28,"props":4709,"children":4711},{"className":4710},[],[4712],{"type":25,"value":33},{"type":25,"value":4714},"의 내부 함수를 구현하는데 많이 사용되는데,\n그 중 하나인 ",{"type":19,"tag":28,"props":4716,"children":4718},{"className":4717},[],[4719],{"type":25,"value":4720},"wait_for",{"type":25,"value":4722},"를 좀 더 알아보기 쉽게 나타내면 다음과 같다.",{"type":19,"tag":68,"props":4724,"children":4727},{"className":70,"code":4725,"filename":4726,"language":6,"meta":8,"style":8},"from __future__ import annotations\n\nimport asyncio\nimport logging\nimport sys\nfrom functools import partial\nfrom typing import Any, Awaitable\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\ndef release(waiter: asyncio.Future[Any], *args: Any) -> None:\n    if not waiter.done():\n        waiter.set_result(None)\n\n\nasync def cancel(future: asyncio.Future[Any]) -> None:\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future.add_done_callback(callback)\n\n    try:\n        future.cancel()\n        await waiter\n    finally:\n        future.remove_done_callback(callback)\n\n\nasync def wait_for(coro: Awaitable[Any]) -> None:\n    logger.info(\"wait\")\n\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future = asyncio.ensure_future(coro)\n    future.add_done_callback(callback)\n\n    try:\n        await waiter\n    except asyncio.CancelledError:\n        if future.done():\n            return\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise\n\n    if not future.done():\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise RuntimeError\n\n\nasync def test() -> None:\n    logger.info(\"start\")\n    await asyncio.sleep(3)\n    logger.info(\"end\")\n\n\nasync def main() -> None:\n    coro = test()\n    task = asyncio.create_task(coro)\n    await asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main7.py\n# start\n# wait\n# wait\n# wait\n# end\n","main7.py",[4728],{"type":19,"tag":28,"props":4729,"children":4730},{"__ignoreMap":8},[4731,4750,4757,4768,4779,4790,4809,4829,4836,4851,4866,4873,4880,4887,4921,4938,4954,4961,4968,4997,5014,5031,5048,5056,5063,5074,5082,5095,5107,5115,5122,5129,5158,5174,5181,5196,5211,5226,5243,5250,5257,5268,5279,5291,5304,5312,5319,5331,5339,5346,5361,5368,5379,5392,5400,5408,5436,5452,5473,5490,5498,5506,5534,5550,5566,5579,5587,5595,5619,5627,5636,5644,5653,5661,5669],{"type":19,"tag":78,"props":4732,"children":4733},{"class":80,"line":81},[4734,4738,4742,4746],{"type":19,"tag":78,"props":4735,"children":4736},{"style":85},[4737],{"type":25,"value":1090},{"type":19,"tag":78,"props":4739,"children":4740},{"style":138},[4741],{"type":25,"value":2993},{"type":19,"tag":78,"props":4743,"children":4744},{"style":85},[4745],{"type":25,"value":2998},{"type":19,"tag":78,"props":4747,"children":4748},{"style":91},[4749],{"type":25,"value":3003},{"type":19,"tag":78,"props":4751,"children":4752},{"class":80,"line":97},[4753],{"type":19,"tag":78,"props":4754,"children":4755},{"emptyLinePlaceholder":14},[4756],{"type":25,"value":103},{"type":19,"tag":78,"props":4758,"children":4759},{"class":80,"line":106},[4760,4764],{"type":19,"tag":78,"props":4761,"children":4762},{"style":85},[4763],{"type":25,"value":88},{"type":19,"tag":78,"props":4765,"children":4766},{"style":91},[4767],{"type":25,"value":94},{"type":19,"tag":78,"props":4769,"children":4770},{"class":80,"line":114},[4771,4775],{"type":19,"tag":78,"props":4772,"children":4773},{"style":85},[4774],{"type":25,"value":88},{"type":19,"tag":78,"props":4776,"children":4777},{"style":91},[4778],{"type":25,"value":339},{"type":19,"tag":78,"props":4780,"children":4781},{"class":80,"line":149},[4782,4786],{"type":19,"tag":78,"props":4783,"children":4784},{"style":85},[4785],{"type":25,"value":88},{"type":19,"tag":78,"props":4787,"children":4788},{"style":91},[4789],{"type":25,"value":363},{"type":19,"tag":78,"props":4791,"children":4792},{"class":80,"line":173},[4793,4797,4801,4805],{"type":19,"tag":78,"props":4794,"children":4795},{"style":85},[4796],{"type":25,"value":1090},{"type":19,"tag":78,"props":4798,"children":4799},{"style":91},[4800],{"type":25,"value":3761},{"type":19,"tag":78,"props":4802,"children":4803},{"style":85},[4804],{"type":25,"value":88},{"type":19,"tag":78,"props":4806,"children":4807},{"style":91},[4808],{"type":25,"value":3770},{"type":19,"tag":78,"props":4810,"children":4811},{"class":80,"line":181},[4812,4816,4820,4824],{"type":19,"tag":78,"props":4813,"children":4814},{"style":85},[4815],{"type":25,"value":1090},{"type":19,"tag":78,"props":4817,"children":4818},{"style":91},[4819],{"type":25,"value":1095},{"type":19,"tag":78,"props":4821,"children":4822},{"style":85},[4823],{"type":25,"value":88},{"type":19,"tag":78,"props":4825,"children":4826},{"style":91},[4827],{"type":25,"value":4828}," Any, Awaitable\n",{"type":19,"tag":78,"props":4830,"children":4831},{"class":80,"line":189},[4832],{"type":19,"tag":78,"props":4833,"children":4834},{"emptyLinePlaceholder":14},[4835],{"type":25,"value":103},{"type":19,"tag":78,"props":4837,"children":4838},{"class":80,"line":218},[4839,4843,4847],{"type":19,"tag":78,"props":4840,"children":4841},{"style":91},[4842],{"type":25,"value":378},{"type":19,"tag":78,"props":4844,"children":4845},{"style":85},[4846],{"type":25,"value":383},{"type":19,"tag":78,"props":4848,"children":4849},{"style":91},[4850],{"type":25,"value":388},{"type":19,"tag":78,"props":4852,"children":4853},{"class":80,"line":231},[4854,4858,4862],{"type":19,"tag":78,"props":4855,"children":4856},{"style":91},[4857],{"type":25,"value":396},{"type":19,"tag":78,"props":4859,"children":4860},{"style":138},[4861],{"type":25,"value":401},{"type":19,"tag":78,"props":4863,"children":4864},{"style":91},[4865],{"type":25,"value":170},{"type":19,"tag":78,"props":4867,"children":4868},{"class":80,"line":239},[4869],{"type":19,"tag":78,"props":4870,"children":4871},{"style":91},[4872],{"type":25,"value":413},{"type":19,"tag":78,"props":4874,"children":4875},{"class":80,"line":247},[4876],{"type":19,"tag":78,"props":4877,"children":4878},{"emptyLinePlaceholder":14},[4879],{"type":25,"value":103},{"type":19,"tag":78,"props":4881,"children":4882},{"class":80,"line":276},[4883],{"type":19,"tag":78,"props":4884,"children":4885},{"emptyLinePlaceholder":14},[4886],{"type":25,"value":103},{"type":19,"tag":78,"props":4888,"children":4889},{"class":80,"line":508},[4890,4894,4899,4904,4908,4913,4917],{"type":19,"tag":78,"props":4891,"children":4892},{"style":85},[4893],{"type":25,"value":4122},{"type":19,"tag":78,"props":4895,"children":4896},{"style":127},[4897],{"type":25,"value":4898}," release",{"type":19,"tag":78,"props":4900,"children":4901},{"style":91},[4902],{"type":25,"value":4903},"(waiter: asyncio.Future[Any], ",{"type":19,"tag":78,"props":4905,"children":4906},{"style":85},[4907],{"type":25,"value":592},{"type":19,"tag":78,"props":4909,"children":4910},{"style":91},[4911],{"type":25,"value":4912},"args: Any) -> ",{"type":19,"tag":78,"props":4914,"children":4915},{"style":138},[4916],{"type":25,"value":141},{"type":19,"tag":78,"props":4918,"children":4919},{"style":91},[4920],{"type":25,"value":146},{"type":19,"tag":78,"props":4922,"children":4923},{"class":80,"line":533},[4924,4928,4933],{"type":19,"tag":78,"props":4925,"children":4926},{"style":85},[4927],{"type":25,"value":3189},{"type":19,"tag":78,"props":4929,"children":4930},{"style":85},[4931],{"type":25,"value":4932}," not",{"type":19,"tag":78,"props":4934,"children":4935},{"style":91},[4936],{"type":25,"value":4937}," waiter.done():\n",{"type":19,"tag":78,"props":4939,"children":4940},{"class":80,"line":541},[4941,4946,4950],{"type":19,"tag":78,"props":4942,"children":4943},{"style":91},[4944],{"type":25,"value":4945},"        waiter.set_result(",{"type":19,"tag":78,"props":4947,"children":4948},{"style":138},[4949],{"type":25,"value":141},{"type":19,"tag":78,"props":4951,"children":4952},{"style":91},[4953],{"type":25,"value":170},{"type":19,"tag":78,"props":4955,"children":4956},{"class":80,"line":549},[4957],{"type":19,"tag":78,"props":4958,"children":4959},{"emptyLinePlaceholder":14},[4960],{"type":25,"value":103},{"type":19,"tag":78,"props":4962,"children":4963},{"class":80,"line":577},[4964],{"type":19,"tag":78,"props":4965,"children":4966},{"emptyLinePlaceholder":14},[4967],{"type":25,"value":103},{"type":19,"tag":78,"props":4969,"children":4970},{"class":80,"line":635},[4971,4975,4979,4984,4989,4993],{"type":19,"tag":78,"props":4972,"children":4973},{"style":85},[4974],{"type":25,"value":12},{"type":19,"tag":78,"props":4976,"children":4977},{"style":85},[4978],{"type":25,"value":124},{"type":19,"tag":78,"props":4980,"children":4981},{"style":127},[4982],{"type":25,"value":4983}," cancel",{"type":19,"tag":78,"props":4985,"children":4986},{"style":91},[4987],{"type":25,"value":4988},"(future: asyncio.Future[Any]) -> ",{"type":19,"tag":78,"props":4990,"children":4991},{"style":138},[4992],{"type":25,"value":141},{"type":19,"tag":78,"props":4994,"children":4995},{"style":91},[4996],{"type":25,"value":146},{"type":19,"tag":78,"props":4998,"children":4999},{"class":80,"line":643},[5000,5005,5009],{"type":19,"tag":78,"props":5001,"children":5002},{"style":91},[5003],{"type":25,"value":5004},"    loop ",{"type":19,"tag":78,"props":5006,"children":5007},{"style":85},[5008],{"type":25,"value":383},{"type":19,"tag":78,"props":5010,"children":5011},{"style":91},[5012],{"type":25,"value":5013}," asyncio.get_running_loop()\n",{"type":19,"tag":78,"props":5015,"children":5016},{"class":80,"line":651},[5017,5022,5026],{"type":19,"tag":78,"props":5018,"children":5019},{"style":91},[5020],{"type":25,"value":5021},"    waiter ",{"type":19,"tag":78,"props":5023,"children":5024},{"style":85},[5025],{"type":25,"value":383},{"type":19,"tag":78,"props":5027,"children":5028},{"style":91},[5029],{"type":25,"value":5030}," loop.create_future()\n",{"type":19,"tag":78,"props":5032,"children":5033},{"class":80,"line":675},[5034,5039,5043],{"type":19,"tag":78,"props":5035,"children":5036},{"style":91},[5037],{"type":25,"value":5038},"    callback ",{"type":19,"tag":78,"props":5040,"children":5041},{"style":85},[5042],{"type":25,"value":383},{"type":19,"tag":78,"props":5044,"children":5045},{"style":91},[5046],{"type":25,"value":5047}," partial(release, waiter)\n",{"type":19,"tag":78,"props":5049,"children":5050},{"class":80,"line":1375},[5051],{"type":19,"tag":78,"props":5052,"children":5053},{"style":91},[5054],{"type":25,"value":5055},"    future.add_done_callback(callback)\n",{"type":19,"tag":78,"props":5057,"children":5058},{"class":80,"line":1384},[5059],{"type":19,"tag":78,"props":5060,"children":5061},{"emptyLinePlaceholder":14},[5062],{"type":25,"value":103},{"type":19,"tag":78,"props":5064,"children":5065},{"class":80,"line":1393},[5066,5070],{"type":19,"tag":78,"props":5067,"children":5068},{"style":85},[5069],{"type":25,"value":3346},{"type":19,"tag":78,"props":5071,"children":5072},{"style":91},[5073],{"type":25,"value":146},{"type":19,"tag":78,"props":5075,"children":5076},{"class":80,"line":2004},[5077],{"type":19,"tag":78,"props":5078,"children":5079},{"style":91},[5080],{"type":25,"value":5081},"        future.cancel()\n",{"type":19,"tag":78,"props":5083,"children":5084},{"class":80,"line":2013},[5085,5090],{"type":19,"tag":78,"props":5086,"children":5087},{"style":85},[5088],{"type":25,"value":5089},"        await",{"type":19,"tag":78,"props":5091,"children":5092},{"style":91},[5093],{"type":25,"value":5094}," waiter\n",{"type":19,"tag":78,"props":5096,"children":5097},{"class":80,"line":2022},[5098,5103],{"type":19,"tag":78,"props":5099,"children":5100},{"style":85},[5101],{"type":25,"value":5102},"    finally",{"type":19,"tag":78,"props":5104,"children":5105},{"style":91},[5106],{"type":25,"value":146},{"type":19,"tag":78,"props":5108,"children":5109},{"class":80,"line":2031},[5110],{"type":19,"tag":78,"props":5111,"children":5112},{"style":91},[5113],{"type":25,"value":5114},"        future.remove_done_callback(callback)\n",{"type":19,"tag":78,"props":5116,"children":5117},{"class":80,"line":2040},[5118],{"type":19,"tag":78,"props":5119,"children":5120},{"emptyLinePlaceholder":14},[5121],{"type":25,"value":103},{"type":19,"tag":78,"props":5123,"children":5124},{"class":80,"line":2716},[5125],{"type":19,"tag":78,"props":5126,"children":5127},{"emptyLinePlaceholder":14},[5128],{"type":25,"value":103},{"type":19,"tag":78,"props":5130,"children":5131},{"class":80,"line":2738},[5132,5136,5140,5145,5150,5154],{"type":19,"tag":78,"props":5133,"children":5134},{"style":85},[5135],{"type":25,"value":12},{"type":19,"tag":78,"props":5137,"children":5138},{"style":85},[5139],{"type":25,"value":124},{"type":19,"tag":78,"props":5141,"children":5142},{"style":127},[5143],{"type":25,"value":5144}," wait_for",{"type":19,"tag":78,"props":5146,"children":5147},{"style":91},[5148],{"type":25,"value":5149},"(coro: Awaitable[Any]) -> ",{"type":19,"tag":78,"props":5151,"children":5152},{"style":138},[5153],{"type":25,"value":141},{"type":19,"tag":78,"props":5155,"children":5156},{"style":91},[5157],{"type":25,"value":146},{"type":19,"tag":78,"props":5159,"children":5160},{"class":80,"line":2783},[5161,5165,5170],{"type":19,"tag":78,"props":5162,"children":5163},{"style":91},[5164],{"type":25,"value":473},{"type":19,"tag":78,"props":5166,"children":5167},{"style":266},[5168],{"type":25,"value":5169},"\"wait\"",{"type":19,"tag":78,"props":5171,"children":5172},{"style":91},[5173],{"type":25,"value":170},{"type":19,"tag":78,"props":5175,"children":5176},{"class":80,"line":2791},[5177],{"type":19,"tag":78,"props":5178,"children":5179},{"emptyLinePlaceholder":14},[5180],{"type":25,"value":103},{"type":19,"tag":78,"props":5182,"children":5183},{"class":80,"line":2799},[5184,5188,5192],{"type":19,"tag":78,"props":5185,"children":5186},{"style":91},[5187],{"type":25,"value":5004},{"type":19,"tag":78,"props":5189,"children":5190},{"style":85},[5191],{"type":25,"value":383},{"type":19,"tag":78,"props":5193,"children":5194},{"style":91},[5195],{"type":25,"value":5013},{"type":19,"tag":78,"props":5197,"children":5198},{"class":80,"line":2823},[5199,5203,5207],{"type":19,"tag":78,"props":5200,"children":5201},{"style":91},[5202],{"type":25,"value":5021},{"type":19,"tag":78,"props":5204,"children":5205},{"style":85},[5206],{"type":25,"value":383},{"type":19,"tag":78,"props":5208,"children":5209},{"style":91},[5210],{"type":25,"value":5030},{"type":19,"tag":78,"props":5212,"children":5213},{"class":80,"line":2831},[5214,5218,5222],{"type":19,"tag":78,"props":5215,"children":5216},{"style":91},[5217],{"type":25,"value":5038},{"type":19,"tag":78,"props":5219,"children":5220},{"style":85},[5221],{"type":25,"value":383},{"type":19,"tag":78,"props":5223,"children":5224},{"style":91},[5225],{"type":25,"value":5047},{"type":19,"tag":78,"props":5227,"children":5228},{"class":80,"line":2840},[5229,5234,5238],{"type":19,"tag":78,"props":5230,"children":5231},{"style":91},[5232],{"type":25,"value":5233},"    future ",{"type":19,"tag":78,"props":5235,"children":5236},{"style":85},[5237],{"type":25,"value":383},{"type":19,"tag":78,"props":5239,"children":5240},{"style":91},[5241],{"type":25,"value":5242}," asyncio.ensure_future(coro)\n",{"type":19,"tag":78,"props":5244,"children":5245},{"class":80,"line":2849},[5246],{"type":19,"tag":78,"props":5247,"children":5248},{"style":91},[5249],{"type":25,"value":5055},{"type":19,"tag":78,"props":5251,"children":5252},{"class":80,"line":2858},[5253],{"type":19,"tag":78,"props":5254,"children":5255},{"emptyLinePlaceholder":14},[5256],{"type":25,"value":103},{"type":19,"tag":78,"props":5258,"children":5259},{"class":80,"line":2867},[5260,5264],{"type":19,"tag":78,"props":5261,"children":5262},{"style":85},[5263],{"type":25,"value":3346},{"type":19,"tag":78,"props":5265,"children":5266},{"style":91},[5267],{"type":25,"value":146},{"type":19,"tag":78,"props":5269,"children":5270},{"class":80,"line":2876},[5271,5275],{"type":19,"tag":78,"props":5272,"children":5273},{"style":85},[5274],{"type":25,"value":5089},{"type":19,"tag":78,"props":5276,"children":5277},{"style":91},[5278],{"type":25,"value":5094},{"type":19,"tag":78,"props":5280,"children":5281},{"class":80,"line":4431},[5282,5286],{"type":19,"tag":78,"props":5283,"children":5284},{"style":85},[5285],{"type":25,"value":3374},{"type":19,"tag":78,"props":5287,"children":5288},{"style":91},[5289],{"type":25,"value":5290}," asyncio.CancelledError:\n",{"type":19,"tag":78,"props":5292,"children":5293},{"class":80,"line":4439},[5294,5299],{"type":19,"tag":78,"props":5295,"children":5296},{"style":85},[5297],{"type":25,"value":5298},"        if",{"type":19,"tag":78,"props":5300,"children":5301},{"style":91},[5302],{"type":25,"value":5303}," future.done():\n",{"type":19,"tag":78,"props":5305,"children":5306},{"class":80,"line":4478},[5307],{"type":19,"tag":78,"props":5308,"children":5309},{"style":85},[5310],{"type":25,"value":5311},"            return\n",{"type":19,"tag":78,"props":5313,"children":5314},{"class":80,"line":4523},[5315],{"type":19,"tag":78,"props":5316,"children":5317},{"style":91},[5318],{"type":25,"value":5114},{"type":19,"tag":78,"props":5320,"children":5321},{"class":80,"line":4535},[5322,5326],{"type":19,"tag":78,"props":5323,"children":5324},{"style":85},[5325],{"type":25,"value":5089},{"type":19,"tag":78,"props":5327,"children":5328},{"style":91},[5329],{"type":25,"value":5330}," cancel(future)\n",{"type":19,"tag":78,"props":5332,"children":5333},{"class":80,"line":4543},[5334],{"type":19,"tag":78,"props":5335,"children":5336},{"style":85},[5337],{"type":25,"value":5338},"        raise\n",{"type":19,"tag":78,"props":5340,"children":5341},{"class":80,"line":4551},[5342],{"type":19,"tag":78,"props":5343,"children":5344},{"emptyLinePlaceholder":14},[5345],{"type":25,"value":103},{"type":19,"tag":78,"props":5347,"children":5348},{"class":80,"line":4575},[5349,5353,5357],{"type":19,"tag":78,"props":5350,"children":5351},{"style":85},[5352],{"type":25,"value":3189},{"type":19,"tag":78,"props":5354,"children":5355},{"style":85},[5356],{"type":25,"value":4932},{"type":19,"tag":78,"props":5358,"children":5359},{"style":91},[5360],{"type":25,"value":5303},{"type":19,"tag":78,"props":5362,"children":5363},{"class":80,"line":4583},[5364],{"type":19,"tag":78,"props":5365,"children":5366},{"style":91},[5367],{"type":25,"value":5114},{"type":19,"tag":78,"props":5369,"children":5370},{"class":80,"line":4592},[5371,5375],{"type":19,"tag":78,"props":5372,"children":5373},{"style":85},[5374],{"type":25,"value":5089},{"type":19,"tag":78,"props":5376,"children":5377},{"style":91},[5378],{"type":25,"value":5330},{"type":19,"tag":78,"props":5380,"children":5382},{"class":80,"line":5381},53,[5383,5387],{"type":19,"tag":78,"props":5384,"children":5385},{"style":85},[5386],{"type":25,"value":3254},{"type":19,"tag":78,"props":5388,"children":5389},{"style":138},[5390],{"type":25,"value":5391}," RuntimeError\n",{"type":19,"tag":78,"props":5393,"children":5395},{"class":80,"line":5394},54,[5396],{"type":19,"tag":78,"props":5397,"children":5398},{"emptyLinePlaceholder":14},[5399],{"type":25,"value":103},{"type":19,"tag":78,"props":5401,"children":5403},{"class":80,"line":5402},55,[5404],{"type":19,"tag":78,"props":5405,"children":5406},{"emptyLinePlaceholder":14},[5407],{"type":25,"value":103},{"type":19,"tag":78,"props":5409,"children":5411},{"class":80,"line":5410},56,[5412,5416,5420,5424,5428,5432],{"type":19,"tag":78,"props":5413,"children":5414},{"style":85},[5415],{"type":25,"value":12},{"type":19,"tag":78,"props":5417,"children":5418},{"style":85},[5419],{"type":25,"value":124},{"type":19,"tag":78,"props":5421,"children":5422},{"style":127},[5423],{"type":25,"value":130},{"type":19,"tag":78,"props":5425,"children":5426},{"style":91},[5427],{"type":25,"value":135},{"type":19,"tag":78,"props":5429,"children":5430},{"style":138},[5431],{"type":25,"value":141},{"type":19,"tag":78,"props":5433,"children":5434},{"style":91},[5435],{"type":25,"value":146},{"type":19,"tag":78,"props":5437,"children":5439},{"class":80,"line":5438},57,[5440,5444,5448],{"type":19,"tag":78,"props":5441,"children":5442},{"style":91},[5443],{"type":25,"value":473},{"type":19,"tag":78,"props":5445,"children":5446},{"style":266},[5447],{"type":25,"value":1792},{"type":19,"tag":78,"props":5449,"children":5450},{"style":91},[5451],{"type":25,"value":170},{"type":19,"tag":78,"props":5453,"children":5455},{"class":80,"line":5454},58,[5456,5460,5464,5469],{"type":19,"tag":78,"props":5457,"children":5458},{"style":85},[5459],{"type":25,"value":155},{"type":19,"tag":78,"props":5461,"children":5462},{"style":91},[5463],{"type":25,"value":160},{"type":19,"tag":78,"props":5465,"children":5466},{"style":138},[5467],{"type":25,"value":5468},"3",{"type":19,"tag":78,"props":5470,"children":5471},{"style":91},[5472],{"type":25,"value":170},{"type":19,"tag":78,"props":5474,"children":5476},{"class":80,"line":5475},59,[5477,5481,5486],{"type":19,"tag":78,"props":5478,"children":5479},{"style":91},[5480],{"type":25,"value":473},{"type":19,"tag":78,"props":5482,"children":5483},{"style":266},[5484],{"type":25,"value":5485},"\"end\"",{"type":19,"tag":78,"props":5487,"children":5488},{"style":91},[5489],{"type":25,"value":170},{"type":19,"tag":78,"props":5491,"children":5493},{"class":80,"line":5492},60,[5494],{"type":19,"tag":78,"props":5495,"children":5496},{"emptyLinePlaceholder":14},[5497],{"type":25,"value":103},{"type":19,"tag":78,"props":5499,"children":5501},{"class":80,"line":5500},61,[5502],{"type":19,"tag":78,"props":5503,"children":5504},{"emptyLinePlaceholder":14},[5505],{"type":25,"value":103},{"type":19,"tag":78,"props":5507,"children":5509},{"class":80,"line":5508},62,[5510,5514,5518,5522,5526,5530],{"type":19,"tag":78,"props":5511,"children":5512},{"style":85},[5513],{"type":25,"value":12},{"type":19,"tag":78,"props":5515,"children":5516},{"style":85},[5517],{"type":25,"value":124},{"type":19,"tag":78,"props":5519,"children":5520},{"style":127},[5521],{"type":25,"value":203},{"type":19,"tag":78,"props":5523,"children":5524},{"style":91},[5525],{"type":25,"value":135},{"type":19,"tag":78,"props":5527,"children":5528},{"style":138},[5529],{"type":25,"value":141},{"type":19,"tag":78,"props":5531,"children":5532},{"style":91},[5533],{"type":25,"value":146},{"type":19,"tag":78,"props":5535,"children":5537},{"class":80,"line":5536},63,[5538,5542,5546],{"type":19,"tag":78,"props":5539,"children":5540},{"style":91},[5541],{"type":25,"value":1880},{"type":19,"tag":78,"props":5543,"children":5544},{"style":85},[5545],{"type":25,"value":383},{"type":19,"tag":78,"props":5547,"children":5548},{"style":91},[5549],{"type":25,"value":228},{"type":19,"tag":78,"props":5551,"children":5553},{"class":80,"line":5552},64,[5554,5558,5562],{"type":19,"tag":78,"props":5555,"children":5556},{"style":91},[5557],{"type":25,"value":2558},{"type":19,"tag":78,"props":5559,"children":5560},{"style":85},[5561],{"type":25,"value":383},{"type":19,"tag":78,"props":5563,"children":5564},{"style":91},[5565],{"type":25,"value":1905},{"type":19,"tag":78,"props":5567,"children":5569},{"class":80,"line":5568},65,[5570,5574],{"type":19,"tag":78,"props":5571,"children":5572},{"style":85},[5573],{"type":25,"value":155},{"type":19,"tag":78,"props":5575,"children":5576},{"style":91},[5577],{"type":25,"value":5578}," asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n",{"type":19,"tag":78,"props":5580,"children":5582},{"class":80,"line":5581},66,[5583],{"type":19,"tag":78,"props":5584,"children":5585},{"emptyLinePlaceholder":14},[5586],{"type":25,"value":103},{"type":19,"tag":78,"props":5588,"children":5590},{"class":80,"line":5589},67,[5591],{"type":19,"tag":78,"props":5592,"children":5593},{"emptyLinePlaceholder":14},[5594],{"type":25,"value":103},{"type":19,"tag":78,"props":5596,"children":5598},{"class":80,"line":5597},68,[5599,5603,5607,5611,5615],{"type":19,"tag":78,"props":5600,"children":5601},{"style":85},[5602],{"type":25,"value":253},{"type":19,"tag":78,"props":5604,"children":5605},{"style":138},[5606],{"type":25,"value":258},{"type":19,"tag":78,"props":5608,"children":5609},{"style":85},[5610],{"type":25,"value":263},{"type":19,"tag":78,"props":5612,"children":5613},{"style":266},[5614],{"type":25,"value":269},{"type":19,"tag":78,"props":5616,"children":5617},{"style":91},[5618],{"type":25,"value":146},{"type":19,"tag":78,"props":5620,"children":5622},{"class":80,"line":5621},69,[5623],{"type":19,"tag":78,"props":5624,"children":5625},{"style":91},[5626],{"type":25,"value":282},{"type":19,"tag":78,"props":5628,"children":5630},{"class":80,"line":5629},70,[5631],{"type":19,"tag":78,"props":5632,"children":5633},{"style":1353},[5634],{"type":25,"value":5635},"# ❯ poetry run python main7.py\n",{"type":19,"tag":78,"props":5637,"children":5639},{"class":80,"line":5638},71,[5640],{"type":19,"tag":78,"props":5641,"children":5642},{"style":1353},[5643],{"type":25,"value":2855},{"type":19,"tag":78,"props":5645,"children":5647},{"class":80,"line":5646},72,[5648],{"type":19,"tag":78,"props":5649,"children":5650},{"style":1353},[5651],{"type":25,"value":5652},"# wait\n",{"type":19,"tag":78,"props":5654,"children":5656},{"class":80,"line":5655},73,[5657],{"type":19,"tag":78,"props":5658,"children":5659},{"style":1353},[5660],{"type":25,"value":5652},{"type":19,"tag":78,"props":5662,"children":5664},{"class":80,"line":5663},74,[5665],{"type":19,"tag":78,"props":5666,"children":5667},{"style":1353},[5668],{"type":25,"value":5652},{"type":19,"tag":78,"props":5670,"children":5672},{"class":80,"line":5671},75,[5673],{"type":19,"tag":78,"props":5674,"children":5675},{"style":1353},[5676],{"type":25,"value":5677},"# end\n",{"type":19,"tag":35,"props":5679,"children":5680},{},[5681,5686,5688,5693,5695,5701],{"type":19,"tag":28,"props":5682,"children":5684},{"className":5683},[],[5685],{"type":25,"value":4720},{"type":25,"value":5687},"의 실제 구현은 더 정교하지만, 읽기 쉽도록 일부 코드를 수정했다.\n위와 같은 형태로 ",{"type":19,"tag":28,"props":5689,"children":5691},{"className":5690},[],[5692],{"type":25,"value":4720},{"type":25,"value":5694},"를 사용하지 않는다면, ",{"type":19,"tag":28,"props":5696,"children":5698},{"className":5697},[],[5699],{"type":25,"value":5700},"task",{"type":25,"value":5702},"를 2번 이상 실행하게 되고,\n동일한 코루틴을 2번 이상 실행할 수 없다는 에러가 발생한다.",{"type":19,"tag":20,"props":5704,"children":5706},{"id":5705},"요약하자면",[5707],{"type":25,"value":5705},{"type":19,"tag":2099,"props":5709,"children":5710},{},[5711,5734,5757],{"type":19,"tag":2103,"props":5712,"children":5713},{},[5714,5719,5720,5725,5727,5732],{"type":19,"tag":28,"props":5715,"children":5717},{"className":5716},[],[5718],{"type":25,"value":12},{"type":25,"value":970},{"type":19,"tag":28,"props":5721,"children":5723},{"className":5722},[],[5724],{"type":25,"value":52},{"type":25,"value":5726}," 키워드로 비동기 함수를 정의하여 코루틴을 생성하고,\n",{"type":19,"tag":28,"props":5728,"children":5730},{"className":5729},[],[5731],{"type":25,"value":293},{"type":25,"value":5733},"으로 실행한다.",{"type":19,"tag":2103,"props":5735,"children":5736},{},[5737,5742,5743,5748,5750,5755],{"type":19,"tag":28,"props":5738,"children":5740},{"className":5739},[],[5741],{"type":25,"value":1627},{"type":25,"value":1527},{"type":19,"tag":28,"props":5744,"children":5746},{"className":5745},[],[5747],{"type":25,"value":1634},{"type":25,"value":5749},"와 비슷한 객체는 ",{"type":19,"tag":28,"props":5751,"children":5753},{"className":5752},[],[5754],{"type":25,"value":1491},{"type":25,"value":5756},"다.",{"type":19,"tag":2103,"props":5758,"children":5759},{},[5760,5765],{"type":19,"tag":28,"props":5761,"children":5763},{"className":5762},[],[5764],{"type":25,"value":1484},{"type":25,"value":5766},"를 사용하면 콜백을 활용할 수 있다.",{"type":19,"tag":947,"props":5768,"children":5770},{"id":5769},"추가하자면",[5771],{"type":25,"value":5769},{"type":19,"tag":35,"props":5773,"children":5774},{},[5775,5777,5782,5784,5789],{"type":25,"value":5776},"기본 라이브러리인 ",{"type":19,"tag":28,"props":5778,"children":5780},{"className":5779},[],[5781],{"type":25,"value":33},{"type":25,"value":5783}," 위주로 작성된 글이지만,\n비동기 라이브러리는 ",{"type":19,"tag":28,"props":5785,"children":5787},{"className":5786},[],[5788],{"type":25,"value":33},{"type":25,"value":5790},"만이 있는 것은 아니다.",{"type":19,"tag":35,"props":5792,"children":5793},{},[5794,5800,5802,5808,5809,5815,5817,5822,5824,5829,5831,5837],{"type":19,"tag":28,"props":5795,"children":5797},{"className":5796},[],[5798],{"type":25,"value":5799},"twisted",{"type":25,"value":5801},"나 ",{"type":19,"tag":28,"props":5803,"children":5805},{"className":5804},[],[5806],{"type":25,"value":5807},"curio",{"type":25,"value":970},{"type":19,"tag":28,"props":5810,"children":5812},{"className":5811},[],[5813],{"type":25,"value":5814},"trio",{"type":25,"value":5816},"등이 있으며,\n",{"type":19,"tag":28,"props":5818,"children":5820},{"className":5819},[],[5821],{"type":25,"value":5814},{"type":25,"value":5823},"의 로직을 ",{"type":19,"tag":28,"props":5825,"children":5827},{"className":5826},[],[5828],{"type":25,"value":33},{"type":25,"value":5830},"에 적용한 ",{"type":19,"tag":28,"props":5832,"children":5834},{"className":5833},[],[5835],{"type":25,"value":5836},"anyio",{"type":25,"value":5838},"도 있다.",{"type":19,"tag":5840,"props":5841,"children":5842},"blockquote",{},[5843,5866,5885],{"type":19,"tag":35,"props":5844,"children":5845},{},[5846,5851,5853,5858,5859,5864],{"type":19,"tag":28,"props":5847,"children":5849},{"className":5848},[],[5850],{"type":25,"value":5836},{"type":25,"value":5852},"를 사용하면 비동기 로직 구현 후,\n",{"type":19,"tag":28,"props":5854,"children":5856},{"className":5855},[],[5857],{"type":25,"value":33},{"type":25,"value":46},{"type":19,"tag":28,"props":5860,"children":5862},{"className":5861},[],[5863],{"type":25,"value":5814},{"type":25,"value":5865},"중 어떤 것이든 선택하여 사용할 수 있다.",{"type":19,"tag":35,"props":5867,"children":5868},{},[5869,5871,5876,5878,5883],{"type":25,"value":5870},"2.x에서는 ",{"type":19,"tag":28,"props":5872,"children":5874},{"className":5873},[],[5875],{"type":25,"value":5807},{"type":25,"value":5877},"도 지원했지만,\n",{"type":19,"tag":28,"props":5879,"children":5881},{"className":5880},[],[5882],{"type":25,"value":5807},{"type":25,"value":5884},"의 구현 방식에 따른 개발에 어려움이 있어서 3.x부터 제외됐다.",{"type":19,"tag":35,"props":5886,"children":5887},{},[5888,5893,5894,5899,5901,5907,5909,5914],{"type":19,"tag":28,"props":5889,"children":5891},{"className":5890},[],[5892],{"type":25,"value":5799},{"type":25,"value":1534},{"type":19,"tag":28,"props":5895,"children":5897},{"className":5896},[],[5898],{"type":25,"value":5836},{"type":25,"value":5900},"에서 사용하는 ",{"type":19,"tag":28,"props":5902,"children":5904},{"className":5903},[],[5905],{"type":25,"value":5906},"sniffio",{"type":25,"value":5908},"에서 지원하지 않아서\n",{"type":19,"tag":28,"props":5910,"children":5912},{"className":5911},[],[5913],{"type":25,"value":5836},{"type":25,"value":5915},"에서도 지원하지 않는다.",{"type":19,"tag":35,"props":5917,"children":5918},{},[5919,5921,5926,5927,5932,5933,5938],{"type":25,"value":5920},"모든 라이브러리는 코루틴에 대해서는 공유하지만,\n",{"type":19,"tag":28,"props":5922,"children":5924},{"className":5923},[],[5925],{"type":25,"value":1484},{"type":25,"value":46},{"type":19,"tag":28,"props":5928,"children":5930},{"className":5929},[],[5931],{"type":25,"value":1491},{"type":25,"value":1534},{"type":19,"tag":28,"props":5934,"children":5936},{"className":5935},[],[5937],{"type":25,"value":33},{"type":25,"value":5939},"에 정의된 객체이므로,\n따로 정의한 객체를 사용할 수 있다.\n따라서 만약 다른 라이브러리를 사용한다면,\n그 라이브러리에 맞는 방법을 잘 알아보고 사용해야 한다.",{"type":19,"tag":35,"props":5941,"children":5942},{},[5943,5945,5950,5952,5958,5960,5966,5968,5973,5975,5980,5982,5988,5990,5995],{"type":25,"value":5944},"나는 ",{"type":19,"tag":28,"props":5946,"children":5948},{"className":5947},[],[5949],{"type":25,"value":5836},{"type":25,"value":5951},"를 주로 사용하는데,\n",{"type":19,"tag":28,"props":5953,"children":5955},{"className":5954},[],[5956],{"type":25,"value":5957},"TaskGroup",{"type":25,"value":5959},"과 ",{"type":19,"tag":28,"props":5961,"children":5963},{"className":5962},[],[5964],{"type":25,"value":5965},"CancelScope",{"type":25,"value":5967},"가 마음에 들었기 때문이다.\n특히 이 ",{"type":19,"tag":28,"props":5969,"children":5971},{"className":5970},[],[5972],{"type":25,"value":5957},{"type":25,"value":5974},"은 3.11부터는 ",{"type":19,"tag":28,"props":5976,"children":5978},{"className":5977},[],[5979],{"type":25,"value":33},{"type":25,"value":5981},"에 적용된 개념이기도 하니,\n만약 3.11이상의 버전을 사용한다면 ",{"type":19,"tag":28,"props":5983,"children":5985},{"className":5984},[],[5986],{"type":25,"value":5987},"gather",{"type":25,"value":5989}," 대신 ",{"type":19,"tag":28,"props":5991,"children":5993},{"className":5992},[],[5994],{"type":25,"value":5957},{"type":25,"value":5996},"을 사용하자.",{"type":19,"tag":35,"props":5998,"children":5999},{},[6000,6001,6006,6008,6017],{"type":25,"value":952},{"type":19,"tag":28,"props":6002,"children":6004},{"className":6003},[],[6005],{"type":25,"value":5957},{"type":25,"value":6007},"이 좋은지, 왜 사용해야 하는지는\n",{"type":19,"tag":6009,"props":6010,"children":6014},"a",{"href":6011,"rel":6012},"https://blog.lablup.com/posts/2022/03/29/PersistentTaskGroup/",[6013],"nofollow",[6015],{"type":25,"value":6016},"이 글",{"type":25,"value":6018},"에서 상세하게 설명해준다.",{"type":19,"tag":6020,"props":6021,"children":6022},"style",{},[6023],{"type":25,"value":6024},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":8,"searchDepth":149,"depth":149,"links":6026},[6027,6032,6039,6046],{"id":22,"depth":97,"text":6028,"children":6029},"파이썬의 비동기 라이브러리 asyncio",[6030],{"id":949,"depth":106,"text":6031},"왜 asyncio.run을 실행해야 하는가",{"id":1005,"depth":97,"text":6033,"children":6034},"대기할 수 있는 Awaitable객체",[6035,6037],{"id":1509,"depth":106,"text":6036},"콜백 형태의 Future",{"id":1579,"depth":106,"text":6038},"Future를 상속받는 Task",{"id":2932,"depth":97,"text":6040,"children":6041},"Future와 Task는 언제 사용할까",[6042,6044],{"id":2965,"depth":106,"text":6043},"Task가 필요한 상황",{"id":4619,"depth":106,"text":6045},"Future가 필요한 상황",{"id":5705,"depth":97,"text":5705,"children":6047},[6048],{"id":5769,"depth":106,"text":5769},"markdown","content:python:async.md","content","python/async.md","python/async","md",[6056,6060],{"_path":6057,"title":6058,"description":6059},"/python/airflow1","새로운 문법으로 Airflow DAG 생성하기","TaskFlow API를 사용하자",{"_path":6061,"title":6062,"description":6063},"/python/pep_695","더 편한 타입 힌트를 위한 PEP695","python 3.12에 새롭게 추가/변경되는 문법",1726999940626]