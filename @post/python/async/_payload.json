[{"data":1,"prerenderedAt":6066},["ShallowReactive",2],{"selected_data_with_surround_/python/async":3},{"article":4,"surround":6057},{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"tags":11,"date":13,"publish":14,"body":15,"_type":6051,"_id":6052,"_source":6053,"_file":6054,"_stem":6055,"_extension":6056},"/python/async","python",false,"","python의 비동기에 대한 얕은 이해","코드 중심으로 알아보는 비동기",[6,12],"async","2023-07-31T09:51:28.303Z",true,{"type":16,"children":17,"toc":6027},"root",[18,34,55,67,283,304,309,681,694,704,709,947,961,987,992,1004,1018,1038,1065,1401,1438,1456,1469,1509,1520,1551,1567,1579,1595,1639,1652,1657,2049,2095,2100,2200,2218,2223,2272,2298,2310,2885,2897,2932,2949,2965,2976,3626,3638,3658,3663,3675,4601,4619,4629,4673,4705,4725,5680,5705,5710,5769,5774,5793,5841,5918,5942,5999,6021],{"type":19,"tag":20,"props":21,"children":23},"element","h2",{"id":22},"파이썬의-비동기-라이브러리-asyncio",[24,27],{"type":25,"value":26},"text","파이썬의 비동기 라이브러리 ",{"type":19,"tag":28,"props":29,"children":31},"code",{"className":30},[],[32],{"type":25,"value":33},"asyncio",{"type":19,"tag":35,"props":36,"children":37},"p",{},[38,40,45,47,53],{"type":25,"value":39},"파이썬에서 비동기를 객체를 생성하는 가장 간단한 방법은 ",{"type":19,"tag":28,"props":41,"children":43},{"className":42},[],[44],{"type":25,"value":12},{"type":25,"value":46},"와 ",{"type":19,"tag":28,"props":48,"children":50},{"className":49},[],[51],{"type":25,"value":52},"await",{"type":25,"value":54},"키워드를 사용하는 것이다.",{"type":19,"tag":35,"props":56,"children":57},{},[58,60,65],{"type":25,"value":59},"이를 위해 기본 라이브러리로 제공되는 ",{"type":19,"tag":28,"props":61,"children":63},{"className":62},[],[64],{"type":25,"value":33},{"type":25,"value":66},"를 사용하자.",{"type":19,"tag":68,"props":69,"children":73},"pre",{"className":70,"code":71,"filename":72,"language":6,"meta":8,"style":8},"language-python shiki shiki-themes github-light github-dark","import asyncio\n\n\nasync def test() -> None:\n    await asyncio.sleep(1)\n\n\nasync def main() -> None:\n    await test()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","main.py",[74],{"type":19,"tag":28,"props":75,"children":76},{"__ignoreMap":8},[77,95,104,112,147,171,179,187,216,229,237,245,274],{"type":19,"tag":78,"props":79,"children":82},"span",{"class":80,"line":81},"line",1,[83,89],{"type":19,"tag":78,"props":84,"children":86},{"style":85},"--shiki-default:#D73A49;--shiki-dark:#F97583",[87],{"type":25,"value":88},"import",{"type":19,"tag":78,"props":90,"children":92},{"style":91},"--shiki-default:#24292E;--shiki-dark:#E1E4E8",[93],{"type":25,"value":94}," asyncio\n",{"type":19,"tag":78,"props":96,"children":98},{"class":80,"line":97},2,[99],{"type":19,"tag":78,"props":100,"children":101},{"emptyLinePlaceholder":14},[102],{"type":25,"value":103},"\n",{"type":19,"tag":78,"props":105,"children":107},{"class":80,"line":106},3,[108],{"type":19,"tag":78,"props":109,"children":110},{"emptyLinePlaceholder":14},[111],{"type":25,"value":103},{"type":19,"tag":78,"props":113,"children":115},{"class":80,"line":114},4,[116,120,125,131,136,142],{"type":19,"tag":78,"props":117,"children":118},{"style":85},[119],{"type":25,"value":12},{"type":19,"tag":78,"props":121,"children":122},{"style":85},[123],{"type":25,"value":124}," def",{"type":19,"tag":78,"props":126,"children":128},{"style":127},"--shiki-default:#6F42C1;--shiki-dark:#B392F0",[129],{"type":25,"value":130}," test",{"type":19,"tag":78,"props":132,"children":133},{"style":91},[134],{"type":25,"value":135},"() -> ",{"type":19,"tag":78,"props":137,"children":139},{"style":138},"--shiki-default:#005CC5;--shiki-dark:#79B8FF",[140],{"type":25,"value":141},"None",{"type":19,"tag":78,"props":143,"children":144},{"style":91},[145],{"type":25,"value":146},":\n",{"type":19,"tag":78,"props":148,"children":150},{"class":80,"line":149},5,[151,156,161,166],{"type":19,"tag":78,"props":152,"children":153},{"style":85},[154],{"type":25,"value":155},"    await",{"type":19,"tag":78,"props":157,"children":158},{"style":91},[159],{"type":25,"value":160}," asyncio.sleep(",{"type":19,"tag":78,"props":162,"children":163},{"style":138},[164],{"type":25,"value":165},"1",{"type":19,"tag":78,"props":167,"children":168},{"style":91},[169],{"type":25,"value":170},")\n",{"type":19,"tag":78,"props":172,"children":174},{"class":80,"line":173},6,[175],{"type":19,"tag":78,"props":176,"children":177},{"emptyLinePlaceholder":14},[178],{"type":25,"value":103},{"type":19,"tag":78,"props":180,"children":182},{"class":80,"line":181},7,[183],{"type":19,"tag":78,"props":184,"children":185},{"emptyLinePlaceholder":14},[186],{"type":25,"value":103},{"type":19,"tag":78,"props":188,"children":190},{"class":80,"line":189},8,[191,195,199,204,208,212],{"type":19,"tag":78,"props":192,"children":193},{"style":85},[194],{"type":25,"value":12},{"type":19,"tag":78,"props":196,"children":197},{"style":85},[198],{"type":25,"value":124},{"type":19,"tag":78,"props":200,"children":201},{"style":127},[202],{"type":25,"value":203}," main",{"type":19,"tag":78,"props":205,"children":206},{"style":91},[207],{"type":25,"value":135},{"type":19,"tag":78,"props":209,"children":210},{"style":138},[211],{"type":25,"value":141},{"type":19,"tag":78,"props":213,"children":214},{"style":91},[215],{"type":25,"value":146},{"type":19,"tag":78,"props":217,"children":219},{"class":80,"line":218},9,[220,224],{"type":19,"tag":78,"props":221,"children":222},{"style":85},[223],{"type":25,"value":155},{"type":19,"tag":78,"props":225,"children":226},{"style":91},[227],{"type":25,"value":228}," test()\n",{"type":19,"tag":78,"props":230,"children":232},{"class":80,"line":231},10,[233],{"type":19,"tag":78,"props":234,"children":235},{"emptyLinePlaceholder":14},[236],{"type":25,"value":103},{"type":19,"tag":78,"props":238,"children":240},{"class":80,"line":239},11,[241],{"type":19,"tag":78,"props":242,"children":243},{"emptyLinePlaceholder":14},[244],{"type":25,"value":103},{"type":19,"tag":78,"props":246,"children":248},{"class":80,"line":247},12,[249,254,259,264,270],{"type":19,"tag":78,"props":250,"children":251},{"style":85},[252],{"type":25,"value":253},"if",{"type":19,"tag":78,"props":255,"children":256},{"style":138},[257],{"type":25,"value":258}," __name__",{"type":19,"tag":78,"props":260,"children":261},{"style":85},[262],{"type":25,"value":263}," ==",{"type":19,"tag":78,"props":265,"children":267},{"style":266},"--shiki-default:#032F62;--shiki-dark:#9ECBFF",[268],{"type":25,"value":269}," \"__main__\"",{"type":19,"tag":78,"props":271,"children":272},{"style":91},[273],{"type":25,"value":146},{"type":19,"tag":78,"props":275,"children":277},{"class":80,"line":276},13,[278],{"type":19,"tag":78,"props":279,"children":280},{"style":91},[281],{"type":25,"value":282},"    asyncio.run(main())\n",{"type":19,"tag":35,"props":284,"children":285},{},[286,288,294,296,302],{"type":25,"value":287},"동기 함수와는 다르게 ",{"type":19,"tag":28,"props":289,"children":291},{"className":290},[],[292],{"type":25,"value":293},"asyncio.run",{"type":25,"value":295},"함수로 ",{"type":19,"tag":28,"props":297,"children":299},{"className":298},[],[300],{"type":25,"value":301},"main()",{"type":25,"value":303}," 코루틴을 실행하는 형태로 구성된다.",{"type":19,"tag":35,"props":305,"children":306},{},[307],{"type":25,"value":308},"정말로 비동기로 작동하는지 확인하기 위해, 다음과 같이 새로 작성한 코드를 실행해보자.",{"type":19,"tag":68,"props":310,"children":313},{"className":70,"code":311,"filename":312,"language":6,"meta":8,"style":8},"import asyncio\nimport logging\nimport random\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test(x: int) -> None:\n    logger.info(\"start: %d\", x)\n    await asyncio.sleep(random.random())\n    logger.info(\"end: %d\", x)\n\n\nasync def main() -> None:\n    await asyncio.gather(*(test(x) for x in range(10)))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","main2.py",[314],{"type":19,"tag":28,"props":315,"children":316},{"__ignoreMap":8},[317,328,340,352,364,371,389,406,414,421,428,466,494,506,531,539,547,575,633,641,649,673],{"type":19,"tag":78,"props":318,"children":319},{"class":80,"line":81},[320,324],{"type":19,"tag":78,"props":321,"children":322},{"style":85},[323],{"type":25,"value":88},{"type":19,"tag":78,"props":325,"children":326},{"style":91},[327],{"type":25,"value":94},{"type":19,"tag":78,"props":329,"children":330},{"class":80,"line":97},[331,335],{"type":19,"tag":78,"props":332,"children":333},{"style":85},[334],{"type":25,"value":88},{"type":19,"tag":78,"props":336,"children":337},{"style":91},[338],{"type":25,"value":339}," logging\n",{"type":19,"tag":78,"props":341,"children":342},{"class":80,"line":106},[343,347],{"type":19,"tag":78,"props":344,"children":345},{"style":85},[346],{"type":25,"value":88},{"type":19,"tag":78,"props":348,"children":349},{"style":91},[350],{"type":25,"value":351}," random\n",{"type":19,"tag":78,"props":353,"children":354},{"class":80,"line":114},[355,359],{"type":19,"tag":78,"props":356,"children":357},{"style":85},[358],{"type":25,"value":88},{"type":19,"tag":78,"props":360,"children":361},{"style":91},[362],{"type":25,"value":363}," sys\n",{"type":19,"tag":78,"props":365,"children":366},{"class":80,"line":149},[367],{"type":19,"tag":78,"props":368,"children":369},{"emptyLinePlaceholder":14},[370],{"type":25,"value":103},{"type":19,"tag":78,"props":372,"children":373},{"class":80,"line":173},[374,379,384],{"type":19,"tag":78,"props":375,"children":376},{"style":91},[377],{"type":25,"value":378},"logger ",{"type":19,"tag":78,"props":380,"children":381},{"style":85},[382],{"type":25,"value":383},"=",{"type":19,"tag":78,"props":385,"children":386},{"style":91},[387],{"type":25,"value":388}," logging.getLogger()\n",{"type":19,"tag":78,"props":390,"children":391},{"class":80,"line":181},[392,397,402],{"type":19,"tag":78,"props":393,"children":394},{"style":91},[395],{"type":25,"value":396},"logger.setLevel(logging.",{"type":19,"tag":78,"props":398,"children":399},{"style":138},[400],{"type":25,"value":401},"INFO",{"type":19,"tag":78,"props":403,"children":404},{"style":91},[405],{"type":25,"value":170},{"type":19,"tag":78,"props":407,"children":408},{"class":80,"line":189},[409],{"type":19,"tag":78,"props":410,"children":411},{"style":91},[412],{"type":25,"value":413},"logger.addHandler(logging.StreamHandler(sys.stdout))\n",{"type":19,"tag":78,"props":415,"children":416},{"class":80,"line":218},[417],{"type":19,"tag":78,"props":418,"children":419},{"emptyLinePlaceholder":14},[420],{"type":25,"value":103},{"type":19,"tag":78,"props":422,"children":423},{"class":80,"line":231},[424],{"type":19,"tag":78,"props":425,"children":426},{"emptyLinePlaceholder":14},[427],{"type":25,"value":103},{"type":19,"tag":78,"props":429,"children":430},{"class":80,"line":239},[431,435,439,443,448,453,458,462],{"type":19,"tag":78,"props":432,"children":433},{"style":85},[434],{"type":25,"value":12},{"type":19,"tag":78,"props":436,"children":437},{"style":85},[438],{"type":25,"value":124},{"type":19,"tag":78,"props":440,"children":441},{"style":127},[442],{"type":25,"value":130},{"type":19,"tag":78,"props":444,"children":445},{"style":91},[446],{"type":25,"value":447},"(x: ",{"type":19,"tag":78,"props":449,"children":450},{"style":138},[451],{"type":25,"value":452},"int",{"type":19,"tag":78,"props":454,"children":455},{"style":91},[456],{"type":25,"value":457},") -> ",{"type":19,"tag":78,"props":459,"children":460},{"style":138},[461],{"type":25,"value":141},{"type":19,"tag":78,"props":463,"children":464},{"style":91},[465],{"type":25,"value":146},{"type":19,"tag":78,"props":467,"children":468},{"class":80,"line":247},[469,474,479,484,489],{"type":19,"tag":78,"props":470,"children":471},{"style":91},[472],{"type":25,"value":473},"    logger.info(",{"type":19,"tag":78,"props":475,"children":476},{"style":266},[477],{"type":25,"value":478},"\"start: ",{"type":19,"tag":78,"props":480,"children":481},{"style":138},[482],{"type":25,"value":483},"%d",{"type":19,"tag":78,"props":485,"children":486},{"style":266},[487],{"type":25,"value":488},"\"",{"type":19,"tag":78,"props":490,"children":491},{"style":91},[492],{"type":25,"value":493},", x)\n",{"type":19,"tag":78,"props":495,"children":496},{"class":80,"line":276},[497,501],{"type":19,"tag":78,"props":498,"children":499},{"style":85},[500],{"type":25,"value":155},{"type":19,"tag":78,"props":502,"children":503},{"style":91},[504],{"type":25,"value":505}," asyncio.sleep(random.random())\n",{"type":19,"tag":78,"props":507,"children":509},{"class":80,"line":508},14,[510,514,519,523,527],{"type":19,"tag":78,"props":511,"children":512},{"style":91},[513],{"type":25,"value":473},{"type":19,"tag":78,"props":515,"children":516},{"style":266},[517],{"type":25,"value":518},"\"end: ",{"type":19,"tag":78,"props":520,"children":521},{"style":138},[522],{"type":25,"value":483},{"type":19,"tag":78,"props":524,"children":525},{"style":266},[526],{"type":25,"value":488},{"type":19,"tag":78,"props":528,"children":529},{"style":91},[530],{"type":25,"value":493},{"type":19,"tag":78,"props":532,"children":534},{"class":80,"line":533},15,[535],{"type":19,"tag":78,"props":536,"children":537},{"emptyLinePlaceholder":14},[538],{"type":25,"value":103},{"type":19,"tag":78,"props":540,"children":542},{"class":80,"line":541},16,[543],{"type":19,"tag":78,"props":544,"children":545},{"emptyLinePlaceholder":14},[546],{"type":25,"value":103},{"type":19,"tag":78,"props":548,"children":550},{"class":80,"line":549},17,[551,555,559,563,567,571],{"type":19,"tag":78,"props":552,"children":553},{"style":85},[554],{"type":25,"value":12},{"type":19,"tag":78,"props":556,"children":557},{"style":85},[558],{"type":25,"value":124},{"type":19,"tag":78,"props":560,"children":561},{"style":127},[562],{"type":25,"value":203},{"type":19,"tag":78,"props":564,"children":565},{"style":91},[566],{"type":25,"value":135},{"type":19,"tag":78,"props":568,"children":569},{"style":138},[570],{"type":25,"value":141},{"type":19,"tag":78,"props":572,"children":573},{"style":91},[574],{"type":25,"value":146},{"type":19,"tag":78,"props":576,"children":578},{"class":80,"line":577},18,[579,583,588,593,598,603,608,613,618,623,628],{"type":19,"tag":78,"props":580,"children":581},{"style":85},[582],{"type":25,"value":155},{"type":19,"tag":78,"props":584,"children":585},{"style":91},[586],{"type":25,"value":587}," asyncio.gather(",{"type":19,"tag":78,"props":589,"children":590},{"style":85},[591],{"type":25,"value":592},"*",{"type":19,"tag":78,"props":594,"children":595},{"style":91},[596],{"type":25,"value":597},"(test(x) ",{"type":19,"tag":78,"props":599,"children":600},{"style":85},[601],{"type":25,"value":602},"for",{"type":19,"tag":78,"props":604,"children":605},{"style":91},[606],{"type":25,"value":607}," x ",{"type":19,"tag":78,"props":609,"children":610},{"style":85},[611],{"type":25,"value":612},"in",{"type":19,"tag":78,"props":614,"children":615},{"style":138},[616],{"type":25,"value":617}," range",{"type":19,"tag":78,"props":619,"children":620},{"style":91},[621],{"type":25,"value":622},"(",{"type":19,"tag":78,"props":624,"children":625},{"style":138},[626],{"type":25,"value":627},"10",{"type":19,"tag":78,"props":629,"children":630},{"style":91},[631],{"type":25,"value":632},")))\n",{"type":19,"tag":78,"props":634,"children":636},{"class":80,"line":635},19,[637],{"type":19,"tag":78,"props":638,"children":639},{"emptyLinePlaceholder":14},[640],{"type":25,"value":103},{"type":19,"tag":78,"props":642,"children":644},{"class":80,"line":643},20,[645],{"type":19,"tag":78,"props":646,"children":647},{"emptyLinePlaceholder":14},[648],{"type":25,"value":103},{"type":19,"tag":78,"props":650,"children":652},{"class":80,"line":651},21,[653,657,661,665,669],{"type":19,"tag":78,"props":654,"children":655},{"style":85},[656],{"type":25,"value":253},{"type":19,"tag":78,"props":658,"children":659},{"style":138},[660],{"type":25,"value":258},{"type":19,"tag":78,"props":662,"children":663},{"style":85},[664],{"type":25,"value":263},{"type":19,"tag":78,"props":666,"children":667},{"style":266},[668],{"type":25,"value":269},{"type":19,"tag":78,"props":670,"children":671},{"style":91},[672],{"type":25,"value":146},{"type":19,"tag":78,"props":674,"children":676},{"class":80,"line":675},22,[677],{"type":19,"tag":78,"props":678,"children":679},{"style":91},[680],{"type":25,"value":282},{"type":19,"tag":35,"props":682,"children":683},{},[684,686,692],{"type":25,"value":685},"여기서 사용된 ",{"type":19,"tag":28,"props":687,"children":689},{"className":688},[],[690],{"type":25,"value":691},"asyncio.gather",{"type":25,"value":693},"는 여러개의 코루틴을 동시에 대기할 수 있도록 한다.",{"type":19,"tag":695,"props":696,"children":698},"alert",{"type":697},"info",[699],{"type":19,"tag":35,"props":700,"children":701},{},[702],{"type":25,"value":703},"3.11부터는 TaskGroup을 사용할 것을 권장한다.",{"type":19,"tag":35,"props":705,"children":706},{},[707],{"type":25,"value":708},"위 스크립트를 실행하면, 다음과 같이 비동기로 실행되는 것을 확인할 수 있다.",{"type":19,"tag":68,"props":710,"children":714},{"className":711,"code":712,"language":713,"meta":8,"style":8},"language-bash shiki shiki-themes github-light github-dark","❯ poetry run python main2.py\nstart: 0\nstart: 1\nstart: 2\nstart: 3\nstart: 4\nstart: 5\nstart: 6\nstart: 7\nstart: 8\nstart: 9\nend: 9\nend: 8\nend: 6\nend: 3\nend: 4\nend: 0\nend: 1\nend: 2\nend: 5\nend: 7\n","bash",[715],{"type":19,"tag":28,"props":716,"children":717},{"__ignoreMap":8},[718,746,759,771,783,795,807,819,831,843,855,867,875,883,891,899,907,915,923,931,939],{"type":19,"tag":78,"props":719,"children":720},{"class":80,"line":81},[721,726,731,736,741],{"type":19,"tag":78,"props":722,"children":723},{"style":127},[724],{"type":25,"value":725},"❯",{"type":19,"tag":78,"props":727,"children":728},{"style":266},[729],{"type":25,"value":730}," poetry",{"type":19,"tag":78,"props":732,"children":733},{"style":266},[734],{"type":25,"value":735}," run",{"type":19,"tag":78,"props":737,"children":738},{"style":266},[739],{"type":25,"value":740}," python",{"type":19,"tag":78,"props":742,"children":743},{"style":266},[744],{"type":25,"value":745}," main2.py\n",{"type":19,"tag":78,"props":747,"children":748},{"class":80,"line":97},[749,754],{"type":19,"tag":78,"props":750,"children":751},{"style":127},[752],{"type":25,"value":753},"start:",{"type":19,"tag":78,"props":755,"children":756},{"style":138},[757],{"type":25,"value":758}," 0\n",{"type":19,"tag":78,"props":760,"children":761},{"class":80,"line":106},[762,766],{"type":19,"tag":78,"props":763,"children":764},{"style":127},[765],{"type":25,"value":753},{"type":19,"tag":78,"props":767,"children":768},{"style":138},[769],{"type":25,"value":770}," 1\n",{"type":19,"tag":78,"props":772,"children":773},{"class":80,"line":114},[774,778],{"type":19,"tag":78,"props":775,"children":776},{"style":127},[777],{"type":25,"value":753},{"type":19,"tag":78,"props":779,"children":780},{"style":138},[781],{"type":25,"value":782}," 2\n",{"type":19,"tag":78,"props":784,"children":785},{"class":80,"line":149},[786,790],{"type":19,"tag":78,"props":787,"children":788},{"style":127},[789],{"type":25,"value":753},{"type":19,"tag":78,"props":791,"children":792},{"style":138},[793],{"type":25,"value":794}," 3\n",{"type":19,"tag":78,"props":796,"children":797},{"class":80,"line":173},[798,802],{"type":19,"tag":78,"props":799,"children":800},{"style":127},[801],{"type":25,"value":753},{"type":19,"tag":78,"props":803,"children":804},{"style":138},[805],{"type":25,"value":806}," 4\n",{"type":19,"tag":78,"props":808,"children":809},{"class":80,"line":181},[810,814],{"type":19,"tag":78,"props":811,"children":812},{"style":127},[813],{"type":25,"value":753},{"type":19,"tag":78,"props":815,"children":816},{"style":138},[817],{"type":25,"value":818}," 5\n",{"type":19,"tag":78,"props":820,"children":821},{"class":80,"line":189},[822,826],{"type":19,"tag":78,"props":823,"children":824},{"style":127},[825],{"type":25,"value":753},{"type":19,"tag":78,"props":827,"children":828},{"style":138},[829],{"type":25,"value":830}," 6\n",{"type":19,"tag":78,"props":832,"children":833},{"class":80,"line":218},[834,838],{"type":19,"tag":78,"props":835,"children":836},{"style":127},[837],{"type":25,"value":753},{"type":19,"tag":78,"props":839,"children":840},{"style":138},[841],{"type":25,"value":842}," 7\n",{"type":19,"tag":78,"props":844,"children":845},{"class":80,"line":231},[846,850],{"type":19,"tag":78,"props":847,"children":848},{"style":127},[849],{"type":25,"value":753},{"type":19,"tag":78,"props":851,"children":852},{"style":138},[853],{"type":25,"value":854}," 8\n",{"type":19,"tag":78,"props":856,"children":857},{"class":80,"line":239},[858,862],{"type":19,"tag":78,"props":859,"children":860},{"style":127},[861],{"type":25,"value":753},{"type":19,"tag":78,"props":863,"children":864},{"style":138},[865],{"type":25,"value":866}," 9\n",{"type":19,"tag":78,"props":868,"children":869},{"class":80,"line":247},[870],{"type":19,"tag":78,"props":871,"children":872},{"style":91},[873],{"type":25,"value":874},"end: 9\n",{"type":19,"tag":78,"props":876,"children":877},{"class":80,"line":276},[878],{"type":19,"tag":78,"props":879,"children":880},{"style":91},[881],{"type":25,"value":882},"end: 8\n",{"type":19,"tag":78,"props":884,"children":885},{"class":80,"line":508},[886],{"type":19,"tag":78,"props":887,"children":888},{"style":91},[889],{"type":25,"value":890},"end: 6\n",{"type":19,"tag":78,"props":892,"children":893},{"class":80,"line":533},[894],{"type":19,"tag":78,"props":895,"children":896},{"style":91},[897],{"type":25,"value":898},"end: 3\n",{"type":19,"tag":78,"props":900,"children":901},{"class":80,"line":541},[902],{"type":19,"tag":78,"props":903,"children":904},{"style":91},[905],{"type":25,"value":906},"end: 4\n",{"type":19,"tag":78,"props":908,"children":909},{"class":80,"line":549},[910],{"type":19,"tag":78,"props":911,"children":912},{"style":91},[913],{"type":25,"value":914},"end: 0\n",{"type":19,"tag":78,"props":916,"children":917},{"class":80,"line":577},[918],{"type":19,"tag":78,"props":919,"children":920},{"style":91},[921],{"type":25,"value":922},"end: 1\n",{"type":19,"tag":78,"props":924,"children":925},{"class":80,"line":635},[926],{"type":19,"tag":78,"props":927,"children":928},{"style":91},[929],{"type":25,"value":930},"end: 2\n",{"type":19,"tag":78,"props":932,"children":933},{"class":80,"line":643},[934],{"type":19,"tag":78,"props":935,"children":936},{"style":91},[937],{"type":25,"value":938},"end: 5\n",{"type":19,"tag":78,"props":940,"children":941},{"class":80,"line":651},[942],{"type":19,"tag":78,"props":943,"children":944},{"style":91},[945],{"type":25,"value":946},"end: 7\n",{"type":19,"tag":948,"props":949,"children":951},"h3",{"id":950},"왜-asynciorun을-실행해야-하는가",[952,954,959],{"type":25,"value":953},"왜 ",{"type":19,"tag":28,"props":955,"children":957},{"className":956},[],[958],{"type":25,"value":293},{"type":25,"value":960},"을 실행해야 하는가",{"type":19,"tag":35,"props":962,"children":963},{},[964,970,972,977,979,985],{"type":19,"tag":28,"props":965,"children":967},{"className":966},[],[968],{"type":25,"value":969},"asnyc",{"type":25,"value":971},", ",{"type":19,"tag":28,"props":973,"children":975},{"className":974},[],[976],{"type":25,"value":52},{"type":25,"value":978}," 키워드를 사용한 함수가 실행되면, ",{"type":19,"tag":28,"props":980,"children":982},{"className":981},[],[983],{"type":25,"value":984},"Coroutine",{"type":25,"value":986},"(이하 코루틴)객체가 생성된다.",{"type":19,"tag":35,"props":988,"children":989},{},[990],{"type":25,"value":991},"코루틴은 생성과 동시에 실행되는 객체가 아니며,\n이벤트 루프에 예약된 상태도 아니다.",{"type":19,"tag":35,"props":993,"children":994},{},[995,997,1002],{"type":25,"value":996},"이러한 코루틴을 실행하기 위해 이벤트루프를 생성하고,\n이벤트루프에 작업을 예약하고,\n이벤트루트의 작업을 순차적으로 실행하는 일련의 과정을\n",{"type":19,"tag":28,"props":998,"children":1000},{"className":999},[],[1001],{"type":25,"value":293},{"type":25,"value":1003},"이 담당한다고 볼 수있다.",{"type":19,"tag":20,"props":1005,"children":1007},{"id":1006},"대기할-수-있는-awaitable객체",[1008,1010,1016],{"type":25,"value":1009},"대기할 수 있는 ",{"type":19,"tag":28,"props":1011,"children":1013},{"className":1012},[],[1014],{"type":25,"value":1015},"Awaitable",{"type":25,"value":1017},"객체",{"type":19,"tag":35,"props":1019,"children":1020},{},[1021,1023,1028,1030,1036],{"type":25,"value":1022},"코루틴이 ",{"type":19,"tag":28,"props":1024,"children":1026},{"className":1025},[],[1027],{"type":25,"value":52},{"type":25,"value":1029},"키워드를 사용하여 대기할 수 있는 이유는,\n코루틴에 ",{"type":19,"tag":28,"props":1031,"children":1033},{"className":1032},[],[1034],{"type":25,"value":1035},"__await__",{"type":25,"value":1037},"이라는 메소드가 정의되어 있기 때문이다.",{"type":19,"tag":35,"props":1039,"children":1040},{},[1041,1043,1048,1050,1056,1058,1063],{"type":25,"value":1042},"이러한 객체를 ",{"type":19,"tag":28,"props":1044,"children":1046},{"className":1045},[],[1047],{"type":25,"value":1015},{"type":25,"value":1049}," 객체라고 하며, ",{"type":19,"tag":28,"props":1051,"children":1053},{"className":1052},[],[1054],{"type":25,"value":1055},"typing",{"type":25,"value":1057}," 모듈에서도 확인할 수 있다.\n정말 ",{"type":19,"tag":28,"props":1059,"children":1061},{"className":1060},[],[1062],{"type":25,"value":1035},{"type":25,"value":1064},"만 있으면 가능한지 확인해보자.",{"type":19,"tag":68,"props":1066,"children":1069},{"className":70,"code":1067,"filename":1068,"language":6,"meta":8,"style":8},"import asyncio\nfrom typing import Any, Generator\n\n\nclass Await:\n    def __await__(self) -> Generator[Any, None, int]:\n        for num in range(5):\n            print(num)\n            yield None\n        return 1\n\n\nasync def main() -> None:\n    await Await()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n\n# ❯ poetry run python main3.py\n# 0\n# 1\n# 2\n# 3\n# 4\n","main3.py",[1070],{"type":19,"tag":28,"props":1071,"children":1072},{"__ignoreMap":8},[1073,1084,1106,1113,1120,1137,1172,1207,1220,1233,1245,1252,1259,1286,1298,1305,1312,1335,1342,1349,1358,1366,1374,1383,1392],{"type":19,"tag":78,"props":1074,"children":1075},{"class":80,"line":81},[1076,1080],{"type":19,"tag":78,"props":1077,"children":1078},{"style":85},[1079],{"type":25,"value":88},{"type":19,"tag":78,"props":1081,"children":1082},{"style":91},[1083],{"type":25,"value":94},{"type":19,"tag":78,"props":1085,"children":1086},{"class":80,"line":97},[1087,1092,1097,1101],{"type":19,"tag":78,"props":1088,"children":1089},{"style":85},[1090],{"type":25,"value":1091},"from",{"type":19,"tag":78,"props":1093,"children":1094},{"style":91},[1095],{"type":25,"value":1096}," typing ",{"type":19,"tag":78,"props":1098,"children":1099},{"style":85},[1100],{"type":25,"value":88},{"type":19,"tag":78,"props":1102,"children":1103},{"style":91},[1104],{"type":25,"value":1105}," Any, Generator\n",{"type":19,"tag":78,"props":1107,"children":1108},{"class":80,"line":106},[1109],{"type":19,"tag":78,"props":1110,"children":1111},{"emptyLinePlaceholder":14},[1112],{"type":25,"value":103},{"type":19,"tag":78,"props":1114,"children":1115},{"class":80,"line":114},[1116],{"type":19,"tag":78,"props":1117,"children":1118},{"emptyLinePlaceholder":14},[1119],{"type":25,"value":103},{"type":19,"tag":78,"props":1121,"children":1122},{"class":80,"line":149},[1123,1128,1133],{"type":19,"tag":78,"props":1124,"children":1125},{"style":85},[1126],{"type":25,"value":1127},"class",{"type":19,"tag":78,"props":1129,"children":1130},{"style":127},[1131],{"type":25,"value":1132}," Await",{"type":19,"tag":78,"props":1134,"children":1135},{"style":91},[1136],{"type":25,"value":146},{"type":19,"tag":78,"props":1138,"children":1139},{"class":80,"line":173},[1140,1145,1150,1155,1159,1163,1167],{"type":19,"tag":78,"props":1141,"children":1142},{"style":85},[1143],{"type":25,"value":1144},"    def",{"type":19,"tag":78,"props":1146,"children":1147},{"style":138},[1148],{"type":25,"value":1149}," __await__",{"type":19,"tag":78,"props":1151,"children":1152},{"style":91},[1153],{"type":25,"value":1154},"(self) -> Generator[Any, ",{"type":19,"tag":78,"props":1156,"children":1157},{"style":138},[1158],{"type":25,"value":141},{"type":19,"tag":78,"props":1160,"children":1161},{"style":91},[1162],{"type":25,"value":971},{"type":19,"tag":78,"props":1164,"children":1165},{"style":138},[1166],{"type":25,"value":452},{"type":19,"tag":78,"props":1168,"children":1169},{"style":91},[1170],{"type":25,"value":1171},"]:\n",{"type":19,"tag":78,"props":1173,"children":1174},{"class":80,"line":181},[1175,1180,1185,1189,1193,1197,1202],{"type":19,"tag":78,"props":1176,"children":1177},{"style":85},[1178],{"type":25,"value":1179},"        for",{"type":19,"tag":78,"props":1181,"children":1182},{"style":91},[1183],{"type":25,"value":1184}," num ",{"type":19,"tag":78,"props":1186,"children":1187},{"style":85},[1188],{"type":25,"value":612},{"type":19,"tag":78,"props":1190,"children":1191},{"style":138},[1192],{"type":25,"value":617},{"type":19,"tag":78,"props":1194,"children":1195},{"style":91},[1196],{"type":25,"value":622},{"type":19,"tag":78,"props":1198,"children":1199},{"style":138},[1200],{"type":25,"value":1201},"5",{"type":19,"tag":78,"props":1203,"children":1204},{"style":91},[1205],{"type":25,"value":1206},"):\n",{"type":19,"tag":78,"props":1208,"children":1209},{"class":80,"line":189},[1210,1215],{"type":19,"tag":78,"props":1211,"children":1212},{"style":138},[1213],{"type":25,"value":1214},"            print",{"type":19,"tag":78,"props":1216,"children":1217},{"style":91},[1218],{"type":25,"value":1219},"(num)\n",{"type":19,"tag":78,"props":1221,"children":1222},{"class":80,"line":218},[1223,1228],{"type":19,"tag":78,"props":1224,"children":1225},{"style":85},[1226],{"type":25,"value":1227},"            yield",{"type":19,"tag":78,"props":1229,"children":1230},{"style":138},[1231],{"type":25,"value":1232}," None\n",{"type":19,"tag":78,"props":1234,"children":1235},{"class":80,"line":231},[1236,1241],{"type":19,"tag":78,"props":1237,"children":1238},{"style":85},[1239],{"type":25,"value":1240},"        return",{"type":19,"tag":78,"props":1242,"children":1243},{"style":138},[1244],{"type":25,"value":770},{"type":19,"tag":78,"props":1246,"children":1247},{"class":80,"line":239},[1248],{"type":19,"tag":78,"props":1249,"children":1250},{"emptyLinePlaceholder":14},[1251],{"type":25,"value":103},{"type":19,"tag":78,"props":1253,"children":1254},{"class":80,"line":247},[1255],{"type":19,"tag":78,"props":1256,"children":1257},{"emptyLinePlaceholder":14},[1258],{"type":25,"value":103},{"type":19,"tag":78,"props":1260,"children":1261},{"class":80,"line":276},[1262,1266,1270,1274,1278,1282],{"type":19,"tag":78,"props":1263,"children":1264},{"style":85},[1265],{"type":25,"value":12},{"type":19,"tag":78,"props":1267,"children":1268},{"style":85},[1269],{"type":25,"value":124},{"type":19,"tag":78,"props":1271,"children":1272},{"style":127},[1273],{"type":25,"value":203},{"type":19,"tag":78,"props":1275,"children":1276},{"style":91},[1277],{"type":25,"value":135},{"type":19,"tag":78,"props":1279,"children":1280},{"style":138},[1281],{"type":25,"value":141},{"type":19,"tag":78,"props":1283,"children":1284},{"style":91},[1285],{"type":25,"value":146},{"type":19,"tag":78,"props":1287,"children":1288},{"class":80,"line":508},[1289,1293],{"type":19,"tag":78,"props":1290,"children":1291},{"style":85},[1292],{"type":25,"value":155},{"type":19,"tag":78,"props":1294,"children":1295},{"style":91},[1296],{"type":25,"value":1297}," Await()\n",{"type":19,"tag":78,"props":1299,"children":1300},{"class":80,"line":533},[1301],{"type":19,"tag":78,"props":1302,"children":1303},{"emptyLinePlaceholder":14},[1304],{"type":25,"value":103},{"type":19,"tag":78,"props":1306,"children":1307},{"class":80,"line":541},[1308],{"type":19,"tag":78,"props":1309,"children":1310},{"emptyLinePlaceholder":14},[1311],{"type":25,"value":103},{"type":19,"tag":78,"props":1313,"children":1314},{"class":80,"line":549},[1315,1319,1323,1327,1331],{"type":19,"tag":78,"props":1316,"children":1317},{"style":85},[1318],{"type":25,"value":253},{"type":19,"tag":78,"props":1320,"children":1321},{"style":138},[1322],{"type":25,"value":258},{"type":19,"tag":78,"props":1324,"children":1325},{"style":85},[1326],{"type":25,"value":263},{"type":19,"tag":78,"props":1328,"children":1329},{"style":266},[1330],{"type":25,"value":269},{"type":19,"tag":78,"props":1332,"children":1333},{"style":91},[1334],{"type":25,"value":146},{"type":19,"tag":78,"props":1336,"children":1337},{"class":80,"line":577},[1338],{"type":19,"tag":78,"props":1339,"children":1340},{"style":91},[1341],{"type":25,"value":282},{"type":19,"tag":78,"props":1343,"children":1344},{"class":80,"line":635},[1345],{"type":19,"tag":78,"props":1346,"children":1347},{"emptyLinePlaceholder":14},[1348],{"type":25,"value":103},{"type":19,"tag":78,"props":1350,"children":1351},{"class":80,"line":643},[1352],{"type":19,"tag":78,"props":1353,"children":1355},{"style":1354},"--shiki-default:#6A737D;--shiki-dark:#6A737D",[1356],{"type":25,"value":1357},"# ❯ poetry run python main3.py\n",{"type":19,"tag":78,"props":1359,"children":1360},{"class":80,"line":651},[1361],{"type":19,"tag":78,"props":1362,"children":1363},{"style":1354},[1364],{"type":25,"value":1365},"# 0\n",{"type":19,"tag":78,"props":1367,"children":1368},{"class":80,"line":675},[1369],{"type":19,"tag":78,"props":1370,"children":1371},{"style":1354},[1372],{"type":25,"value":1373},"# 1\n",{"type":19,"tag":78,"props":1375,"children":1377},{"class":80,"line":1376},23,[1378],{"type":19,"tag":78,"props":1379,"children":1380},{"style":1354},[1381],{"type":25,"value":1382},"# 2\n",{"type":19,"tag":78,"props":1384,"children":1386},{"class":80,"line":1385},24,[1387],{"type":19,"tag":78,"props":1388,"children":1389},{"style":1354},[1390],{"type":25,"value":1391},"# 3\n",{"type":19,"tag":78,"props":1393,"children":1395},{"class":80,"line":1394},25,[1396],{"type":19,"tag":78,"props":1397,"children":1398},{"style":1354},[1399],{"type":25,"value":1400},"# 4\n",{"type":19,"tag":1402,"props":1403,"children":1404},"alert-outer",{"type":697},[1405],{"type":19,"tag":35,"props":1406,"children":1407},{},[1408,1414,1416,1421,1423,1429,1431,1436],{"type":19,"tag":28,"props":1409,"children":1411},{"className":1410},[],[1412],{"type":25,"value":1413},"Await",{"type":25,"value":1415},"객체를 곧바로 ",{"type":19,"tag":28,"props":1417,"children":1419},{"className":1418},[],[1420],{"type":25,"value":293},{"type":25,"value":1422},"에서 사용하지 않고,\n",{"type":19,"tag":28,"props":1424,"children":1426},{"className":1425},[],[1427],{"type":25,"value":1428},"main",{"type":25,"value":1430},"함수에서 생성하여 사용하는 이유는,\n",{"type":19,"tag":28,"props":1432,"children":1434},{"className":1433},[],[1435],{"type":25,"value":293},{"type":25,"value":1437},"에서 코루틴이 아니면 에러를 발생시키기 때문이다.",{"type":19,"tag":35,"props":1439,"children":1440},{},[1441,1443,1448,1449,1454],{"type":25,"value":1442},"즉, ",{"type":19,"tag":28,"props":1444,"children":1446},{"className":1445},[],[1447],{"type":25,"value":12},{"type":25,"value":971},{"type":19,"tag":28,"props":1450,"children":1452},{"className":1451},[],[1453],{"type":25,"value":52},{"type":25,"value":1455},"은 사실 제너레이터를 활용한\n컨텍스트 스위칭에 대한 문법 설탕이라는 것을 알 수 있다.",{"type":19,"tag":35,"props":1457,"children":1458},{},[1459,1461,1467],{"type":25,"value":1460},"이러한 문법 설탕이 추가되기 전까지는,\n제너레이터 문법인 ",{"type":19,"tag":28,"props":1462,"children":1464},{"className":1463},[],[1465],{"type":25,"value":1466},"yield from",{"type":25,"value":1468},"을 사용했다.",{"type":19,"tag":35,"props":1470,"children":1471},{},[1472,1474,1479,1481,1487,1488,1494,1496,1501,1502,1507],{"type":25,"value":1473},"물론 이러한 사실은 알면 좋지만 별로 중요하지 않다.\n대부분의 경우 ",{"type":19,"tag":28,"props":1475,"children":1477},{"className":1476},[],[1478],{"type":25,"value":1035},{"type":25,"value":1480},"를 직접 정의하기는 커녕\n",{"type":19,"tag":28,"props":1482,"children":1484},{"className":1483},[],[1485],{"type":25,"value":1486},"Future",{"type":25,"value":46},{"type":19,"tag":28,"props":1489,"children":1491},{"className":1490},[],[1492],{"type":25,"value":1493},"Task",{"type":25,"value":1495},"도 구경하기 어려우며,\n",{"type":19,"tag":28,"props":1497,"children":1499},{"className":1498},[],[1500],{"type":25,"value":12},{"type":25,"value":46},{"type":19,"tag":28,"props":1503,"children":1505},{"className":1504},[],[1506],{"type":25,"value":52},{"type":25,"value":1508},"을 사용한 코루틴만 사용할 것이다.",{"type":19,"tag":948,"props":1510,"children":1512},{"id":1511},"콜백-형태의-future",[1513,1515],{"type":25,"value":1514},"콜백 형태의 ",{"type":19,"tag":28,"props":1516,"children":1518},{"className":1517},[],[1519],{"type":25,"value":1486},{"type":19,"tag":35,"props":1521,"children":1522},{},[1523,1528,1530,1535,1537,1543,1544,1549],{"type":19,"tag":28,"props":1524,"children":1526},{"className":1525},[],[1527],{"type":25,"value":33},{"type":25,"value":1529},"의 ",{"type":19,"tag":28,"props":1531,"children":1533},{"className":1532},[],[1534],{"type":25,"value":1486},{"type":25,"value":1536},"는 ",{"type":19,"tag":28,"props":1538,"children":1540},{"className":1539},[],[1541],{"type":25,"value":1542},"concurrent.futures",{"type":25,"value":1529},{"type":19,"tag":28,"props":1545,"children":1547},{"className":1546},[],[1548],{"type":25,"value":1486},{"type":25,"value":1550},"를 본따 만들어졌다.",{"type":19,"tag":35,"props":1552,"children":1553},{},[1554,1559,1560,1565],{"type":19,"tag":28,"props":1555,"children":1557},{"className":1556},[],[1558],{"type":25,"value":1542},{"type":25,"value":1529},{"type":19,"tag":28,"props":1561,"children":1563},{"className":1562},[],[1564],{"type":25,"value":1486},{"type":25,"value":1566},"는 쓰레드를 제어하기 위해 만들어졌고,\n멀티쓰레드 환경의 비동기 제어가 싱글쓰레드 환경으로 확장된 것으로 볼 수도 있다.",{"type":19,"tag":35,"props":1568,"children":1569},{},[1570,1572,1577],{"type":25,"value":1571},"앞서 말했듯이, 대부분의 경우 ",{"type":19,"tag":28,"props":1573,"children":1575},{"className":1574},[],[1576],{"type":25,"value":1486},{"type":25,"value":1578},"에 대해 알 필요가 없고,\n구버전 파이썬을 사용한다면 모를까, 이제는 사용할 일도 없는 객체다.",{"type":19,"tag":948,"props":1580,"children":1582},{"id":1581},"future를-상속받는-task",[1583,1588,1590],{"type":19,"tag":28,"props":1584,"children":1586},{"className":1585},[],[1587],{"type":25,"value":1486},{"type":25,"value":1589},"를 상속받는 ",{"type":19,"tag":28,"props":1591,"children":1593},{"className":1592},[],[1594],{"type":25,"value":1493},{"type":19,"tag":35,"props":1596,"children":1597},{},[1598,1603,1604,1609,1611,1616,1618,1623,1624,1630,1631,1637],{"type":19,"tag":28,"props":1599,"children":1601},{"className":1600},[],[1602],{"type":25,"value":1493},{"type":25,"value":1536},{"type":19,"tag":28,"props":1605,"children":1607},{"className":1606},[],[1608],{"type":25,"value":1486},{"type":25,"value":1610},"를 상속받아 구현한 ",{"type":19,"tag":28,"props":1612,"children":1614},{"className":1613},[],[1615],{"type":25,"value":1015},{"type":25,"value":1617},"한 객체다.\n",{"type":19,"tag":28,"props":1619,"children":1621},{"className":1620},[],[1622],{"type":25,"value":1493},{"type":25,"value":1536},{"type":19,"tag":28,"props":1625,"children":1627},{"className":1626},[],[1628],{"type":25,"value":1629},"js",{"type":25,"value":1529},{"type":19,"tag":28,"props":1632,"children":1634},{"className":1633},[],[1635],{"type":25,"value":1636},"Promise",{"type":25,"value":1638},"처럼, 생성됐다면 이미 이벤트루프에 예약된 상태다.",{"type":19,"tag":695,"props":1640,"children":1641},{"type":697},[1642],{"type":19,"tag":35,"props":1643,"children":1644},{},[1645,1650],{"type":19,"tag":28,"props":1646,"children":1648},{"className":1647},[],[1649],{"type":25,"value":1486},{"type":25,"value":1651},"는 생성했지만, 이벤트루프에 예약되어 있지 않을 수 있다.",{"type":19,"tag":35,"props":1653,"children":1654},{},[1655],{"type":25,"value":1656},"따라서 다음과 같은 코드는, 정상적으로 실행된다.",{"type":19,"tag":68,"props":1658,"children":1661},{"className":70,"code":1659,"filename":1660,"language":6,"meta":8,"style":8},"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -> None:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n\n\nasync def main() -> None:\n    coro = test()\n    _ = asyncio.create_task(coro)\n    logger.info(\"before sleep\")\n    await asyncio.sleep(2)\n    logger.info(\"after sleep\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n#  ❯ poetry run python main4.py\n#  before sleep\n#  start\n#  done!\n#  after sleep\n","main4.py",[1662],{"type":19,"tag":28,"props":1663,"children":1664},{"__ignoreMap":8},[1665,1676,1687,1698,1705,1720,1735,1742,1749,1756,1783,1799,1818,1834,1841,1848,1875,1891,1908,1924,1944,1960,1967,1974,1997,2004,2013,2022,2031,2040],{"type":19,"tag":78,"props":1666,"children":1667},{"class":80,"line":81},[1668,1672],{"type":19,"tag":78,"props":1669,"children":1670},{"style":85},[1671],{"type":25,"value":88},{"type":19,"tag":78,"props":1673,"children":1674},{"style":91},[1675],{"type":25,"value":94},{"type":19,"tag":78,"props":1677,"children":1678},{"class":80,"line":97},[1679,1683],{"type":19,"tag":78,"props":1680,"children":1681},{"style":85},[1682],{"type":25,"value":88},{"type":19,"tag":78,"props":1684,"children":1685},{"style":91},[1686],{"type":25,"value":339},{"type":19,"tag":78,"props":1688,"children":1689},{"class":80,"line":106},[1690,1694],{"type":19,"tag":78,"props":1691,"children":1692},{"style":85},[1693],{"type":25,"value":88},{"type":19,"tag":78,"props":1695,"children":1696},{"style":91},[1697],{"type":25,"value":363},{"type":19,"tag":78,"props":1699,"children":1700},{"class":80,"line":114},[1701],{"type":19,"tag":78,"props":1702,"children":1703},{"emptyLinePlaceholder":14},[1704],{"type":25,"value":103},{"type":19,"tag":78,"props":1706,"children":1707},{"class":80,"line":149},[1708,1712,1716],{"type":19,"tag":78,"props":1709,"children":1710},{"style":91},[1711],{"type":25,"value":378},{"type":19,"tag":78,"props":1713,"children":1714},{"style":85},[1715],{"type":25,"value":383},{"type":19,"tag":78,"props":1717,"children":1718},{"style":91},[1719],{"type":25,"value":388},{"type":19,"tag":78,"props":1721,"children":1722},{"class":80,"line":173},[1723,1727,1731],{"type":19,"tag":78,"props":1724,"children":1725},{"style":91},[1726],{"type":25,"value":396},{"type":19,"tag":78,"props":1728,"children":1729},{"style":138},[1730],{"type":25,"value":401},{"type":19,"tag":78,"props":1732,"children":1733},{"style":91},[1734],{"type":25,"value":170},{"type":19,"tag":78,"props":1736,"children":1737},{"class":80,"line":181},[1738],{"type":19,"tag":78,"props":1739,"children":1740},{"style":91},[1741],{"type":25,"value":413},{"type":19,"tag":78,"props":1743,"children":1744},{"class":80,"line":189},[1745],{"type":19,"tag":78,"props":1746,"children":1747},{"emptyLinePlaceholder":14},[1748],{"type":25,"value":103},{"type":19,"tag":78,"props":1750,"children":1751},{"class":80,"line":218},[1752],{"type":19,"tag":78,"props":1753,"children":1754},{"emptyLinePlaceholder":14},[1755],{"type":25,"value":103},{"type":19,"tag":78,"props":1757,"children":1758},{"class":80,"line":231},[1759,1763,1767,1771,1775,1779],{"type":19,"tag":78,"props":1760,"children":1761},{"style":85},[1762],{"type":25,"value":12},{"type":19,"tag":78,"props":1764,"children":1765},{"style":85},[1766],{"type":25,"value":124},{"type":19,"tag":78,"props":1768,"children":1769},{"style":127},[1770],{"type":25,"value":130},{"type":19,"tag":78,"props":1772,"children":1773},{"style":91},[1774],{"type":25,"value":135},{"type":19,"tag":78,"props":1776,"children":1777},{"style":138},[1778],{"type":25,"value":141},{"type":19,"tag":78,"props":1780,"children":1781},{"style":91},[1782],{"type":25,"value":146},{"type":19,"tag":78,"props":1784,"children":1785},{"class":80,"line":239},[1786,1790,1795],{"type":19,"tag":78,"props":1787,"children":1788},{"style":91},[1789],{"type":25,"value":473},{"type":19,"tag":78,"props":1791,"children":1792},{"style":266},[1793],{"type":25,"value":1794},"\"start\"",{"type":19,"tag":78,"props":1796,"children":1797},{"style":91},[1798],{"type":25,"value":170},{"type":19,"tag":78,"props":1800,"children":1801},{"class":80,"line":247},[1802,1806,1810,1814],{"type":19,"tag":78,"props":1803,"children":1804},{"style":85},[1805],{"type":25,"value":155},{"type":19,"tag":78,"props":1807,"children":1808},{"style":91},[1809],{"type":25,"value":160},{"type":19,"tag":78,"props":1811,"children":1812},{"style":138},[1813],{"type":25,"value":165},{"type":19,"tag":78,"props":1815,"children":1816},{"style":91},[1817],{"type":25,"value":170},{"type":19,"tag":78,"props":1819,"children":1820},{"class":80,"line":276},[1821,1825,1830],{"type":19,"tag":78,"props":1822,"children":1823},{"style":91},[1824],{"type":25,"value":473},{"type":19,"tag":78,"props":1826,"children":1827},{"style":266},[1828],{"type":25,"value":1829},"\"done!\"",{"type":19,"tag":78,"props":1831,"children":1832},{"style":91},[1833],{"type":25,"value":170},{"type":19,"tag":78,"props":1835,"children":1836},{"class":80,"line":508},[1837],{"type":19,"tag":78,"props":1838,"children":1839},{"emptyLinePlaceholder":14},[1840],{"type":25,"value":103},{"type":19,"tag":78,"props":1842,"children":1843},{"class":80,"line":533},[1844],{"type":19,"tag":78,"props":1845,"children":1846},{"emptyLinePlaceholder":14},[1847],{"type":25,"value":103},{"type":19,"tag":78,"props":1849,"children":1850},{"class":80,"line":541},[1851,1855,1859,1863,1867,1871],{"type":19,"tag":78,"props":1852,"children":1853},{"style":85},[1854],{"type":25,"value":12},{"type":19,"tag":78,"props":1856,"children":1857},{"style":85},[1858],{"type":25,"value":124},{"type":19,"tag":78,"props":1860,"children":1861},{"style":127},[1862],{"type":25,"value":203},{"type":19,"tag":78,"props":1864,"children":1865},{"style":91},[1866],{"type":25,"value":135},{"type":19,"tag":78,"props":1868,"children":1869},{"style":138},[1870],{"type":25,"value":141},{"type":19,"tag":78,"props":1872,"children":1873},{"style":91},[1874],{"type":25,"value":146},{"type":19,"tag":78,"props":1876,"children":1877},{"class":80,"line":549},[1878,1883,1887],{"type":19,"tag":78,"props":1879,"children":1880},{"style":91},[1881],{"type":25,"value":1882},"    coro ",{"type":19,"tag":78,"props":1884,"children":1885},{"style":85},[1886],{"type":25,"value":383},{"type":19,"tag":78,"props":1888,"children":1889},{"style":91},[1890],{"type":25,"value":228},{"type":19,"tag":78,"props":1892,"children":1893},{"class":80,"line":577},[1894,1899,1903],{"type":19,"tag":78,"props":1895,"children":1896},{"style":91},[1897],{"type":25,"value":1898},"    _ ",{"type":19,"tag":78,"props":1900,"children":1901},{"style":85},[1902],{"type":25,"value":383},{"type":19,"tag":78,"props":1904,"children":1905},{"style":91},[1906],{"type":25,"value":1907}," asyncio.create_task(coro)\n",{"type":19,"tag":78,"props":1909,"children":1910},{"class":80,"line":635},[1911,1915,1920],{"type":19,"tag":78,"props":1912,"children":1913},{"style":91},[1914],{"type":25,"value":473},{"type":19,"tag":78,"props":1916,"children":1917},{"style":266},[1918],{"type":25,"value":1919},"\"before sleep\"",{"type":19,"tag":78,"props":1921,"children":1922},{"style":91},[1923],{"type":25,"value":170},{"type":19,"tag":78,"props":1925,"children":1926},{"class":80,"line":643},[1927,1931,1935,1940],{"type":19,"tag":78,"props":1928,"children":1929},{"style":85},[1930],{"type":25,"value":155},{"type":19,"tag":78,"props":1932,"children":1933},{"style":91},[1934],{"type":25,"value":160},{"type":19,"tag":78,"props":1936,"children":1937},{"style":138},[1938],{"type":25,"value":1939},"2",{"type":19,"tag":78,"props":1941,"children":1942},{"style":91},[1943],{"type":25,"value":170},{"type":19,"tag":78,"props":1945,"children":1946},{"class":80,"line":651},[1947,1951,1956],{"type":19,"tag":78,"props":1948,"children":1949},{"style":91},[1950],{"type":25,"value":473},{"type":19,"tag":78,"props":1952,"children":1953},{"style":266},[1954],{"type":25,"value":1955},"\"after sleep\"",{"type":19,"tag":78,"props":1957,"children":1958},{"style":91},[1959],{"type":25,"value":170},{"type":19,"tag":78,"props":1961,"children":1962},{"class":80,"line":675},[1963],{"type":19,"tag":78,"props":1964,"children":1965},{"emptyLinePlaceholder":14},[1966],{"type":25,"value":103},{"type":19,"tag":78,"props":1968,"children":1969},{"class":80,"line":1376},[1970],{"type":19,"tag":78,"props":1971,"children":1972},{"emptyLinePlaceholder":14},[1973],{"type":25,"value":103},{"type":19,"tag":78,"props":1975,"children":1976},{"class":80,"line":1385},[1977,1981,1985,1989,1993],{"type":19,"tag":78,"props":1978,"children":1979},{"style":85},[1980],{"type":25,"value":253},{"type":19,"tag":78,"props":1982,"children":1983},{"style":138},[1984],{"type":25,"value":258},{"type":19,"tag":78,"props":1986,"children":1987},{"style":85},[1988],{"type":25,"value":263},{"type":19,"tag":78,"props":1990,"children":1991},{"style":266},[1992],{"type":25,"value":269},{"type":19,"tag":78,"props":1994,"children":1995},{"style":91},[1996],{"type":25,"value":146},{"type":19,"tag":78,"props":1998,"children":1999},{"class":80,"line":1394},[2000],{"type":19,"tag":78,"props":2001,"children":2002},{"style":91},[2003],{"type":25,"value":282},{"type":19,"tag":78,"props":2005,"children":2007},{"class":80,"line":2006},26,[2008],{"type":19,"tag":78,"props":2009,"children":2010},{"style":1354},[2011],{"type":25,"value":2012},"#  ❯ poetry run python main4.py\n",{"type":19,"tag":78,"props":2014,"children":2016},{"class":80,"line":2015},27,[2017],{"type":19,"tag":78,"props":2018,"children":2019},{"style":1354},[2020],{"type":25,"value":2021},"#  before sleep\n",{"type":19,"tag":78,"props":2023,"children":2025},{"class":80,"line":2024},28,[2026],{"type":19,"tag":78,"props":2027,"children":2028},{"style":1354},[2029],{"type":25,"value":2030},"#  start\n",{"type":19,"tag":78,"props":2032,"children":2034},{"class":80,"line":2033},29,[2035],{"type":19,"tag":78,"props":2036,"children":2037},{"style":1354},[2038],{"type":25,"value":2039},"#  done!\n",{"type":19,"tag":78,"props":2041,"children":2043},{"class":80,"line":2042},30,[2044],{"type":19,"tag":78,"props":2045,"children":2046},{"style":1354},[2047],{"type":25,"value":2048},"#  after sleep\n",{"type":19,"tag":35,"props":2050,"children":2051},{},[2052,2057,2059,2064,2065,2070,2072,2078,2080,2085,2087,2093],{"type":19,"tag":28,"props":2053,"children":2055},{"className":2054},[],[2056],{"type":25,"value":52},{"type":25,"value":2058}," 또는 ",{"type":19,"tag":28,"props":2060,"children":2062},{"className":2061},[],[2063],{"type":25,"value":1466},{"type":25,"value":2058},{"type":19,"tag":28,"props":2066,"children":2068},{"className":2067},[],[2069],{"type":25,"value":1035},{"type":25,"value":2071},"메소드를 직업 호출하지 않았지만,\n",{"type":19,"tag":28,"props":2073,"children":2075},{"className":2074},[],[2076],{"type":25,"value":2077},"test",{"type":25,"value":2079},"로 정의된 비동기 함수는 정상적으로 실행됐다.\n왜냐하면 신규 ",{"type":19,"tag":28,"props":2081,"children":2083},{"className":2082},[],[2084],{"type":25,"value":1493},{"type":25,"value":2086},"객체를 생성했고,\n이후 ",{"type":19,"tag":28,"props":2088,"children":2090},{"className":2089},[],[2091],{"type":25,"value":2092},"await asyncio.sleep(2)",{"type":25,"value":2094},"를 통해 콘텍스트 스위칭을 유발했기 때문이다.",{"type":19,"tag":35,"props":2096,"children":2097},{},[2098],{"type":25,"value":2099},"정리하자면 다음과 같다.",{"type":19,"tag":2101,"props":2102,"children":2103},"ol",{},[2104,2115,2128,2154,2173,2183,2195],{"type":19,"tag":2105,"props":2106,"children":2107},"li",{},[2108,2113],{"type":19,"tag":28,"props":2109,"children":2111},{"className":2110},[],[2112],{"type":25,"value":2077},{"type":25,"value":2114},"함수를 실행하여 코루틴을 생성한다.",{"type":19,"tag":2105,"props":2116,"children":2117},{},[2118,2120,2126],{"type":25,"value":2119},"생성한 코루틴을 ",{"type":19,"tag":28,"props":2121,"children":2123},{"className":2122},[],[2124],{"type":25,"value":2125},"asyncio.create_task",{"type":25,"value":2127},"함수를 사용하여, 이벤트루프에 예약한다.",{"type":19,"tag":2105,"props":2129,"children":2130},{},[2131,2137,2139,2144,2146,2152],{"type":19,"tag":28,"props":2132,"children":2134},{"className":2133},[],[2135],{"type":25,"value":2136},"create_task",{"type":25,"value":2138},"함수가 ",{"type":19,"tag":28,"props":2140,"children":2142},{"className":2141},[],[2143],{"type":25,"value":1493},{"type":25,"value":2145},"객체를 반환한다.(의도적으로 ",{"type":19,"tag":28,"props":2147,"children":2149},{"className":2148},[],[2150],{"type":25,"value":2151},"_",{"type":25,"value":2153},"를 사용하여 무시하였다.)",{"type":19,"tag":2105,"props":2155,"children":2156},{},[2157,2159,2164,2166,2171],{"type":25,"value":2158},"아직 ",{"type":19,"tag":28,"props":2160,"children":2162},{"className":2161},[],[2163],{"type":25,"value":1428},{"type":25,"value":2165},"함수가 콘텍스트를 점유중이므로, 앞서 생성한 ",{"type":19,"tag":28,"props":2167,"children":2169},{"className":2168},[],[2170],{"type":25,"value":1493},{"type":25,"value":2172},"는 실행되지 않았다.",{"type":19,"tag":2105,"props":2174,"children":2175},{},[2176,2181],{"type":19,"tag":28,"props":2177,"children":2179},{"className":2178},[],[2180],{"type":25,"value":2092},{"type":25,"value":2182},"를 통해, 콘텍스트 점유를 해제한다.",{"type":19,"tag":2105,"props":2184,"children":2185},{},[2186,2188,2193],{"type":25,"value":2187},"앞서 생성한 ",{"type":19,"tag":28,"props":2189,"children":2191},{"className":2190},[],[2192],{"type":25,"value":1493},{"type":25,"value":2194},"로 콘텍스트가 변경된다.",{"type":19,"tag":2105,"props":2196,"children":2197},{},[2198],{"type":25,"value":2199},"이하 생략",{"type":19,"tag":35,"props":2201,"children":2202},{},[2203,2204,2209,2211,2216],{"type":25,"value":1442},{"type":19,"tag":28,"props":2205,"children":2207},{"className":2206},[],[2208],{"type":25,"value":52},{"type":25,"value":2210},"이 콘텍스트 스위칭에 대한 문법 설탕이자,\n동시에 ",{"type":19,"tag":28,"props":2212,"children":2214},{"className":2213},[],[2215],{"type":25,"value":1493},{"type":25,"value":2217},"를 생성하는 문법 설탕인 것을 알 수 있다.",{"type":19,"tag":35,"props":2219,"children":2220},{},[2221],{"type":25,"value":2222},"여기서 한가지 궁금한 점이 생긴다.",{"type":19,"tag":2101,"props":2224,"children":2225},{},[2226,2238,2250],{"type":19,"tag":2105,"props":2227,"children":2228},{},[2229,2231,2236],{"type":25,"value":2230},"한번 생성한 코루틴은, 한번만 ",{"type":19,"tag":28,"props":2232,"children":2234},{"className":2233},[],[2235],{"type":25,"value":52},{"type":25,"value":2237},"으로 대기할 수 있다.",{"type":19,"tag":2105,"props":2239,"children":2240},{},[2241,2243,2248],{"type":25,"value":2242},"한번 생성한 코루틴은, ",{"type":19,"tag":28,"props":2244,"children":2246},{"className":2245},[],[2247],{"type":25,"value":1493},{"type":25,"value":2249},"를 생성할 수 있다.",{"type":19,"tag":2105,"props":2251,"children":2252},{},[2253,2258,2259,2264,2266,2271],{"type":19,"tag":28,"props":2254,"children":2256},{"className":2255},[],[2257],{"type":25,"value":1493},{"type":25,"value":1536},{"type":19,"tag":28,"props":2260,"children":2262},{"className":2261},[],[2263],{"type":25,"value":1015},{"type":25,"value":2265},"이므로 ",{"type":19,"tag":28,"props":2267,"children":2269},{"className":2268},[],[2270],{"type":25,"value":52},{"type":25,"value":2237},{"type":19,"tag":35,"props":2273,"children":2274},{},[2275,2277,2282,2284,2290,2291,2296],{"type":25,"value":2276},"이전의 ",{"type":19,"tag":28,"props":2278,"children":2280},{"className":2279},[],[2281],{"type":25,"value":1660},{"type":25,"value":2283}," 스크립트에서 코루틴 ",{"type":19,"tag":28,"props":2285,"children":2287},{"className":2286},[],[2288],{"type":25,"value":2289},"coro",{"type":25,"value":1536},{"type":19,"tag":28,"props":2292,"children":2294},{"className":2293},[],[2295],{"type":25,"value":2136},{"type":25,"value":2297},"함수를 통해\n이미 실행된 상태다.",{"type":19,"tag":35,"props":2299,"children":2300},{},[2301,2303,2308],{"type":25,"value":2302},"이후 생성한 ",{"type":19,"tag":28,"props":2304,"children":2306},{"className":2305},[],[2307],{"type":25,"value":1493},{"type":25,"value":2309},"를 대기하는 것이 가능할까?",{"type":19,"tag":68,"props":2311,"children":2314},{"className":70,"code":2312,"filename":2313,"language":6,"meta":8,"style":8},"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -> int:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n    return 1\n\n\nasync def main() -> None:\n    coro = test()\n    task = asyncio.create_task(coro)\n\n    logger.info(\"before sleep\")\n\n    queue = asyncio.Queue(1)\n    task.add_done_callback(lambda task: queue.put_nowait(task.result()))\n\n    value = await task\n\n    logger.info(\"after sleep\")\n\n    result = task.result()\n    queue_value = await queue.get()\n    logger.info(\"value=%r, result=%r, queue_value=%r\", value, result, queue_value)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main5.py\n# before sleep\n# start\n# done!\n# after sleep\n# value=1, result=1, queue_value=1\n","main5.py",[2315],{"type":19,"tag":28,"props":2316,"children":2317},{"__ignoreMap":8},[2318,2329,2340,2351,2358,2373,2388,2395,2402,2409,2436,2451,2470,2485,2497,2504,2511,2538,2553,2569,2576,2591,2598,2623,2641,2648,2670,2677,2692,2699,2716,2738,2783,2791,2799,2823,2831,2840,2849,2858,2867,2876],{"type":19,"tag":78,"props":2319,"children":2320},{"class":80,"line":81},[2321,2325],{"type":19,"tag":78,"props":2322,"children":2323},{"style":85},[2324],{"type":25,"value":88},{"type":19,"tag":78,"props":2326,"children":2327},{"style":91},[2328],{"type":25,"value":94},{"type":19,"tag":78,"props":2330,"children":2331},{"class":80,"line":97},[2332,2336],{"type":19,"tag":78,"props":2333,"children":2334},{"style":85},[2335],{"type":25,"value":88},{"type":19,"tag":78,"props":2337,"children":2338},{"style":91},[2339],{"type":25,"value":339},{"type":19,"tag":78,"props":2341,"children":2342},{"class":80,"line":106},[2343,2347],{"type":19,"tag":78,"props":2344,"children":2345},{"style":85},[2346],{"type":25,"value":88},{"type":19,"tag":78,"props":2348,"children":2349},{"style":91},[2350],{"type":25,"value":363},{"type":19,"tag":78,"props":2352,"children":2353},{"class":80,"line":114},[2354],{"type":19,"tag":78,"props":2355,"children":2356},{"emptyLinePlaceholder":14},[2357],{"type":25,"value":103},{"type":19,"tag":78,"props":2359,"children":2360},{"class":80,"line":149},[2361,2365,2369],{"type":19,"tag":78,"props":2362,"children":2363},{"style":91},[2364],{"type":25,"value":378},{"type":19,"tag":78,"props":2366,"children":2367},{"style":85},[2368],{"type":25,"value":383},{"type":19,"tag":78,"props":2370,"children":2371},{"style":91},[2372],{"type":25,"value":388},{"type":19,"tag":78,"props":2374,"children":2375},{"class":80,"line":173},[2376,2380,2384],{"type":19,"tag":78,"props":2377,"children":2378},{"style":91},[2379],{"type":25,"value":396},{"type":19,"tag":78,"props":2381,"children":2382},{"style":138},[2383],{"type":25,"value":401},{"type":19,"tag":78,"props":2385,"children":2386},{"style":91},[2387],{"type":25,"value":170},{"type":19,"tag":78,"props":2389,"children":2390},{"class":80,"line":181},[2391],{"type":19,"tag":78,"props":2392,"children":2393},{"style":91},[2394],{"type":25,"value":413},{"type":19,"tag":78,"props":2396,"children":2397},{"class":80,"line":189},[2398],{"type":19,"tag":78,"props":2399,"children":2400},{"emptyLinePlaceholder":14},[2401],{"type":25,"value":103},{"type":19,"tag":78,"props":2403,"children":2404},{"class":80,"line":218},[2405],{"type":19,"tag":78,"props":2406,"children":2407},{"emptyLinePlaceholder":14},[2408],{"type":25,"value":103},{"type":19,"tag":78,"props":2410,"children":2411},{"class":80,"line":231},[2412,2416,2420,2424,2428,2432],{"type":19,"tag":78,"props":2413,"children":2414},{"style":85},[2415],{"type":25,"value":12},{"type":19,"tag":78,"props":2417,"children":2418},{"style":85},[2419],{"type":25,"value":124},{"type":19,"tag":78,"props":2421,"children":2422},{"style":127},[2423],{"type":25,"value":130},{"type":19,"tag":78,"props":2425,"children":2426},{"style":91},[2427],{"type":25,"value":135},{"type":19,"tag":78,"props":2429,"children":2430},{"style":138},[2431],{"type":25,"value":452},{"type":19,"tag":78,"props":2433,"children":2434},{"style":91},[2435],{"type":25,"value":146},{"type":19,"tag":78,"props":2437,"children":2438},{"class":80,"line":239},[2439,2443,2447],{"type":19,"tag":78,"props":2440,"children":2441},{"style":91},[2442],{"type":25,"value":473},{"type":19,"tag":78,"props":2444,"children":2445},{"style":266},[2446],{"type":25,"value":1794},{"type":19,"tag":78,"props":2448,"children":2449},{"style":91},[2450],{"type":25,"value":170},{"type":19,"tag":78,"props":2452,"children":2453},{"class":80,"line":247},[2454,2458,2462,2466],{"type":19,"tag":78,"props":2455,"children":2456},{"style":85},[2457],{"type":25,"value":155},{"type":19,"tag":78,"props":2459,"children":2460},{"style":91},[2461],{"type":25,"value":160},{"type":19,"tag":78,"props":2463,"children":2464},{"style":138},[2465],{"type":25,"value":165},{"type":19,"tag":78,"props":2467,"children":2468},{"style":91},[2469],{"type":25,"value":170},{"type":19,"tag":78,"props":2471,"children":2472},{"class":80,"line":276},[2473,2477,2481],{"type":19,"tag":78,"props":2474,"children":2475},{"style":91},[2476],{"type":25,"value":473},{"type":19,"tag":78,"props":2478,"children":2479},{"style":266},[2480],{"type":25,"value":1829},{"type":19,"tag":78,"props":2482,"children":2483},{"style":91},[2484],{"type":25,"value":170},{"type":19,"tag":78,"props":2486,"children":2487},{"class":80,"line":508},[2488,2493],{"type":19,"tag":78,"props":2489,"children":2490},{"style":85},[2491],{"type":25,"value":2492},"    return",{"type":19,"tag":78,"props":2494,"children":2495},{"style":138},[2496],{"type":25,"value":770},{"type":19,"tag":78,"props":2498,"children":2499},{"class":80,"line":533},[2500],{"type":19,"tag":78,"props":2501,"children":2502},{"emptyLinePlaceholder":14},[2503],{"type":25,"value":103},{"type":19,"tag":78,"props":2505,"children":2506},{"class":80,"line":541},[2507],{"type":19,"tag":78,"props":2508,"children":2509},{"emptyLinePlaceholder":14},[2510],{"type":25,"value":103},{"type":19,"tag":78,"props":2512,"children":2513},{"class":80,"line":549},[2514,2518,2522,2526,2530,2534],{"type":19,"tag":78,"props":2515,"children":2516},{"style":85},[2517],{"type":25,"value":12},{"type":19,"tag":78,"props":2519,"children":2520},{"style":85},[2521],{"type":25,"value":124},{"type":19,"tag":78,"props":2523,"children":2524},{"style":127},[2525],{"type":25,"value":203},{"type":19,"tag":78,"props":2527,"children":2528},{"style":91},[2529],{"type":25,"value":135},{"type":19,"tag":78,"props":2531,"children":2532},{"style":138},[2533],{"type":25,"value":141},{"type":19,"tag":78,"props":2535,"children":2536},{"style":91},[2537],{"type":25,"value":146},{"type":19,"tag":78,"props":2539,"children":2540},{"class":80,"line":577},[2541,2545,2549],{"type":19,"tag":78,"props":2542,"children":2543},{"style":91},[2544],{"type":25,"value":1882},{"type":19,"tag":78,"props":2546,"children":2547},{"style":85},[2548],{"type":25,"value":383},{"type":19,"tag":78,"props":2550,"children":2551},{"style":91},[2552],{"type":25,"value":228},{"type":19,"tag":78,"props":2554,"children":2555},{"class":80,"line":635},[2556,2561,2565],{"type":19,"tag":78,"props":2557,"children":2558},{"style":91},[2559],{"type":25,"value":2560},"    task ",{"type":19,"tag":78,"props":2562,"children":2563},{"style":85},[2564],{"type":25,"value":383},{"type":19,"tag":78,"props":2566,"children":2567},{"style":91},[2568],{"type":25,"value":1907},{"type":19,"tag":78,"props":2570,"children":2571},{"class":80,"line":643},[2572],{"type":19,"tag":78,"props":2573,"children":2574},{"emptyLinePlaceholder":14},[2575],{"type":25,"value":103},{"type":19,"tag":78,"props":2577,"children":2578},{"class":80,"line":651},[2579,2583,2587],{"type":19,"tag":78,"props":2580,"children":2581},{"style":91},[2582],{"type":25,"value":473},{"type":19,"tag":78,"props":2584,"children":2585},{"style":266},[2586],{"type":25,"value":1919},{"type":19,"tag":78,"props":2588,"children":2589},{"style":91},[2590],{"type":25,"value":170},{"type":19,"tag":78,"props":2592,"children":2593},{"class":80,"line":675},[2594],{"type":19,"tag":78,"props":2595,"children":2596},{"emptyLinePlaceholder":14},[2597],{"type":25,"value":103},{"type":19,"tag":78,"props":2599,"children":2600},{"class":80,"line":1376},[2601,2606,2610,2615,2619],{"type":19,"tag":78,"props":2602,"children":2603},{"style":91},[2604],{"type":25,"value":2605},"    queue ",{"type":19,"tag":78,"props":2607,"children":2608},{"style":85},[2609],{"type":25,"value":383},{"type":19,"tag":78,"props":2611,"children":2612},{"style":91},[2613],{"type":25,"value":2614}," asyncio.Queue(",{"type":19,"tag":78,"props":2616,"children":2617},{"style":138},[2618],{"type":25,"value":165},{"type":19,"tag":78,"props":2620,"children":2621},{"style":91},[2622],{"type":25,"value":170},{"type":19,"tag":78,"props":2624,"children":2625},{"class":80,"line":1385},[2626,2631,2636],{"type":19,"tag":78,"props":2627,"children":2628},{"style":91},[2629],{"type":25,"value":2630},"    task.add_done_callback(",{"type":19,"tag":78,"props":2632,"children":2633},{"style":85},[2634],{"type":25,"value":2635},"lambda",{"type":19,"tag":78,"props":2637,"children":2638},{"style":91},[2639],{"type":25,"value":2640}," task: queue.put_nowait(task.result()))\n",{"type":19,"tag":78,"props":2642,"children":2643},{"class":80,"line":1394},[2644],{"type":19,"tag":78,"props":2645,"children":2646},{"emptyLinePlaceholder":14},[2647],{"type":25,"value":103},{"type":19,"tag":78,"props":2649,"children":2650},{"class":80,"line":2006},[2651,2656,2660,2665],{"type":19,"tag":78,"props":2652,"children":2653},{"style":91},[2654],{"type":25,"value":2655},"    value ",{"type":19,"tag":78,"props":2657,"children":2658},{"style":85},[2659],{"type":25,"value":383},{"type":19,"tag":78,"props":2661,"children":2662},{"style":85},[2663],{"type":25,"value":2664}," await",{"type":19,"tag":78,"props":2666,"children":2667},{"style":91},[2668],{"type":25,"value":2669}," task\n",{"type":19,"tag":78,"props":2671,"children":2672},{"class":80,"line":2015},[2673],{"type":19,"tag":78,"props":2674,"children":2675},{"emptyLinePlaceholder":14},[2676],{"type":25,"value":103},{"type":19,"tag":78,"props":2678,"children":2679},{"class":80,"line":2024},[2680,2684,2688],{"type":19,"tag":78,"props":2681,"children":2682},{"style":91},[2683],{"type":25,"value":473},{"type":19,"tag":78,"props":2685,"children":2686},{"style":266},[2687],{"type":25,"value":1955},{"type":19,"tag":78,"props":2689,"children":2690},{"style":91},[2691],{"type":25,"value":170},{"type":19,"tag":78,"props":2693,"children":2694},{"class":80,"line":2033},[2695],{"type":19,"tag":78,"props":2696,"children":2697},{"emptyLinePlaceholder":14},[2698],{"type":25,"value":103},{"type":19,"tag":78,"props":2700,"children":2701},{"class":80,"line":2042},[2702,2707,2711],{"type":19,"tag":78,"props":2703,"children":2704},{"style":91},[2705],{"type":25,"value":2706},"    result ",{"type":19,"tag":78,"props":2708,"children":2709},{"style":85},[2710],{"type":25,"value":383},{"type":19,"tag":78,"props":2712,"children":2713},{"style":91},[2714],{"type":25,"value":2715}," task.result()\n",{"type":19,"tag":78,"props":2717,"children":2719},{"class":80,"line":2718},31,[2720,2725,2729,2733],{"type":19,"tag":78,"props":2721,"children":2722},{"style":91},[2723],{"type":25,"value":2724},"    queue_value ",{"type":19,"tag":78,"props":2726,"children":2727},{"style":85},[2728],{"type":25,"value":383},{"type":19,"tag":78,"props":2730,"children":2731},{"style":85},[2732],{"type":25,"value":2664},{"type":19,"tag":78,"props":2734,"children":2735},{"style":91},[2736],{"type":25,"value":2737}," queue.get()\n",{"type":19,"tag":78,"props":2739,"children":2741},{"class":80,"line":2740},32,[2742,2746,2751,2756,2761,2765,2770,2774,2778],{"type":19,"tag":78,"props":2743,"children":2744},{"style":91},[2745],{"type":25,"value":473},{"type":19,"tag":78,"props":2747,"children":2748},{"style":266},[2749],{"type":25,"value":2750},"\"value=",{"type":19,"tag":78,"props":2752,"children":2753},{"style":138},[2754],{"type":25,"value":2755},"%r",{"type":19,"tag":78,"props":2757,"children":2758},{"style":266},[2759],{"type":25,"value":2760},", result=",{"type":19,"tag":78,"props":2762,"children":2763},{"style":138},[2764],{"type":25,"value":2755},{"type":19,"tag":78,"props":2766,"children":2767},{"style":266},[2768],{"type":25,"value":2769},", queue_value=",{"type":19,"tag":78,"props":2771,"children":2772},{"style":138},[2773],{"type":25,"value":2755},{"type":19,"tag":78,"props":2775,"children":2776},{"style":266},[2777],{"type":25,"value":488},{"type":19,"tag":78,"props":2779,"children":2780},{"style":91},[2781],{"type":25,"value":2782},", value, result, queue_value)\n",{"type":19,"tag":78,"props":2784,"children":2786},{"class":80,"line":2785},33,[2787],{"type":19,"tag":78,"props":2788,"children":2789},{"emptyLinePlaceholder":14},[2790],{"type":25,"value":103},{"type":19,"tag":78,"props":2792,"children":2794},{"class":80,"line":2793},34,[2795],{"type":19,"tag":78,"props":2796,"children":2797},{"emptyLinePlaceholder":14},[2798],{"type":25,"value":103},{"type":19,"tag":78,"props":2800,"children":2802},{"class":80,"line":2801},35,[2803,2807,2811,2815,2819],{"type":19,"tag":78,"props":2804,"children":2805},{"style":85},[2806],{"type":25,"value":253},{"type":19,"tag":78,"props":2808,"children":2809},{"style":138},[2810],{"type":25,"value":258},{"type":19,"tag":78,"props":2812,"children":2813},{"style":85},[2814],{"type":25,"value":263},{"type":19,"tag":78,"props":2816,"children":2817},{"style":266},[2818],{"type":25,"value":269},{"type":19,"tag":78,"props":2820,"children":2821},{"style":91},[2822],{"type":25,"value":146},{"type":19,"tag":78,"props":2824,"children":2826},{"class":80,"line":2825},36,[2827],{"type":19,"tag":78,"props":2828,"children":2829},{"style":91},[2830],{"type":25,"value":282},{"type":19,"tag":78,"props":2832,"children":2834},{"class":80,"line":2833},37,[2835],{"type":19,"tag":78,"props":2836,"children":2837},{"style":1354},[2838],{"type":25,"value":2839},"# ❯ poetry run python main5.py\n",{"type":19,"tag":78,"props":2841,"children":2843},{"class":80,"line":2842},38,[2844],{"type":19,"tag":78,"props":2845,"children":2846},{"style":1354},[2847],{"type":25,"value":2848},"# before sleep\n",{"type":19,"tag":78,"props":2850,"children":2852},{"class":80,"line":2851},39,[2853],{"type":19,"tag":78,"props":2854,"children":2855},{"style":1354},[2856],{"type":25,"value":2857},"# start\n",{"type":19,"tag":78,"props":2859,"children":2861},{"class":80,"line":2860},40,[2862],{"type":19,"tag":78,"props":2863,"children":2864},{"style":1354},[2865],{"type":25,"value":2866},"# done!\n",{"type":19,"tag":78,"props":2868,"children":2870},{"class":80,"line":2869},41,[2871],{"type":19,"tag":78,"props":2872,"children":2873},{"style":1354},[2874],{"type":25,"value":2875},"# after sleep\n",{"type":19,"tag":78,"props":2877,"children":2879},{"class":80,"line":2878},42,[2880],{"type":19,"tag":78,"props":2881,"children":2882},{"style":1354},[2883],{"type":25,"value":2884},"# value=1, result=1, queue_value=1\n",{"type":19,"tag":35,"props":2886,"children":2887},{},[2888,2890,2895],{"type":25,"value":2889},"가능하다. ",{"type":19,"tag":28,"props":2891,"children":2893},{"className":2892},[],[2894],{"type":25,"value":1493},{"type":25,"value":2896},"는 코루틴을 이벤트 루프에 예약하는 객체지, 코루틴 그 자체가 아니기 때문이다.",{"type":19,"tag":35,"props":2898,"children":2899},{},[2900,2902,2907,2909,2914,2916,2922,2924,2930],{"type":25,"value":2901},"그렇기에 단 한번 ",{"type":19,"tag":28,"props":2903,"children":2905},{"className":2904},[],[2906],{"type":25,"value":52},{"type":25,"value":2908},"으로 대기할 수 있다.\n동시에 ",{"type":19,"tag":28,"props":2910,"children":2912},{"className":2911},[],[2913],{"type":25,"value":1486},{"type":25,"value":2915},"이기에, ",{"type":19,"tag":28,"props":2917,"children":2919},{"className":2918},[],[2920],{"type":25,"value":2921},"result",{"type":25,"value":2923}," 메소드를 사용하여 값을 가져올 수도 있으며\n",{"type":19,"tag":28,"props":2925,"children":2927},{"className":2926},[],[2928],{"type":25,"value":2929},"add_done_callback",{"type":25,"value":2931}," 메소드를 사용하여, 콜백을 추가할 수도 있다.",{"type":19,"tag":20,"props":2933,"children":2935},{"id":2934},"future와-task는-언제-사용할까",[2936,2941,2942,2947],{"type":19,"tag":28,"props":2937,"children":2939},{"className":2938},[],[2940],{"type":25,"value":1486},{"type":25,"value":46},{"type":19,"tag":28,"props":2943,"children":2945},{"className":2944},[],[2946],{"type":25,"value":1493},{"type":25,"value":2948},"는 언제 사용할까",{"type":19,"tag":35,"props":2950,"children":2951},{},[2952,2957,2958,2963],{"type":19,"tag":28,"props":2953,"children":2955},{"className":2954},[],[2956],{"type":25,"value":1486},{"type":25,"value":2058},{"type":19,"tag":28,"props":2959,"children":2961},{"className":2960},[],[2962],{"type":25,"value":1493},{"type":25,"value":2964},"는 대부분의 경우 직접 사용할 일이 없다.\n하지만 저수준 api를 다뤄야 하거나, 효율적인 코드를 목표로 한다면,\n필연적으로 다뤄야 하는 순간이 온다.",{"type":19,"tag":948,"props":2966,"children":2968},{"id":2967},"task가-필요한-상황",[2969,2974],{"type":19,"tag":28,"props":2970,"children":2972},{"className":2971},[],[2973],{"type":25,"value":1493},{"type":25,"value":2975},"가 필요한 상황",{"type":19,"tag":68,"props":2977,"children":2980},{"className":70,"code":2978,"filename":2979,"language":6,"meta":8,"style":8},"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom typing import Awaitable\n\n\nasync def test(value: int) -> int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod > rand:\n        error_msg = f\"mod > {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -> int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\nasync def main() -> None:\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    result = await asyncio.gather(*(shield(coro) for coro in coros))\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6.py\n# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n","main6.py",[2981],{"type":19,"tag":28,"props":2982,"children":2983},{"__ignoreMap":8},[2984,3006,3013,3024,3035,3055,3062,3069,3105,3132,3165,3184,3207,3249,3267,3279,3286,3293,3341,3353,3369,3385,3396,3403,3410,3437,3507,3553,3566,3573,3580,3603,3610,3618],{"type":19,"tag":78,"props":2985,"children":2986},{"class":80,"line":81},[2987,2991,2996,3001],{"type":19,"tag":78,"props":2988,"children":2989},{"style":85},[2990],{"type":25,"value":1091},{"type":19,"tag":78,"props":2992,"children":2993},{"style":138},[2994],{"type":25,"value":2995}," __future__",{"type":19,"tag":78,"props":2997,"children":2998},{"style":85},[2999],{"type":25,"value":3000}," import",{"type":19,"tag":78,"props":3002,"children":3003},{"style":91},[3004],{"type":25,"value":3005}," annotations\n",{"type":19,"tag":78,"props":3007,"children":3008},{"class":80,"line":97},[3009],{"type":19,"tag":78,"props":3010,"children":3011},{"emptyLinePlaceholder":14},[3012],{"type":25,"value":103},{"type":19,"tag":78,"props":3014,"children":3015},{"class":80,"line":106},[3016,3020],{"type":19,"tag":78,"props":3017,"children":3018},{"style":85},[3019],{"type":25,"value":88},{"type":19,"tag":78,"props":3021,"children":3022},{"style":91},[3023],{"type":25,"value":94},{"type":19,"tag":78,"props":3025,"children":3026},{"class":80,"line":114},[3027,3031],{"type":19,"tag":78,"props":3028,"children":3029},{"style":85},[3030],{"type":25,"value":88},{"type":19,"tag":78,"props":3032,"children":3033},{"style":91},[3034],{"type":25,"value":351},{"type":19,"tag":78,"props":3036,"children":3037},{"class":80,"line":149},[3038,3042,3046,3050],{"type":19,"tag":78,"props":3039,"children":3040},{"style":85},[3041],{"type":25,"value":1091},{"type":19,"tag":78,"props":3043,"children":3044},{"style":91},[3045],{"type":25,"value":1096},{"type":19,"tag":78,"props":3047,"children":3048},{"style":85},[3049],{"type":25,"value":88},{"type":19,"tag":78,"props":3051,"children":3052},{"style":91},[3053],{"type":25,"value":3054}," Awaitable\n",{"type":19,"tag":78,"props":3056,"children":3057},{"class":80,"line":173},[3058],{"type":19,"tag":78,"props":3059,"children":3060},{"emptyLinePlaceholder":14},[3061],{"type":25,"value":103},{"type":19,"tag":78,"props":3063,"children":3064},{"class":80,"line":181},[3065],{"type":19,"tag":78,"props":3066,"children":3067},{"emptyLinePlaceholder":14},[3068],{"type":25,"value":103},{"type":19,"tag":78,"props":3070,"children":3071},{"class":80,"line":189},[3072,3076,3080,3084,3089,3093,3097,3101],{"type":19,"tag":78,"props":3073,"children":3074},{"style":85},[3075],{"type":25,"value":12},{"type":19,"tag":78,"props":3077,"children":3078},{"style":85},[3079],{"type":25,"value":124},{"type":19,"tag":78,"props":3081,"children":3082},{"style":127},[3083],{"type":25,"value":130},{"type":19,"tag":78,"props":3085,"children":3086},{"style":91},[3087],{"type":25,"value":3088},"(value: ",{"type":19,"tag":78,"props":3090,"children":3091},{"style":138},[3092],{"type":25,"value":452},{"type":19,"tag":78,"props":3094,"children":3095},{"style":91},[3096],{"type":25,"value":457},{"type":19,"tag":78,"props":3098,"children":3099},{"style":138},[3100],{"type":25,"value":452},{"type":19,"tag":78,"props":3102,"children":3103},{"style":91},[3104],{"type":25,"value":146},{"type":19,"tag":78,"props":3106,"children":3107},{"class":80,"line":218},[3108,3113,3117,3122,3127],{"type":19,"tag":78,"props":3109,"children":3110},{"style":91},[3111],{"type":25,"value":3112},"    mod ",{"type":19,"tag":78,"props":3114,"children":3115},{"style":85},[3116],{"type":25,"value":383},{"type":19,"tag":78,"props":3118,"children":3119},{"style":91},[3120],{"type":25,"value":3121}," value ",{"type":19,"tag":78,"props":3123,"children":3124},{"style":85},[3125],{"type":25,"value":3126},"%",{"type":19,"tag":78,"props":3128,"children":3129},{"style":138},[3130],{"type":25,"value":3131}," 10\n",{"type":19,"tag":78,"props":3133,"children":3134},{"class":80,"line":231},[3135,3140,3144,3149,3153,3157,3161],{"type":19,"tag":78,"props":3136,"children":3137},{"style":91},[3138],{"type":25,"value":3139},"    rand ",{"type":19,"tag":78,"props":3141,"children":3142},{"style":85},[3143],{"type":25,"value":383},{"type":19,"tag":78,"props":3145,"children":3146},{"style":91},[3147],{"type":25,"value":3148}," random.randint(",{"type":19,"tag":78,"props":3150,"children":3151},{"style":138},[3152],{"type":25,"value":165},{"type":19,"tag":78,"props":3154,"children":3155},{"style":91},[3156],{"type":25,"value":971},{"type":19,"tag":78,"props":3158,"children":3159},{"style":138},[3160],{"type":25,"value":627},{"type":19,"tag":78,"props":3162,"children":3163},{"style":91},[3164],{"type":25,"value":170},{"type":19,"tag":78,"props":3166,"children":3167},{"class":80,"line":239},[3168,3172,3176,3180],{"type":19,"tag":78,"props":3169,"children":3170},{"style":85},[3171],{"type":25,"value":155},{"type":19,"tag":78,"props":3173,"children":3174},{"style":91},[3175],{"type":25,"value":160},{"type":19,"tag":78,"props":3177,"children":3178},{"style":138},[3179],{"type":25,"value":165},{"type":19,"tag":78,"props":3181,"children":3182},{"style":91},[3183],{"type":25,"value":170},{"type":19,"tag":78,"props":3185,"children":3186},{"class":80,"line":247},[3187,3192,3197,3202],{"type":19,"tag":78,"props":3188,"children":3189},{"style":85},[3190],{"type":25,"value":3191},"    if",{"type":19,"tag":78,"props":3193,"children":3194},{"style":91},[3195],{"type":25,"value":3196}," mod ",{"type":19,"tag":78,"props":3198,"children":3199},{"style":85},[3200],{"type":25,"value":3201},">",{"type":19,"tag":78,"props":3203,"children":3204},{"style":91},[3205],{"type":25,"value":3206}," rand:\n",{"type":19,"tag":78,"props":3208,"children":3209},{"class":80,"line":276},[3210,3215,3219,3224,3229,3234,3239,3244],{"type":19,"tag":78,"props":3211,"children":3212},{"style":91},[3213],{"type":25,"value":3214},"        error_msg ",{"type":19,"tag":78,"props":3216,"children":3217},{"style":85},[3218],{"type":25,"value":383},{"type":19,"tag":78,"props":3220,"children":3221},{"style":85},[3222],{"type":25,"value":3223}," f",{"type":19,"tag":78,"props":3225,"children":3226},{"style":266},[3227],{"type":25,"value":3228},"\"mod > ",{"type":19,"tag":78,"props":3230,"children":3231},{"style":138},[3232],{"type":25,"value":3233},"{",{"type":19,"tag":78,"props":3235,"children":3236},{"style":91},[3237],{"type":25,"value":3238},"rand",{"type":19,"tag":78,"props":3240,"children":3241},{"style":138},[3242],{"type":25,"value":3243},"}",{"type":19,"tag":78,"props":3245,"children":3246},{"style":266},[3247],{"type":25,"value":3248},"\"\n",{"type":19,"tag":78,"props":3250,"children":3251},{"class":80,"line":508},[3252,3257,3262],{"type":19,"tag":78,"props":3253,"children":3254},{"style":85},[3255],{"type":25,"value":3256},"        raise",{"type":19,"tag":78,"props":3258,"children":3259},{"style":138},[3260],{"type":25,"value":3261}," ValueError",{"type":19,"tag":78,"props":3263,"children":3264},{"style":91},[3265],{"type":25,"value":3266},"(error_msg)\n",{"type":19,"tag":78,"props":3268,"children":3269},{"class":80,"line":533},[3270,3274],{"type":19,"tag":78,"props":3271,"children":3272},{"style":85},[3273],{"type":25,"value":2492},{"type":19,"tag":78,"props":3275,"children":3276},{"style":91},[3277],{"type":25,"value":3278}," mod\n",{"type":19,"tag":78,"props":3280,"children":3281},{"class":80,"line":541},[3282],{"type":19,"tag":78,"props":3283,"children":3284},{"emptyLinePlaceholder":14},[3285],{"type":25,"value":103},{"type":19,"tag":78,"props":3287,"children":3288},{"class":80,"line":549},[3289],{"type":19,"tag":78,"props":3290,"children":3291},{"emptyLinePlaceholder":14},[3292],{"type":25,"value":103},{"type":19,"tag":78,"props":3294,"children":3295},{"class":80,"line":577},[3296,3300,3304,3309,3314,3318,3323,3327,3332,3337],{"type":19,"tag":78,"props":3297,"children":3298},{"style":85},[3299],{"type":25,"value":12},{"type":19,"tag":78,"props":3301,"children":3302},{"style":85},[3303],{"type":25,"value":124},{"type":19,"tag":78,"props":3305,"children":3306},{"style":127},[3307],{"type":25,"value":3308}," shield",{"type":19,"tag":78,"props":3310,"children":3311},{"style":91},[3312],{"type":25,"value":3313},"(coro: Awaitable[",{"type":19,"tag":78,"props":3315,"children":3316},{"style":138},[3317],{"type":25,"value":452},{"type":19,"tag":78,"props":3319,"children":3320},{"style":91},[3321],{"type":25,"value":3322},"]) -> ",{"type":19,"tag":78,"props":3324,"children":3325},{"style":138},[3326],{"type":25,"value":452},{"type":19,"tag":78,"props":3328,"children":3329},{"style":85},[3330],{"type":25,"value":3331}," |",{"type":19,"tag":78,"props":3333,"children":3334},{"style":138},[3335],{"type":25,"value":3336}," None",{"type":19,"tag":78,"props":3338,"children":3339},{"style":91},[3340],{"type":25,"value":146},{"type":19,"tag":78,"props":3342,"children":3343},{"class":80,"line":635},[3344,3349],{"type":19,"tag":78,"props":3345,"children":3346},{"style":85},[3347],{"type":25,"value":3348},"    try",{"type":19,"tag":78,"props":3350,"children":3351},{"style":91},[3352],{"type":25,"value":146},{"type":19,"tag":78,"props":3354,"children":3355},{"class":80,"line":643},[3356,3360,3364],{"type":19,"tag":78,"props":3357,"children":3358},{"style":85},[3359],{"type":25,"value":1240},{"type":19,"tag":78,"props":3361,"children":3362},{"style":85},[3363],{"type":25,"value":2664},{"type":19,"tag":78,"props":3365,"children":3366},{"style":91},[3367],{"type":25,"value":3368}," asyncio.shield(coro)\n",{"type":19,"tag":78,"props":3370,"children":3371},{"class":80,"line":651},[3372,3377,3381],{"type":19,"tag":78,"props":3373,"children":3374},{"style":85},[3375],{"type":25,"value":3376},"    except",{"type":19,"tag":78,"props":3378,"children":3379},{"style":138},[3380],{"type":25,"value":3261},{"type":19,"tag":78,"props":3382,"children":3383},{"style":91},[3384],{"type":25,"value":146},{"type":19,"tag":78,"props":3386,"children":3387},{"class":80,"line":675},[3388,3392],{"type":19,"tag":78,"props":3389,"children":3390},{"style":85},[3391],{"type":25,"value":1240},{"type":19,"tag":78,"props":3393,"children":3394},{"style":138},[3395],{"type":25,"value":1232},{"type":19,"tag":78,"props":3397,"children":3398},{"class":80,"line":1376},[3399],{"type":19,"tag":78,"props":3400,"children":3401},{"emptyLinePlaceholder":14},[3402],{"type":25,"value":103},{"type":19,"tag":78,"props":3404,"children":3405},{"class":80,"line":1385},[3406],{"type":19,"tag":78,"props":3407,"children":3408},{"emptyLinePlaceholder":14},[3409],{"type":25,"value":103},{"type":19,"tag":78,"props":3411,"children":3412},{"class":80,"line":1394},[3413,3417,3421,3425,3429,3433],{"type":19,"tag":78,"props":3414,"children":3415},{"style":85},[3416],{"type":25,"value":12},{"type":19,"tag":78,"props":3418,"children":3419},{"style":85},[3420],{"type":25,"value":124},{"type":19,"tag":78,"props":3422,"children":3423},{"style":127},[3424],{"type":25,"value":203},{"type":19,"tag":78,"props":3426,"children":3427},{"style":91},[3428],{"type":25,"value":135},{"type":19,"tag":78,"props":3430,"children":3431},{"style":138},[3432],{"type":25,"value":141},{"type":19,"tag":78,"props":3434,"children":3435},{"style":91},[3436],{"type":25,"value":146},{"type":19,"tag":78,"props":3438,"children":3439},{"class":80,"line":2006},[3440,3445,3449,3454,3458,3463,3467,3472,3477,3481,3486,3490,3494,3498,3502],{"type":19,"tag":78,"props":3441,"children":3442},{"style":91},[3443],{"type":25,"value":3444},"    coros ",{"type":19,"tag":78,"props":3446,"children":3447},{"style":85},[3448],{"type":25,"value":383},{"type":19,"tag":78,"props":3450,"children":3451},{"style":91},[3452],{"type":25,"value":3453}," [test(",{"type":19,"tag":78,"props":3455,"children":3456},{"style":138},[3457],{"type":25,"value":452},{"type":19,"tag":78,"props":3459,"children":3460},{"style":91},[3461],{"type":25,"value":3462},"(random.random() ",{"type":19,"tag":78,"props":3464,"children":3465},{"style":85},[3466],{"type":25,"value":592},{"type":19,"tag":78,"props":3468,"children":3469},{"style":138},[3470],{"type":25,"value":3471}," 100",{"type":19,"tag":78,"props":3473,"children":3474},{"style":91},[3475],{"type":25,"value":3476},")) ",{"type":19,"tag":78,"props":3478,"children":3479},{"style":85},[3480],{"type":25,"value":602},{"type":19,"tag":78,"props":3482,"children":3483},{"style":91},[3484],{"type":25,"value":3485}," _ ",{"type":19,"tag":78,"props":3487,"children":3488},{"style":85},[3489],{"type":25,"value":612},{"type":19,"tag":78,"props":3491,"children":3492},{"style":138},[3493],{"type":25,"value":617},{"type":19,"tag":78,"props":3495,"children":3496},{"style":91},[3497],{"type":25,"value":622},{"type":19,"tag":78,"props":3499,"children":3500},{"style":138},[3501],{"type":25,"value":627},{"type":19,"tag":78,"props":3503,"children":3504},{"style":91},[3505],{"type":25,"value":3506},")]\n",{"type":19,"tag":78,"props":3508,"children":3509},{"class":80,"line":2015},[3510,3514,3518,3522,3526,3530,3535,3539,3544,3548],{"type":19,"tag":78,"props":3511,"children":3512},{"style":91},[3513],{"type":25,"value":2706},{"type":19,"tag":78,"props":3515,"children":3516},{"style":85},[3517],{"type":25,"value":383},{"type":19,"tag":78,"props":3519,"children":3520},{"style":85},[3521],{"type":25,"value":2664},{"type":19,"tag":78,"props":3523,"children":3524},{"style":91},[3525],{"type":25,"value":587},{"type":19,"tag":78,"props":3527,"children":3528},{"style":85},[3529],{"type":25,"value":592},{"type":19,"tag":78,"props":3531,"children":3532},{"style":91},[3533],{"type":25,"value":3534},"(shield(coro) ",{"type":19,"tag":78,"props":3536,"children":3537},{"style":85},[3538],{"type":25,"value":602},{"type":19,"tag":78,"props":3540,"children":3541},{"style":91},[3542],{"type":25,"value":3543}," coro ",{"type":19,"tag":78,"props":3545,"children":3546},{"style":85},[3547],{"type":25,"value":612},{"type":19,"tag":78,"props":3549,"children":3550},{"style":91},[3551],{"type":25,"value":3552}," coros))\n",{"type":19,"tag":78,"props":3554,"children":3555},{"class":80,"line":2024},[3556,3561],{"type":19,"tag":78,"props":3557,"children":3558},{"style":138},[3559],{"type":25,"value":3560},"    print",{"type":19,"tag":78,"props":3562,"children":3563},{"style":91},[3564],{"type":25,"value":3565},"(result)\n",{"type":19,"tag":78,"props":3567,"children":3568},{"class":80,"line":2033},[3569],{"type":19,"tag":78,"props":3570,"children":3571},{"emptyLinePlaceholder":14},[3572],{"type":25,"value":103},{"type":19,"tag":78,"props":3574,"children":3575},{"class":80,"line":2042},[3576],{"type":19,"tag":78,"props":3577,"children":3578},{"emptyLinePlaceholder":14},[3579],{"type":25,"value":103},{"type":19,"tag":78,"props":3581,"children":3582},{"class":80,"line":2718},[3583,3587,3591,3595,3599],{"type":19,"tag":78,"props":3584,"children":3585},{"style":85},[3586],{"type":25,"value":253},{"type":19,"tag":78,"props":3588,"children":3589},{"style":138},[3590],{"type":25,"value":258},{"type":19,"tag":78,"props":3592,"children":3593},{"style":85},[3594],{"type":25,"value":263},{"type":19,"tag":78,"props":3596,"children":3597},{"style":266},[3598],{"type":25,"value":269},{"type":19,"tag":78,"props":3600,"children":3601},{"style":91},[3602],{"type":25,"value":146},{"type":19,"tag":78,"props":3604,"children":3605},{"class":80,"line":2740},[3606],{"type":19,"tag":78,"props":3607,"children":3608},{"style":91},[3609],{"type":25,"value":282},{"type":19,"tag":78,"props":3611,"children":3612},{"class":80,"line":2785},[3613],{"type":19,"tag":78,"props":3614,"children":3615},{"style":1354},[3616],{"type":25,"value":3617},"# ❯ poetry run python main6.py\n",{"type":19,"tag":78,"props":3619,"children":3620},{"class":80,"line":2793},[3621],{"type":19,"tag":78,"props":3622,"children":3623},{"style":1354},[3624],{"type":25,"value":3625},"# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n",{"type":19,"tag":35,"props":3627,"children":3628},{},[3629,3631,3636],{"type":25,"value":3630},"위와 같은 상황이 있을 때,\n",{"type":19,"tag":28,"props":3632,"children":3634},{"className":3633},[],[3635],{"type":25,"value":2077},{"type":25,"value":3637},"함수에서 에러가 발생하면 None값이 아닌 -1을 반환받고 싶다고 하자.",{"type":19,"tag":35,"props":3639,"children":3640},{},[3641,3643,3649,3651,3656],{"type":25,"value":3642},"가장 간단한 방법은 ",{"type":19,"tag":28,"props":3644,"children":3646},{"className":3645},[],[3647],{"type":25,"value":3648},"shield",{"type":25,"value":3650},"를 수정하는 것이고,\n그 다음으로는 ",{"type":19,"tag":28,"props":3652,"children":3654},{"className":3653},[],[3655],{"type":25,"value":2077},{"type":25,"value":3657},"를 수정하는 것이다.",{"type":19,"tag":35,"props":3659,"children":3660},{},[3661],{"type":25,"value":3662},"하지만 위 스크립트는 굉장히 간단하게 작성된 스크립트라 그런 것이고,\n손대면 손댈수록 너무 복잡해져서 수정하기 힘들거나,\n특수한 사정으로 인해 수정 자체가 불가능한 경우가 있다.",{"type":19,"tag":35,"props":3664,"children":3665},{},[3666,3668,3673],{"type":25,"value":3667},"그럴때 ",{"type":19,"tag":28,"props":3669,"children":3671},{"className":3670},[],[3672],{"type":25,"value":1493},{"type":25,"value":3674},"에 콜백을 추가하여 문제를 해결할 수 있다.",{"type":19,"tag":68,"props":3676,"children":3679},{"className":70,"code":3677,"filename":3678,"language":6,"meta":8,"style":8},"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom collections import deque\nfrom functools import partial\nfrom typing import Awaitable\n\n\nasync def test(value: int) -> int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod > rand:\n        error_msg = f\"mod > {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -> int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\ndef add(task: asyncio.Task[int], queue: asyncio.Queue[int]) -> None:\n    if task.exception():\n        queue.put_nowait(-1)\n        return\n    queue.put_nowait(task.result())\n\n\nasync def main() -> None:\n    queue = asyncio.Queue()\n    add_in_queue = partial(add, queue=queue)\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    tasks = deque()\n    for coro in coros:\n        task = asyncio.create_task(coro)\n        task.add_done_callback(add_in_queue)\n        tasks.append(task)\n\n    await asyncio.gather(*(shield(task) for task in tasks))\n    result = [queue.get_nowait() for _ in range(10)]\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6-2.py\n# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n","main6-2.py",[3680],{"type":19,"tag":28,"props":3681,"children":3682},{"__ignoreMap":8},[3683,3702,3709,3720,3731,3752,3773,3792,3799,3806,3841,3864,3895,3914,3933,3968,3983,3994,4001,4008,4051,4062,4077,4092,4103,4110,4117,4160,4172,4193,4201,4209,4216,4223,4250,4266,4298,4361,4378,4399,4415,4423,4431,4439,4478,4523,4535,4543,4551,4575,4583,4592],{"type":19,"tag":78,"props":3684,"children":3685},{"class":80,"line":81},[3686,3690,3694,3698],{"type":19,"tag":78,"props":3687,"children":3688},{"style":85},[3689],{"type":25,"value":1091},{"type":19,"tag":78,"props":3691,"children":3692},{"style":138},[3693],{"type":25,"value":2995},{"type":19,"tag":78,"props":3695,"children":3696},{"style":85},[3697],{"type":25,"value":3000},{"type":19,"tag":78,"props":3699,"children":3700},{"style":91},[3701],{"type":25,"value":3005},{"type":19,"tag":78,"props":3703,"children":3704},{"class":80,"line":97},[3705],{"type":19,"tag":78,"props":3706,"children":3707},{"emptyLinePlaceholder":14},[3708],{"type":25,"value":103},{"type":19,"tag":78,"props":3710,"children":3711},{"class":80,"line":106},[3712,3716],{"type":19,"tag":78,"props":3713,"children":3714},{"style":85},[3715],{"type":25,"value":88},{"type":19,"tag":78,"props":3717,"children":3718},{"style":91},[3719],{"type":25,"value":94},{"type":19,"tag":78,"props":3721,"children":3722},{"class":80,"line":114},[3723,3727],{"type":19,"tag":78,"props":3724,"children":3725},{"style":85},[3726],{"type":25,"value":88},{"type":19,"tag":78,"props":3728,"children":3729},{"style":91},[3730],{"type":25,"value":351},{"type":19,"tag":78,"props":3732,"children":3733},{"class":80,"line":149},[3734,3738,3743,3747],{"type":19,"tag":78,"props":3735,"children":3736},{"style":85},[3737],{"type":25,"value":1091},{"type":19,"tag":78,"props":3739,"children":3740},{"style":91},[3741],{"type":25,"value":3742}," collections ",{"type":19,"tag":78,"props":3744,"children":3745},{"style":85},[3746],{"type":25,"value":88},{"type":19,"tag":78,"props":3748,"children":3749},{"style":91},[3750],{"type":25,"value":3751}," deque\n",{"type":19,"tag":78,"props":3753,"children":3754},{"class":80,"line":173},[3755,3759,3764,3768],{"type":19,"tag":78,"props":3756,"children":3757},{"style":85},[3758],{"type":25,"value":1091},{"type":19,"tag":78,"props":3760,"children":3761},{"style":91},[3762],{"type":25,"value":3763}," functools ",{"type":19,"tag":78,"props":3765,"children":3766},{"style":85},[3767],{"type":25,"value":88},{"type":19,"tag":78,"props":3769,"children":3770},{"style":91},[3771],{"type":25,"value":3772}," partial\n",{"type":19,"tag":78,"props":3774,"children":3775},{"class":80,"line":181},[3776,3780,3784,3788],{"type":19,"tag":78,"props":3777,"children":3778},{"style":85},[3779],{"type":25,"value":1091},{"type":19,"tag":78,"props":3781,"children":3782},{"style":91},[3783],{"type":25,"value":1096},{"type":19,"tag":78,"props":3785,"children":3786},{"style":85},[3787],{"type":25,"value":88},{"type":19,"tag":78,"props":3789,"children":3790},{"style":91},[3791],{"type":25,"value":3054},{"type":19,"tag":78,"props":3793,"children":3794},{"class":80,"line":189},[3795],{"type":19,"tag":78,"props":3796,"children":3797},{"emptyLinePlaceholder":14},[3798],{"type":25,"value":103},{"type":19,"tag":78,"props":3800,"children":3801},{"class":80,"line":218},[3802],{"type":19,"tag":78,"props":3803,"children":3804},{"emptyLinePlaceholder":14},[3805],{"type":25,"value":103},{"type":19,"tag":78,"props":3807,"children":3808},{"class":80,"line":231},[3809,3813,3817,3821,3825,3829,3833,3837],{"type":19,"tag":78,"props":3810,"children":3811},{"style":85},[3812],{"type":25,"value":12},{"type":19,"tag":78,"props":3814,"children":3815},{"style":85},[3816],{"type":25,"value":124},{"type":19,"tag":78,"props":3818,"children":3819},{"style":127},[3820],{"type":25,"value":130},{"type":19,"tag":78,"props":3822,"children":3823},{"style":91},[3824],{"type":25,"value":3088},{"type":19,"tag":78,"props":3826,"children":3827},{"style":138},[3828],{"type":25,"value":452},{"type":19,"tag":78,"props":3830,"children":3831},{"style":91},[3832],{"type":25,"value":457},{"type":19,"tag":78,"props":3834,"children":3835},{"style":138},[3836],{"type":25,"value":452},{"type":19,"tag":78,"props":3838,"children":3839},{"style":91},[3840],{"type":25,"value":146},{"type":19,"tag":78,"props":3842,"children":3843},{"class":80,"line":239},[3844,3848,3852,3856,3860],{"type":19,"tag":78,"props":3845,"children":3846},{"style":91},[3847],{"type":25,"value":3112},{"type":19,"tag":78,"props":3849,"children":3850},{"style":85},[3851],{"type":25,"value":383},{"type":19,"tag":78,"props":3853,"children":3854},{"style":91},[3855],{"type":25,"value":3121},{"type":19,"tag":78,"props":3857,"children":3858},{"style":85},[3859],{"type":25,"value":3126},{"type":19,"tag":78,"props":3861,"children":3862},{"style":138},[3863],{"type":25,"value":3131},{"type":19,"tag":78,"props":3865,"children":3866},{"class":80,"line":247},[3867,3871,3875,3879,3883,3887,3891],{"type":19,"tag":78,"props":3868,"children":3869},{"style":91},[3870],{"type":25,"value":3139},{"type":19,"tag":78,"props":3872,"children":3873},{"style":85},[3874],{"type":25,"value":383},{"type":19,"tag":78,"props":3876,"children":3877},{"style":91},[3878],{"type":25,"value":3148},{"type":19,"tag":78,"props":3880,"children":3881},{"style":138},[3882],{"type":25,"value":165},{"type":19,"tag":78,"props":3884,"children":3885},{"style":91},[3886],{"type":25,"value":971},{"type":19,"tag":78,"props":3888,"children":3889},{"style":138},[3890],{"type":25,"value":627},{"type":19,"tag":78,"props":3892,"children":3893},{"style":91},[3894],{"type":25,"value":170},{"type":19,"tag":78,"props":3896,"children":3897},{"class":80,"line":276},[3898,3902,3906,3910],{"type":19,"tag":78,"props":3899,"children":3900},{"style":85},[3901],{"type":25,"value":155},{"type":19,"tag":78,"props":3903,"children":3904},{"style":91},[3905],{"type":25,"value":160},{"type":19,"tag":78,"props":3907,"children":3908},{"style":138},[3909],{"type":25,"value":165},{"type":19,"tag":78,"props":3911,"children":3912},{"style":91},[3913],{"type":25,"value":170},{"type":19,"tag":78,"props":3915,"children":3916},{"class":80,"line":508},[3917,3921,3925,3929],{"type":19,"tag":78,"props":3918,"children":3919},{"style":85},[3920],{"type":25,"value":3191},{"type":19,"tag":78,"props":3922,"children":3923},{"style":91},[3924],{"type":25,"value":3196},{"type":19,"tag":78,"props":3926,"children":3927},{"style":85},[3928],{"type":25,"value":3201},{"type":19,"tag":78,"props":3930,"children":3931},{"style":91},[3932],{"type":25,"value":3206},{"type":19,"tag":78,"props":3934,"children":3935},{"class":80,"line":533},[3936,3940,3944,3948,3952,3956,3960,3964],{"type":19,"tag":78,"props":3937,"children":3938},{"style":91},[3939],{"type":25,"value":3214},{"type":19,"tag":78,"props":3941,"children":3942},{"style":85},[3943],{"type":25,"value":383},{"type":19,"tag":78,"props":3945,"children":3946},{"style":85},[3947],{"type":25,"value":3223},{"type":19,"tag":78,"props":3949,"children":3950},{"style":266},[3951],{"type":25,"value":3228},{"type":19,"tag":78,"props":3953,"children":3954},{"style":138},[3955],{"type":25,"value":3233},{"type":19,"tag":78,"props":3957,"children":3958},{"style":91},[3959],{"type":25,"value":3238},{"type":19,"tag":78,"props":3961,"children":3962},{"style":138},[3963],{"type":25,"value":3243},{"type":19,"tag":78,"props":3965,"children":3966},{"style":266},[3967],{"type":25,"value":3248},{"type":19,"tag":78,"props":3969,"children":3970},{"class":80,"line":541},[3971,3975,3979],{"type":19,"tag":78,"props":3972,"children":3973},{"style":85},[3974],{"type":25,"value":3256},{"type":19,"tag":78,"props":3976,"children":3977},{"style":138},[3978],{"type":25,"value":3261},{"type":19,"tag":78,"props":3980,"children":3981},{"style":91},[3982],{"type":25,"value":3266},{"type":19,"tag":78,"props":3984,"children":3985},{"class":80,"line":549},[3986,3990],{"type":19,"tag":78,"props":3987,"children":3988},{"style":85},[3989],{"type":25,"value":2492},{"type":19,"tag":78,"props":3991,"children":3992},{"style":91},[3993],{"type":25,"value":3278},{"type":19,"tag":78,"props":3995,"children":3996},{"class":80,"line":577},[3997],{"type":19,"tag":78,"props":3998,"children":3999},{"emptyLinePlaceholder":14},[4000],{"type":25,"value":103},{"type":19,"tag":78,"props":4002,"children":4003},{"class":80,"line":635},[4004],{"type":19,"tag":78,"props":4005,"children":4006},{"emptyLinePlaceholder":14},[4007],{"type":25,"value":103},{"type":19,"tag":78,"props":4009,"children":4010},{"class":80,"line":643},[4011,4015,4019,4023,4027,4031,4035,4039,4043,4047],{"type":19,"tag":78,"props":4012,"children":4013},{"style":85},[4014],{"type":25,"value":12},{"type":19,"tag":78,"props":4016,"children":4017},{"style":85},[4018],{"type":25,"value":124},{"type":19,"tag":78,"props":4020,"children":4021},{"style":127},[4022],{"type":25,"value":3308},{"type":19,"tag":78,"props":4024,"children":4025},{"style":91},[4026],{"type":25,"value":3313},{"type":19,"tag":78,"props":4028,"children":4029},{"style":138},[4030],{"type":25,"value":452},{"type":19,"tag":78,"props":4032,"children":4033},{"style":91},[4034],{"type":25,"value":3322},{"type":19,"tag":78,"props":4036,"children":4037},{"style":138},[4038],{"type":25,"value":452},{"type":19,"tag":78,"props":4040,"children":4041},{"style":85},[4042],{"type":25,"value":3331},{"type":19,"tag":78,"props":4044,"children":4045},{"style":138},[4046],{"type":25,"value":3336},{"type":19,"tag":78,"props":4048,"children":4049},{"style":91},[4050],{"type":25,"value":146},{"type":19,"tag":78,"props":4052,"children":4053},{"class":80,"line":651},[4054,4058],{"type":19,"tag":78,"props":4055,"children":4056},{"style":85},[4057],{"type":25,"value":3348},{"type":19,"tag":78,"props":4059,"children":4060},{"style":91},[4061],{"type":25,"value":146},{"type":19,"tag":78,"props":4063,"children":4064},{"class":80,"line":675},[4065,4069,4073],{"type":19,"tag":78,"props":4066,"children":4067},{"style":85},[4068],{"type":25,"value":1240},{"type":19,"tag":78,"props":4070,"children":4071},{"style":85},[4072],{"type":25,"value":2664},{"type":19,"tag":78,"props":4074,"children":4075},{"style":91},[4076],{"type":25,"value":3368},{"type":19,"tag":78,"props":4078,"children":4079},{"class":80,"line":1376},[4080,4084,4088],{"type":19,"tag":78,"props":4081,"children":4082},{"style":85},[4083],{"type":25,"value":3376},{"type":19,"tag":78,"props":4085,"children":4086},{"style":138},[4087],{"type":25,"value":3261},{"type":19,"tag":78,"props":4089,"children":4090},{"style":91},[4091],{"type":25,"value":146},{"type":19,"tag":78,"props":4093,"children":4094},{"class":80,"line":1385},[4095,4099],{"type":19,"tag":78,"props":4096,"children":4097},{"style":85},[4098],{"type":25,"value":1240},{"type":19,"tag":78,"props":4100,"children":4101},{"style":138},[4102],{"type":25,"value":1232},{"type":19,"tag":78,"props":4104,"children":4105},{"class":80,"line":1394},[4106],{"type":19,"tag":78,"props":4107,"children":4108},{"emptyLinePlaceholder":14},[4109],{"type":25,"value":103},{"type":19,"tag":78,"props":4111,"children":4112},{"class":80,"line":2006},[4113],{"type":19,"tag":78,"props":4114,"children":4115},{"emptyLinePlaceholder":14},[4116],{"type":25,"value":103},{"type":19,"tag":78,"props":4118,"children":4119},{"class":80,"line":2015},[4120,4125,4130,4135,4139,4144,4148,4152,4156],{"type":19,"tag":78,"props":4121,"children":4122},{"style":85},[4123],{"type":25,"value":4124},"def",{"type":19,"tag":78,"props":4126,"children":4127},{"style":127},[4128],{"type":25,"value":4129}," add",{"type":19,"tag":78,"props":4131,"children":4132},{"style":91},[4133],{"type":25,"value":4134},"(task: asyncio.Task[",{"type":19,"tag":78,"props":4136,"children":4137},{"style":138},[4138],{"type":25,"value":452},{"type":19,"tag":78,"props":4140,"children":4141},{"style":91},[4142],{"type":25,"value":4143},"], queue: asyncio.Queue[",{"type":19,"tag":78,"props":4145,"children":4146},{"style":138},[4147],{"type":25,"value":452},{"type":19,"tag":78,"props":4149,"children":4150},{"style":91},[4151],{"type":25,"value":3322},{"type":19,"tag":78,"props":4153,"children":4154},{"style":138},[4155],{"type":25,"value":141},{"type":19,"tag":78,"props":4157,"children":4158},{"style":91},[4159],{"type":25,"value":146},{"type":19,"tag":78,"props":4161,"children":4162},{"class":80,"line":2024},[4163,4167],{"type":19,"tag":78,"props":4164,"children":4165},{"style":85},[4166],{"type":25,"value":3191},{"type":19,"tag":78,"props":4168,"children":4169},{"style":91},[4170],{"type":25,"value":4171}," task.exception():\n",{"type":19,"tag":78,"props":4173,"children":4174},{"class":80,"line":2033},[4175,4180,4185,4189],{"type":19,"tag":78,"props":4176,"children":4177},{"style":91},[4178],{"type":25,"value":4179},"        queue.put_nowait(",{"type":19,"tag":78,"props":4181,"children":4182},{"style":85},[4183],{"type":25,"value":4184},"-",{"type":19,"tag":78,"props":4186,"children":4187},{"style":138},[4188],{"type":25,"value":165},{"type":19,"tag":78,"props":4190,"children":4191},{"style":91},[4192],{"type":25,"value":170},{"type":19,"tag":78,"props":4194,"children":4195},{"class":80,"line":2042},[4196],{"type":19,"tag":78,"props":4197,"children":4198},{"style":85},[4199],{"type":25,"value":4200},"        return\n",{"type":19,"tag":78,"props":4202,"children":4203},{"class":80,"line":2718},[4204],{"type":19,"tag":78,"props":4205,"children":4206},{"style":91},[4207],{"type":25,"value":4208},"    queue.put_nowait(task.result())\n",{"type":19,"tag":78,"props":4210,"children":4211},{"class":80,"line":2740},[4212],{"type":19,"tag":78,"props":4213,"children":4214},{"emptyLinePlaceholder":14},[4215],{"type":25,"value":103},{"type":19,"tag":78,"props":4217,"children":4218},{"class":80,"line":2785},[4219],{"type":19,"tag":78,"props":4220,"children":4221},{"emptyLinePlaceholder":14},[4222],{"type":25,"value":103},{"type":19,"tag":78,"props":4224,"children":4225},{"class":80,"line":2793},[4226,4230,4234,4238,4242,4246],{"type":19,"tag":78,"props":4227,"children":4228},{"style":85},[4229],{"type":25,"value":12},{"type":19,"tag":78,"props":4231,"children":4232},{"style":85},[4233],{"type":25,"value":124},{"type":19,"tag":78,"props":4235,"children":4236},{"style":127},[4237],{"type":25,"value":203},{"type":19,"tag":78,"props":4239,"children":4240},{"style":91},[4241],{"type":25,"value":135},{"type":19,"tag":78,"props":4243,"children":4244},{"style":138},[4245],{"type":25,"value":141},{"type":19,"tag":78,"props":4247,"children":4248},{"style":91},[4249],{"type":25,"value":146},{"type":19,"tag":78,"props":4251,"children":4252},{"class":80,"line":2801},[4253,4257,4261],{"type":19,"tag":78,"props":4254,"children":4255},{"style":91},[4256],{"type":25,"value":2605},{"type":19,"tag":78,"props":4258,"children":4259},{"style":85},[4260],{"type":25,"value":383},{"type":19,"tag":78,"props":4262,"children":4263},{"style":91},[4264],{"type":25,"value":4265}," asyncio.Queue()\n",{"type":19,"tag":78,"props":4267,"children":4268},{"class":80,"line":2825},[4269,4274,4278,4283,4289,4293],{"type":19,"tag":78,"props":4270,"children":4271},{"style":91},[4272],{"type":25,"value":4273},"    add_in_queue ",{"type":19,"tag":78,"props":4275,"children":4276},{"style":85},[4277],{"type":25,"value":383},{"type":19,"tag":78,"props":4279,"children":4280},{"style":91},[4281],{"type":25,"value":4282}," partial(add, ",{"type":19,"tag":78,"props":4284,"children":4286},{"style":4285},"--shiki-default:#E36209;--shiki-dark:#FFAB70",[4287],{"type":25,"value":4288},"queue",{"type":19,"tag":78,"props":4290,"children":4291},{"style":85},[4292],{"type":25,"value":383},{"type":19,"tag":78,"props":4294,"children":4295},{"style":91},[4296],{"type":25,"value":4297},"queue)\n",{"type":19,"tag":78,"props":4299,"children":4300},{"class":80,"line":2833},[4301,4305,4309,4313,4317,4321,4325,4329,4333,4337,4341,4345,4349,4353,4357],{"type":19,"tag":78,"props":4302,"children":4303},{"style":91},[4304],{"type":25,"value":3444},{"type":19,"tag":78,"props":4306,"children":4307},{"style":85},[4308],{"type":25,"value":383},{"type":19,"tag":78,"props":4310,"children":4311},{"style":91},[4312],{"type":25,"value":3453},{"type":19,"tag":78,"props":4314,"children":4315},{"style":138},[4316],{"type":25,"value":452},{"type":19,"tag":78,"props":4318,"children":4319},{"style":91},[4320],{"type":25,"value":3462},{"type":19,"tag":78,"props":4322,"children":4323},{"style":85},[4324],{"type":25,"value":592},{"type":19,"tag":78,"props":4326,"children":4327},{"style":138},[4328],{"type":25,"value":3471},{"type":19,"tag":78,"props":4330,"children":4331},{"style":91},[4332],{"type":25,"value":3476},{"type":19,"tag":78,"props":4334,"children":4335},{"style":85},[4336],{"type":25,"value":602},{"type":19,"tag":78,"props":4338,"children":4339},{"style":91},[4340],{"type":25,"value":3485},{"type":19,"tag":78,"props":4342,"children":4343},{"style":85},[4344],{"type":25,"value":612},{"type":19,"tag":78,"props":4346,"children":4347},{"style":138},[4348],{"type":25,"value":617},{"type":19,"tag":78,"props":4350,"children":4351},{"style":91},[4352],{"type":25,"value":622},{"type":19,"tag":78,"props":4354,"children":4355},{"style":138},[4356],{"type":25,"value":627},{"type":19,"tag":78,"props":4358,"children":4359},{"style":91},[4360],{"type":25,"value":3506},{"type":19,"tag":78,"props":4362,"children":4363},{"class":80,"line":2842},[4364,4369,4373],{"type":19,"tag":78,"props":4365,"children":4366},{"style":91},[4367],{"type":25,"value":4368},"    tasks ",{"type":19,"tag":78,"props":4370,"children":4371},{"style":85},[4372],{"type":25,"value":383},{"type":19,"tag":78,"props":4374,"children":4375},{"style":91},[4376],{"type":25,"value":4377}," deque()\n",{"type":19,"tag":78,"props":4379,"children":4380},{"class":80,"line":2851},[4381,4386,4390,4394],{"type":19,"tag":78,"props":4382,"children":4383},{"style":85},[4384],{"type":25,"value":4385},"    for",{"type":19,"tag":78,"props":4387,"children":4388},{"style":91},[4389],{"type":25,"value":3543},{"type":19,"tag":78,"props":4391,"children":4392},{"style":85},[4393],{"type":25,"value":612},{"type":19,"tag":78,"props":4395,"children":4396},{"style":91},[4397],{"type":25,"value":4398}," coros:\n",{"type":19,"tag":78,"props":4400,"children":4401},{"class":80,"line":2860},[4402,4407,4411],{"type":19,"tag":78,"props":4403,"children":4404},{"style":91},[4405],{"type":25,"value":4406},"        task ",{"type":19,"tag":78,"props":4408,"children":4409},{"style":85},[4410],{"type":25,"value":383},{"type":19,"tag":78,"props":4412,"children":4413},{"style":91},[4414],{"type":25,"value":1907},{"type":19,"tag":78,"props":4416,"children":4417},{"class":80,"line":2869},[4418],{"type":19,"tag":78,"props":4419,"children":4420},{"style":91},[4421],{"type":25,"value":4422},"        task.add_done_callback(add_in_queue)\n",{"type":19,"tag":78,"props":4424,"children":4425},{"class":80,"line":2878},[4426],{"type":19,"tag":78,"props":4427,"children":4428},{"style":91},[4429],{"type":25,"value":4430},"        tasks.append(task)\n",{"type":19,"tag":78,"props":4432,"children":4434},{"class":80,"line":4433},43,[4435],{"type":19,"tag":78,"props":4436,"children":4437},{"emptyLinePlaceholder":14},[4438],{"type":25,"value":103},{"type":19,"tag":78,"props":4440,"children":4442},{"class":80,"line":4441},44,[4443,4447,4451,4455,4460,4464,4469,4473],{"type":19,"tag":78,"props":4444,"children":4445},{"style":85},[4446],{"type":25,"value":155},{"type":19,"tag":78,"props":4448,"children":4449},{"style":91},[4450],{"type":25,"value":587},{"type":19,"tag":78,"props":4452,"children":4453},{"style":85},[4454],{"type":25,"value":592},{"type":19,"tag":78,"props":4456,"children":4457},{"style":91},[4458],{"type":25,"value":4459},"(shield(task) ",{"type":19,"tag":78,"props":4461,"children":4462},{"style":85},[4463],{"type":25,"value":602},{"type":19,"tag":78,"props":4465,"children":4466},{"style":91},[4467],{"type":25,"value":4468}," task ",{"type":19,"tag":78,"props":4470,"children":4471},{"style":85},[4472],{"type":25,"value":612},{"type":19,"tag":78,"props":4474,"children":4475},{"style":91},[4476],{"type":25,"value":4477}," tasks))\n",{"type":19,"tag":78,"props":4479,"children":4481},{"class":80,"line":4480},45,[4482,4486,4490,4495,4499,4503,4507,4511,4515,4519],{"type":19,"tag":78,"props":4483,"children":4484},{"style":91},[4485],{"type":25,"value":2706},{"type":19,"tag":78,"props":4487,"children":4488},{"style":85},[4489],{"type":25,"value":383},{"type":19,"tag":78,"props":4491,"children":4492},{"style":91},[4493],{"type":25,"value":4494}," [queue.get_nowait() ",{"type":19,"tag":78,"props":4496,"children":4497},{"style":85},[4498],{"type":25,"value":602},{"type":19,"tag":78,"props":4500,"children":4501},{"style":91},[4502],{"type":25,"value":3485},{"type":19,"tag":78,"props":4504,"children":4505},{"style":85},[4506],{"type":25,"value":612},{"type":19,"tag":78,"props":4508,"children":4509},{"style":138},[4510],{"type":25,"value":617},{"type":19,"tag":78,"props":4512,"children":4513},{"style":91},[4514],{"type":25,"value":622},{"type":19,"tag":78,"props":4516,"children":4517},{"style":138},[4518],{"type":25,"value":627},{"type":19,"tag":78,"props":4520,"children":4521},{"style":91},[4522],{"type":25,"value":3506},{"type":19,"tag":78,"props":4524,"children":4526},{"class":80,"line":4525},46,[4527,4531],{"type":19,"tag":78,"props":4528,"children":4529},{"style":138},[4530],{"type":25,"value":3560},{"type":19,"tag":78,"props":4532,"children":4533},{"style":91},[4534],{"type":25,"value":3565},{"type":19,"tag":78,"props":4536,"children":4538},{"class":80,"line":4537},47,[4539],{"type":19,"tag":78,"props":4540,"children":4541},{"emptyLinePlaceholder":14},[4542],{"type":25,"value":103},{"type":19,"tag":78,"props":4544,"children":4546},{"class":80,"line":4545},48,[4547],{"type":19,"tag":78,"props":4548,"children":4549},{"emptyLinePlaceholder":14},[4550],{"type":25,"value":103},{"type":19,"tag":78,"props":4552,"children":4554},{"class":80,"line":4553},49,[4555,4559,4563,4567,4571],{"type":19,"tag":78,"props":4556,"children":4557},{"style":85},[4558],{"type":25,"value":253},{"type":19,"tag":78,"props":4560,"children":4561},{"style":138},[4562],{"type":25,"value":258},{"type":19,"tag":78,"props":4564,"children":4565},{"style":85},[4566],{"type":25,"value":263},{"type":19,"tag":78,"props":4568,"children":4569},{"style":266},[4570],{"type":25,"value":269},{"type":19,"tag":78,"props":4572,"children":4573},{"style":91},[4574],{"type":25,"value":146},{"type":19,"tag":78,"props":4576,"children":4578},{"class":80,"line":4577},50,[4579],{"type":19,"tag":78,"props":4580,"children":4581},{"style":91},[4582],{"type":25,"value":282},{"type":19,"tag":78,"props":4584,"children":4586},{"class":80,"line":4585},51,[4587],{"type":19,"tag":78,"props":4588,"children":4589},{"style":1354},[4590],{"type":25,"value":4591},"# ❯ poetry run python main6-2.py\n",{"type":19,"tag":78,"props":4593,"children":4595},{"class":80,"line":4594},52,[4596],{"type":19,"tag":78,"props":4597,"children":4598},{"style":1354},[4599],{"type":25,"value":4600},"# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n",{"type":19,"tag":35,"props":4602,"children":4603},{},[4604,4606,4611,4612,4617],{"type":25,"value":4605},"핵심 로직이라 할 수 있는 ",{"type":19,"tag":28,"props":4607,"children":4609},{"className":4608},[],[4610],{"type":25,"value":2077},{"type":25,"value":46},{"type":19,"tag":28,"props":4613,"children":4615},{"className":4614},[],[4616],{"type":25,"value":3648},{"type":25,"value":4618},"를 수정하지 않고,\n콜백을 사용하여 문제를 해결할 수 있다.",{"type":19,"tag":948,"props":4620,"children":4622},{"id":4621},"future가-필요한-상황",[4623,4628],{"type":19,"tag":28,"props":4624,"children":4626},{"className":4625},[],[4627],{"type":25,"value":1486},{"type":25,"value":2975},{"type":19,"tag":35,"props":4630,"children":4631},{},[4632,4637,4639,4644,4646,4651,4653,4658,4659,4664,4666,4671],{"type":19,"tag":28,"props":4633,"children":4635},{"className":4634},[],[4636],{"type":25,"value":1493},{"type":25,"value":4638},"가 ",{"type":19,"tag":28,"props":4640,"children":4642},{"className":4641},[],[4643],{"type":25,"value":1486},{"type":25,"value":4645},"를 상속받았기에, 대부분의 경우 ",{"type":19,"tag":28,"props":4647,"children":4649},{"className":4648},[],[4650],{"type":25,"value":1493},{"type":25,"value":4652},"에서 문제가 해결된다.\n",{"type":19,"tag":28,"props":4654,"children":4656},{"className":4655},[],[4657],{"type":25,"value":1486},{"type":25,"value":46},{"type":19,"tag":28,"props":4660,"children":4662},{"className":4661},[],[4663],{"type":25,"value":1493},{"type":25,"value":4665},"의 결정적인 차이점은\n",{"type":19,"tag":28,"props":4667,"children":4669},{"className":4668},[],[4670],{"type":25,"value":1486},{"type":25,"value":4672},"는 이벤트루프에 예약되지 않은 상태가 존재한다는 것이다.",{"type":19,"tag":35,"props":4674,"children":4675},{},[4676,4678,4683,4685,4690,4691,4696,4698,4703],{"type":25,"value":4677},"코루틴이 비동기 작업에 대한 정의라면\n",{"type":19,"tag":28,"props":4679,"children":4681},{"className":4680},[],[4682],{"type":25,"value":1493},{"type":25,"value":4684},"는 코루틴의 실재이고,\n",{"type":19,"tag":28,"props":4686,"children":4688},{"className":4687},[],[4689],{"type":25,"value":1486},{"type":25,"value":1536},{"type":19,"tag":28,"props":4692,"children":4694},{"className":4693},[],[4695],{"type":25,"value":1493},{"type":25,"value":4697},"의 선물이다.\n따라서 ",{"type":19,"tag":28,"props":4699,"children":4701},{"className":4700},[],[4702],{"type":25,"value":1486},{"type":25,"value":4704},"를 사용한다면, 비동기 작업이 선언 또는 실행되기 이전에\n콜백을 정의하고 추가하여 제공할 수 있다.",{"type":19,"tag":35,"props":4706,"children":4707},{},[4708,4710,4715,4717,4723],{"type":25,"value":4709},"이러한 방법은 ",{"type":19,"tag":28,"props":4711,"children":4713},{"className":4712},[],[4714],{"type":25,"value":33},{"type":25,"value":4716},"의 내부 함수를 구현하는데 많이 사용되는데,\n그 중 하나인 ",{"type":19,"tag":28,"props":4718,"children":4720},{"className":4719},[],[4721],{"type":25,"value":4722},"wait_for",{"type":25,"value":4724},"를 좀 더 알아보기 쉽게 나타내면 다음과 같다.",{"type":19,"tag":68,"props":4726,"children":4729},{"className":70,"code":4727,"filename":4728,"language":6,"meta":8,"style":8},"from __future__ import annotations\n\nimport asyncio\nimport logging\nimport sys\nfrom functools import partial\nfrom typing import Any, Awaitable\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\ndef release(waiter: asyncio.Future[Any], *args: Any) -> None:\n    if not waiter.done():\n        waiter.set_result(None)\n\n\nasync def cancel(future: asyncio.Future[Any]) -> None:\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future.add_done_callback(callback)\n\n    try:\n        future.cancel()\n        await waiter\n    finally:\n        future.remove_done_callback(callback)\n\n\nasync def wait_for(coro: Awaitable[Any]) -> None:\n    logger.info(\"wait\")\n\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future = asyncio.ensure_future(coro)\n    future.add_done_callback(callback)\n\n    try:\n        await waiter\n    except asyncio.CancelledError:\n        if future.done():\n            return\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise\n\n    if not future.done():\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise RuntimeError\n\n\nasync def test() -> None:\n    logger.info(\"start\")\n    await asyncio.sleep(3)\n    logger.info(\"end\")\n\n\nasync def main() -> None:\n    coro = test()\n    task = asyncio.create_task(coro)\n    await asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main7.py\n# start\n# wait\n# wait\n# wait\n# end\n","main7.py",[4730],{"type":19,"tag":28,"props":4731,"children":4732},{"__ignoreMap":8},[4733,4752,4759,4770,4781,4792,4811,4831,4838,4853,4868,4875,4882,4889,4923,4940,4956,4963,4970,4999,5016,5033,5050,5058,5065,5076,5084,5097,5109,5117,5124,5131,5160,5176,5183,5198,5213,5228,5245,5252,5259,5270,5281,5293,5306,5314,5321,5333,5341,5348,5363,5370,5381,5394,5402,5410,5438,5454,5475,5492,5500,5508,5536,5552,5568,5581,5589,5597,5621,5629,5638,5646,5655,5663,5671],{"type":19,"tag":78,"props":4734,"children":4735},{"class":80,"line":81},[4736,4740,4744,4748],{"type":19,"tag":78,"props":4737,"children":4738},{"style":85},[4739],{"type":25,"value":1091},{"type":19,"tag":78,"props":4741,"children":4742},{"style":138},[4743],{"type":25,"value":2995},{"type":19,"tag":78,"props":4745,"children":4746},{"style":85},[4747],{"type":25,"value":3000},{"type":19,"tag":78,"props":4749,"children":4750},{"style":91},[4751],{"type":25,"value":3005},{"type":19,"tag":78,"props":4753,"children":4754},{"class":80,"line":97},[4755],{"type":19,"tag":78,"props":4756,"children":4757},{"emptyLinePlaceholder":14},[4758],{"type":25,"value":103},{"type":19,"tag":78,"props":4760,"children":4761},{"class":80,"line":106},[4762,4766],{"type":19,"tag":78,"props":4763,"children":4764},{"style":85},[4765],{"type":25,"value":88},{"type":19,"tag":78,"props":4767,"children":4768},{"style":91},[4769],{"type":25,"value":94},{"type":19,"tag":78,"props":4771,"children":4772},{"class":80,"line":114},[4773,4777],{"type":19,"tag":78,"props":4774,"children":4775},{"style":85},[4776],{"type":25,"value":88},{"type":19,"tag":78,"props":4778,"children":4779},{"style":91},[4780],{"type":25,"value":339},{"type":19,"tag":78,"props":4782,"children":4783},{"class":80,"line":149},[4784,4788],{"type":19,"tag":78,"props":4785,"children":4786},{"style":85},[4787],{"type":25,"value":88},{"type":19,"tag":78,"props":4789,"children":4790},{"style":91},[4791],{"type":25,"value":363},{"type":19,"tag":78,"props":4793,"children":4794},{"class":80,"line":173},[4795,4799,4803,4807],{"type":19,"tag":78,"props":4796,"children":4797},{"style":85},[4798],{"type":25,"value":1091},{"type":19,"tag":78,"props":4800,"children":4801},{"style":91},[4802],{"type":25,"value":3763},{"type":19,"tag":78,"props":4804,"children":4805},{"style":85},[4806],{"type":25,"value":88},{"type":19,"tag":78,"props":4808,"children":4809},{"style":91},[4810],{"type":25,"value":3772},{"type":19,"tag":78,"props":4812,"children":4813},{"class":80,"line":181},[4814,4818,4822,4826],{"type":19,"tag":78,"props":4815,"children":4816},{"style":85},[4817],{"type":25,"value":1091},{"type":19,"tag":78,"props":4819,"children":4820},{"style":91},[4821],{"type":25,"value":1096},{"type":19,"tag":78,"props":4823,"children":4824},{"style":85},[4825],{"type":25,"value":88},{"type":19,"tag":78,"props":4827,"children":4828},{"style":91},[4829],{"type":25,"value":4830}," Any, Awaitable\n",{"type":19,"tag":78,"props":4832,"children":4833},{"class":80,"line":189},[4834],{"type":19,"tag":78,"props":4835,"children":4836},{"emptyLinePlaceholder":14},[4837],{"type":25,"value":103},{"type":19,"tag":78,"props":4839,"children":4840},{"class":80,"line":218},[4841,4845,4849],{"type":19,"tag":78,"props":4842,"children":4843},{"style":91},[4844],{"type":25,"value":378},{"type":19,"tag":78,"props":4846,"children":4847},{"style":85},[4848],{"type":25,"value":383},{"type":19,"tag":78,"props":4850,"children":4851},{"style":91},[4852],{"type":25,"value":388},{"type":19,"tag":78,"props":4854,"children":4855},{"class":80,"line":231},[4856,4860,4864],{"type":19,"tag":78,"props":4857,"children":4858},{"style":91},[4859],{"type":25,"value":396},{"type":19,"tag":78,"props":4861,"children":4862},{"style":138},[4863],{"type":25,"value":401},{"type":19,"tag":78,"props":4865,"children":4866},{"style":91},[4867],{"type":25,"value":170},{"type":19,"tag":78,"props":4869,"children":4870},{"class":80,"line":239},[4871],{"type":19,"tag":78,"props":4872,"children":4873},{"style":91},[4874],{"type":25,"value":413},{"type":19,"tag":78,"props":4876,"children":4877},{"class":80,"line":247},[4878],{"type":19,"tag":78,"props":4879,"children":4880},{"emptyLinePlaceholder":14},[4881],{"type":25,"value":103},{"type":19,"tag":78,"props":4883,"children":4884},{"class":80,"line":276},[4885],{"type":19,"tag":78,"props":4886,"children":4887},{"emptyLinePlaceholder":14},[4888],{"type":25,"value":103},{"type":19,"tag":78,"props":4890,"children":4891},{"class":80,"line":508},[4892,4896,4901,4906,4910,4915,4919],{"type":19,"tag":78,"props":4893,"children":4894},{"style":85},[4895],{"type":25,"value":4124},{"type":19,"tag":78,"props":4897,"children":4898},{"style":127},[4899],{"type":25,"value":4900}," release",{"type":19,"tag":78,"props":4902,"children":4903},{"style":91},[4904],{"type":25,"value":4905},"(waiter: asyncio.Future[Any], ",{"type":19,"tag":78,"props":4907,"children":4908},{"style":85},[4909],{"type":25,"value":592},{"type":19,"tag":78,"props":4911,"children":4912},{"style":91},[4913],{"type":25,"value":4914},"args: Any) -> ",{"type":19,"tag":78,"props":4916,"children":4917},{"style":138},[4918],{"type":25,"value":141},{"type":19,"tag":78,"props":4920,"children":4921},{"style":91},[4922],{"type":25,"value":146},{"type":19,"tag":78,"props":4924,"children":4925},{"class":80,"line":533},[4926,4930,4935],{"type":19,"tag":78,"props":4927,"children":4928},{"style":85},[4929],{"type":25,"value":3191},{"type":19,"tag":78,"props":4931,"children":4932},{"style":85},[4933],{"type":25,"value":4934}," not",{"type":19,"tag":78,"props":4936,"children":4937},{"style":91},[4938],{"type":25,"value":4939}," waiter.done():\n",{"type":19,"tag":78,"props":4941,"children":4942},{"class":80,"line":541},[4943,4948,4952],{"type":19,"tag":78,"props":4944,"children":4945},{"style":91},[4946],{"type":25,"value":4947},"        waiter.set_result(",{"type":19,"tag":78,"props":4949,"children":4950},{"style":138},[4951],{"type":25,"value":141},{"type":19,"tag":78,"props":4953,"children":4954},{"style":91},[4955],{"type":25,"value":170},{"type":19,"tag":78,"props":4957,"children":4958},{"class":80,"line":549},[4959],{"type":19,"tag":78,"props":4960,"children":4961},{"emptyLinePlaceholder":14},[4962],{"type":25,"value":103},{"type":19,"tag":78,"props":4964,"children":4965},{"class":80,"line":577},[4966],{"type":19,"tag":78,"props":4967,"children":4968},{"emptyLinePlaceholder":14},[4969],{"type":25,"value":103},{"type":19,"tag":78,"props":4971,"children":4972},{"class":80,"line":635},[4973,4977,4981,4986,4991,4995],{"type":19,"tag":78,"props":4974,"children":4975},{"style":85},[4976],{"type":25,"value":12},{"type":19,"tag":78,"props":4978,"children":4979},{"style":85},[4980],{"type":25,"value":124},{"type":19,"tag":78,"props":4982,"children":4983},{"style":127},[4984],{"type":25,"value":4985}," cancel",{"type":19,"tag":78,"props":4987,"children":4988},{"style":91},[4989],{"type":25,"value":4990},"(future: asyncio.Future[Any]) -> ",{"type":19,"tag":78,"props":4992,"children":4993},{"style":138},[4994],{"type":25,"value":141},{"type":19,"tag":78,"props":4996,"children":4997},{"style":91},[4998],{"type":25,"value":146},{"type":19,"tag":78,"props":5000,"children":5001},{"class":80,"line":643},[5002,5007,5011],{"type":19,"tag":78,"props":5003,"children":5004},{"style":91},[5005],{"type":25,"value":5006},"    loop ",{"type":19,"tag":78,"props":5008,"children":5009},{"style":85},[5010],{"type":25,"value":383},{"type":19,"tag":78,"props":5012,"children":5013},{"style":91},[5014],{"type":25,"value":5015}," asyncio.get_running_loop()\n",{"type":19,"tag":78,"props":5017,"children":5018},{"class":80,"line":651},[5019,5024,5028],{"type":19,"tag":78,"props":5020,"children":5021},{"style":91},[5022],{"type":25,"value":5023},"    waiter ",{"type":19,"tag":78,"props":5025,"children":5026},{"style":85},[5027],{"type":25,"value":383},{"type":19,"tag":78,"props":5029,"children":5030},{"style":91},[5031],{"type":25,"value":5032}," loop.create_future()\n",{"type":19,"tag":78,"props":5034,"children":5035},{"class":80,"line":675},[5036,5041,5045],{"type":19,"tag":78,"props":5037,"children":5038},{"style":91},[5039],{"type":25,"value":5040},"    callback ",{"type":19,"tag":78,"props":5042,"children":5043},{"style":85},[5044],{"type":25,"value":383},{"type":19,"tag":78,"props":5046,"children":5047},{"style":91},[5048],{"type":25,"value":5049}," partial(release, waiter)\n",{"type":19,"tag":78,"props":5051,"children":5052},{"class":80,"line":1376},[5053],{"type":19,"tag":78,"props":5054,"children":5055},{"style":91},[5056],{"type":25,"value":5057},"    future.add_done_callback(callback)\n",{"type":19,"tag":78,"props":5059,"children":5060},{"class":80,"line":1385},[5061],{"type":19,"tag":78,"props":5062,"children":5063},{"emptyLinePlaceholder":14},[5064],{"type":25,"value":103},{"type":19,"tag":78,"props":5066,"children":5067},{"class":80,"line":1394},[5068,5072],{"type":19,"tag":78,"props":5069,"children":5070},{"style":85},[5071],{"type":25,"value":3348},{"type":19,"tag":78,"props":5073,"children":5074},{"style":91},[5075],{"type":25,"value":146},{"type":19,"tag":78,"props":5077,"children":5078},{"class":80,"line":2006},[5079],{"type":19,"tag":78,"props":5080,"children":5081},{"style":91},[5082],{"type":25,"value":5083},"        future.cancel()\n",{"type":19,"tag":78,"props":5085,"children":5086},{"class":80,"line":2015},[5087,5092],{"type":19,"tag":78,"props":5088,"children":5089},{"style":85},[5090],{"type":25,"value":5091},"        await",{"type":19,"tag":78,"props":5093,"children":5094},{"style":91},[5095],{"type":25,"value":5096}," waiter\n",{"type":19,"tag":78,"props":5098,"children":5099},{"class":80,"line":2024},[5100,5105],{"type":19,"tag":78,"props":5101,"children":5102},{"style":85},[5103],{"type":25,"value":5104},"    finally",{"type":19,"tag":78,"props":5106,"children":5107},{"style":91},[5108],{"type":25,"value":146},{"type":19,"tag":78,"props":5110,"children":5111},{"class":80,"line":2033},[5112],{"type":19,"tag":78,"props":5113,"children":5114},{"style":91},[5115],{"type":25,"value":5116},"        future.remove_done_callback(callback)\n",{"type":19,"tag":78,"props":5118,"children":5119},{"class":80,"line":2042},[5120],{"type":19,"tag":78,"props":5121,"children":5122},{"emptyLinePlaceholder":14},[5123],{"type":25,"value":103},{"type":19,"tag":78,"props":5125,"children":5126},{"class":80,"line":2718},[5127],{"type":19,"tag":78,"props":5128,"children":5129},{"emptyLinePlaceholder":14},[5130],{"type":25,"value":103},{"type":19,"tag":78,"props":5132,"children":5133},{"class":80,"line":2740},[5134,5138,5142,5147,5152,5156],{"type":19,"tag":78,"props":5135,"children":5136},{"style":85},[5137],{"type":25,"value":12},{"type":19,"tag":78,"props":5139,"children":5140},{"style":85},[5141],{"type":25,"value":124},{"type":19,"tag":78,"props":5143,"children":5144},{"style":127},[5145],{"type":25,"value":5146}," wait_for",{"type":19,"tag":78,"props":5148,"children":5149},{"style":91},[5150],{"type":25,"value":5151},"(coro: Awaitable[Any]) -> ",{"type":19,"tag":78,"props":5153,"children":5154},{"style":138},[5155],{"type":25,"value":141},{"type":19,"tag":78,"props":5157,"children":5158},{"style":91},[5159],{"type":25,"value":146},{"type":19,"tag":78,"props":5161,"children":5162},{"class":80,"line":2785},[5163,5167,5172],{"type":19,"tag":78,"props":5164,"children":5165},{"style":91},[5166],{"type":25,"value":473},{"type":19,"tag":78,"props":5168,"children":5169},{"style":266},[5170],{"type":25,"value":5171},"\"wait\"",{"type":19,"tag":78,"props":5173,"children":5174},{"style":91},[5175],{"type":25,"value":170},{"type":19,"tag":78,"props":5177,"children":5178},{"class":80,"line":2793},[5179],{"type":19,"tag":78,"props":5180,"children":5181},{"emptyLinePlaceholder":14},[5182],{"type":25,"value":103},{"type":19,"tag":78,"props":5184,"children":5185},{"class":80,"line":2801},[5186,5190,5194],{"type":19,"tag":78,"props":5187,"children":5188},{"style":91},[5189],{"type":25,"value":5006},{"type":19,"tag":78,"props":5191,"children":5192},{"style":85},[5193],{"type":25,"value":383},{"type":19,"tag":78,"props":5195,"children":5196},{"style":91},[5197],{"type":25,"value":5015},{"type":19,"tag":78,"props":5199,"children":5200},{"class":80,"line":2825},[5201,5205,5209],{"type":19,"tag":78,"props":5202,"children":5203},{"style":91},[5204],{"type":25,"value":5023},{"type":19,"tag":78,"props":5206,"children":5207},{"style":85},[5208],{"type":25,"value":383},{"type":19,"tag":78,"props":5210,"children":5211},{"style":91},[5212],{"type":25,"value":5032},{"type":19,"tag":78,"props":5214,"children":5215},{"class":80,"line":2833},[5216,5220,5224],{"type":19,"tag":78,"props":5217,"children":5218},{"style":91},[5219],{"type":25,"value":5040},{"type":19,"tag":78,"props":5221,"children":5222},{"style":85},[5223],{"type":25,"value":383},{"type":19,"tag":78,"props":5225,"children":5226},{"style":91},[5227],{"type":25,"value":5049},{"type":19,"tag":78,"props":5229,"children":5230},{"class":80,"line":2842},[5231,5236,5240],{"type":19,"tag":78,"props":5232,"children":5233},{"style":91},[5234],{"type":25,"value":5235},"    future ",{"type":19,"tag":78,"props":5237,"children":5238},{"style":85},[5239],{"type":25,"value":383},{"type":19,"tag":78,"props":5241,"children":5242},{"style":91},[5243],{"type":25,"value":5244}," asyncio.ensure_future(coro)\n",{"type":19,"tag":78,"props":5246,"children":5247},{"class":80,"line":2851},[5248],{"type":19,"tag":78,"props":5249,"children":5250},{"style":91},[5251],{"type":25,"value":5057},{"type":19,"tag":78,"props":5253,"children":5254},{"class":80,"line":2860},[5255],{"type":19,"tag":78,"props":5256,"children":5257},{"emptyLinePlaceholder":14},[5258],{"type":25,"value":103},{"type":19,"tag":78,"props":5260,"children":5261},{"class":80,"line":2869},[5262,5266],{"type":19,"tag":78,"props":5263,"children":5264},{"style":85},[5265],{"type":25,"value":3348},{"type":19,"tag":78,"props":5267,"children":5268},{"style":91},[5269],{"type":25,"value":146},{"type":19,"tag":78,"props":5271,"children":5272},{"class":80,"line":2878},[5273,5277],{"type":19,"tag":78,"props":5274,"children":5275},{"style":85},[5276],{"type":25,"value":5091},{"type":19,"tag":78,"props":5278,"children":5279},{"style":91},[5280],{"type":25,"value":5096},{"type":19,"tag":78,"props":5282,"children":5283},{"class":80,"line":4433},[5284,5288],{"type":19,"tag":78,"props":5285,"children":5286},{"style":85},[5287],{"type":25,"value":3376},{"type":19,"tag":78,"props":5289,"children":5290},{"style":91},[5291],{"type":25,"value":5292}," asyncio.CancelledError:\n",{"type":19,"tag":78,"props":5294,"children":5295},{"class":80,"line":4441},[5296,5301],{"type":19,"tag":78,"props":5297,"children":5298},{"style":85},[5299],{"type":25,"value":5300},"        if",{"type":19,"tag":78,"props":5302,"children":5303},{"style":91},[5304],{"type":25,"value":5305}," future.done():\n",{"type":19,"tag":78,"props":5307,"children":5308},{"class":80,"line":4480},[5309],{"type":19,"tag":78,"props":5310,"children":5311},{"style":85},[5312],{"type":25,"value":5313},"            return\n",{"type":19,"tag":78,"props":5315,"children":5316},{"class":80,"line":4525},[5317],{"type":19,"tag":78,"props":5318,"children":5319},{"style":91},[5320],{"type":25,"value":5116},{"type":19,"tag":78,"props":5322,"children":5323},{"class":80,"line":4537},[5324,5328],{"type":19,"tag":78,"props":5325,"children":5326},{"style":85},[5327],{"type":25,"value":5091},{"type":19,"tag":78,"props":5329,"children":5330},{"style":91},[5331],{"type":25,"value":5332}," cancel(future)\n",{"type":19,"tag":78,"props":5334,"children":5335},{"class":80,"line":4545},[5336],{"type":19,"tag":78,"props":5337,"children":5338},{"style":85},[5339],{"type":25,"value":5340},"        raise\n",{"type":19,"tag":78,"props":5342,"children":5343},{"class":80,"line":4553},[5344],{"type":19,"tag":78,"props":5345,"children":5346},{"emptyLinePlaceholder":14},[5347],{"type":25,"value":103},{"type":19,"tag":78,"props":5349,"children":5350},{"class":80,"line":4577},[5351,5355,5359],{"type":19,"tag":78,"props":5352,"children":5353},{"style":85},[5354],{"type":25,"value":3191},{"type":19,"tag":78,"props":5356,"children":5357},{"style":85},[5358],{"type":25,"value":4934},{"type":19,"tag":78,"props":5360,"children":5361},{"style":91},[5362],{"type":25,"value":5305},{"type":19,"tag":78,"props":5364,"children":5365},{"class":80,"line":4585},[5366],{"type":19,"tag":78,"props":5367,"children":5368},{"style":91},[5369],{"type":25,"value":5116},{"type":19,"tag":78,"props":5371,"children":5372},{"class":80,"line":4594},[5373,5377],{"type":19,"tag":78,"props":5374,"children":5375},{"style":85},[5376],{"type":25,"value":5091},{"type":19,"tag":78,"props":5378,"children":5379},{"style":91},[5380],{"type":25,"value":5332},{"type":19,"tag":78,"props":5382,"children":5384},{"class":80,"line":5383},53,[5385,5389],{"type":19,"tag":78,"props":5386,"children":5387},{"style":85},[5388],{"type":25,"value":3256},{"type":19,"tag":78,"props":5390,"children":5391},{"style":138},[5392],{"type":25,"value":5393}," RuntimeError\n",{"type":19,"tag":78,"props":5395,"children":5397},{"class":80,"line":5396},54,[5398],{"type":19,"tag":78,"props":5399,"children":5400},{"emptyLinePlaceholder":14},[5401],{"type":25,"value":103},{"type":19,"tag":78,"props":5403,"children":5405},{"class":80,"line":5404},55,[5406],{"type":19,"tag":78,"props":5407,"children":5408},{"emptyLinePlaceholder":14},[5409],{"type":25,"value":103},{"type":19,"tag":78,"props":5411,"children":5413},{"class":80,"line":5412},56,[5414,5418,5422,5426,5430,5434],{"type":19,"tag":78,"props":5415,"children":5416},{"style":85},[5417],{"type":25,"value":12},{"type":19,"tag":78,"props":5419,"children":5420},{"style":85},[5421],{"type":25,"value":124},{"type":19,"tag":78,"props":5423,"children":5424},{"style":127},[5425],{"type":25,"value":130},{"type":19,"tag":78,"props":5427,"children":5428},{"style":91},[5429],{"type":25,"value":135},{"type":19,"tag":78,"props":5431,"children":5432},{"style":138},[5433],{"type":25,"value":141},{"type":19,"tag":78,"props":5435,"children":5436},{"style":91},[5437],{"type":25,"value":146},{"type":19,"tag":78,"props":5439,"children":5441},{"class":80,"line":5440},57,[5442,5446,5450],{"type":19,"tag":78,"props":5443,"children":5444},{"style":91},[5445],{"type":25,"value":473},{"type":19,"tag":78,"props":5447,"children":5448},{"style":266},[5449],{"type":25,"value":1794},{"type":19,"tag":78,"props":5451,"children":5452},{"style":91},[5453],{"type":25,"value":170},{"type":19,"tag":78,"props":5455,"children":5457},{"class":80,"line":5456},58,[5458,5462,5466,5471],{"type":19,"tag":78,"props":5459,"children":5460},{"style":85},[5461],{"type":25,"value":155},{"type":19,"tag":78,"props":5463,"children":5464},{"style":91},[5465],{"type":25,"value":160},{"type":19,"tag":78,"props":5467,"children":5468},{"style":138},[5469],{"type":25,"value":5470},"3",{"type":19,"tag":78,"props":5472,"children":5473},{"style":91},[5474],{"type":25,"value":170},{"type":19,"tag":78,"props":5476,"children":5478},{"class":80,"line":5477},59,[5479,5483,5488],{"type":19,"tag":78,"props":5480,"children":5481},{"style":91},[5482],{"type":25,"value":473},{"type":19,"tag":78,"props":5484,"children":5485},{"style":266},[5486],{"type":25,"value":5487},"\"end\"",{"type":19,"tag":78,"props":5489,"children":5490},{"style":91},[5491],{"type":25,"value":170},{"type":19,"tag":78,"props":5493,"children":5495},{"class":80,"line":5494},60,[5496],{"type":19,"tag":78,"props":5497,"children":5498},{"emptyLinePlaceholder":14},[5499],{"type":25,"value":103},{"type":19,"tag":78,"props":5501,"children":5503},{"class":80,"line":5502},61,[5504],{"type":19,"tag":78,"props":5505,"children":5506},{"emptyLinePlaceholder":14},[5507],{"type":25,"value":103},{"type":19,"tag":78,"props":5509,"children":5511},{"class":80,"line":5510},62,[5512,5516,5520,5524,5528,5532],{"type":19,"tag":78,"props":5513,"children":5514},{"style":85},[5515],{"type":25,"value":12},{"type":19,"tag":78,"props":5517,"children":5518},{"style":85},[5519],{"type":25,"value":124},{"type":19,"tag":78,"props":5521,"children":5522},{"style":127},[5523],{"type":25,"value":203},{"type":19,"tag":78,"props":5525,"children":5526},{"style":91},[5527],{"type":25,"value":135},{"type":19,"tag":78,"props":5529,"children":5530},{"style":138},[5531],{"type":25,"value":141},{"type":19,"tag":78,"props":5533,"children":5534},{"style":91},[5535],{"type":25,"value":146},{"type":19,"tag":78,"props":5537,"children":5539},{"class":80,"line":5538},63,[5540,5544,5548],{"type":19,"tag":78,"props":5541,"children":5542},{"style":91},[5543],{"type":25,"value":1882},{"type":19,"tag":78,"props":5545,"children":5546},{"style":85},[5547],{"type":25,"value":383},{"type":19,"tag":78,"props":5549,"children":5550},{"style":91},[5551],{"type":25,"value":228},{"type":19,"tag":78,"props":5553,"children":5555},{"class":80,"line":5554},64,[5556,5560,5564],{"type":19,"tag":78,"props":5557,"children":5558},{"style":91},[5559],{"type":25,"value":2560},{"type":19,"tag":78,"props":5561,"children":5562},{"style":85},[5563],{"type":25,"value":383},{"type":19,"tag":78,"props":5565,"children":5566},{"style":91},[5567],{"type":25,"value":1907},{"type":19,"tag":78,"props":5569,"children":5571},{"class":80,"line":5570},65,[5572,5576],{"type":19,"tag":78,"props":5573,"children":5574},{"style":85},[5575],{"type":25,"value":155},{"type":19,"tag":78,"props":5577,"children":5578},{"style":91},[5579],{"type":25,"value":5580}," asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n",{"type":19,"tag":78,"props":5582,"children":5584},{"class":80,"line":5583},66,[5585],{"type":19,"tag":78,"props":5586,"children":5587},{"emptyLinePlaceholder":14},[5588],{"type":25,"value":103},{"type":19,"tag":78,"props":5590,"children":5592},{"class":80,"line":5591},67,[5593],{"type":19,"tag":78,"props":5594,"children":5595},{"emptyLinePlaceholder":14},[5596],{"type":25,"value":103},{"type":19,"tag":78,"props":5598,"children":5600},{"class":80,"line":5599},68,[5601,5605,5609,5613,5617],{"type":19,"tag":78,"props":5602,"children":5603},{"style":85},[5604],{"type":25,"value":253},{"type":19,"tag":78,"props":5606,"children":5607},{"style":138},[5608],{"type":25,"value":258},{"type":19,"tag":78,"props":5610,"children":5611},{"style":85},[5612],{"type":25,"value":263},{"type":19,"tag":78,"props":5614,"children":5615},{"style":266},[5616],{"type":25,"value":269},{"type":19,"tag":78,"props":5618,"children":5619},{"style":91},[5620],{"type":25,"value":146},{"type":19,"tag":78,"props":5622,"children":5624},{"class":80,"line":5623},69,[5625],{"type":19,"tag":78,"props":5626,"children":5627},{"style":91},[5628],{"type":25,"value":282},{"type":19,"tag":78,"props":5630,"children":5632},{"class":80,"line":5631},70,[5633],{"type":19,"tag":78,"props":5634,"children":5635},{"style":1354},[5636],{"type":25,"value":5637},"# ❯ poetry run python main7.py\n",{"type":19,"tag":78,"props":5639,"children":5641},{"class":80,"line":5640},71,[5642],{"type":19,"tag":78,"props":5643,"children":5644},{"style":1354},[5645],{"type":25,"value":2857},{"type":19,"tag":78,"props":5647,"children":5649},{"class":80,"line":5648},72,[5650],{"type":19,"tag":78,"props":5651,"children":5652},{"style":1354},[5653],{"type":25,"value":5654},"# wait\n",{"type":19,"tag":78,"props":5656,"children":5658},{"class":80,"line":5657},73,[5659],{"type":19,"tag":78,"props":5660,"children":5661},{"style":1354},[5662],{"type":25,"value":5654},{"type":19,"tag":78,"props":5664,"children":5666},{"class":80,"line":5665},74,[5667],{"type":19,"tag":78,"props":5668,"children":5669},{"style":1354},[5670],{"type":25,"value":5654},{"type":19,"tag":78,"props":5672,"children":5674},{"class":80,"line":5673},75,[5675],{"type":19,"tag":78,"props":5676,"children":5677},{"style":1354},[5678],{"type":25,"value":5679},"# end\n",{"type":19,"tag":35,"props":5681,"children":5682},{},[5683,5688,5690,5695,5697,5703],{"type":19,"tag":28,"props":5684,"children":5686},{"className":5685},[],[5687],{"type":25,"value":4722},{"type":25,"value":5689},"의 실제 구현은 더 정교하지만, 읽기 쉽도록 일부 코드를 수정했다.\n위와 같은 형태로 ",{"type":19,"tag":28,"props":5691,"children":5693},{"className":5692},[],[5694],{"type":25,"value":4722},{"type":25,"value":5696},"를 사용하지 않는다면, ",{"type":19,"tag":28,"props":5698,"children":5700},{"className":5699},[],[5701],{"type":25,"value":5702},"task",{"type":25,"value":5704},"를 2번 이상 실행하게 되고,\n동일한 코루틴을 2번 이상 실행할 수 없다는 에러가 발생한다.",{"type":19,"tag":20,"props":5706,"children":5708},{"id":5707},"요약하자면",[5709],{"type":25,"value":5707},{"type":19,"tag":2101,"props":5711,"children":5712},{},[5713,5736,5759],{"type":19,"tag":2105,"props":5714,"children":5715},{},[5716,5721,5722,5727,5729,5734],{"type":19,"tag":28,"props":5717,"children":5719},{"className":5718},[],[5720],{"type":25,"value":12},{"type":25,"value":971},{"type":19,"tag":28,"props":5723,"children":5725},{"className":5724},[],[5726],{"type":25,"value":52},{"type":25,"value":5728}," 키워드로 비동기 함수를 정의하여 코루틴을 생성하고,\n",{"type":19,"tag":28,"props":5730,"children":5732},{"className":5731},[],[5733],{"type":25,"value":293},{"type":25,"value":5735},"으로 실행한다.",{"type":19,"tag":2105,"props":5737,"children":5738},{},[5739,5744,5745,5750,5752,5757],{"type":19,"tag":28,"props":5740,"children":5742},{"className":5741},[],[5743],{"type":25,"value":1629},{"type":25,"value":1529},{"type":19,"tag":28,"props":5746,"children":5748},{"className":5747},[],[5749],{"type":25,"value":1636},{"type":25,"value":5751},"와 비슷한 객체는 ",{"type":19,"tag":28,"props":5753,"children":5755},{"className":5754},[],[5756],{"type":25,"value":1493},{"type":25,"value":5758},"다.",{"type":19,"tag":2105,"props":5760,"children":5761},{},[5762,5767],{"type":19,"tag":28,"props":5763,"children":5765},{"className":5764},[],[5766],{"type":25,"value":1486},{"type":25,"value":5768},"를 사용하면 콜백을 활용할 수 있다.",{"type":19,"tag":948,"props":5770,"children":5772},{"id":5771},"추가하자면",[5773],{"type":25,"value":5771},{"type":19,"tag":35,"props":5775,"children":5776},{},[5777,5779,5784,5786,5791],{"type":25,"value":5778},"기본 라이브러리인 ",{"type":19,"tag":28,"props":5780,"children":5782},{"className":5781},[],[5783],{"type":25,"value":33},{"type":25,"value":5785}," 위주로 작성된 글이지만,\n비동기 라이브러리는 ",{"type":19,"tag":28,"props":5787,"children":5789},{"className":5788},[],[5790],{"type":25,"value":33},{"type":25,"value":5792},"만이 있는 것은 아니다.",{"type":19,"tag":35,"props":5794,"children":5795},{},[5796,5802,5804,5810,5811,5817,5819,5824,5826,5831,5833,5839],{"type":19,"tag":28,"props":5797,"children":5799},{"className":5798},[],[5800],{"type":25,"value":5801},"twisted",{"type":25,"value":5803},"나 ",{"type":19,"tag":28,"props":5805,"children":5807},{"className":5806},[],[5808],{"type":25,"value":5809},"curio",{"type":25,"value":971},{"type":19,"tag":28,"props":5812,"children":5814},{"className":5813},[],[5815],{"type":25,"value":5816},"trio",{"type":25,"value":5818},"등이 있으며,\n",{"type":19,"tag":28,"props":5820,"children":5822},{"className":5821},[],[5823],{"type":25,"value":5816},{"type":25,"value":5825},"의 로직을 ",{"type":19,"tag":28,"props":5827,"children":5829},{"className":5828},[],[5830],{"type":25,"value":33},{"type":25,"value":5832},"에 적용한 ",{"type":19,"tag":28,"props":5834,"children":5836},{"className":5835},[],[5837],{"type":25,"value":5838},"anyio",{"type":25,"value":5840},"도 있다.",{"type":19,"tag":5842,"props":5843,"children":5844},"blockquote",{},[5845,5868,5887],{"type":19,"tag":35,"props":5846,"children":5847},{},[5848,5853,5855,5860,5861,5866],{"type":19,"tag":28,"props":5849,"children":5851},{"className":5850},[],[5852],{"type":25,"value":5838},{"type":25,"value":5854},"를 사용하면 비동기 로직 구현 후,\n",{"type":19,"tag":28,"props":5856,"children":5858},{"className":5857},[],[5859],{"type":25,"value":33},{"type":25,"value":46},{"type":19,"tag":28,"props":5862,"children":5864},{"className":5863},[],[5865],{"type":25,"value":5816},{"type":25,"value":5867},"중 어떤 것이든 선택하여 사용할 수 있다.",{"type":19,"tag":35,"props":5869,"children":5870},{},[5871,5873,5878,5880,5885],{"type":25,"value":5872},"2.x에서는 ",{"type":19,"tag":28,"props":5874,"children":5876},{"className":5875},[],[5877],{"type":25,"value":5809},{"type":25,"value":5879},"도 지원했지만,\n",{"type":19,"tag":28,"props":5881,"children":5883},{"className":5882},[],[5884],{"type":25,"value":5809},{"type":25,"value":5886},"의 구현 방식에 따른 개발에 어려움이 있어서 3.x부터 제외됐다.",{"type":19,"tag":35,"props":5888,"children":5889},{},[5890,5895,5896,5901,5903,5909,5911,5916],{"type":19,"tag":28,"props":5891,"children":5893},{"className":5892},[],[5894],{"type":25,"value":5801},{"type":25,"value":1536},{"type":19,"tag":28,"props":5897,"children":5899},{"className":5898},[],[5900],{"type":25,"value":5838},{"type":25,"value":5902},"에서 사용하는 ",{"type":19,"tag":28,"props":5904,"children":5906},{"className":5905},[],[5907],{"type":25,"value":5908},"sniffio",{"type":25,"value":5910},"에서 지원하지 않아서\n",{"type":19,"tag":28,"props":5912,"children":5914},{"className":5913},[],[5915],{"type":25,"value":5838},{"type":25,"value":5917},"에서도 지원하지 않는다.",{"type":19,"tag":35,"props":5919,"children":5920},{},[5921,5923,5928,5929,5934,5935,5940],{"type":25,"value":5922},"모든 라이브러리는 코루틴에 대해서는 공유하지만,\n",{"type":19,"tag":28,"props":5924,"children":5926},{"className":5925},[],[5927],{"type":25,"value":1486},{"type":25,"value":46},{"type":19,"tag":28,"props":5930,"children":5932},{"className":5931},[],[5933],{"type":25,"value":1493},{"type":25,"value":1536},{"type":19,"tag":28,"props":5936,"children":5938},{"className":5937},[],[5939],{"type":25,"value":33},{"type":25,"value":5941},"에 정의된 객체이므로,\n따로 정의한 객체를 사용할 수 있다.\n따라서 만약 다른 라이브러리를 사용한다면,\n그 라이브러리에 맞는 방법을 잘 알아보고 사용해야 한다.",{"type":19,"tag":35,"props":5943,"children":5944},{},[5945,5947,5952,5954,5960,5962,5968,5970,5975,5977,5982,5984,5990,5992,5997],{"type":25,"value":5946},"나는 ",{"type":19,"tag":28,"props":5948,"children":5950},{"className":5949},[],[5951],{"type":25,"value":5838},{"type":25,"value":5953},"를 주로 사용하는데,\n",{"type":19,"tag":28,"props":5955,"children":5957},{"className":5956},[],[5958],{"type":25,"value":5959},"TaskGroup",{"type":25,"value":5961},"과 ",{"type":19,"tag":28,"props":5963,"children":5965},{"className":5964},[],[5966],{"type":25,"value":5967},"CancelScope",{"type":25,"value":5969},"가 마음에 들었기 때문이다.\n특히 이 ",{"type":19,"tag":28,"props":5971,"children":5973},{"className":5972},[],[5974],{"type":25,"value":5959},{"type":25,"value":5976},"은 3.11부터는 ",{"type":19,"tag":28,"props":5978,"children":5980},{"className":5979},[],[5981],{"type":25,"value":33},{"type":25,"value":5983},"에 적용된 개념이기도 하니,\n만약 3.11이상의 버전을 사용한다면 ",{"type":19,"tag":28,"props":5985,"children":5987},{"className":5986},[],[5988],{"type":25,"value":5989},"gather",{"type":25,"value":5991}," 대신 ",{"type":19,"tag":28,"props":5993,"children":5995},{"className":5994},[],[5996],{"type":25,"value":5959},{"type":25,"value":5998},"을 사용하자.",{"type":19,"tag":35,"props":6000,"children":6001},{},[6002,6003,6008,6010,6019],{"type":25,"value":953},{"type":19,"tag":28,"props":6004,"children":6006},{"className":6005},[],[6007],{"type":25,"value":5959},{"type":25,"value":6009},"이 좋은지, 왜 사용해야 하는지는\n",{"type":19,"tag":6011,"props":6012,"children":6016},"a",{"href":6013,"rel":6014},"https://blog.lablup.com/posts/2022/03/29/PersistentTaskGroup/",[6015],"nofollow",[6017],{"type":25,"value":6018},"이 글",{"type":25,"value":6020},"에서 상세하게 설명해준다.",{"type":19,"tag":6022,"props":6023,"children":6024},"style",{},[6025],{"type":25,"value":6026},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":8,"searchDepth":149,"depth":149,"links":6028},[6029,6034,6041,6048],{"id":22,"depth":97,"text":6030,"children":6031},"파이썬의 비동기 라이브러리 asyncio",[6032],{"id":950,"depth":106,"text":6033},"왜 asyncio.run을 실행해야 하는가",{"id":1006,"depth":97,"text":6035,"children":6036},"대기할 수 있는 Awaitable객체",[6037,6039],{"id":1511,"depth":106,"text":6038},"콜백 형태의 Future",{"id":1581,"depth":106,"text":6040},"Future를 상속받는 Task",{"id":2934,"depth":97,"text":6042,"children":6043},"Future와 Task는 언제 사용할까",[6044,6046],{"id":2967,"depth":106,"text":6045},"Task가 필요한 상황",{"id":4621,"depth":106,"text":6047},"Future가 필요한 상황",{"id":5707,"depth":97,"text":5707,"children":6049},[6050],{"id":5771,"depth":106,"text":5771},"markdown","content:python:async.md","content","python/async.md","python/async","md",[6058,6062],{"_path":6059,"title":6060,"description":6061},"/python/airflow1","새로운 문법으로 Airflow DAG 생성하기","TaskFlow API를 사용하자",{"_path":6063,"title":6064,"description":6065},"/python/pep_695","더 편한 타입 힌트를 위한 PEP695","python 3.12에 새롭게 추가/변경되는 문법",1725258570783]