export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE){return {data:{"selected_data_with_surround_/python/async":{article:{_path:"\u002Fpython\u002Fasync",_dir:J,_draft:aH,_partial:aH,_locale:K,_empty:aH,title:"python의 비동기에 대한 얕은 이해",description:"코드 중심으로 알아보는 비동기",tags:[J,t],date:"2023-07-31T09:51:28.303Z",publish:true,body:{type:"root",children:[{type:a,tag:am,props:{id:bf},children:[{type:b,value:"파이썬의 비동기 라이브러리 "},{type:a,tag:h,props:{},children:[{type:b,value:L}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"파이썬에서 비동기를 객체를 생성하는 가장 간단한 방법은 "},{type:a,tag:h,props:{},children:[{type:b,value:t}]},{type:b,value:S},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:"키워드를 사용하는 것이다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"이를 위해 기본 라이브러리로 제공되는 "},{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:"를 사용하자."}]},{type:a,tag:z,props:{code:"import asyncio\n\n\nasync def test() -\u003E None:\n    await asyncio.sleep(1)\n\n\nasync def main() -\u003E None:\n    await test()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n",filename:"main.py",language:J,meta:"[main.py]"},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:T}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:an}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:X}]}]}]}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"동기 함수와는 다르게 "},{type:a,tag:h,props:{},children:[{type:b,value:ac}]},{type:b,value:"함수로 "},{type:a,tag:h,props:{},children:[{type:b,value:"main()"}]},{type:b,value:" 코루틴을 실행하는 형태로 구성된다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"정말로 비동기로 작동하는지 확인하기 위해, 다음과 같이 새로 작성한 코드를 실행해보자."}]},{type:a,tag:z,props:{code:"import asyncio\nimport logging\nimport random\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test(x: int) -\u003E None:\n    logger.info(\"start: %d\", x)\n    await asyncio.sleep(random.random())\n    logger.info(\"end: %d\", x)\n\n\nasync def main() -\u003E None:\n    await asyncio.gather(*(test(x) for x in range(10)))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n",filename:bg,language:J,meta:"[main2.py]"},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:T}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ao}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aI}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ap}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:au}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(x: "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aJ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:"\"start: "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bh}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bi}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" asyncio.sleep(random.random())"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:"\"end: "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bh}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bi}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(test(x) "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" x "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:")))"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:X}]}]}]}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"여기서 사용된 "},{type:a,tag:h,props:{},children:[{type:b,value:"asyncio.gather"}]},{type:b,value:"는 여러개의 코루틴을 동시에 대기할 수 있도록 한다."}]},{type:a,tag:bj,props:{type:aL},children:[{type:a,tag:k,props:{},children:[{type:b,value:"3.11부터는 TaskGroup을 사용할 것을 권장한다."}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"위 스크립트를 실행하면, 다음과 같이 비동기로 실행되는 것을 확인할 수 있다."}]},{type:a,tag:z,props:{code:"❯ poetry run python main2.py\nstart: 0\nstart: 1\nstart: 2\nstart: 3\nstart: 4\nstart: 5\nstart: 6\nstart: 7\nstart: 8\nstart: 9\nend: 9\nend: 8\nend: 6\nend: 3\nend: 4\nend: 0\nend: 1\nend: 2\nend: 5\nend: 7\n",language:"bash",meta:bk},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:"❯"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:"poetry"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:"run"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:bg}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bl}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aM}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aN}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bm}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aO}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bn}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bo}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bp}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:F},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bp}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bn}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aN}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bm}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bl}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aM}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aO}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:bo}]}]}]}]}]},{type:a,tag:ae,props:{id:br},children:[{type:b,value:bs},{type:a,tag:h,props:{},children:[{type:b,value:ac}]},{type:b,value:"을 실행해야 하는가"}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:"asnyc"}]},{type:b,value:ab},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:" 키워드를 사용한 함수가 실행되면, "},{type:a,tag:h,props:{},children:[{type:b,value:"Coroutine"}]},{type:b,value:"(이하 코루틴)객체가 생성된다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"코루틴은 생성과 동시에 실행되는 객체가 아니며,\n이벤트 루프에 예약된 상태도 아니다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"이러한 코루틴을 실행하기 위해 이벤트루프를 생성하고,\n이벤트루프에 작업을 예약하고,\n이벤트루트의 작업을 순차적으로 실행하는 일련의 과정을\n"},{type:a,tag:h,props:{},children:[{type:b,value:ac}]},{type:b,value:"이 담당한다고 볼 수있다."}]},{type:a,tag:am,props:{id:bt},children:[{type:b,value:"대기할 수 있는 "},{type:a,tag:h,props:{},children:[{type:b,value:av}]},{type:b,value:"객체"}]},{type:a,tag:k,props:{},children:[{type:b,value:"코루틴이 "},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:"키워드를 사용하여 대기할 수 있는 이유는,\n코루틴에 "},{type:a,tag:h,props:{},children:[{type:b,value:aj}]},{type:b,value:"이라는 메소드가 정의되어 있기 때문이다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"이러한 객체를 "},{type:a,tag:h,props:{},children:[{type:b,value:av}]},{type:b,value:" 객체라고 하며, "},{type:a,tag:h,props:{},children:[{type:b,value:"typing"}]},{type:b,value:" 모듈에서도 확인할 수 있다.\n정말 "},{type:a,tag:h,props:{},children:[{type:b,value:aj}]},{type:b,value:"만 있으면 가능한지 확인해보자."}]},{type:a,tag:z,props:{code:"import asyncio\nfrom typing import Any, Generator\n\n\nclass Await:\n    def __await__(self) -\u003E Generator[Any, None, int]:\n        for num in range(5):\n            print(num)\n            yield None\n        return 1\n\n\nasync def main() -\u003E None:\n    await Await()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n\n# ❯ poetry run python main3.py\n# 0\n# 1\n# 2\n# 3\n# 4\n",filename:"main3.py",language:J,meta:"[main3.py]"},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:T}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" Any, Generator"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:"class"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:F},children:[{type:b,value:bu}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aj}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(self) -\u003E Generator[Any, "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"]:"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" num "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aO}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"):"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aQ}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(num)"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:"yield"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" Await()"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:X}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# ❯ poetry run python main3.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# 0"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# 1"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# 2"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# 3"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# 4"}]}]}]}]}]},{type:a,tag:"alert-outer",props:{type:aL},children:[{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:bu}]},{type:b,value:"객체를 곧바로 "},{type:a,tag:h,props:{},children:[{type:b,value:ac}]},{type:b,value:"에서 사용하지 않고,\n"},{type:a,tag:h,props:{},children:[{type:b,value:M}]},{type:b,value:"함수에서 생성하여 사용하는 이유는,\n"},{type:a,tag:h,props:{},children:[{type:b,value:ac}]},{type:b,value:"에서 코루틴이 아니면 에러를 발생시키기 때문이다."}]}]},{type:a,tag:k,props:{},children:[{type:b,value:bv},{type:a,tag:h,props:{},children:[{type:b,value:t}]},{type:b,value:ab},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:"은 사실 제너레이터를 활용한\n컨텍스트 스위칭에 대한 문법 설탕이라는 것을 알 수 있다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"이러한 문법 설탕이 추가되기 전까지는,\n제너레이터 문법인 "},{type:a,tag:h,props:{},children:[{type:b,value:bw}]},{type:b,value:"을 사용했다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"물론 이러한 사실은 알면 좋지만 별로 중요하지 않다.\n대부분의 경우 "},{type:a,tag:h,props:{},children:[{type:b,value:aj}]},{type:b,value:"를 직접 정의하기는 커녕\n"},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:S},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"도 구경하기 어려우며,\n"},{type:a,tag:h,props:{},children:[{type:b,value:t}]},{type:b,value:S},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:"을 사용한 코루틴만 사용할 것이다."}]},{type:a,tag:ae,props:{id:bx},children:[{type:b,value:"콜백 형태의 "},{type:a,tag:h,props:{},children:[{type:b,value:y}]}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:ak},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:$},{type:a,tag:h,props:{},children:[{type:b,value:by}]},{type:b,value:ak},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"를 본따 만들어졌다."}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:by}]},{type:b,value:ak},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"는 쓰레드를 제어하기 위해 만들어졌고,\n멀티쓰레드 환경의 비동기 제어가 싱글쓰레드 환경으로 확장된 것으로 볼 수도 있다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"앞서 말했듯이, 대부분의 경우 "},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"에 대해 알 필요가 없고,\n구버전 파이썬을 사용한다면 모를까, 이제는 사용할 일도 없는 객체다."}]},{type:a,tag:ae,props:{id:bz},children:[{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"를 상속받는 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:$},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"를 상속받아 구현한 "},{type:a,tag:h,props:{},children:[{type:b,value:av}]},{type:b,value:"한 객체다.\n"},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:$},{type:a,tag:h,props:{},children:[{type:b,value:bA}]},{type:b,value:ak},{type:a,tag:h,props:{},children:[{type:b,value:bB}]},{type:b,value:"처럼, 생성됐다면 이미 이벤트루프에 예약된 상태다."}]},{type:a,tag:bj,props:{type:aL},children:[{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"는 생성했지만, 이벤트루프에 예약되어 있지 않을 수 있다."}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"따라서 다음과 같은 코드는, 정상적으로 실행된다."}]},{type:a,tag:z,props:{code:"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -\u003E None:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n\n\nasync def main() -\u003E None:\n    coro = test()\n    _ = asyncio.create_task(coro)\n    logger.info(\"before sleep\")\n    await asyncio.sleep(2)\n    logger.info(\"after sleep\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n#  ❯ poetry run python main4.py\n#  before sleep\n#  start\n#  done!\n#  after sleep\n",filename:bC,language:J,meta:"[main4.py]"},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:T}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ao}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ap}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:au}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:bD}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aS}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:an}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    _ "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ax}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:bE}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:bF}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:X}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"#  ❯ poetry run python main4.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"#  before sleep"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"#  start"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"#  done!"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"#  after sleep"}]}]}]}]}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:aT},{type:a,tag:h,props:{},children:[{type:b,value:bw}]},{type:b,value:aT},{type:a,tag:h,props:{},children:[{type:b,value:aj}]},{type:b,value:"메소드를 직업 호출하지 않았지만,\n"},{type:a,tag:h,props:{},children:[{type:b,value:H}]},{type:b,value:"로 정의된 비동기 함수는 정상적으로 실행됐다.\n왜냐하면 신규 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"객체를 생성했고,\n이후 "},{type:a,tag:h,props:{},children:[{type:b,value:bG}]},{type:b,value:"를 통해 콘텍스트 스위칭을 유발했기 때문이다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"정리하자면 다음과 같다."}]},{type:a,tag:aU,props:{},children:[{type:a,tag:G,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:H}]},{type:b,value:"함수를 실행하여 코루틴을 생성한다."}]},{type:a,tag:G,props:{},children:[{type:b,value:"생성한 코루틴을 "},{type:a,tag:h,props:{},children:[{type:b,value:"asyncio.create_task"}]},{type:b,value:"함수를 사용하여, 이벤트루프에 예약한다."}]},{type:a,tag:G,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:bH}]},{type:b,value:"함수가 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"객체를 반환한다.(의도적으로 "},{type:a,tag:h,props:{},children:[{type:b,value:"_"}]},{type:b,value:"를 사용하여 무시하였다.)"}]},{type:a,tag:G,props:{},children:[{type:b,value:"아직 "},{type:a,tag:h,props:{},children:[{type:b,value:M}]},{type:b,value:"함수가 콘텍스트를 점유중이므로, 앞서 생성한 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"는 실행되지 않았다."}]},{type:a,tag:G,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:bG}]},{type:b,value:"를 통해, 콘텍스트 점유를 해제한다."}]},{type:a,tag:G,props:{},children:[{type:b,value:"앞서 생성한 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"로 콘텍스트가 변경된다."}]},{type:a,tag:G,props:{},children:[{type:b,value:"이하 생략"}]}]},{type:a,tag:k,props:{},children:[{type:b,value:bv},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:"이 콘텍스트 스위칭에 대한 문법 설탕이자,\n동시에 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"를 생성하는 문법 설탕인 것을 알 수 있다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"여기서 한가지 궁금한 점이 생긴다."}]},{type:a,tag:aU,props:{},children:[{type:a,tag:G,props:{},children:[{type:b,value:"한번 생성한 코루틴은, 한번만 "},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:bI}]},{type:a,tag:G,props:{},children:[{type:b,value:"한번 생성한 코루틴은, "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"를 생성할 수 있다."}]},{type:a,tag:G,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:$},{type:a,tag:h,props:{},children:[{type:b,value:av}]},{type:b,value:"이므로 "},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:bI}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"이전의 "},{type:a,tag:h,props:{},children:[{type:b,value:bC}]},{type:b,value:" 스크립트에서 코루틴 "},{type:a,tag:h,props:{},children:[{type:b,value:"coro"}]},{type:b,value:$},{type:a,tag:h,props:{},children:[{type:b,value:bH}]},{type:b,value:"함수를 통해\n이미 실행된 상태다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"이후 생성한 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"를 대기하는 것이 가능할까?"}]},{type:a,tag:z,props:{code:"import asyncio\nimport logging\nimport sys\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\nasync def test() -\u003E int:\n    logger.info(\"start\")\n    await asyncio.sleep(1)\n    logger.info(\"done!\")\n    return 1\n\n\nasync def main() -\u003E None:\n    coro = test()\n    task = asyncio.create_task(coro)\n\n    logger.info(\"before sleep\")\n\n    queue = asyncio.Queue(1)\n    task.add_done_callback(lambda task: queue.put_nowait(task.result()))\n\n    value = await task\n\n    logger.info(\"after sleep\")\n\n    result = task.result()\n    queue_value = await queue.get()\n    logger.info(\"value=%r, result=%r, queue_value=%r\", value, result, queue_value)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main5.py\n# before sleep\n# start\n# done!\n# after sleep\n# value=1, result=1, queue_value=1\n",filename:"main5.py",language:J,meta:"[main5.py]"},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:T}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ao}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ap}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:au}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:bD}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aS}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:an}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bJ}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ax}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:bE}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bK}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" asyncio.Queue("}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    task.add_done_callback("}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:"lambda"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" task: queue.put_nowait(task.result()))"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    value "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" task"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:bF}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" task.result()"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    queue_value "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" queue.get()"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:"\"value="}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:", result="}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:", queue_value="}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:ag}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:", value, result, queue_value)"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:X}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# ❯ poetry run python main5.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# before sleep"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:bL}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# done!"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# after sleep"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# value=1, result=1, queue_value=1"}]}]}]}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"가능하다. "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"는 코루틴을 이벤트 루프에 예약하는 객체지, 코루틴 그 자체가 아니기 때문이다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"그렇기에 단 한번 "},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:"으로 대기할 수 있다.\n동시에 "},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"이기에, "},{type:a,tag:h,props:{},children:[{type:b,value:"result"}]},{type:b,value:" 메소드를 사용하여 값을 가져올 수도 있으며\n"},{type:a,tag:h,props:{},children:[{type:b,value:"add_done_callback"}]},{type:b,value:" 메소드를 사용하여, 콜백을 추가할 수도 있다."}]},{type:a,tag:am,props:{id:bM},children:[{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:S},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"는 언제 사용할까"}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:aT},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"는 대부분의 경우 직접 사용할 일이 없다.\n하지만 저수준 api를 다뤄야 하거나, 효율적인 코드를 목표로 한다면,\n필연적으로 다뤄야 하는 순간이 온다."}]},{type:a,tag:ae,props:{id:bN},children:[{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:bO}]},{type:a,tag:z,props:{code:"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom typing import Awaitable\n\n\nasync def test(value: int) -\u003E int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod \u003E rand:\n        error_msg = f\"mod \u003E {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -\u003E int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\nasync def main() -\u003E None:\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    result = await asyncio.gather(*(shield(coro) for coro in coros))\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6.py\n# [2, 1, None, 2, None, 3, 8, 2, 3, None]\n",filename:"main6.py",language:J,meta:"[main6.py]"},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aY}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:T}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aI}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bP}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bQ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aJ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bR}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bS}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:bT}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:_}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bU}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bV}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bW}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:bX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bY}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bZ}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:b_}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:b$}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ca}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cb}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cc}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:ag}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cd}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ce}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:aA}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cf}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aZ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:cg}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ch}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ci}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cj}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ck}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cl}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cm}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:a$}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ba}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(shield(coro) "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cn}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" coros))"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aQ}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:co}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:X}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# ❯ poetry run python main6.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# [2, 1, None, 2, None, 3, 8, 2, 3, None]"}]}]}]}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"위와 같은 상황이 있을 때,\n"},{type:a,tag:h,props:{},children:[{type:b,value:H}]},{type:b,value:"함수에서 에러가 발생하면 None값이 아닌 -1을 반환받고 싶다고 하자."}]},{type:a,tag:k,props:{},children:[{type:b,value:"가장 간단한 방법은 "},{type:a,tag:h,props:{},children:[{type:b,value:aA}]},{type:b,value:"를 수정하는 것이고,\n그 다음으로는 "},{type:a,tag:h,props:{},children:[{type:b,value:H}]},{type:b,value:"를 수정하는 것이다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"하지만 위 스크립트는 굉장히 간단하게 작성된 스크립트라 그런 것이고,\n손대면 손댈수록 너무 복잡해져서 수정하기 힘들거나,\n특수한 사정으로 인해 수정 자체가 불가능한 경우가 있다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"그럴때 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"에 콜백을 추가하여 문제를 해결할 수 있다."}]},{type:a,tag:z,props:{code:"from __future__ import annotations\n\nimport asyncio\nimport random\nfrom collections import deque\nfrom functools import partial\nfrom typing import Awaitable\n\n\nasync def test(value: int) -\u003E int:\n    mod = value % 10\n    rand = random.randint(1, 10)\n    await asyncio.sleep(1)\n    if mod \u003E rand:\n        error_msg = f\"mod \u003E {rand}\"\n        raise ValueError(error_msg)\n    return mod\n\n\nasync def shield(coro: Awaitable[int]) -\u003E int | None:\n    try:\n        return await asyncio.shield(coro)\n    except ValueError:\n        return None\n\n\ndef add(task: asyncio.Task[int], queue: asyncio.Queue[int]) -\u003E None:\n    if task.exception():\n        queue.put_nowait(-1)\n        return\n    queue.put_nowait(task.result())\n\n\nasync def main() -\u003E None:\n    queue = asyncio.Queue()\n    add_in_queue = partial(add, queue=queue)\n    coros = [test(int(random.random() * 100)) for _ in range(10)]\n    tasks = deque()\n    for coro in coros:\n        task = asyncio.create_task(coro)\n        task.add_done_callback(add_in_queue)\n        tasks.append(task)\n\n    await asyncio.gather(*(shield(task) for task in tasks))\n    result = [queue.get_nowait() for _ in range(10)]\n    print(result)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main6-2.py\n# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]\n",filename:"main6-2.py",language:J,meta:"[main6-2.py]"},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aY}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:T}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aI}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" collections "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" deque"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cp}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bP}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bQ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aJ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bR}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bS}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:bT}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:_}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bU}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bV}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bW}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:bX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bY}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bZ}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:b_}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:b$}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ca}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cb}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cc}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:ag}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cd}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ce}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:aA}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cf}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aZ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:cg}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ch}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"add"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(task: asyncio.Task["}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"], queue: asyncio.Queue["}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aZ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" task.exception():"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        queue.put_nowait("}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:"-"}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    queue.put_nowait(task.result())"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bK}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" asyncio.Queue()"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    add_in_queue "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" partial(add, "}]},{type:a,tag:c,props:{class:F},children:[{type:b,value:"queue"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"queue)"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ci}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cj}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ck}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:cl}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cm}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:a$}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ba}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    tasks "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" deque()"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cn}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" coros:"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        task "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ax}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        task.add_done_callback(add_in_queue)"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        tasks.append(task)"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(shield(task) "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" task "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" tasks))"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" [queue.get_nowait() "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Y}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:a$}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Z}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ah}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ai}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ba}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aQ}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:co}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:X}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# ❯ poetry run python main6-2.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# [0, -1, 2, -1, 3, 1, 8, -1, -1, -1]"}]}]}]}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"핵심 로직이라 할 수 있는 "},{type:a,tag:h,props:{},children:[{type:b,value:H}]},{type:b,value:S},{type:a,tag:h,props:{},children:[{type:b,value:aA}]},{type:b,value:"를 수정하지 않고,\n콜백을 사용하여 문제를 해결할 수 있다."}]},{type:a,tag:ae,props:{id:cr},children:[{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:bO}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"가 "},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"를 상속받았기에, 대부분의 경우 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"에서 문제가 해결된다.\n"},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:S},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"의 결정적인 차이점은\n"},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"는 이벤트루프에 예약되지 않은 상태가 존재한다는 것이다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"코루틴이 비동기 작업에 대한 정의라면\n"},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"는 코루틴의 실재이고,\n"},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:$},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"의 선물이다.\n따라서 "},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"를 사용한다면, 비동기 작업이 선언 또는 실행되기 이전에\n콜백을 정의하고 추가하여 제공할 수 있다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"이러한 방법은 "},{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:"의 내부 함수를 구현하는데 많이 사용되는데,\n그 중 하나인 "},{type:a,tag:h,props:{},children:[{type:b,value:aC}]},{type:b,value:"를 좀 더 알아보기 쉽게 나타내면 다음과 같다."}]},{type:a,tag:z,props:{code:"from __future__ import annotations\n\nimport asyncio\nimport logging\nimport sys\nfrom functools import partial\nfrom typing import Any, Awaitable\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.INFO)\nlogger.addHandler(logging.StreamHandler(sys.stdout))\n\n\ndef release(waiter: asyncio.Future[Any], *args: Any) -\u003E None:\n    if not waiter.done():\n        waiter.set_result(None)\n\n\nasync def cancel(future: asyncio.Future[Any]) -\u003E None:\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future.add_done_callback(callback)\n\n    try:\n        future.cancel()\n        await waiter\n    finally:\n        future.remove_done_callback(callback)\n\n\nasync def wait_for(coro: Awaitable[Any]) -\u003E None:\n    logger.info(\"wait\")\n\n    loop = asyncio.get_running_loop()\n    waiter = loop.create_future()\n    callback = partial(release, waiter)\n    future = asyncio.ensure_future(coro)\n    future.add_done_callback(callback)\n\n    try:\n        await waiter\n    except asyncio.CancelledError:\n        if future.done():\n            return\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise\n\n    if not future.done():\n        future.remove_done_callback(callback)\n        await cancel(future)\n        raise RuntimeError\n\n\nasync def test() -\u003E None:\n    logger.info(\"start\")\n    await asyncio.sleep(3)\n    logger.info(\"end\")\n\n\nasync def main() -\u003E None:\n    coro = test()\n    task = asyncio.create_task(coro)\n    await asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n# ❯ poetry run python main7.py\n# start\n# wait\n# wait\n# wait\n# end\n",filename:"main7.py",language:J,meta:"[main7.py]"},children:[{type:a,tag:R,props:{},children:[{type:a,tag:z,props:{__ignoreMap:K},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aY}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:T}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ao}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ap}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cp}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" Any, Awaitable"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aq}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:au}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"release"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(waiter: asyncio.Future[Any], "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"args: Any) -\u003E "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:cs}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" waiter.done():"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        waiter.set_result("}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:"cancel"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(future: asyncio.Future[Any]) -\u003E "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ct}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cu}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:cv}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cw}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:cx}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cy}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:cz}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        future.cancel()"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cA}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:"finally"}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bb}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(coro: Awaitable[Any]) -\u003E "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:"\"wait\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ct}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cu}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:cv}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cw}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:cx}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cy}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    future "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" asyncio.ensure_future(coro)"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:cz}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cA}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" asyncio.CancelledError:"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cB}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:Q}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bb}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cC}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ay}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:cs}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cB}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bb}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:cC}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:A}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"RuntimeError"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:H}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aN}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:"\"end\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:x},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:I}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:v}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aS}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:an}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bJ}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ax}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" asyncio.gather(task, wait_for(task), wait_for(task), wait_for(task))"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:V}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:n},children:[{type:b,value:W}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:l}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:X}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# ❯ poetry run python main7.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:bL}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:bc}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:bc}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:bc}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:s},children:[{type:b,value:"# end"}]}]}]}]}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:aC}]},{type:b,value:"의 실제 구현은 더 정교하지만, 읽기 쉽도록 일부 코드를 수정했다.\n위와 같은 형태로 "},{type:a,tag:h,props:{},children:[{type:b,value:aC}]},{type:b,value:"를 사용하지 않는다면, "},{type:a,tag:h,props:{},children:[{type:b,value:"task"}]},{type:b,value:"를 2번 이상 실행하게 되고,\n동일한 코루틴을 2번 이상 실행할 수 없다는 에러가 발생한다."}]},{type:a,tag:am,props:{id:aD},children:[{type:b,value:aD}]},{type:a,tag:aU,props:{},children:[{type:a,tag:G,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:t}]},{type:b,value:ab},{type:a,tag:h,props:{},children:[{type:b,value:o}]},{type:b,value:" 키워드로 비동기 함수를 정의하여 코루틴을 생성하고,\n"},{type:a,tag:h,props:{},children:[{type:b,value:ac}]},{type:b,value:"으로 실행한다."}]},{type:a,tag:G,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:bA}]},{type:b,value:ak},{type:a,tag:h,props:{},children:[{type:b,value:bB}]},{type:b,value:"와 비슷한 객체는 "},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:"다."}]},{type:a,tag:G,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:"를 사용하면 콜백을 활용할 수 있다."}]}]},{type:a,tag:ae,props:{id:aE},children:[{type:b,value:aE}]},{type:a,tag:k,props:{},children:[{type:b,value:"기본 라이브러리인 "},{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:" 위주로 작성된 글이지만,\n비동기 라이브러리는 "},{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:"만이 있는 것은 아니다."}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:cD}]},{type:b,value:"나 "},{type:a,tag:h,props:{},children:[{type:b,value:bd}]},{type:b,value:ab},{type:a,tag:h,props:{},children:[{type:b,value:be}]},{type:b,value:"등이 있으며,\n"},{type:a,tag:h,props:{},children:[{type:b,value:be}]},{type:b,value:"의 로직을 "},{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:"에 적용한 "},{type:a,tag:h,props:{},children:[{type:b,value:al}]},{type:b,value:"도 있다."}]},{type:a,tag:"blockquote",props:{},children:[{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:al}]},{type:b,value:"를 사용하면 비동기 로직 구현 후,\n"},{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:S},{type:a,tag:h,props:{},children:[{type:b,value:be}]},{type:b,value:"중 어떤 것이든 선택하여 사용할 수 있다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"2.x에서는 "},{type:a,tag:h,props:{},children:[{type:b,value:bd}]},{type:b,value:"도 지원했지만,\n"},{type:a,tag:h,props:{},children:[{type:b,value:bd}]},{type:b,value:"의 구현 방식에 따른 개발에 어려움이 있어서 3.x부터 제외됐다."}]},{type:a,tag:k,props:{},children:[{type:a,tag:h,props:{},children:[{type:b,value:cD}]},{type:b,value:$},{type:a,tag:h,props:{},children:[{type:b,value:al}]},{type:b,value:"에서 사용하는 "},{type:a,tag:h,props:{},children:[{type:b,value:"sniffio"}]},{type:b,value:"에서 지원하지 않아서\n"},{type:a,tag:h,props:{},children:[{type:b,value:al}]},{type:b,value:"에서도 지원하지 않는다."}]}]},{type:a,tag:k,props:{},children:[{type:b,value:"모든 라이브러리는 코루틴에 대해서는 공유하지만,\n"},{type:a,tag:h,props:{},children:[{type:b,value:y}]},{type:b,value:S},{type:a,tag:h,props:{},children:[{type:b,value:u}]},{type:b,value:$},{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:"에 정의된 객체이므로,\n따로 정의한 객체를 사용할 수 있다.\n따라서 만약 다른 라이브러리를 사용한다면,\n그 라이브러리에 맞는 방법을 잘 알아보고 사용해야 한다."}]},{type:a,tag:k,props:{},children:[{type:b,value:"나는 "},{type:a,tag:h,props:{},children:[{type:b,value:al}]},{type:b,value:"를 주로 사용하는데,\n"},{type:a,tag:h,props:{},children:[{type:b,value:aF}]},{type:b,value:"과 "},{type:a,tag:h,props:{},children:[{type:b,value:"CancelScope"}]},{type:b,value:"가 마음에 들었기 때문이다.\n특히 이 "},{type:a,tag:h,props:{},children:[{type:b,value:aF}]},{type:b,value:"은 3.11부터는 "},{type:a,tag:h,props:{},children:[{type:b,value:L}]},{type:b,value:"에 적용된 개념이기도 하니,\n만약 3.11이상의 버전을 사용한다면 "},{type:a,tag:h,props:{},children:[{type:b,value:"gather"}]},{type:b,value:" 대신 "},{type:a,tag:h,props:{},children:[{type:b,value:aF}]},{type:b,value:"을 사용하자."}]},{type:a,tag:k,props:{},children:[{type:b,value:bs},{type:a,tag:h,props:{},children:[{type:b,value:aF}]},{type:b,value:"이 좋은지, 왜 사용해야 하는지는\n"},{type:a,tag:"a",props:{href:"https:\u002F\u002Fblog.lablup.com\u002Fposts\u002F2022\u002F03\u002F29\u002FPersistentTaskGroup\u002F",rel:["nofollow"]},children:[{type:b,value:"이 글"}]},{type:b,value:"에서 상세하게 설명해준다."}]},{type:a,tag:"style",children:[{type:b,value:".ct-df1ca6{color:#6E7781}\n.ct-8a44bc{color:#953800}\n.ct-130151{color:#0A3069}\n.ct-db2e99{color:#0550AE}\n.ct-3bed80{color:#8250DF}\n.ct-24760b{color:#24292F}\n.ct-622857{color:#CF222E}\n.dark .ct-622857{color:#FF7B72}\n.dark .ct-24760b{color:#C9D1D9}\n.dark .ct-3bed80{color:#D2A8FF}\n.dark .ct-db2e99{color:#79C0FF}\n.dark .ct-130151{color:#A5D6FF}\n.dark .ct-8a44bc{color:#FFA657}\n.dark .ct-df1ca6{color:#8B949E}"}]}],toc:{title:K,searchDepth:cE,depth:cE,links:[{id:bf,depth:aG,text:"파이썬의 비동기 라이브러리 asyncio",children:[{id:br,depth:af,text:"왜 asyncio.run을 실행해야 하는가"}]},{id:bt,depth:aG,text:"대기할 수 있는 Awaitable객체",children:[{id:bx,depth:af,text:"콜백 형태의 Future"},{id:bz,depth:af,text:"Future를 상속받는 Task"}]},{id:bM,depth:aG,text:"Future와 Task는 언제 사용할까",children:[{id:bN,depth:af,text:"Task가 필요한 상황"},{id:cr,depth:af,text:"Future가 필요한 상황"}]},{id:aD,depth:aG,text:aD,children:[{id:aE,depth:af,text:aE}]}]}},_type:"markdown",_id:"content:python:async.md",_source:"content",_file:"python\u002Fasync.md",_extension:"md"},surround:[bk,{_path:"\u002Fpython\u002Fpep_695",title:"더 편한 타입 힌트를 위한 PEP695",description:"python 3.12에 새롭게 추가\u002F변경되는 문법"}]}},prerenderedAt:1690910410337}}("element","text","span","ct-24760b","div","line","ct-622857","code-inline","ct-db2e99"," ","p",":","=","ct-130151","await","    ","import",")","ct-df1ca6","async","Task","None","def","ct-3bed80","Future","code","        ","int","if","    logger.info(","1","ct-8a44bc","li","test","() -\u003E ","python","","asyncio","main","start:","end: ","from","return","pre","와 "," asyncio","__name__","==","\"__main__\"","    asyncio.run(main())","for","in","10","는 "," asyncio.sleep(",", ","asyncio.run","*","h3",3,"\"","range","(","__await__","의 ","anyio","h2"," test()"," logging"," sys","logger "," logging.getLogger()","logger.setLevel(logging.","INFO","logger.addHandler(logging.StreamHandler(sys.stdout))","Awaitable"," typing "," asyncio.create_task(coro)","raise","ValueError","shield","try","wait_for","요약하자면","추가하자면","TaskGroup",2,false," random",") -\u003E "," asyncio.gather(","info","2","3","5","            ","print","\"start\"","    coro "," 또는 ","ol","    result ","%r","__future__"," annotations","]) -\u003E ","except"," _ ",")]","        future.remove_done_callback(callback)","# wait","curio","trio","파이썬의-비동기-라이브러리-asyncio","main2.py","%d",", x)","alert",null,"0","4","6","7","8","9","왜-asynciorun을-실행해야-하는가","왜 ","대기할-수-있는-awaitable객체","Await","즉, ","yield from","콜백-형태의-future","concurrent.futures","future를-상속받는-task","js","Promise","main4.py","\"done!\"","\"before sleep\"","\"after sleep\"","await asyncio.sleep(2)","create_task","으로 대기할 수 있다.","    task ","    queue ","# start","future와-task는-언제-사용할까","task가-필요한-상황","가 필요한 상황"," Awaitable","(value: ","    mod "," value ","%","    rand "," random.randint("," mod ","\u003E"," rand:","        error_msg ","f","\"mod \u003E ","{","rand","}","(error_msg)"," mod","(coro: Awaitable[","|"," asyncio.shield(coro)","    coros "," [test(","(random.random() ","100",")) "," coro ","(result)"," functools "," partial","future가-필요한-상황","not","    loop "," asyncio.get_running_loop()","    waiter "," loop.create_future()","    callback "," partial(release, waiter)","    future.add_done_callback(callback)"," waiter"," future.done():"," cancel(future)","twisted",5))