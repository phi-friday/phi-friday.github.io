export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO){return {data:{"selected_data_with_surround_/python/http_client_vs":{article:{_path:"\u002Fpython\u002Fhttp_client_vs",_dir:G,_draft:ah,_partial:ah,_locale:H,_empty:ah,title:"requests vs httpx vs aiohttp, 뭐가 더 빠를까",description:"그냥 편한거 쓰는게 제일 나은거 같은데?",tags:[G,s,z,I],date:"2023-04-24T14:35:48.171Z",publish:true,body:{type:"root",children:[{type:a,tag:_,props:{id:bb},children:[{type:b,value:bc}]},{type:a,tag:W,props:{id:bd},children:[{type:b,value:"가장 범용적인 "},{type:a,tag:k,props:{},children:[{type:b,value:s}]}]},{type:a,tag:n,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:G}]},{type:b,value:"의 "},{type:a,tag:k,props:{},children:[{type:b,value:ai}]},{type:b,value:" 클라이언트 라이브러리 중 가장 유명하다."}]},{type:a,tag:n,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:"는 워낙 많이 알려졌고, 사용하는 사람, 참조하는 라이브러리가 많다. 따라서 레퍼런스를 찾기 쉽고, 그만큼 배우기 쉽고, 사용하기도 쉽다."}]},{type:a,tag:n,props:{},children:[{type:a,tag:aj,props:{},children:[{type:b,value:"동기 호출만"}]},{type:b,value:" 지원한다.. 따라서 여러 요청을 효율적으로 실행하려면 쓰레드가 필수적이다.("},{type:a,tag:k,props:{},children:[{type:b,value:"greenlet"}]},{type:b,value:"은 예외적인 경우)"}]},{type:a,tag:W,props:{id:be},children:[{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:"와 비슷한 "},{type:a,tag:k,props:{},children:[{type:b,value:z}]}]},{type:a,tag:n,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:"의 대부분의 api와 호환되도록 작성된 라이브러리."}]},{type:a,tag:n,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:"와 비슷하게 사용할 수 있어서 기존에 "},{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:"를 사용했다면 금방 적응할 수 있으며, "},{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:"에 비해서 좀 더 나은 현대적인 기능과 타입힌트를 제공한다."}]},{type:a,tag:n,props:{},children:[{type:a,tag:aj,props:{},children:[{type:b,value:"동기, 비동기 호출을 모두"}]},{type:b,value:bf}]},{type:a,tag:W,props:{id:bg},children:[{type:a,tag:k,props:{},children:[{type:b,value:ak}]},{type:b,value:"기반으로 처음 작성된 "},{type:a,tag:k,props:{},children:[{type:b,value:I}]}]},{type:a,tag:n,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:ak}]},{type:b,value:" 프로젝트가 시작하고, "},{type:a,tag:k,props:{},children:[{type:b,value:ak}]},{type:b,value:"기반으로 가장 먼저 작성된 "},{type:a,tag:k,props:{},children:[{type:b,value:ai}]},{type:b,value:" 서버 및 클라이언트 라이브러리다."}]},{type:a,tag:n,props:{},children:[{type:b,value:"실제로 써본적은 없고, 몇몇 사용기를 보면 가볍고 빠르다고 한다."}]},{type:a,tag:n,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:"와 api와 호환되지 않아서 사용법을 잘 숙지할 필요가 있다."}]},{type:a,tag:n,props:{},children:[{type:a,tag:aj,props:{},children:[{type:b,value:"비동기 호출만"}]},{type:b,value:bf}]},{type:a,tag:_,props:{id:bh},children:[{type:b,value:bi}]},{type:a,tag:n,props:{},children:[{type:b,value:"모두 10개 세션을 유지하고 총 1000번 "},{type:a,tag:k,props:{},children:[{type:b,value:"GET"}]},{type:b,value:" 요청을 실행했다."}]},{type:a,tag:n,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:b,value:"와 "},{type:a,tag:k,props:{},children:[{type:b,value:I}]},{type:b,value:"는 비동기로 실행했고, "},{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:"는 그냥 사용하면 상대가 되지 않기 때문에, 최대 10개 작업이 가능한 쓰레드 풀을 생성하여 실행했다."}]},{type:a,tag:n,props:{},children:[{type:b,value:"정리하자면,"}]},{type:a,tag:"ul",props:{},children:[{type:a,tag:al,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:b,value:bj}]},{type:a,tag:al,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:I}]},{type:b,value:bj}]},{type:a,tag:al,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:": 10개 세션, 10개 쓰레드, 1000개 요청, 동기"}]}]},{type:a,tag:n,props:{},children:[{type:b,value:"당연하지만 "},{type:a,tag:k,props:{},children:[{type:b,value:s}]},{type:b,value:" 쓰레드가 10개라고 해서 각 쓰레드별 10개 세션을 가진건 아니다. 10개의 세션을 가진 풀에서 세션 객체를 각 쓰레드가 가져와서 사용하는 방식으로 진행했다."}]},{type:a,tag:n,props:{},children:[{type:b,value:"모든 테스트는 "},{type:a,tag:k,props:{},children:[{type:b,value:"python3.11"}]},{type:b,value:"에서 실시했으며, 하는김에 3.11에 새로 추가된 "},{type:a,tag:k,props:{},children:[{type:b,value:"TaskGroup"}]},{type:b,value:"을 사용해봤다."}]},{type:a,tag:am,props:{},children:[{type:a,tag:an,props:{},children:[{type:b,value:z}]},{type:a,tag:A,props:{code:"import asyncio\nimport time\nfrom contextlib import AsyncExitStack\n\nimport httpx\n\nCLIENT_COUNT = 10\nREQUEST_COUNT = 1000\nURL = \"https:\u002F\u002Fjsonplaceholder.typicode.com\u002Fposts\u002F1\"\nHEADER = {\n    \"User-Agent\": \"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) \"\n    \"AppleWebKit\u002F537.36 (KHTML, like Gecko) \"\n    \"Chrome\u002F112.0.0.0 Safari\u002F537.36\",\n}\nTIMEOUT = 10\n\n\nasync def _request_one(client: httpx.AsyncClient) -\u003E None:\n    response = await client.get(URL, headers=HEADER)\n    response.raise_for_status()\n\nasync def _enter_and_put_client(\n    stack: AsyncExitStack,\n    queue: asyncio.Queue[httpx.AsyncClient],\n) -\u003E None:\n    client = await stack.enter_async_context(httpx.AsyncClient(timeout=TIMEOUT))\n    await queue.put(client)\n\n\nasync def _run_request(\n    queue: asyncio.Queue[httpx.AsyncClient],\n    semaphore: asyncio.Semaphore,\n) -\u003E None:\n    async with semaphore:\n        client = await queue.get()\n        await _request_one(client)\n        await queue.put(client)\n\nasync def _request_many(client_count: int, request_count: int) -\u003E None:\n    async with AsyncExitStack() as stack:\n        queue: asyncio.Queue[httpx.AsyncClient] = asyncio.Queue(client_count)\n        semaphore = asyncio.Semaphore(client_count)\n\n        async with asyncio.TaskGroup() as tg:\n            _ = [\n                tg.create_task(_enter_and_put_client(stack, queue))\n                for _ in range(client_count)\n            ]\n\n        async with asyncio.TaskGroup() as tg:\n            _ = [\n                tg.create_task(_run_request(queue, semaphore))\n                for _ in range(request_count)\n            ]\n\n\nasync def main():\n    start = time.perf_counter()\n    await _request_many(CLIENT_COUNT, REQUEST_COUNT)\n    end = time.perf_counter()\n    print(f\"time={end - start}\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n",filename:"test_httpx.py",language:G,meta:"[test_httpx.py]"},children:[{type:a,tag:$,props:{},children:[{type:a,tag:A,props:{__ignoreMap:H},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bk}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ao}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bl}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bm}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" httpx"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:K}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ap}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:au}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:av}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ax}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:K}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(client: httpx.AsyncClient) -\u003E "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bn}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:aA}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bo}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:bp}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:B}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:br}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bs}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" stack.enter_async_context(httpx.AsyncClient("}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"))"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:B}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:br}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bt}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aD}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aE}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aF}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bu}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aG}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aH}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aI}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bv}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bw}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        queue: asyncio.Queue[httpx.AsyncClient] "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bx}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:by}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bz}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ac}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:Y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bA}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bB}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:af}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ac}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:Y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bC}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aJ}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:af}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aL}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:V}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bD}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aN}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:V}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aO}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aQ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aS}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aT}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aU}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aY}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aZ}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bE}]}]}]}]}]}]},{type:a,tag:am,props:{},children:[{type:a,tag:an,props:{},children:[{type:b,value:I}]},{type:a,tag:A,props:{code:"import asyncio\nimport time\nfrom contextlib import AsyncExitStack\n\nimport aiohttp\n\nCLIENT_COUNT = 10\nREQUEST_COUNT = 1000\nURL = \"https:\u002F\u002Fjsonplaceholder.typicode.com\u002Fposts\u002F1\"\nHEADER = {\n    \"User-Agent\": \"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) \"\n    \"AppleWebKit\u002F537.36 (KHTML, like Gecko) \"\n    \"Chrome\u002F112.0.0.0 Safari\u002F537.36\",\n}\nTIMEOUT = 10\n\n\nasync def _request_one(client: aiohttp.ClientSession) -\u003E None:\n    async with client.get(URL, headers=HEADER) as response:\n        response.raise_for_status()\n\n\nasync def _enter_and_put_client(\n    stack: AsyncExitStack,\n    queue: asyncio.Queue[aiohttp.ClientSession],\n) -\u003E None:\n    client = await stack.enter_async_context(\n        aiohttp.ClientSession(timeout=aiohttp.ClientTimeout(total=TIMEOUT)),\n    )\n    await queue.put(client)\n\n\nasync def _run_request(\n    queue: asyncio.Queue[aiohttp.ClientSession],\n    semaphore: asyncio.Semaphore,\n) -\u003E None:\n    async with semaphore:\n        client = await queue.get()\n        await _request_one(client)\n        await queue.put(client)\n\nasync def _request_many(client_count: int, request_count: int) -\u003E None:\n    async with AsyncExitStack() as stack:\n        queue: asyncio.Queue[aiohttp.ClientSession] = asyncio.Queue(client_count)\n        semaphore = asyncio.Semaphore(client_count)\n\n        async with asyncio.TaskGroup() as tg:\n            _ = [\n                tg.create_task(_enter_and_put_client(stack, queue))\n                for _ in range(client_count)\n            ]\n\n        async with asyncio.TaskGroup() as tg:\n            _ = [\n                tg.create_task(_run_request(queue, semaphore))\n                for _ in range(request_count)\n            ]\n\n\nasync def main():\n    start = time.perf_counter()\n    await _request_many(CLIENT_COUNT, REQUEST_COUNT)\n    end = time.perf_counter()\n    print(f\"time={end - start}\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n",filename:"test_aiohttp.py",language:G,meta:"[test_aiohttp.py]"},children:[{type:a,tag:$,props:{},children:[{type:a,tag:A,props:{__ignoreMap:H},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bk}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ao}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bl}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bm}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" aiohttp"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:K}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ap}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:au}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:av}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ax}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:K}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(client: aiohttp.ClientSession) -\u003E "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:aA}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:") "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" response:"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        response.raise_for_status()"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:bp}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:B}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bF}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bs}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" stack.enter_async_context("}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        aiohttp.ClientSession("}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"aiohttp.ClientTimeout("}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:"total"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:")),"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    )"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:B}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bF}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bt}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aD}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aE}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aF}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bu}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aa}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aG}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aH}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aI}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bv}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bw}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        queue: asyncio.Queue[aiohttp.ClientSession] "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bx}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:by}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bz}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ac}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:Y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bA}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bB}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:af}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:D}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ab}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ac}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ad}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:Y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bC}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ae}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aJ}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:af}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:o}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aL}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:V}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:u}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:bD}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aN}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:V}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aO}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aQ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aS}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aT}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aU}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aY}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aZ}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bE}]}]}]}]}]}]},{type:b,value:"\n\n"},{type:a,tag:am,props:{},children:[{type:a,tag:an,props:{},children:[{type:b,value:s}]},{type:a,tag:A,props:{code:"import time\nfrom concurrent.futures import ThreadPoolExecutor, wait\nfrom queue import Queue\nfrom threading import Semaphore\n\nimport requests\n\nCLIENT_COUNT = 10\nREQUEST_COUNT = 1000\nURL = \"https:\u002F\u002Fjsonplaceholder.typicode.com\u002Fposts\u002F1\"\nHEADER = {\n    \"User-Agent\": \"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) \"\n    \"AppleWebKit\u002F537.36 (KHTML, like Gecko) \"\n    \"Chrome\u002F112.0.0.0 Safari\u002F537.36\",\n}\nTIMEOUT = 10\n\ndef _request_one(client: requests.Session) -\u003E None:\n    response = client.get(URL, headers=HEADER, timeout=TIMEOUT)\n    response.raise_for_status()\n\ndef _run_request(\n    queue: Queue[requests.Session], semaphore: Semaphore,\n) -\u003E None:\n    with semaphore:\n        client = queue.get()\n        _request_one(client)\n        queue.put_nowait(client)\n\n\ndef _request_many(client_count: int, request_count: int) -\u003E None:\n    semaphore = Semaphore(client_count)\n    queue: Queue[requests.Session] = Queue(maxsize=client_count)\n    for _ in range(client_count):\n        queue.put_nowait(requests.Session())\n    with ThreadPoolExecutor(max_workers=client_count) as pool:\n        future = [\n            pool.submit(_run_request, queue, semaphore)\n            for _ in range(request_count)\n        ]\n        wait(future, return_when=\"ALL_COMPLETED\")\n\ndef main():\n    start = time.perf_counter()\n    _request_many(CLIENT_COUNT, REQUEST_COUNT)\n    end = time.perf_counter()\n    print(f\"time={end - start}\")\n\n\nif __name__ == \"__main__\":\n    main()\n",filename:"test_requests.py",language:G,meta:"[test_requests.py]"},children:[{type:a,tag:$,props:{},children:[{type:a,tag:A,props:{__ignoreMap:H},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ao}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" concurrent.futures "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" ThreadPoolExecutor, wait"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" queue "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" Queue"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:X}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" threading "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" Semaphore"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:t}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" requests"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:K}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:ap}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aq}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ar}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:as}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:at}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:au}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:av}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aw}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:ax}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:O}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:K}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:ay}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(client: requests.Session) -\u003E "}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bn}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:az}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:M}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:aA}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:N}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:aB}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:P}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:bo}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aC}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:B}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    queue: Queue[requests.Session], semaphore: Semaphore,"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aD}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aE}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aF}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        _request_one(client)"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        queue.put_nowait(client)"}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aG}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aH}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aI}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:Q}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:C}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:w}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    semaphore "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" Semaphore(client_count)"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    queue: Queue[requests.Session] "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" Queue("}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:"maxsize"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"client_count)"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"(client_count):"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        queue.put_nowait(requests.Session())"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:x}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" ThreadPoolExecutor("}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:"max_workers"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:"client_count) "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:E}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:" pool:"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        future "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:Y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"            pool.submit(_run_request, queue, semaphore)"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"            "}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:R}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:S}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:T}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:U}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aJ}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        ]"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"        wait(future, "}]},{type:a,tag:c,props:{class:v},children:[{type:b,value:"return_when"}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"\"ALL_COMPLETED\""}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:p}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:q},children:[{type:b,value:aK}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aL}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aM}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:V}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    _request_many("}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:J}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:F}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:L}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:aN}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:V}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:m}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aO}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:B}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aP}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aQ}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aR}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aS}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aT}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:aU}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:O}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aV}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:y}]}]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:g},children:[{type:b,value:aW}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:aX}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:aY}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:aZ}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:r}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:"    main()"}]}]}]}]}]}]},{type:a,tag:_,props:{id:bG},children:[{type:b,value:bH}]},{type:a,tag:A,props:{code:"❯ ...\u002F.venv\u002Fbin\u002Fpython ...\u002Ftest_httpx.py\ntime=4.603886660999706\n❯ ...\u002F.venv\u002Fbin\u002Fpython ...\u002Ftest_aiohttp.py\ntime=4.555423996000172\n❯ ...\u002F.venv\u002Fbin\u002Fpython ...\u002Ftest_requests.py\ntime=4.501287121998757\n",language:"shell",meta:bI},children:[{type:a,tag:$,props:{},children:[{type:a,tag:A,props:{__ignoreMap:H},children:[{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:v},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:a$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"...\u002Ftest_httpx.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ba}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"4.603886660999706"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:v},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:a$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"...\u002Ftest_aiohttp.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ba}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"4.555423996000172"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:v},children:[{type:b,value:a_}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:a$}]},{type:a,tag:c,props:{class:d},children:[{type:b,value:h}]},{type:a,tag:c,props:{class:l},children:[{type:b,value:"...\u002Ftest_requests.py"}]}]},{type:a,tag:e,props:{class:f},children:[{type:a,tag:c,props:{class:d},children:[{type:b,value:ba}]},{type:a,tag:c,props:{class:g},children:[{type:b,value:j}]},{type:a,tag:c,props:{class:i},children:[{type:b,value:"4.501287121998757"}]}]}]}]}]},{type:a,tag:W,props:{id:bJ},children:[{type:b,value:bK}]},{type:a,tag:n,props:{},children:[{type:b,value:"기대와는 전혀 다른 결과가 나왔다."}]},{type:a,tag:n,props:{},children:[{type:b,value:"뭔가 뚜렷한 차이가 있을 것 같았지만, 셋 다 거기서 거기다."}]},{type:a,tag:n,props:{},children:[{type:b,value:"혹시 실제로는 요청이 실행되지 않은건 아닌가 하고 확인해봤지만 정상이다."}]},{type:a,tag:W,props:{id:bL},children:[{type:b,value:bM}]},{type:a,tag:n,props:{},children:[{type:a,tag:k,props:{},children:[{type:b,value:I}]},{type:b,value:"에 익숙하지 않은 점과, 공통된 방식으로 요청을 실행하고자 욕심부린 것 때문에 "},{type:a,tag:k,props:{},children:[{type:b,value:ai}]},{type:b,value:" 요청과는 무관한 지점에서 지연이 발생하지 않았을까."}]},{type:a,tag:n,props:{},children:[{type:b,value:"다음에 다시한번 시도해보자"}]},{type:a,tag:_,props:{id:bN},children:[{type:b,value:"어쨌든 나는 "},{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:b,value:"를 사용한다"}]},{type:a,tag:n,props:{},children:[{type:b,value:"위 테스트가 정상적으로 실행 된 것이라는 가정 하에,"}]},{type:a,tag:n,props:{},children:[{type:b,value:"별 성능 차이가 없다면 동기, 비동기 모두 지원하고,\n동기 비동기간 동일한 형태의 api로 사용할 수 있는 "},{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:b,value:"가 가장 편하게 느껴진다."}]},{type:a,tag:n,props:{},children:[{type:b,value:"아마 특별한 일이 없다면 "},{type:a,tag:k,props:{},children:[{type:b,value:z}]},{type:b,value:"를 계속 사용하지 않을까."}]},{type:a,tag:"style",children:[{type:b,value:".ct-e81b48{color:#953800}\n.ct-c75af7{color:#8250DF}\n.ct-510458{color:#0A3069}\n.ct-41ca93{color:#0550AE}\n.ct-65f949{color:#24292F}\n.ct-9de533{color:#CF222E}\n.dark .ct-9de533{color:#FF7B72}\n.dark .ct-65f949{color:#C9D1D9}\n.dark .ct-41ca93{color:#79C0FF}\n.dark .ct-510458{color:#A5D6FF}\n.dark .ct-c75af7{color:#D2A8FF}\n.dark .ct-e81b48{color:#FFA657}"}]}],toc:{title:H,searchDepth:bO,depth:bO,links:[{id:bb,depth:ag,text:bc,children:[{id:bd,depth:Z,text:"가장 범용적인 requests"},{id:be,depth:Z,text:"requests와 비슷한 httpx"},{id:bg,depth:Z,text:"asyncio기반으로 처음 작성된 aiohttp"}]},{id:bh,depth:ag,text:bi},{id:bG,depth:ag,text:bH,children:[{id:bJ,depth:Z,text:bK},{id:bL,depth:Z,text:bM}]},{id:bN,depth:ag,text:"어쨌든 나는 httpx를 사용한다"}]}},_type:"markdown",_id:"content:python:http_client_vs.md",_source:"content",_file:"python\u002Fhttp_client_vs.md",_extension:"md"},surround:[bI,{_path:"\u002Fother\u002Fgitea-action",title:"gitea에서 ci\u002Fcd를 위한 action 사용하기",description:"gihub action와 거의 비슷하다"}]}},prerenderedAt:1682350679609}}("element","text","span","ct-65f949","div","line","ct-9de533"," ","ct-41ca93","=","code-inline","ct-510458","    ","p","async","def","ct-c75af7",":","requests","import","await","ct-e81b48","None","with",")","httpx","code","(",") -\u003E ","        ","as",", ","python","","aiohttp","CLIENT_COUNT","10","REQUEST_COUNT","URL","HEADER","}","TIMEOUT","int","for"," _ ","in","range"," time.perf_counter()","h3","from"," [",3,"h2","pre"," queue.put(client)"," asyncio.TaskGroup() "," tg:","            _ ","                ","            ]",2,false,"http","strong","asyncio","li","details","summary"," time","1000","\"https:\u002F\u002Fjsonplaceholder.typicode.com\u002Fposts\u002F1\""," {","\"User-Agent\"",": ","\"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) \"","\"AppleWebKit\u002F537.36 (KHTML, like Gecko) \"","\"Chrome\u002F112.0.0.0 Safari\u002F537.36\"",",","_request_one"," client.get(","headers","timeout","_run_request"," semaphore:","        client "," queue.get()","_request_many","(client_count: ",", request_count: ","(request_count)","main","():","    start ","    end ","print","f","\"time=","{","end ","-"," start","\"","if","__name__","==","\"__main__\"","❯","...\u002F.venv\u002Fbin\u002Fpython","time","각-라이브러리-간략한-소개","각 라이브러리 간략한 소개","가장-범용적인-requests","requests와-비슷한-httpx"," 지원한다.","asyncio기반으로-처음-작성된-aiohttp","실제-사용된-각-테스트-코드","실제 사용된 각 테스트 코드",": 10개 세션, 1000개 요청, 비동기"," asyncio"," contextlib "," AsyncExitStack","    response ","    response.raise_for_status()","_enter_and_put_client","    stack: AsyncExitStack,","    queue: asyncio.Queue[httpx.AsyncClient],","    client ","    semaphore: asyncio.Semaphore,"," _request_one(client)"," AsyncExitStack() "," stack:"," asyncio.Queue(client_count)","        semaphore "," asyncio.Semaphore(client_count)","                tg.create_task(_enter_and_put_client(stack, queue))","(client_count)","                tg.create_task(_run_request(queue, semaphore))"," _request_many(","    asyncio.run(main())","    queue: asyncio.Queue[aiohttp.ClientSession],","테스트-결과","테스트 결과",null,"기대와는-다른-결과","기대와는 다른 결과","내가-뭔가-잘못-작성한-것-같다","내가 뭔가 잘못 작성한 것 같다","어쨌든-나는-httpx를-사용한다",5))